import{s as st}from"./chunk-DZLz74EQ.js";import{t as dt}from"./react-BcIddLXZ.js";var K=(t,r)=>t.unstable_is?t.unstable_is(r):r===t,Q=t=>"init"in t,U=t=>!!t.write,X=t=>"v"in t||"e"in t,T=t=>{if("e"in t)throw t.e;return t.v},I=new WeakMap,Y=t=>{var r;return N(t)&&!!((r=I.get(t))!=null&&r[0])},ct=t=>{let r=I.get(t);r!=null&&r[0]&&(r[0]=!1,r[1].forEach(n=>n()))},Z=(t,r)=>{let n=I.get(t);if(!n){n=[!0,new Set],I.set(t,n);let o=()=>{n[0]=!1};t.then(o,o)}n[1].add(r)},N=t=>typeof(t==null?void 0:t.then)=="function",x=(t,r,n)=>{n.p.has(t)||(n.p.add(t),r.then(()=>{n.p.delete(t)},()=>{n.p.delete(t)}))},V=(t,r,n)=>{let o=n(t),s="v"in o,g=o.v;if(N(r))for(let p of o.d.keys())x(t,r,n(p));o.v=r,delete o.e,(!s||!Object.is(g,o.v))&&(++o.n,N(g)&&ct(g))},C=(t,r,n)=>{var s;let o=new Set;for(let g of((s=n.get(t))==null?void 0:s.t)||[])n.has(g)&&o.add(g);for(let g of r.p)o.add(g);return o},tt=Symbol(),ht=t=>t[tt],et=(t=new WeakMap,r=new WeakMap,n=new WeakMap,o=new Set,s=new Set,g=new Set,p={},M=(c,...m)=>c.read(...m),k=(c,...m)=>c.write(...m),d=(c,m)=>{var b;return(b=c.unstable_onInit)==null?void 0:b.call(c,m)},w=(c,m)=>{var b;return(b=c.onMount)==null?void 0:b.call(c,m)},...v)=>{let c=v[0]||(e=>{let f=t.get(e);return f||(f={d:new Map,p:new Set,n:0},t.set(e,f),d==null||d(e,F)),f}),m=v[1]||(()=>{let e=[],f=a=>{try{a()}catch(u){e.push(u)}};do{p.f&&f(p.f);let a=new Set,u=a.add.bind(a);o.forEach(i=>{var l;return(l=r.get(i))==null?void 0:l.l.forEach(u)}),o.clear(),g.forEach(u),g.clear(),s.forEach(u),s.clear(),a.forEach(f),o.size&&b()}while(o.size||g.size||s.size);if(e.length)throw AggregateError(e)}),b=v[2]||(()=>{let e=[],f=new WeakSet,a=new WeakSet,u=Array.from(o);for(;u.length;){let i=u[u.length-1],l=c(i);if(a.has(i)){u.pop();continue}if(f.has(i)){n.get(i)===l.n&&e.push([i,l]),a.add(i),u.pop();continue}f.add(i);for(let h of C(i,l,r))f.has(h)||u.push(h)}for(let i=e.length-1;i>=0;--i){let[l,h]=e[i],S=!1;for(let A of h.d.keys())if(A!==l&&o.has(A)){S=!0;break}S&&(j(l),z(l)),n.delete(l)}}),j=v[3]||(e=>{var f;let a=c(e);if(X(a)&&(r.has(e)&&n.get(e)!==a.n||Array.from(a.d).every(([y,R])=>j(y).n===R)))return a;a.d.clear();let u=!0,i=()=>{r.has(e)&&(z(e),b(),m())},l=y=>{var R;if(K(e,y)){let J=c(y);if(!X(J))if(Q(y))V(y,y.init,c);else throw Error("no atom init");return T(J)}let L=j(y);try{return T(L)}finally{a.d.set(y,L.n),Y(a.v)&&x(e,a.v,L),(R=r.get(y))==null||R.t.add(e),u||i()}},h,S,A={get signal(){return h||(h=new AbortController),h.signal},get setSelf(){return!S&&U(e)&&(S=(...y)=>{if(!u)try{return W(e,...y)}finally{b(),m()}}),S}},D=a.n;try{let y=M(e,l,A);return V(e,y,c),N(y)&&(Z(y,()=>h==null?void 0:h.abort()),y.then(i,i)),a}catch(y){return delete a.v,a.e=y,++a.n,a}finally{u=!1,D!==a.n&&n.get(e)===D&&(n.set(e,a.n),o.add(e),(f=p.c)==null||f.call(p,e))}}),_=v[4]||(e=>{let f=[e];for(;f.length;){let a=f.pop(),u=c(a);for(let i of C(a,u,r)){let l=c(i);n.set(i,l.n),f.push(i)}}}),W=v[5]||((e,...f)=>{let a=!0,u=l=>T(j(l)),i=(l,...h)=>{var S;let A=c(l);try{if(K(e,l)){if(!Q(l))throw Error("atom not writable");let D=A.n,y=h[0];V(l,y,c),z(l),D!==A.n&&(o.add(l),(S=p.c)==null||S.call(p,l),_(l));return}else return W(l,...h)}finally{a||(b(),m())}};try{return k(e,u,i,...f)}finally{a=!1}}),z=v[6]||(e=>{var i;var f;let a=c(e),u=r.get(e);if(u&&!Y(a.v)){for(let[l,h]of a.d)if(!u.d.has(l)){let S=c(l);O(l).t.add(e),u.d.add(l),h!==S.n&&(o.add(l),(f=p.c)==null||f.call(p,l),_(l))}for(let l of u.d||[])a.d.has(l)||(u.d.delete(l),(i=P(l))==null||i.t.delete(e))}}),O=v[7]||(e=>{var f;let a=c(e),u=r.get(e);if(!u){j(e);for(let i of a.d.keys())O(i).t.add(e);u={l:new Set,d:new Set(a.d.keys()),t:new Set},r.set(e,u),(f=p.m)==null||f.call(p,e),U(e)&&s.add(()=>{let i=!0,l=(...h)=>{try{return W(e,...h)}finally{i||(b(),m())}};try{let h=w(e,l);h&&(u.u=()=>{i=!0;try{h()}finally{i=!1}})}finally{i=!1}})}return u}),P=v[8]||(e=>{var i;var f;let a=c(e),u=r.get(e);if(u&&!u.l.size&&!Array.from(u.t).some(l=>{var h;return(h=r.get(l))==null?void 0:h.d.has(e)})){u.u&&g.add(u.u),u=void 0,r.delete(e),(f=p.u)==null||f.call(p,e);for(let l of a.d.keys())(i=P(l))==null||i.t.delete(e);return}return u}),ft=[t,r,n,o,s,g,p,M,k,d,w,c,m,b,j,_,W,z,O,P],F={get:e=>T(j(e)),set:(e,...f)=>{try{return W(e,...f)}finally{b(),m()}},sub:(e,f)=>{let a=O(e).l;return a.add(f),m(),()=>{a.delete(f),P(e),m()}}};return Object.defineProperty(F,tt,{value:ft}),F},yt=ht,rt=Z,gt=0;function pt(t,r){let n=`atom${++gt}`,o={toString(){return n}};return typeof t=="function"?o.read=t:(o.init=t,o.read=wt,o.write=mt),r&&(o.write=r),o}function wt(t){return t(this)}function mt(t,r,n){return r(this,typeof n=="function"?n(t(this)):n)}var nt;function $(){return nt?nt():et()}var lt;function vt(){return lt||(lt=$()),lt}var E=st(dt(),1),at=(0,E.createContext)(void 0);function q(t){let r=(0,E.useContext)(at);return(t==null?void 0:t.store)||r||vt()}function bt({children:t,store:r}){let n=(0,E.useRef)(void 0);return!r&&!n.current&&(n.current=$()),(0,E.createElement)(at.Provider,{value:r||n.current},t)}var B=t=>typeof(t==null?void 0:t.then)=="function",G=t=>{t.status||(t.status="pending",t.then(r=>{t.status="fulfilled",t.value=r},r=>{t.status="rejected",t.reason=r}))},St=E.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(G(t),t)}),H=new WeakMap,ot=(t,r)=>{let n=H.get(t);return n||(n=new Promise((o,s)=>{let g=t,p=d=>w=>{g===d&&o(w)},M=d=>w=>{g===d&&s(w)},k=()=>{try{let d=r();B(d)?(H.set(d,n),g=d,d.then(p(d),M(d)),rt(d,k)):o(d)}catch(d){s(d)}};t.then(p(t),M(t)),rt(t,k)}),H.set(t,n)),n};function ut(t,r){let{delay:n,unstable_promiseStatus:o=!E.use}=r||{},s=q(r),[[g,p,M],k]=(0,E.useReducer)(w=>{let v=s.get(t);return Object.is(w[0],v)&&w[1]===s&&w[2]===t?w:[v,s,t]},void 0,()=>[s.get(t),s,t]),d=g;if((p!==s||M!==t)&&(k(),d=s.get(t)),(0,E.useEffect)(()=>{let w=s.sub(t,()=>{if(o)try{let v=s.get(t);B(v)&&G(ot(v,()=>s.get(t)))}catch{}if(typeof n=="number"){setTimeout(k,n);return}k()});return k(),w},[s,t,n,o]),(0,E.useDebugValue)(d),B(d)){let w=ot(d,()=>s.get(t));return o&&G(w),St(w)}return d}function it(t,r){let n=q(r);return(0,E.useCallback)((...o)=>n.set(t,...o),[n,t])}function kt(t,r){return[ut(t,r),it(t,r)]}export{q as a,et as c,it as i,yt as l,kt as n,pt as o,ut as r,$ as s,bt as t};
