import{s as nt,t as V}from"./chunk-DZLz74EQ.js";import"./timer-m_pEB4Lb.js";import{u as st}from"./src--EmJf_Ct.js";import{n as k,r as j}from"./src-CWnjMQt8.js";import{t as z}from"./cytoscape.esm-DgaM79UU.js";var Z=V(((C,P)=>{(function(m,L){typeof C=="object"&&typeof P=="object"?P.exports=L():typeof define=="function"&&define.amd?define([],L):typeof C=="object"?C.layoutBase=L():m.layoutBase=L()})(C,function(){return(function(m){var L={};function N(n){if(L[n])return L[n].exports;var i=L[n]={i:n,l:!1,exports:{}};return m[n].call(i.exports,i,i.exports,N),i.l=!0,i.exports}return N.m=m,N.c=L,N.i=function(n){return n},N.d=function(n,i,t){N.o(n,i)||Object.defineProperty(n,i,{configurable:!1,enumerable:!0,get:t})},N.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return N.d(i,"a",i),i},N.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},N.p="",N(N.s=26)})([(function(m,L,N){function n(){}n.QUALITY=1,n.DEFAULT_CREATE_BENDS_AS_NEEDED=!1,n.DEFAULT_INCREMENTAL=!1,n.DEFAULT_ANIMATION_ON_LAYOUT=!0,n.DEFAULT_ANIMATION_DURING_LAYOUT=!1,n.DEFAULT_ANIMATION_PERIOD=50,n.DEFAULT_UNIFORM_LEAF_NODE_SIZES=!1,n.DEFAULT_GRAPH_MARGIN=15,n.NODE_DIMENSIONS_INCLUDE_LABELS=!1,n.SIMPLE_NODE_SIZE=40,n.SIMPLE_NODE_HALF_SIZE=n.SIMPLE_NODE_SIZE/2,n.EMPTY_COMPOUND_NODE_SIZE=40,n.MIN_EDGE_LENGTH=1,n.WORLD_BOUNDARY=1e6,n.INITIAL_WORLD_BOUNDARY=n.WORLD_BOUNDARY/1e3,n.WORLD_CENTER_X=1200,n.WORLD_CENTER_Y=900,m.exports=n}),(function(m,L,N){var n=N(2),i=N(8),t=N(9);function e(h,o,T){n.call(this,T),this.isOverlapingSourceAndTarget=!1,this.vGraphObject=T,this.bendpoints=[],this.source=h,this.target=o}for(var r in e.prototype=Object.create(n.prototype),n)e[r]=n[r];e.prototype.getSource=function(){return this.source},e.prototype.getTarget=function(){return this.target},e.prototype.isInterGraph=function(){return this.isInterGraph},e.prototype.getLength=function(){return this.length},e.prototype.isOverlapingSourceAndTarget=function(){return this.isOverlapingSourceAndTarget},e.prototype.getBendpoints=function(){return this.bendpoints},e.prototype.getLca=function(){return this.lca},e.prototype.getSourceInLca=function(){return this.sourceInLca},e.prototype.getTargetInLca=function(){return this.targetInLca},e.prototype.getOtherEnd=function(h){if(this.source===h)return this.target;if(this.target===h)return this.source;throw"Node is not incident with this edge"},e.prototype.getOtherEndInGraph=function(h,o){for(var T=this.getOtherEnd(h),s=o.getGraphManager().getRoot();;){if(T.getOwner()==o)return T;if(T.getOwner()==s)break;T=T.getOwner().getParent()}return null},e.prototype.updateLength=function(){var h=[,,,,];this.isOverlapingSourceAndTarget=i.getIntersection(this.target.getRect(),this.source.getRect(),h),this.isOverlapingSourceAndTarget||(this.lengthX=h[0]-h[2],this.lengthY=h[1]-h[3],Math.abs(this.lengthX)<1&&(this.lengthX=t.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=t.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY))},e.prototype.updateLengthSimple=function(){this.lengthX=this.target.getCenterX()-this.source.getCenterX(),this.lengthY=this.target.getCenterY()-this.source.getCenterY(),Math.abs(this.lengthX)<1&&(this.lengthX=t.sign(this.lengthX)),Math.abs(this.lengthY)<1&&(this.lengthY=t.sign(this.lengthY)),this.length=Math.sqrt(this.lengthX*this.lengthX+this.lengthY*this.lengthY)},m.exports=e}),(function(m,L,N){function n(i){this.vGraphObject=i}m.exports=n}),(function(m,L,N){var n=N(2),i=N(10),t=N(13),e=N(0),r=N(16),h=N(4);function o(s,l,g,p){g==null&&p==null&&(p=l),n.call(this,p),s.graphManager!=null&&(s=s.graphManager),this.estimatedSize=i.MIN_VALUE,this.inclusionTreeDepth=i.MAX_VALUE,this.vGraphObject=p,this.edges=[],this.graphManager=s,g!=null&&l!=null?this.rect=new t(l.x,l.y,g.width,g.height):this.rect=new t}for(var T in o.prototype=Object.create(n.prototype),n)o[T]=n[T];o.prototype.getEdges=function(){return this.edges},o.prototype.getChild=function(){return this.child},o.prototype.getOwner=function(){return this.owner},o.prototype.getWidth=function(){return this.rect.width},o.prototype.setWidth=function(s){this.rect.width=s},o.prototype.getHeight=function(){return this.rect.height},o.prototype.setHeight=function(s){this.rect.height=s},o.prototype.getCenterX=function(){return this.rect.x+this.rect.width/2},o.prototype.getCenterY=function(){return this.rect.y+this.rect.height/2},o.prototype.getCenter=function(){return new h(this.rect.x+this.rect.width/2,this.rect.y+this.rect.height/2)},o.prototype.getLocation=function(){return new h(this.rect.x,this.rect.y)},o.prototype.getRect=function(){return this.rect},o.prototype.getDiagonal=function(){return Math.sqrt(this.rect.width*this.rect.width+this.rect.height*this.rect.height)},o.prototype.getHalfTheDiagonal=function(){return Math.sqrt(this.rect.height*this.rect.height+this.rect.width*this.rect.width)/2},o.prototype.setRect=function(s,l){this.rect.x=s.x,this.rect.y=s.y,this.rect.width=l.width,this.rect.height=l.height},o.prototype.setCenter=function(s,l){this.rect.x=s-this.rect.width/2,this.rect.y=l-this.rect.height/2},o.prototype.setLocation=function(s,l){this.rect.x=s,this.rect.y=l},o.prototype.moveBy=function(s,l){this.rect.x+=s,this.rect.y+=l},o.prototype.getEdgeListToNode=function(s){var l=[],g=this;return g.edges.forEach(function(p){if(p.target==s){if(p.source!=g)throw"Incorrect edge source!";l.push(p)}}),l},o.prototype.getEdgesBetween=function(s){var l=[],g=this;return g.edges.forEach(function(p){if(!(p.source==g||p.target==g))throw"Incorrect edge source and/or target";(p.target==s||p.source==s)&&l.push(p)}),l},o.prototype.getNeighborsList=function(){var s=new Set,l=this;return l.edges.forEach(function(g){if(g.source==l)s.add(g.target);else{if(g.target!=l)throw"Incorrect incidency!";s.add(g.source)}}),s},o.prototype.withChildren=function(){var s=new Set,l,g;if(s.add(this),this.child!=null)for(var p=this.child.getNodes(),v=0;v<p.length;v++)l=p[v],g=l.withChildren(),g.forEach(function(f){s.add(f)});return s},o.prototype.getNoOfChildren=function(){var s=0,l;if(this.child==null)s=1;else for(var g=this.child.getNodes(),p=0;p<g.length;p++)l=g[p],s+=l.getNoOfChildren();return s==0&&(s=1),s},o.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},o.prototype.calcEstimatedSize=function(){return this.child==null?this.estimatedSize=(this.rect.width+this.rect.height)/2:(this.estimatedSize=this.child.calcEstimatedSize(),this.rect.width=this.estimatedSize,this.rect.height=this.estimatedSize,this.estimatedSize)},o.prototype.scatter=function(){var s,l,g=-e.INITIAL_WORLD_BOUNDARY,p=e.INITIAL_WORLD_BOUNDARY;s=e.WORLD_CENTER_X+r.nextDouble()*(p-g)+g;var v=-e.INITIAL_WORLD_BOUNDARY,f=e.INITIAL_WORLD_BOUNDARY;l=e.WORLD_CENTER_Y+r.nextDouble()*(f-v)+v,this.rect.x=s,this.rect.y=l},o.prototype.updateBounds=function(){if(this.getChild()==null)throw"assert failed";if(this.getChild().getNodes().length!=0){var s=this.getChild();if(s.updateBounds(!0),this.rect.x=s.getLeft(),this.rect.y=s.getTop(),this.setWidth(s.getRight()-s.getLeft()),this.setHeight(s.getBottom()-s.getTop()),e.NODE_DIMENSIONS_INCLUDE_LABELS){var l=s.getRight()-s.getLeft(),g=s.getBottom()-s.getTop();this.labelWidth>l&&(this.rect.x-=(this.labelWidth-l)/2,this.setWidth(this.labelWidth)),this.labelHeight>g&&(this.labelPos=="center"?this.rect.y-=(this.labelHeight-g)/2:this.labelPos=="top"&&(this.rect.y-=this.labelHeight-g),this.setHeight(this.labelHeight))}}},o.prototype.getInclusionTreeDepth=function(){if(this.inclusionTreeDepth==i.MAX_VALUE)throw"assert failed";return this.inclusionTreeDepth},o.prototype.transform=function(s){var l=this.rect.x;l>e.WORLD_BOUNDARY?l=e.WORLD_BOUNDARY:l<-e.WORLD_BOUNDARY&&(l=-e.WORLD_BOUNDARY);var g=this.rect.y;g>e.WORLD_BOUNDARY?g=e.WORLD_BOUNDARY:g<-e.WORLD_BOUNDARY&&(g=-e.WORLD_BOUNDARY);var p=new h(l,g),v=s.inverseTransformPoint(p);this.setLocation(v.x,v.y)},o.prototype.getLeft=function(){return this.rect.x},o.prototype.getRight=function(){return this.rect.x+this.rect.width},o.prototype.getTop=function(){return this.rect.y},o.prototype.getBottom=function(){return this.rect.y+this.rect.height},o.prototype.getParent=function(){return this.owner==null?null:this.owner.getParent()},m.exports=o}),(function(m,L,N){function n(i,t){i==null&&t==null?(this.x=0,this.y=0):(this.x=i,this.y=t)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.setX=function(i){this.x=i},n.prototype.setY=function(i){this.y=i},n.prototype.getDifference=function(i){return new DimensionD(this.x-i.x,this.y-i.y)},n.prototype.getCopy=function(){return new n(this.x,this.y)},n.prototype.translate=function(i){return this.x+=i.width,this.y+=i.height,this},m.exports=n}),(function(m,L,N){var n=N(2),i=N(10),t=N(0),e=N(6),r=N(3),h=N(1),o=N(13),T=N(12),s=N(11);function l(p,v,f){n.call(this,f),this.estimatedSize=i.MIN_VALUE,this.margin=t.DEFAULT_GRAPH_MARGIN,this.edges=[],this.nodes=[],this.isConnected=!1,this.parent=p,v!=null&&v instanceof e?this.graphManager=v:v!=null&&v instanceof Layout&&(this.graphManager=v.graphManager)}for(var g in l.prototype=Object.create(n.prototype),n)l[g]=n[g];l.prototype.getNodes=function(){return this.nodes},l.prototype.getEdges=function(){return this.edges},l.prototype.getGraphManager=function(){return this.graphManager},l.prototype.getParent=function(){return this.parent},l.prototype.getLeft=function(){return this.left},l.prototype.getRight=function(){return this.right},l.prototype.getTop=function(){return this.top},l.prototype.getBottom=function(){return this.bottom},l.prototype.isConnected=function(){return this.isConnected},l.prototype.add=function(p,v,f){if(v==null&&f==null){var d=p;if(this.graphManager==null)throw"Graph has no graph mgr!";if(this.getNodes().indexOf(d)>-1)throw"Node already in graph!";return d.owner=this,this.getNodes().push(d),d}else{var A=p;if(!(this.getNodes().indexOf(v)>-1&&this.getNodes().indexOf(f)>-1))throw"Source or target not in graph!";if(!(v.owner==f.owner&&v.owner==this))throw"Both owners must be this graph!";return v.owner==f.owner?(A.source=v,A.target=f,A.isInterGraph=!1,this.getEdges().push(A),v.edges.push(A),f!=v&&f.edges.push(A),A):null}},l.prototype.remove=function(p){var v=p;if(p instanceof r){if(v==null)throw"Node is null!";if(!(v.owner!=null&&v.owner==this))throw"Owner graph is invalid!";if(this.graphManager==null)throw"Owner graph manager is invalid!";for(var f=v.edges.slice(),d,A=f.length,y=0;y<A;y++)d=f[y],d.isInterGraph?this.graphManager.remove(d):d.source.owner.remove(d);var O=this.nodes.indexOf(v);if(O==-1)throw"Node not in owner node list!";this.nodes.splice(O,1)}else if(p instanceof h){var d=p;if(d==null)throw"Edge is null!";if(!(d.source!=null&&d.target!=null))throw"Source and/or target is null!";if(!(d.source.owner!=null&&d.target.owner!=null&&d.source.owner==this&&d.target.owner==this))throw"Source and/or target owner is invalid!";var a=d.source.edges.indexOf(d),c=d.target.edges.indexOf(d);if(!(a>-1&&c>-1))throw"Source and/or target doesn't know this edge!";d.source.edges.splice(a,1),d.target!=d.source&&d.target.edges.splice(c,1);var O=d.source.owner.getEdges().indexOf(d);if(O==-1)throw"Not in owner's edge list!";d.source.owner.getEdges().splice(O,1)}},l.prototype.updateLeftTop=function(){for(var p=i.MAX_VALUE,v=i.MAX_VALUE,f,d,A,y=this.getNodes(),O=y.length,a=0;a<O;a++){var c=y[a];f=c.getTop(),d=c.getLeft(),p>f&&(p=f),v>d&&(v=d)}return p==i.MAX_VALUE?null:(A=y[0].getParent().paddingLeft==null?this.margin:y[0].getParent().paddingLeft,this.left=v-A,this.top=p-A,new T(this.left,this.top))},l.prototype.updateBounds=function(p){for(var v=i.MAX_VALUE,f=-i.MAX_VALUE,d=i.MAX_VALUE,A=-i.MAX_VALUE,y,O,a,c,u,E=this.nodes,_=E.length,D=0;D<_;D++){var I=E[D];p&&I.child!=null&&I.updateBounds(),y=I.getLeft(),O=I.getRight(),a=I.getTop(),c=I.getBottom(),v>y&&(v=y),f<O&&(f=O),d>a&&(d=a),A<c&&(A=c)}var w=new o(v,d,f-v,A-d);v==i.MAX_VALUE&&(this.left=this.parent.getLeft(),this.right=this.parent.getRight(),this.top=this.parent.getTop(),this.bottom=this.parent.getBottom()),u=E[0].getParent().paddingLeft==null?this.margin:E[0].getParent().paddingLeft,this.left=w.x-u,this.right=w.x+w.width+u,this.top=w.y-u,this.bottom=w.y+w.height+u},l.calculateBounds=function(p){for(var v=i.MAX_VALUE,f=-i.MAX_VALUE,d=i.MAX_VALUE,A=-i.MAX_VALUE,y,O,a,c,u=p.length,E=0;E<u;E++){var _=p[E];y=_.getLeft(),O=_.getRight(),a=_.getTop(),c=_.getBottom(),v>y&&(v=y),f<O&&(f=O),d>a&&(d=a),A<c&&(A=c)}return new o(v,d,f-v,A-d)},l.prototype.getInclusionTreeDepth=function(){return this==this.graphManager.getRoot()?1:this.parent.getInclusionTreeDepth()},l.prototype.getEstimatedSize=function(){if(this.estimatedSize==i.MIN_VALUE)throw"assert failed";return this.estimatedSize},l.prototype.calcEstimatedSize=function(){for(var p=0,v=this.nodes,f=v.length,d=0;d<f;d++){var A=v[d];p+=A.calcEstimatedSize()}return p==0?this.estimatedSize=t.EMPTY_COMPOUND_NODE_SIZE:this.estimatedSize=p/Math.sqrt(this.nodes.length),this.estimatedSize},l.prototype.updateConnected=function(){var p=this;if(this.nodes.length==0){this.isConnected=!0;return}var v=new s,f=new Set,d=this.nodes[0],A,y;for(d.withChildren().forEach(function(u){v.push(u),f.add(u)});v.length!==0;){d=v.shift(),A=d.getEdges();for(var O=A.length,a=0;a<O;a++)y=A[a].getOtherEndInGraph(d,this),y!=null&&!f.has(y)&&y.withChildren().forEach(function(u){v.push(u),f.add(u)})}if(this.isConnected=!1,f.size>=this.nodes.length){var c=0;f.forEach(function(u){u.owner==p&&c++}),c==this.nodes.length&&(this.isConnected=!0)}},m.exports=l}),(function(m,L,N){var n,i=N(1);function t(e){n=N(5),this.layout=e,this.graphs=[],this.edges=[]}t.prototype.addRoot=function(){var e=this.layout.newGraph(),r=this.layout.newNode(null),h=this.add(e,r);return this.setRootGraph(h),this.rootGraph},t.prototype.add=function(e,r,h,o,T){if(h==null&&o==null&&T==null){if(e==null)throw"Graph is null!";if(r==null)throw"Parent node is null!";if(this.graphs.indexOf(e)>-1)throw"Graph already in this graph mgr!";if(this.graphs.push(e),e.parent!=null)throw"Already has a parent!";if(r.child!=null)throw"Already has a child!";return e.parent=r,r.child=e,e}else{T=h,o=r,h=e;var s=o.getOwner(),l=T.getOwner();if(!(s!=null&&s.getGraphManager()==this))throw"Source not in this graph mgr!";if(!(l!=null&&l.getGraphManager()==this))throw"Target not in this graph mgr!";if(s==l)return h.isInterGraph=!1,s.add(h,o,T);if(h.isInterGraph=!0,h.source=o,h.target=T,this.edges.indexOf(h)>-1)throw"Edge already in inter-graph edge list!";if(this.edges.push(h),!(h.source!=null&&h.target!=null))throw"Edge source and/or target is null!";if(!(h.source.edges.indexOf(h)==-1&&h.target.edges.indexOf(h)==-1))throw"Edge already in source and/or target incidency list!";return h.source.edges.push(h),h.target.edges.push(h),h}},t.prototype.remove=function(e){if(e instanceof n){var r=e;if(r.getGraphManager()!=this)throw"Graph not in this graph mgr";if(!(r==this.rootGraph||r.parent!=null&&r.parent.graphManager==this))throw"Invalid parent node!";var h=[];h=h.concat(r.getEdges());for(var o,T=h.length,s=0;s<T;s++)o=h[s],r.remove(o);var l=[];l=l.concat(r.getNodes());var g;T=l.length;for(var s=0;s<T;s++)g=l[s],r.remove(g);r==this.rootGraph&&this.setRootGraph(null);var p=this.graphs.indexOf(r);this.graphs.splice(p,1),r.parent=null}else if(e instanceof i){if(o=e,o==null)throw"Edge is null!";if(!o.isInterGraph)throw"Not an inter-graph edge!";if(!(o.source!=null&&o.target!=null))throw"Source and/or target is null!";if(!(o.source.edges.indexOf(o)!=-1&&o.target.edges.indexOf(o)!=-1))throw"Source and/or target doesn't know this edge!";var p=o.source.edges.indexOf(o);if(o.source.edges.splice(p,1),p=o.target.edges.indexOf(o),o.target.edges.splice(p,1),!(o.source.owner!=null&&o.source.owner.getGraphManager()!=null))throw"Edge owner graph or owner graph manager is null!";if(o.source.owner.getGraphManager().edges.indexOf(o)==-1)throw"Not in owner graph manager's edge list!";var p=o.source.owner.getGraphManager().edges.indexOf(o);o.source.owner.getGraphManager().edges.splice(p,1)}},t.prototype.updateBounds=function(){this.rootGraph.updateBounds(!0)},t.prototype.getGraphs=function(){return this.graphs},t.prototype.getAllNodes=function(){if(this.allNodes==null){for(var e=[],r=this.getGraphs(),h=r.length,o=0;o<h;o++)e=e.concat(r[o].getNodes());this.allNodes=e}return this.allNodes},t.prototype.resetAllNodes=function(){this.allNodes=null},t.prototype.resetAllEdges=function(){this.allEdges=null},t.prototype.resetAllNodesToApplyGravitation=function(){this.allNodesToApplyGravitation=null},t.prototype.getAllEdges=function(){if(this.allEdges==null){var e=[],r=this.getGraphs();r.length;for(var h=0;h<r.length;h++)e=e.concat(r[h].getEdges());e=e.concat(this.edges),this.allEdges=e}return this.allEdges},t.prototype.getAllNodesToApplyGravitation=function(){return this.allNodesToApplyGravitation},t.prototype.setAllNodesToApplyGravitation=function(e){if(this.allNodesToApplyGravitation!=null)throw"assert failed";this.allNodesToApplyGravitation=e},t.prototype.getRoot=function(){return this.rootGraph},t.prototype.setRootGraph=function(e){if(e.getGraphManager()!=this)throw"Root not in this graph mgr!";this.rootGraph=e,e.parent??(e.parent=this.layout.newNode("Root node"))},t.prototype.getLayout=function(){return this.layout},t.prototype.isOneAncestorOfOther=function(e,r){if(!(e!=null&&r!=null))throw"assert failed";if(e==r)return!0;var h=e.getOwner(),o;do{if(o=h.getParent(),o==null)break;if(o==r)return!0;if(h=o.getOwner(),h==null)break}while(!0);h=r.getOwner();do{if(o=h.getParent(),o==null)break;if(o==e)return!0;if(h=o.getOwner(),h==null)break}while(!0);return!1},t.prototype.calcLowestCommonAncestors=function(){for(var e,r,h,o,T,s=this.getAllEdges(),l=s.length,g=0;g<l;g++){if(e=s[g],r=e.source,h=e.target,e.lca=null,e.sourceInLca=r,e.targetInLca=h,r==h){e.lca=r.getOwner();continue}for(o=r.getOwner();e.lca==null;){for(e.targetInLca=h,T=h.getOwner();e.lca==null;){if(T==o){e.lca=T;break}if(T==this.rootGraph)break;if(e.lca!=null)throw"assert failed";e.targetInLca=T.getParent(),T=e.targetInLca.getOwner()}if(o==this.rootGraph)break;e.lca??(e.sourceInLca=o.getParent(),o=e.sourceInLca.getOwner())}if(e.lca==null)throw"assert failed"}},t.prototype.calcLowestCommonAncestor=function(e,r){if(e==r)return e.getOwner();var h=e.getOwner();do{if(h==null)break;var o=r.getOwner();do{if(o==null)break;if(o==h)return o;o=o.getParent().getOwner()}while(!0);h=h.getParent().getOwner()}while(!0);return h},t.prototype.calcInclusionTreeDepths=function(e,r){e==null&&r==null&&(e=this.rootGraph,r=1);for(var h,o=e.getNodes(),T=o.length,s=0;s<T;s++)h=o[s],h.inclusionTreeDepth=r,h.child!=null&&this.calcInclusionTreeDepths(h.child,r+1)},t.prototype.includesInvalidEdge=function(){for(var e,r=this.edges.length,h=0;h<r;h++)if(e=this.edges[h],this.isOneAncestorOfOther(e.source,e.target))return!0;return!1},m.exports=t}),(function(m,L,N){var n=N(0);function i(){}for(var t in n)i[t]=n[t];i.MAX_ITERATIONS=2500,i.DEFAULT_EDGE_LENGTH=50,i.DEFAULT_SPRING_STRENGTH=.45,i.DEFAULT_REPULSION_STRENGTH=4500,i.DEFAULT_GRAVITY_STRENGTH=.4,i.DEFAULT_COMPOUND_GRAVITY_STRENGTH=1,i.DEFAULT_GRAVITY_RANGE_FACTOR=3.8,i.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=1.5,i.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION=!0,i.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION=!0,i.DEFAULT_COOLING_FACTOR_INCREMENTAL=.3,i.COOLING_ADAPTATION_FACTOR=.33,i.ADAPTATION_LOWER_NODE_LIMIT=1e3,i.ADAPTATION_UPPER_NODE_LIMIT=5e3,i.MAX_NODE_DISPLACEMENT_INCREMENTAL=100,i.MAX_NODE_DISPLACEMENT=i.MAX_NODE_DISPLACEMENT_INCREMENTAL*3,i.MIN_REPULSION_DIST=i.DEFAULT_EDGE_LENGTH/10,i.CONVERGENCE_CHECK_PERIOD=100,i.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=.1,i.MIN_EDGE_LENGTH=1,i.GRID_CALCULATION_CHECK_PERIOD=10,m.exports=i}),(function(m,L,N){var n=N(12);function i(){}i.calcSeparationAmount=function(t,e,r,h){if(!t.intersects(e))throw"assert failed";var o=[,,];this.decideDirectionsForOverlappingNodes(t,e,o),r[0]=Math.min(t.getRight(),e.getRight())-Math.max(t.x,e.x),r[1]=Math.min(t.getBottom(),e.getBottom())-Math.max(t.y,e.y),t.getX()<=e.getX()&&t.getRight()>=e.getRight()?r[0]+=Math.min(e.getX()-t.getX(),t.getRight()-e.getRight()):e.getX()<=t.getX()&&e.getRight()>=t.getRight()&&(r[0]+=Math.min(t.getX()-e.getX(),e.getRight()-t.getRight())),t.getY()<=e.getY()&&t.getBottom()>=e.getBottom()?r[1]+=Math.min(e.getY()-t.getY(),t.getBottom()-e.getBottom()):e.getY()<=t.getY()&&e.getBottom()>=t.getBottom()&&(r[1]+=Math.min(t.getY()-e.getY(),e.getBottom()-t.getBottom()));var T=Math.abs((e.getCenterY()-t.getCenterY())/(e.getCenterX()-t.getCenterX()));e.getCenterY()===t.getCenterY()&&e.getCenterX()===t.getCenterX()&&(T=1);var s=T*r[0],l=r[1]/T;r[0]<l?l=r[0]:s=r[1],r[0]=-1*o[0]*(l/2+h),r[1]=-1*o[1]*(s/2+h)},i.decideDirectionsForOverlappingNodes=function(t,e,r){t.getCenterX()<e.getCenterX()?r[0]=-1:r[0]=1,t.getCenterY()<e.getCenterY()?r[1]=-1:r[1]=1},i.getIntersection2=function(t,e,r){var h=t.getCenterX(),o=t.getCenterY(),T=e.getCenterX(),s=e.getCenterY();if(t.intersects(e))return r[0]=h,r[1]=o,r[2]=T,r[3]=s,!0;var l=t.getX(),g=t.getY(),p=t.getRight(),v=t.getX(),f=t.getBottom(),d=t.getRight(),A=t.getWidthHalf(),y=t.getHeightHalf(),O=e.getX(),a=e.getY(),c=e.getRight(),u=e.getX(),E=e.getBottom(),_=e.getRight(),D=e.getWidthHalf(),I=e.getHeightHalf(),w=!1,R=!1;if(h===T){if(o>s)return r[0]=h,r[1]=g,r[2]=T,r[3]=E,!1;if(o<s)return r[0]=h,r[1]=f,r[2]=T,r[3]=a,!1}else if(o===s){if(h>T)return r[0]=l,r[1]=o,r[2]=c,r[3]=s,!1;if(h<T)return r[0]=p,r[1]=o,r[2]=O,r[3]=s,!1}else{var G=t.height/t.width,x=e.height/e.width,M=(s-o)/(T-h),U=void 0,b=void 0,F=void 0,S=void 0,Y=void 0,X=void 0;if(-G===M?h>T?(r[0]=v,r[1]=f,w=!0):(r[0]=p,r[1]=g,w=!0):G===M&&(h>T?(r[0]=l,r[1]=g,w=!0):(r[0]=d,r[1]=f,w=!0)),-x===M?T>h?(r[2]=u,r[3]=E,R=!0):(r[2]=c,r[3]=a,R=!0):x===M&&(T>h?(r[2]=O,r[3]=a,R=!0):(r[2]=_,r[3]=E,R=!0)),w&&R)return!1;if(h>T?o>s?(U=this.getCardinalDirection(G,M,4),b=this.getCardinalDirection(x,M,2)):(U=this.getCardinalDirection(-G,M,3),b=this.getCardinalDirection(-x,M,1)):o>s?(U=this.getCardinalDirection(-G,M,1),b=this.getCardinalDirection(-x,M,3)):(U=this.getCardinalDirection(G,M,2),b=this.getCardinalDirection(x,M,4)),!w)switch(U){case 1:S=g,F=h+-y/M,r[0]=F,r[1]=S;break;case 2:F=d,S=o+A*M,r[0]=F,r[1]=S;break;case 3:S=f,F=h+y/M,r[0]=F,r[1]=S;break;case 4:F=v,S=o+-A*M,r[0]=F,r[1]=S;break}if(!R)switch(b){case 1:X=a,Y=T+-I/M,r[2]=Y,r[3]=X;break;case 2:Y=_,X=s+D*M,r[2]=Y,r[3]=X;break;case 3:X=E,Y=T+I/M,r[2]=Y,r[3]=X;break;case 4:Y=u,X=s+-D*M,r[2]=Y,r[3]=X;break}}return!1},i.getCardinalDirection=function(t,e,r){return t>e?r:1+r%4},i.getIntersection=function(t,e,r,h){if(h==null)return this.getIntersection2(t,e,r);var o=t.x,T=t.y,s=e.x,l=e.y,g=r.x,p=r.y,v=h.x,f=h.y,d=void 0,A=void 0,y=void 0,O=void 0,a=void 0,c=void 0,u=void 0,E=void 0,_=void 0;return y=l-T,a=o-s,u=s*T-o*l,O=f-p,c=g-v,E=v*p-g*f,_=y*c-O*a,_===0?null:(d=(a*E-c*u)/_,A=(O*u-y*E)/_,new n(d,A))},i.angleOfVector=function(t,e,r,h){var o=void 0;return t===r?o=h<e?this.ONE_AND_HALF_PI:this.HALF_PI:(o=Math.atan((h-e)/(r-t)),r<t?o+=Math.PI:h<e&&(o+=this.TWO_PI)),o},i.doIntersect=function(t,e,r,h){var o=t.x,T=t.y,s=e.x,l=e.y,g=r.x,p=r.y,v=h.x,f=h.y,d=(s-o)*(f-p)-(v-g)*(l-T);if(d===0)return!1;var A=((f-p)*(v-o)+(g-v)*(f-T))/d,y=((T-l)*(v-o)+(s-o)*(f-T))/d;return 0<A&&A<1&&0<y&&y<1},i.HALF_PI=.5*Math.PI,i.ONE_AND_HALF_PI=1.5*Math.PI,i.TWO_PI=2*Math.PI,i.THREE_PI=3*Math.PI,m.exports=i}),(function(m,L,N){function n(){}n.sign=function(i){return i>0?1:i<0?-1:0},n.floor=function(i){return i<0?Math.ceil(i):Math.floor(i)},n.ceil=function(i){return i<0?Math.floor(i):Math.ceil(i)},m.exports=n}),(function(m,L,N){function n(){}n.MAX_VALUE=2147483647,n.MIN_VALUE=-2147483648,m.exports=n}),(function(m,L,N){var n=(function(){function h(o,T){for(var s=0;s<T.length;s++){var l=T[s];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(o,l.key,l)}}return function(o,T,s){return T&&h(o.prototype,T),s&&h(o,s),o}})();function i(h,o){if(!(h instanceof o))throw TypeError("Cannot call a class as a function")}var t=function(h){return{value:h,next:null,prev:null}},e=function(h,o,T,s){return h===null?s.head=o:h.next=o,T===null?s.tail=o:T.prev=o,o.prev=h,o.next=T,s.length++,o},r=function(h,o){var T=h.prev,s=h.next;return T===null?o.head=s:T.next=s,s===null?o.tail=T:s.prev=T,h.prev=h.next=null,o.length--,h};m.exports=(function(){function h(o){var T=this;i(this,h),this.length=0,this.head=null,this.tail=null,o==null||o.forEach(function(s){return T.push(s)})}return n(h,[{key:"size",value:function(){return this.length}},{key:"insertBefore",value:function(o,T){return e(T.prev,t(o),T,this)}},{key:"insertAfter",value:function(o,T){return e(T,t(o),T.next,this)}},{key:"insertNodeBefore",value:function(o,T){return e(T.prev,o,T,this)}},{key:"insertNodeAfter",value:function(o,T){return e(T,o,T.next,this)}},{key:"push",value:function(o){return e(this.tail,t(o),null,this)}},{key:"unshift",value:function(o){return e(null,t(o),this.head,this)}},{key:"remove",value:function(o){return r(o,this)}},{key:"pop",value:function(){return r(this.tail,this).value}},{key:"popNode",value:function(){return r(this.tail,this)}},{key:"shift",value:function(){return r(this.head,this).value}},{key:"shiftNode",value:function(){return r(this.head,this)}},{key:"get_object_at",value:function(o){if(o<=this.length()){for(var T=1,s=this.head;T<o;)s=s.next,T++;return s.value}}},{key:"set_object_at",value:function(o,T){if(o<=this.length()){for(var s=1,l=this.head;s<o;)l=l.next,s++;l.value=T}}}]),h})()}),(function(m,L,N){function n(i,t,e){this.x=null,this.y=null,i==null&&t==null&&e==null?(this.x=0,this.y=0):typeof i=="number"&&typeof t=="number"&&e==null?(this.x=i,this.y=t):i.constructor.name=="Point"&&t==null&&e==null&&(e=i,this.x=e.x,this.y=e.y)}n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.getLocation=function(){return new n(this.x,this.y)},n.prototype.setLocation=function(i,t,e){i.constructor.name=="Point"&&t==null&&e==null?(e=i,this.setLocation(e.x,e.y)):typeof i=="number"&&typeof t=="number"&&e==null&&(parseInt(i)==i&&parseInt(t)==t?this.move(i,t):(this.x=Math.floor(i+.5),this.y=Math.floor(t+.5)))},n.prototype.move=function(i,t){this.x=i,this.y=t},n.prototype.translate=function(i,t){this.x+=i,this.y+=t},n.prototype.equals=function(i){if(i.constructor.name=="Point"){var t=i;return this.x==t.x&&this.y==t.y}return this==i},n.prototype.toString=function(){return new n().constructor.name+"[x="+this.x+",y="+this.y+"]"},m.exports=n}),(function(m,L,N){function n(i,t,e,r){this.x=0,this.y=0,this.width=0,this.height=0,i!=null&&t!=null&&e!=null&&r!=null&&(this.x=i,this.y=t,this.width=e,this.height=r)}n.prototype.getX=function(){return this.x},n.prototype.setX=function(i){this.x=i},n.prototype.getY=function(){return this.y},n.prototype.setY=function(i){this.y=i},n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(i){this.width=i},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(i){this.height=i},n.prototype.getRight=function(){return this.x+this.width},n.prototype.getBottom=function(){return this.y+this.height},n.prototype.intersects=function(i){return!(this.getRight()<i.x||this.getBottom()<i.y||i.getRight()<this.x||i.getBottom()<this.y)},n.prototype.getCenterX=function(){return this.x+this.width/2},n.prototype.getMinX=function(){return this.getX()},n.prototype.getMaxX=function(){return this.getX()+this.width},n.prototype.getCenterY=function(){return this.y+this.height/2},n.prototype.getMinY=function(){return this.getY()},n.prototype.getMaxY=function(){return this.getY()+this.height},n.prototype.getWidthHalf=function(){return this.width/2},n.prototype.getHeightHalf=function(){return this.height/2},m.exports=n}),(function(m,L,N){var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(){}i.lastID=0,i.createID=function(t){return i.isPrimitive(t)?t:(t.uniqueID==null&&(t.uniqueID=i.getString(),i.lastID++),t.uniqueID)},i.getString=function(t){return t??(t=i.lastID),"Object#"+t},i.isPrimitive=function(t){var e=t===void 0?"undefined":n(t);return t==null||e!="object"&&e!="function"},m.exports=i}),(function(m,L,N){function n(g){if(Array.isArray(g)){for(var p=0,v=Array(g.length);p<g.length;p++)v[p]=g[p];return v}else return Array.from(g)}var i=N(0),t=N(6),e=N(3),r=N(1),h=N(5),o=N(4),T=N(17),s=N(27);function l(g){s.call(this),this.layoutQuality=i.QUALITY,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.incremental=i.DEFAULT_INCREMENTAL,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES,this.edgeToDummyNodes=new Map,this.graphManager=new t(this),this.isLayoutFinished=!1,this.isSubLayout=!1,this.isRemoteUse=!1,g!=null&&(this.isRemoteUse=g)}l.RANDOM_SEED=1,l.prototype=Object.create(s.prototype),l.prototype.getGraphManager=function(){return this.graphManager},l.prototype.getAllNodes=function(){return this.graphManager.getAllNodes()},l.prototype.getAllEdges=function(){return this.graphManager.getAllEdges()},l.prototype.getAllNodesToApplyGravitation=function(){return this.graphManager.getAllNodesToApplyGravitation()},l.prototype.newGraphManager=function(){var g=new t(this);return this.graphManager=g,g},l.prototype.newGraph=function(g){return new h(null,this.graphManager,g)},l.prototype.newNode=function(g){return new e(this.graphManager,g)},l.prototype.newEdge=function(g){return new r(null,null,g)},l.prototype.checkLayoutSuccess=function(){return this.graphManager.getRoot()==null||this.graphManager.getRoot().getNodes().length==0||this.graphManager.includesInvalidEdge()},l.prototype.runLayout=function(){this.isLayoutFinished=!1,this.tilingPreLayout&&this.tilingPreLayout(),this.initParameters();var g=this.checkLayoutSuccess()?!1:this.layout();return i.ANIMATE==="during"?!1:(g&&(this.isSubLayout||this.doPostLayout()),this.tilingPostLayout&&this.tilingPostLayout(),this.isLayoutFinished=!0,g)},l.prototype.doPostLayout=function(){this.incremental||this.transform(),this.update()},l.prototype.update2=function(){if(this.createBendsAsNeeded&&(this.createBendpointsFromDummyNodes(),this.graphManager.resetAllEdges()),!this.isRemoteUse){for(var g=this.graphManager.getAllEdges(),p=0;p<g.length;p++)g[p];for(var v=this.graphManager.getRoot().getNodes(),p=0;p<v.length;p++)v[p];this.update(this.graphManager.getRoot())}},l.prototype.update=function(g){if(g==null)this.update2();else if(g instanceof e){var p=g;if(p.getChild()!=null)for(var v=p.getChild().getNodes(),f=0;f<v.length;f++)update(v[f]);p.vGraphObject!=null&&p.vGraphObject.update(p)}else if(g instanceof r){var d=g;d.vGraphObject!=null&&d.vGraphObject.update(d)}else if(g instanceof h){var A=g;A.vGraphObject!=null&&A.vGraphObject.update(A)}},l.prototype.initParameters=function(){this.isSubLayout||(this.layoutQuality=i.QUALITY,this.animationDuringLayout=i.DEFAULT_ANIMATION_DURING_LAYOUT,this.animationPeriod=i.DEFAULT_ANIMATION_PERIOD,this.animationOnLayout=i.DEFAULT_ANIMATION_ON_LAYOUT,this.incremental=i.DEFAULT_INCREMENTAL,this.createBendsAsNeeded=i.DEFAULT_CREATE_BENDS_AS_NEEDED,this.uniformLeafNodeSizes=i.DEFAULT_UNIFORM_LEAF_NODE_SIZES),this.animationDuringLayout&&(this.animationOnLayout=!1)},l.prototype.transform=function(g){if(g==null)this.transform(new o(0,0));else{var p=new T,v=this.graphManager.getRoot().updateLeftTop();if(v!=null){p.setWorldOrgX(g.x),p.setWorldOrgY(g.y),p.setDeviceOrgX(v.x),p.setDeviceOrgY(v.y);for(var f=this.getAllNodes(),d,A=0;A<f.length;A++)d=f[A],d.transform(p)}}},l.prototype.positionNodesRandomly=function(g){if(g==null)this.positionNodesRandomly(this.getGraphManager().getRoot()),this.getGraphManager().getRoot().updateBounds(!0);else for(var p,v,f=g.getNodes(),d=0;d<f.length;d++)p=f[d],v=p.getChild(),v==null||v.getNodes().length==0?p.scatter():(this.positionNodesRandomly(v),p.updateBounds())},l.prototype.getFlatForest=function(){for(var g=[],p=!0,v=this.graphManager.getRoot().getNodes(),f=!0,d=0;d<v.length;d++)v[d].getChild()!=null&&(f=!1);if(!f)return g;var A=new Set,y=[],O=new Map,a=[];for(a=a.concat(v);a.length>0&&p;){for(y.push(a[0]);y.length>0&&p;){var c=y[0];y.splice(0,1),A.add(c);for(var u=c.getEdges(),d=0;d<u.length;d++){var E=u[d].getOtherEnd(c);if(O.get(c)!=E)if(!A.has(E))y.push(E),O.set(E,c);else{p=!1;break}}}if(!p)g=[];else{var _=[].concat(n(A));g.push(_);for(var d=0;d<_.length;d++){var D=_[d],I=a.indexOf(D);I>-1&&a.splice(I,1)}A=new Set,O=new Map}}return g},l.prototype.createDummyNodesForBendpoints=function(g){for(var p=[],v=g.source,f=this.graphManager.calcLowestCommonAncestor(g.source,g.target),d=0;d<g.bendpoints.length;d++){var A=this.newNode(null);A.setRect(new Point(0,0),new Dimension(1,1)),f.add(A);var y=this.newEdge(null);this.graphManager.add(y,v,A),p.add(A),v=A}var y=this.newEdge(null);return this.graphManager.add(y,v,g.target),this.edgeToDummyNodes.set(g,p),g.isInterGraph()?this.graphManager.remove(g):f.remove(g),p},l.prototype.createBendpointsFromDummyNodes=function(){var g=[];g=g.concat(this.graphManager.getAllEdges()),g=[].concat(n(this.edgeToDummyNodes.keys()),g);for(var p=0;p<g.length;p++){var v=g[p];if(v.bendpoints.length>0){for(var f=this.edgeToDummyNodes.get(v),d=0;d<f.length;d++){var A=f[d],y=new o(A.getCenterX(),A.getCenterY()),O=v.bendpoints.get(d);O.x=y.x,O.y=y.y,A.getOwner().remove(A)}this.graphManager.add(v,v.source,v.target)}}},l.transform=function(g,p,v,f){if(v!=null&&f!=null){var d=p;if(g<=50){var A=p/v;d-=(p-A)/50*(50-g)}else{var y=p*f;d+=(y-p)/50*(g-50)}return d}else{var O,a;return g<=50?(O=9*p/500,a=p/10):(O=9*p/50,a=-8*p),O*g+a}},l.findCenterOfTree=function(g){var p=[];p=p.concat(g);var v=[],f=new Map,d=!1,A=null;(p.length==1||p.length==2)&&(d=!0,A=p[0]);for(var y=0;y<p.length;y++){var O=p[y],a=O.getNeighborsList().size;f.set(O,O.getNeighborsList().size),a==1&&v.push(O)}var c=[];for(c=c.concat(v);!d;){var u=[];u=u.concat(c),c=[];for(var y=0;y<p.length;y++){var O=p[y],E=p.indexOf(O);E>=0&&p.splice(E,1),O.getNeighborsList().forEach(function(I){if(v.indexOf(I)<0){var w=f.get(I)-1;w==1&&c.push(I),f.set(I,w)}})}v=v.concat(c),(p.length==1||p.length==2)&&(d=!0,A=p[0])}return A},l.prototype.setGraphManager=function(g){this.graphManager=g},m.exports=l}),(function(m,L,N){function n(){}n.seed=1,n.x=0,n.nextDouble=function(){return n.x=Math.sin(n.seed++)*1e4,n.x-Math.floor(n.x)},m.exports=n}),(function(m,L,N){var n=N(4);function i(t,e){this.lworldOrgX=0,this.lworldOrgY=0,this.ldeviceOrgX=0,this.ldeviceOrgY=0,this.lworldExtX=1,this.lworldExtY=1,this.ldeviceExtX=1,this.ldeviceExtY=1}i.prototype.getWorldOrgX=function(){return this.lworldOrgX},i.prototype.setWorldOrgX=function(t){this.lworldOrgX=t},i.prototype.getWorldOrgY=function(){return this.lworldOrgY},i.prototype.setWorldOrgY=function(t){this.lworldOrgY=t},i.prototype.getWorldExtX=function(){return this.lworldExtX},i.prototype.setWorldExtX=function(t){this.lworldExtX=t},i.prototype.getWorldExtY=function(){return this.lworldExtY},i.prototype.setWorldExtY=function(t){this.lworldExtY=t},i.prototype.getDeviceOrgX=function(){return this.ldeviceOrgX},i.prototype.setDeviceOrgX=function(t){this.ldeviceOrgX=t},i.prototype.getDeviceOrgY=function(){return this.ldeviceOrgY},i.prototype.setDeviceOrgY=function(t){this.ldeviceOrgY=t},i.prototype.getDeviceExtX=function(){return this.ldeviceExtX},i.prototype.setDeviceExtX=function(t){this.ldeviceExtX=t},i.prototype.getDeviceExtY=function(){return this.ldeviceExtY},i.prototype.setDeviceExtY=function(t){this.ldeviceExtY=t},i.prototype.transformX=function(t){var e=0,r=this.lworldExtX;return r!=0&&(e=this.ldeviceOrgX+(t-this.lworldOrgX)*this.ldeviceExtX/r),e},i.prototype.transformY=function(t){var e=0,r=this.lworldExtY;return r!=0&&(e=this.ldeviceOrgY+(t-this.lworldOrgY)*this.ldeviceExtY/r),e},i.prototype.inverseTransformX=function(t){var e=0,r=this.ldeviceExtX;return r!=0&&(e=this.lworldOrgX+(t-this.ldeviceOrgX)*this.lworldExtX/r),e},i.prototype.inverseTransformY=function(t){var e=0,r=this.ldeviceExtY;return r!=0&&(e=this.lworldOrgY+(t-this.ldeviceOrgY)*this.lworldExtY/r),e},i.prototype.inverseTransformPoint=function(t){return new n(this.inverseTransformX(t.x),this.inverseTransformY(t.y))},m.exports=i}),(function(m,L,N){function n(s){if(Array.isArray(s)){for(var l=0,g=Array(s.length);l<s.length;l++)g[l]=s[l];return g}else return Array.from(s)}var i=N(15),t=N(7),e=N(0),r=N(8),h=N(9);function o(){i.call(this),this.useSmartIdealEdgeLengthCalculation=t.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.idealEdgeLength=t.DEFAULT_EDGE_LENGTH,this.springConstant=t.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=t.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=t.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=t.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=t.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=t.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.displacementThresholdPerNode=3*t.DEFAULT_EDGE_LENGTH/100,this.coolingFactor=t.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.initialCoolingFactor=t.DEFAULT_COOLING_FACTOR_INCREMENTAL,this.totalDisplacement=0,this.oldTotalDisplacement=0,this.maxIterations=t.MAX_ITERATIONS}for(var T in o.prototype=Object.create(i.prototype),i)o[T]=i[T];o.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.totalIterations=0,this.notAnimatedIterations=0,this.useFRGridVariant=t.DEFAULT_USE_SMART_REPULSION_RANGE_CALCULATION,this.grid=[]},o.prototype.calcIdealEdgeLengths=function(){for(var s,l,g,p,v,f,d=this.getGraphManager().getAllEdges(),A=0;A<d.length;A++)s=d[A],s.idealLength=this.idealEdgeLength,s.isInterGraph&&(g=s.getSource(),p=s.getTarget(),v=s.getSourceInLca().getEstimatedSize(),f=s.getTargetInLca().getEstimatedSize(),this.useSmartIdealEdgeLengthCalculation&&(s.idealLength+=v+f-2*e.SIMPLE_NODE_SIZE),l=s.getLca().getInclusionTreeDepth(),s.idealLength+=t.DEFAULT_EDGE_LENGTH*t.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR*(g.getInclusionTreeDepth()+p.getInclusionTreeDepth()-2*l))},o.prototype.initSpringEmbedder=function(){var s=this.getAllNodes().length;this.incremental?(s>t.ADAPTATION_LOWER_NODE_LIMIT&&(this.coolingFactor=Math.max(this.coolingFactor*t.COOLING_ADAPTATION_FACTOR,this.coolingFactor-(s-t.ADAPTATION_LOWER_NODE_LIMIT)/(t.ADAPTATION_UPPER_NODE_LIMIT-t.ADAPTATION_LOWER_NODE_LIMIT)*this.coolingFactor*(1-t.COOLING_ADAPTATION_FACTOR))),this.maxNodeDisplacement=t.MAX_NODE_DISPLACEMENT_INCREMENTAL):(s>t.ADAPTATION_LOWER_NODE_LIMIT?this.coolingFactor=Math.max(t.COOLING_ADAPTATION_FACTOR,1-(s-t.ADAPTATION_LOWER_NODE_LIMIT)/(t.ADAPTATION_UPPER_NODE_LIMIT-t.ADAPTATION_LOWER_NODE_LIMIT)*(1-t.COOLING_ADAPTATION_FACTOR)):this.coolingFactor=1,this.initialCoolingFactor=this.coolingFactor,this.maxNodeDisplacement=t.MAX_NODE_DISPLACEMENT),this.maxIterations=Math.max(this.getAllNodes().length*5,this.maxIterations),this.totalDisplacementThreshold=this.displacementThresholdPerNode*this.getAllNodes().length,this.repulsionRange=this.calcRepulsionRange()},o.prototype.calcSpringForces=function(){for(var s=this.getAllEdges(),l,g=0;g<s.length;g++)l=s[g],this.calcSpringForce(l,l.idealLength)},o.prototype.calcRepulsionForces=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g,p,v,f,d=this.getAllNodes(),A;if(this.useFRGridVariant)for(this.totalIterations%t.GRID_CALCULATION_CHECK_PERIOD==1&&s&&this.updateGrid(),A=new Set,g=0;g<d.length;g++)v=d[g],this.calculateRepulsionForceOfANode(v,A,s,l),A.add(v);else for(g=0;g<d.length;g++)for(v=d[g],p=g+1;p<d.length;p++)f=d[p],v.getOwner()==f.getOwner()&&this.calcRepulsionForce(v,f)},o.prototype.calcGravitationalForces=function(){for(var s,l=this.getAllNodesToApplyGravitation(),g=0;g<l.length;g++)s=l[g],this.calcGravitationalForce(s)},o.prototype.moveNodes=function(){for(var s=this.getAllNodes(),l,g=0;g<s.length;g++)l=s[g],l.move()},o.prototype.calcSpringForce=function(s,l){var g=s.getSource(),p=s.getTarget(),v,f,d,A;if(this.uniformLeafNodeSizes&&g.getChild()==null&&p.getChild()==null)s.updateLengthSimple();else if(s.updateLength(),s.isOverlapingSourceAndTarget)return;v=s.getLength(),v!=0&&(f=this.springConstant*(v-l),d=f*(s.lengthX/v),A=f*(s.lengthY/v),g.springForceX+=d,g.springForceY+=A,p.springForceX-=d,p.springForceY-=A)},o.prototype.calcRepulsionForce=function(s,l){var g=s.getRect(),p=l.getRect(),v=[,,],f=[,,,,],d,A,y,O,a,c,u;if(g.intersects(p)){r.calcSeparationAmount(g,p,v,t.DEFAULT_EDGE_LENGTH/2),c=2*v[0],u=2*v[1];var E=s.noOfChildren*l.noOfChildren/(s.noOfChildren+l.noOfChildren);s.repulsionForceX-=E*c,s.repulsionForceY-=E*u,l.repulsionForceX+=E*c,l.repulsionForceY+=E*u}else this.uniformLeafNodeSizes&&s.getChild()==null&&l.getChild()==null?(d=p.getCenterX()-g.getCenterX(),A=p.getCenterY()-g.getCenterY()):(r.getIntersection(g,p,f),d=f[2]-f[0],A=f[3]-f[1]),Math.abs(d)<t.MIN_REPULSION_DIST&&(d=h.sign(d)*t.MIN_REPULSION_DIST),Math.abs(A)<t.MIN_REPULSION_DIST&&(A=h.sign(A)*t.MIN_REPULSION_DIST),y=d*d+A*A,O=Math.sqrt(y),a=this.repulsionConstant*s.noOfChildren*l.noOfChildren/y,c=a*d/O,u=a*A/O,s.repulsionForceX-=c,s.repulsionForceY-=u,l.repulsionForceX+=c,l.repulsionForceY+=u},o.prototype.calcGravitationalForce=function(s){var l=s.getOwner(),g=(l.getRight()+l.getLeft())/2,p=(l.getTop()+l.getBottom())/2,v=s.getCenterX()-g,f=s.getCenterY()-p,d=Math.abs(v)+s.getWidth()/2,A=Math.abs(f)+s.getHeight()/2,y;s.getOwner()==this.graphManager.getRoot()?(y=l.getEstimatedSize()*this.gravityRangeFactor,(d>y||A>y)&&(s.gravitationForceX=-this.gravityConstant*v,s.gravitationForceY=-this.gravityConstant*f)):(y=l.getEstimatedSize()*this.compoundGravityRangeFactor,(d>y||A>y)&&(s.gravitationForceX=-this.gravityConstant*v*this.compoundGravityConstant,s.gravitationForceY=-this.gravityConstant*f*this.compoundGravityConstant))},o.prototype.isConverged=function(){var s,l=!1;return this.totalIterations>this.maxIterations/3&&(l=Math.abs(this.totalDisplacement-this.oldTotalDisplacement)<2),s=this.totalDisplacement<this.totalDisplacementThreshold,this.oldTotalDisplacement=this.totalDisplacement,s||l},o.prototype.animate=function(){this.animationDuringLayout&&!this.isSubLayout&&(this.notAnimatedIterations==this.animationPeriod?(this.update(),this.notAnimatedIterations=0):this.notAnimatedIterations++)},o.prototype.calcNoOfChildrenForAllNodes=function(){for(var s,l=this.graphManager.getAllNodes(),g=0;g<l.length;g++)s=l[g],s.noOfChildren=s.getNoOfChildren()},o.prototype.calcGrid=function(s){var l=0,g=0;l=parseInt(Math.ceil((s.getRight()-s.getLeft())/this.repulsionRange)),g=parseInt(Math.ceil((s.getBottom()-s.getTop())/this.repulsionRange));for(var p=Array(l),v=0;v<l;v++)p[v]=Array(g);for(var v=0;v<l;v++)for(var f=0;f<g;f++)p[v][f]=[];return p},o.prototype.addNodeToGrid=function(s,l,g){var p=0,v=0,f=0,d=0;p=parseInt(Math.floor((s.getRect().x-l)/this.repulsionRange)),v=parseInt(Math.floor((s.getRect().width+s.getRect().x-l)/this.repulsionRange)),f=parseInt(Math.floor((s.getRect().y-g)/this.repulsionRange)),d=parseInt(Math.floor((s.getRect().height+s.getRect().y-g)/this.repulsionRange));for(var A=p;A<=v;A++)for(var y=f;y<=d;y++)this.grid[A][y].push(s),s.setGridCoordinates(p,v,f,d)},o.prototype.updateGrid=function(){var s,l,g=this.getAllNodes();for(this.grid=this.calcGrid(this.graphManager.getRoot()),s=0;s<g.length;s++)l=g[s],this.addNodeToGrid(l,this.graphManager.getRoot().getLeft(),this.graphManager.getRoot().getTop())},o.prototype.calculateRepulsionForceOfANode=function(s,l,g,p){if(this.totalIterations%t.GRID_CALCULATION_CHECK_PERIOD==1&&g||p){var v=new Set;s.surrounding=[];for(var f,d=this.grid,A=s.startX-1;A<s.finishX+2;A++)for(var y=s.startY-1;y<s.finishY+2;y++)if(!(A<0||y<0||A>=d.length||y>=d[0].length)){for(var O=0;O<d[A][y].length;O++)if(f=d[A][y][O],!(s.getOwner()!=f.getOwner()||s==f)&&!l.has(f)&&!v.has(f)){var a=Math.abs(s.getCenterX()-f.getCenterX())-(s.getWidth()/2+f.getWidth()/2),c=Math.abs(s.getCenterY()-f.getCenterY())-(s.getHeight()/2+f.getHeight()/2);a<=this.repulsionRange&&c<=this.repulsionRange&&v.add(f)}}s.surrounding=[].concat(n(v))}for(A=0;A<s.surrounding.length;A++)this.calcRepulsionForce(s,s.surrounding[A])},o.prototype.calcRepulsionRange=function(){return 0},m.exports=o}),(function(m,L,N){var n=N(1),i=N(7);function t(r,h,o){n.call(this,r,h,o),this.idealLength=i.DEFAULT_EDGE_LENGTH}for(var e in t.prototype=Object.create(n.prototype),n)t[e]=n[e];m.exports=t}),(function(m,L,N){var n=N(3);function i(e,r,h,o){n.call(this,e,r,h,o),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0,this.startX=0,this.finishX=0,this.startY=0,this.finishY=0,this.surrounding=[]}for(var t in i.prototype=Object.create(n.prototype),n)i[t]=n[t];i.prototype.setGridCoordinates=function(e,r,h,o){this.startX=e,this.finishX=r,this.startY=h,this.finishY=o},m.exports=i}),(function(m,L,N){function n(i,t){this.width=0,this.height=0,i!==null&&t!==null&&(this.height=t,this.width=i)}n.prototype.getWidth=function(){return this.width},n.prototype.setWidth=function(i){this.width=i},n.prototype.getHeight=function(){return this.height},n.prototype.setHeight=function(i){this.height=i},m.exports=n}),(function(m,L,N){var n=N(14);function i(){this.map={},this.keys=[]}i.prototype.put=function(t,e){var r=n.createID(t);this.contains(r)||(this.map[r]=e,this.keys.push(t))},i.prototype.contains=function(t){return n.createID(t),this.map[t]!=null},i.prototype.get=function(t){var e=n.createID(t);return this.map[e]},i.prototype.keySet=function(){return this.keys},m.exports=i}),(function(m,L,N){var n=N(14);function i(){this.set={}}i.prototype.add=function(t){var e=n.createID(t);this.contains(e)||(this.set[e]=t)},i.prototype.remove=function(t){delete this.set[n.createID(t)]},i.prototype.clear=function(){this.set={}},i.prototype.contains=function(t){return this.set[n.createID(t)]==t},i.prototype.isEmpty=function(){return this.size()===0},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAllTo=function(t){for(var e=Object.keys(this.set),r=e.length,h=0;h<r;h++)t.push(this.set[e[h]])},i.prototype.size=function(){return Object.keys(this.set).length},i.prototype.addAll=function(t){for(var e=t.length,r=0;r<e;r++){var h=t[r];this.add(h)}},m.exports=i}),(function(m,L,N){var n=(function(){function e(r,h){for(var o=0;o<h.length;o++){var T=h[o];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(r,T.key,T)}}return function(r,h,o){return h&&e(r.prototype,h),o&&e(r,o),r}})();function i(e,r){if(!(e instanceof r))throw TypeError("Cannot call a class as a function")}var t=N(11);m.exports=(function(){function e(r,h){i(this,e),(h!==null||h!==void 0)&&(this.compareFunction=this._defaultCompareFunction);var o=void 0;o=r instanceof t?r.size():r.length,this._quicksort(r,0,o-1)}return n(e,[{key:"_quicksort",value:function(r,h,o){if(h<o){var T=this._partition(r,h,o);this._quicksort(r,h,T),this._quicksort(r,T+1,o)}}},{key:"_partition",value:function(r,h,o){for(var T=this._get(r,h),s=h,l=o;;){for(;this.compareFunction(T,this._get(r,l));)l--;for(;this.compareFunction(this._get(r,s),T);)s++;if(s<l)this._swap(r,s,l),s++,l--;else return l}}},{key:"_get",value:function(r,h){return r instanceof t?r.get_object_at(h):r[h]}},{key:"_set",value:function(r,h,o){r instanceof t?r.set_object_at(h,o):r[h]=o}},{key:"_swap",value:function(r,h,o){var T=this._get(r,h);this._set(r,h,this._get(r,o)),this._set(r,o,T)}},{key:"_defaultCompareFunction",value:function(r,h){return h>r}}]),e})()}),(function(m,L,N){var n=(function(){function t(e,r){for(var h=0;h<r.length;h++){var o=r[h];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,r,h){return r&&t(e.prototype,r),h&&t(e,h),e}})();function i(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}m.exports=(function(){function t(e,r){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:-1,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1;i(this,t),this.sequence1=e,this.sequence2=r,this.match_score=h,this.mismatch_penalty=o,this.gap_penalty=T,this.iMax=e.length+1,this.jMax=r.length+1,this.grid=Array(this.iMax);for(var s=0;s<this.iMax;s++){this.grid[s]=Array(this.jMax);for(var l=0;l<this.jMax;l++)this.grid[s][l]=0}this.tracebackGrid=Array(this.iMax);for(var g=0;g<this.iMax;g++){this.tracebackGrid[g]=Array(this.jMax);for(var p=0;p<this.jMax;p++)this.tracebackGrid[g][p]=[null,null,null]}this.alignments=[],this.score=-1,this.computeGrids()}return n(t,[{key:"getScore",value:function(){return this.score}},{key:"getAlignments",value:function(){return this.alignments}},{key:"computeGrids",value:function(){for(var e=1;e<this.jMax;e++)this.grid[0][e]=this.grid[0][e-1]+this.gap_penalty,this.tracebackGrid[0][e]=[!1,!1,!0];for(var r=1;r<this.iMax;r++)this.grid[r][0]=this.grid[r-1][0]+this.gap_penalty,this.tracebackGrid[r][0]=[!1,!0,!1];for(var h=1;h<this.iMax;h++)for(var o=1;o<this.jMax;o++){var T=void 0;T=this.sequence1[h-1]===this.sequence2[o-1]?this.grid[h-1][o-1]+this.match_score:this.grid[h-1][o-1]+this.mismatch_penalty;var s=this.grid[h-1][o]+this.gap_penalty,l=this.grid[h][o-1]+this.gap_penalty,g=[T,s,l],p=this.arrayAllMaxIndexes(g);this.grid[h][o]=g[p[0]],this.tracebackGrid[h][o]=[p.includes(0),p.includes(1),p.includes(2)]}this.score=this.grid[this.iMax-1][this.jMax-1]}},{key:"alignmentTraceback",value:function(){var e=[];for(e.push({pos:[this.sequence1.length,this.sequence2.length],seq1:"",seq2:""});e[0];){var r=e[0],h=this.tracebackGrid[r.pos[0]][r.pos[1]];h[0]&&e.push({pos:[r.pos[0]-1,r.pos[1]-1],seq1:this.sequence1[r.pos[0]-1]+r.seq1,seq2:this.sequence2[r.pos[1]-1]+r.seq2}),h[1]&&e.push({pos:[r.pos[0]-1,r.pos[1]],seq1:this.sequence1[r.pos[0]-1]+r.seq1,seq2:"-"+r.seq2}),h[2]&&e.push({pos:[r.pos[0],r.pos[1]-1],seq1:"-"+r.seq1,seq2:this.sequence2[r.pos[1]-1]+r.seq2}),r.pos[0]===0&&r.pos[1]===0&&this.alignments.push({sequence1:r.seq1,sequence2:r.seq2}),e.shift()}return this.alignments}},{key:"getAllIndexes",value:function(e,r){for(var h=[],o=-1;(o=e.indexOf(r,o+1))!==-1;)h.push(o);return h}},{key:"arrayAllMaxIndexes",value:function(e){return this.getAllIndexes(e,Math.max.apply(null,e))}}]),t})()}),(function(m,L,N){var n=function(){};n.FDLayout=N(18),n.FDLayoutConstants=N(7),n.FDLayoutEdge=N(19),n.FDLayoutNode=N(20),n.DimensionD=N(21),n.HashMap=N(22),n.HashSet=N(23),n.IGeometry=N(8),n.IMath=N(9),n.Integer=N(10),n.Point=N(12),n.PointD=N(4),n.RandomSeed=N(16),n.RectangleD=N(13),n.Transform=N(17),n.UniqueIDGeneretor=N(14),n.Quicksort=N(24),n.LinkedList=N(11),n.LGraphObject=N(2),n.LGraph=N(5),n.LEdge=N(1),n.LGraphManager=N(6),n.LNode=N(3),n.Layout=N(15),n.LayoutConstants=N(0),n.NeedlemanWunsch=N(25),m.exports=n}),(function(m,L,N){function n(){this.listeners=[]}var i=n.prototype;i.addListener=function(t,e){this.listeners.push({event:t,callback:e})},i.removeListener=function(t,e){for(var r=this.listeners.length;r>=0;r--){var h=this.listeners[r];h.event===t&&h.callback===e&&this.listeners.splice(r,1)}},i.emit=function(t,e){for(var r=0;r<this.listeners.length;r++){var h=this.listeners[r];t===h.event&&h.callback(e)}},m.exports=n})])})})),Q=V(((C,P)=>{(function(m,L){typeof C=="object"&&typeof P=="object"?P.exports=L(Z()):typeof define=="function"&&define.amd?define(["layout-base"],L):typeof C=="object"?C.coseBase=L(Z()):m.coseBase=L(m.layoutBase)})(C,function(m){return(function(L){var N={};function n(i){if(N[i])return N[i].exports;var t=N[i]={i,l:!1,exports:{}};return L[i].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=L,n.c=N,n.i=function(i){return i},n.d=function(i,t,e){n.o(i,t)||Object.defineProperty(i,t,{configurable:!1,enumerable:!0,get:e})},n.n=function(i){var t=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(t,"a",t),t},n.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},n.p="",n(n.s=7)})([(function(L,N){L.exports=m}),(function(L,N,n){var i=n(0).FDLayoutConstants;function t(){}for(var e in i)t[e]=i[e];t.DEFAULT_USE_MULTI_LEVEL_SCALING=!1,t.DEFAULT_RADIAL_SEPARATION=i.DEFAULT_EDGE_LENGTH,t.DEFAULT_COMPONENT_SEPERATION=60,t.TILE=!0,t.TILING_PADDING_VERTICAL=10,t.TILING_PADDING_HORIZONTAL=10,t.TREE_REDUCTION_ON_INCREMENTAL=!1,L.exports=t}),(function(L,N,n){var i=n(0).FDLayoutEdge;function t(r,h,o){i.call(this,r,h,o)}for(var e in t.prototype=Object.create(i.prototype),i)t[e]=i[e];L.exports=t}),(function(L,N,n){var i=n(0).LGraph;function t(r,h,o){i.call(this,r,h,o)}for(var e in t.prototype=Object.create(i.prototype),i)t[e]=i[e];L.exports=t}),(function(L,N,n){var i=n(0).LGraphManager;function t(r){i.call(this,r)}for(var e in t.prototype=Object.create(i.prototype),i)t[e]=i[e];L.exports=t}),(function(L,N,n){var i=n(0).FDLayoutNode,t=n(0).IMath;function e(h,o,T,s){i.call(this,h,o,T,s)}for(var r in e.prototype=Object.create(i.prototype),i)e[r]=i[r];e.prototype.move=function(){var h=this.graphManager.getLayout();this.displacementX=h.coolingFactor*(this.springForceX+this.repulsionForceX+this.gravitationForceX)/this.noOfChildren,this.displacementY=h.coolingFactor*(this.springForceY+this.repulsionForceY+this.gravitationForceY)/this.noOfChildren,Math.abs(this.displacementX)>h.coolingFactor*h.maxNodeDisplacement&&(this.displacementX=h.coolingFactor*h.maxNodeDisplacement*t.sign(this.displacementX)),Math.abs(this.displacementY)>h.coolingFactor*h.maxNodeDisplacement&&(this.displacementY=h.coolingFactor*h.maxNodeDisplacement*t.sign(this.displacementY)),this.child==null||this.child.getNodes().length==0?this.moveBy(this.displacementX,this.displacementY):this.propogateDisplacementToChildren(this.displacementX,this.displacementY),h.totalDisplacement+=Math.abs(this.displacementX)+Math.abs(this.displacementY),this.springForceX=0,this.springForceY=0,this.repulsionForceX=0,this.repulsionForceY=0,this.gravitationForceX=0,this.gravitationForceY=0,this.displacementX=0,this.displacementY=0},e.prototype.propogateDisplacementToChildren=function(h,o){for(var T=this.getChild().getNodes(),s,l=0;l<T.length;l++)s=T[l],s.getChild()==null?(s.moveBy(h,o),s.displacementX+=h,s.displacementY+=o):s.propogateDisplacementToChildren(h,o)},e.prototype.setPred1=function(h){this.pred1=h},e.prototype.getPred1=function(){return pred1},e.prototype.getPred2=function(){return pred2},e.prototype.setNext=function(h){this.next=h},e.prototype.getNext=function(){return next},e.prototype.setProcessed=function(h){this.processed=h},e.prototype.isProcessed=function(){return processed},L.exports=e}),(function(L,N,n){var i=n(0).FDLayout,t=n(4),e=n(3),r=n(5),h=n(2),o=n(1),T=n(0).FDLayoutConstants,s=n(0).LayoutConstants,l=n(0).Point,g=n(0).PointD,p=n(0).Layout,v=n(0).Integer,f=n(0).IGeometry,d=n(0).LGraph,A=n(0).Transform;function y(){i.call(this),this.toBeTiled={}}for(var O in y.prototype=Object.create(i.prototype),i)y[O]=i[O];y.prototype.newGraphManager=function(){var a=new t(this);return this.graphManager=a,a},y.prototype.newGraph=function(a){return new e(null,this.graphManager,a)},y.prototype.newNode=function(a){return new r(this.graphManager,a)},y.prototype.newEdge=function(a){return new h(null,null,a)},y.prototype.initParameters=function(){i.prototype.initParameters.call(this,arguments),this.isSubLayout||(o.DEFAULT_EDGE_LENGTH<10?this.idealEdgeLength=10:this.idealEdgeLength=o.DEFAULT_EDGE_LENGTH,this.useSmartIdealEdgeLengthCalculation=o.DEFAULT_USE_SMART_IDEAL_EDGE_LENGTH_CALCULATION,this.springConstant=T.DEFAULT_SPRING_STRENGTH,this.repulsionConstant=T.DEFAULT_REPULSION_STRENGTH,this.gravityConstant=T.DEFAULT_GRAVITY_STRENGTH,this.compoundGravityConstant=T.DEFAULT_COMPOUND_GRAVITY_STRENGTH,this.gravityRangeFactor=T.DEFAULT_GRAVITY_RANGE_FACTOR,this.compoundGravityRangeFactor=T.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR,this.prunedNodesAll=[],this.growTreeIterations=0,this.afterGrowthIterations=0,this.isTreeGrowing=!1,this.isGrowthFinished=!1,this.coolingCycle=0,this.maxCoolingCycle=this.maxIterations/T.CONVERGENCE_CHECK_PERIOD,this.finalTemperature=T.CONVERGENCE_CHECK_PERIOD/this.maxIterations,this.coolingAdjuster=1)},y.prototype.layout=function(){return s.DEFAULT_CREATE_BENDS_AS_NEEDED&&(this.createBendpoints(),this.graphManager.resetAllEdges()),this.level=0,this.classicLayout()},y.prototype.classicLayout=function(){if(this.nodesWithGravity=this.calculateNodesToApplyGravitationTo(),this.graphManager.setAllNodesToApplyGravitation(this.nodesWithGravity),this.calcNoOfChildrenForAllNodes(),this.graphManager.calcLowestCommonAncestors(),this.graphManager.calcInclusionTreeDepths(),this.graphManager.getRoot().calcEstimatedSize(),this.calcIdealEdgeLengths(),this.incremental){if(o.TREE_REDUCTION_ON_INCREMENTAL){this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),c=this.nodesWithGravity.filter(function(E){return a.has(E)});this.graphManager.setAllNodesToApplyGravitation(c)}}else{var u=this.getFlatForest();if(u.length>0)this.positionNodesRadially(u);else{this.reduceTrees(),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),c=this.nodesWithGravity.filter(function(D){return a.has(D)});this.graphManager.setAllNodesToApplyGravitation(c),this.positionNodesRandomly()}}return this.initSpringEmbedder(),this.runSpringEmbedder(),!0},y.prototype.tick=function(){if(this.totalIterations++,this.totalIterations===this.maxIterations&&!this.isTreeGrowing&&!this.isGrowthFinished)if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;if(this.totalIterations%T.CONVERGENCE_CHECK_PERIOD==0&&!this.isTreeGrowing&&!this.isGrowthFinished){if(this.isConverged())if(this.prunedNodesAll.length>0)this.isTreeGrowing=!0;else return!0;this.coolingCycle++,this.layoutQuality==0?this.coolingAdjuster=this.coolingCycle:this.layoutQuality==1&&(this.coolingAdjuster=this.coolingCycle/3),this.coolingFactor=Math.max(this.initialCoolingFactor-this.coolingCycle**+(Math.log(100*(this.initialCoolingFactor-this.finalTemperature))/Math.log(this.maxCoolingCycle))/100*this.coolingAdjuster,this.finalTemperature),this.animationPeriod=Math.ceil(this.initialAnimationPeriod*Math.sqrt(this.coolingFactor))}if(this.isTreeGrowing){if(this.growTreeIterations%10==0)if(this.prunedNodesAll.length>0){this.graphManager.updateBounds(),this.updateGrid(),this.growTree(this.prunedNodesAll),this.graphManager.resetAllNodesToApplyGravitation();var a=new Set(this.getAllNodes()),c=this.nodesWithGravity.filter(function(_){return a.has(_)});this.graphManager.setAllNodesToApplyGravitation(c),this.graphManager.updateBounds(),this.updateGrid(),this.coolingFactor=T.DEFAULT_COOLING_FACTOR_INCREMENTAL}else this.isTreeGrowing=!1,this.isGrowthFinished=!0;this.growTreeIterations++}if(this.isGrowthFinished){if(this.isConverged())return!0;this.afterGrowthIterations%10==0&&(this.graphManager.updateBounds(),this.updateGrid()),this.coolingFactor=T.DEFAULT_COOLING_FACTOR_INCREMENTAL*((100-this.afterGrowthIterations)/100),this.afterGrowthIterations++}var u=!this.isTreeGrowing&&!this.isGrowthFinished,E=this.growTreeIterations%10==1&&this.isTreeGrowing||this.afterGrowthIterations%10==1&&this.isGrowthFinished;return this.totalDisplacement=0,this.graphManager.updateBounds(),this.calcSpringForces(),this.calcRepulsionForces(u,E),this.calcGravitationalForces(),this.moveNodes(),this.animate(),!1},y.prototype.getPositionsData=function(){for(var a=this.graphManager.getAllNodes(),c={},u=0;u<a.length;u++){var E=a[u].rect,_=a[u].id;c[_]={id:_,x:E.getCenterX(),y:E.getCenterY(),w:E.width,h:E.height}}return c},y.prototype.runSpringEmbedder=function(){this.initialAnimationPeriod=25,this.animationPeriod=this.initialAnimationPeriod;var a=!1;if(T.ANIMATE==="during")this.emit("layoutstarted");else{for(;!a;)a=this.tick();this.graphManager.updateBounds()}},y.prototype.calculateNodesToApplyGravitationTo=function(){var a=[],c,u=this.graphManager.getGraphs(),E=u.length,_;for(_=0;_<E;_++)c=u[_],c.updateConnected(),c.isConnected||(a=a.concat(c.getNodes()));return a},y.prototype.createBendpoints=function(){var a=[];a=a.concat(this.graphManager.getAllEdges());var c=new Set,u;for(u=0;u<a.length;u++){var E=a[u];if(!c.has(E)){var _=E.getSource(),D=E.getTarget();if(_==D)E.getBendpoints().push(new g),E.getBendpoints().push(new g),this.createDummyNodesForBendpoints(E),c.add(E);else{var I=[];if(I=I.concat(_.getEdgeListToNode(D)),I=I.concat(D.getEdgeListToNode(_)),!c.has(I[0])){if(I.length>1){var w;for(w=0;w<I.length;w++){var R=I[w];R.getBendpoints().push(new g),this.createDummyNodesForBendpoints(R)}}I.forEach(function(G){c.add(G)})}}}if(c.size==a.length)break}},y.prototype.positionNodesRadially=function(a){for(var c=new l(0,0),u=Math.ceil(Math.sqrt(a.length)),E=0,_=0,D=0,I=new g(0,0),w=0;w<a.length;w++){w%u==0&&(D=0,_=E,w!=0&&(_+=o.DEFAULT_COMPONENT_SEPERATION),E=0);var R=a[w],G=p.findCenterOfTree(R);c.x=D,c.y=_,I=y.radialLayout(R,G,c),I.y>E&&(E=Math.floor(I.y)),D=Math.floor(I.x+o.DEFAULT_COMPONENT_SEPERATION)}this.transform(new g(s.WORLD_CENTER_X-I.x/2,s.WORLD_CENTER_Y-I.y/2))},y.radialLayout=function(a,c,u){var E=Math.max(this.maxDiagonalInTree(a),o.DEFAULT_RADIAL_SEPARATION);y.branchRadialLayout(c,null,0,359,0,E);var _=d.calculateBounds(a),D=new A;D.setDeviceOrgX(_.getMinX()),D.setDeviceOrgY(_.getMinY()),D.setWorldOrgX(u.x),D.setWorldOrgY(u.y);for(var I=0;I<a.length;I++)a[I].transform(D);var w=new g(_.getMaxX(),_.getMaxY());return D.inverseTransformPoint(w)},y.branchRadialLayout=function(a,c,u,E,_,D){var I=(E-u+1)/2;I<0&&(I+=180);var w=(I+u)%360*f.TWO_PI/360,R=_*Math.cos(w),G=_*Math.sin(w);a.setCenter(R,G);var x=[];x=x.concat(a.getEdges());var M=x.length;c!=null&&M--;for(var U=0,b=x.length,F,S=a.getEdgesBetween(c);S.length>1;){var Y=S[0];S.splice(0,1);var X=x.indexOf(Y);X>=0&&x.splice(X,1),b--,M--}F=c==null?0:(x.indexOf(S[0])+1)%b;for(var W=Math.abs(E-u)/M,B=F;U!=M;B=++B%b){var H=x[B].getOtherEnd(a);if(H!=c){var q=(u+U*W)%360,ot=(q+W)%360;y.branchRadialLayout(H,a,q,ot,_+D,D),U++}}},y.maxDiagonalInTree=function(a){for(var c=v.MIN_VALUE,u=0;u<a.length;u++){var E=a[u].getDiagonal();E>c&&(c=E)}return c},y.prototype.calcRepulsionRange=function(){return 2*(this.level+1)*this.idealEdgeLength},y.prototype.groupZeroDegreeMembers=function(){var a=this,c={};this.memberGroups={},this.idToDummyNode={};for(var u=[],E=this.graphManager.getAllNodes(),_=0;_<E.length;_++){var D=E[_],I=D.getParent();this.getNodeDegreeWithChildren(D)===0&&(I.id==null||!this.getToBeTiled(I))&&u.push(D)}for(var _=0;_<u.length;_++){var D=u[_],w=D.getParent().id;c[w]===void 0&&(c[w]=[]),c[w]=c[w].concat(D)}Object.keys(c).forEach(function(R){if(c[R].length>1){var G="DummyCompound_"+R;a.memberGroups[G]=c[R];var x=c[R][0].getParent(),M=new r(a.graphManager);M.id=G,M.paddingLeft=x.paddingLeft||0,M.paddingRight=x.paddingRight||0,M.paddingBottom=x.paddingBottom||0,M.paddingTop=x.paddingTop||0,a.idToDummyNode[G]=M;var U=a.getGraphManager().add(a.newGraph(),M),b=x.getChild();b.add(M);for(var F=0;F<c[R].length;F++){var S=c[R][F];b.remove(S),U.add(S)}}})},y.prototype.clearCompounds=function(){var a={},c={};this.performDFSOnCompounds();for(var u=0;u<this.compoundOrder.length;u++)c[this.compoundOrder[u].id]=this.compoundOrder[u],a[this.compoundOrder[u].id]=[].concat(this.compoundOrder[u].getChild().getNodes()),this.graphManager.remove(this.compoundOrder[u].getChild()),this.compoundOrder[u].child=null;this.graphManager.resetAllNodes(),this.tileCompoundMembers(a,c)},y.prototype.clearZeroDegreeMembers=function(){var a=this,c=this.tiledZeroDegreePack=[];Object.keys(this.memberGroups).forEach(function(u){var E=a.idToDummyNode[u];c[u]=a.tileNodes(a.memberGroups[u],E.paddingLeft+E.paddingRight),E.rect.width=c[u].width,E.rect.height=c[u].height})},y.prototype.repopulateCompounds=function(){for(var a=this.compoundOrder.length-1;a>=0;a--){var c=this.compoundOrder[a],u=c.id,E=c.paddingLeft,_=c.paddingTop;this.adjustLocations(this.tiledMemberPack[u],c.rect.x,c.rect.y,E,_)}},y.prototype.repopulateZeroDegreeMembers=function(){var a=this,c=this.tiledZeroDegreePack;Object.keys(c).forEach(function(u){var E=a.idToDummyNode[u],_=E.paddingLeft,D=E.paddingTop;a.adjustLocations(c[u],E.rect.x,E.rect.y,_,D)})},y.prototype.getToBeTiled=function(a){var c=a.id;if(this.toBeTiled[c]!=null)return this.toBeTiled[c];var u=a.getChild();if(u==null)return this.toBeTiled[c]=!1,!1;for(var E=u.getNodes(),_=0;_<E.length;_++){var D=E[_];if(this.getNodeDegree(D)>0)return this.toBeTiled[c]=!1,!1;if(D.getChild()==null){this.toBeTiled[D.id]=!1;continue}if(!this.getToBeTiled(D))return this.toBeTiled[c]=!1,!1}return this.toBeTiled[c]=!0,!0},y.prototype.getNodeDegree=function(a){a.id;for(var c=a.getEdges(),u=0,E=0;E<c.length;E++){var _=c[E];_.getSource().id!==_.getTarget().id&&(u+=1)}return u},y.prototype.getNodeDegreeWithChildren=function(a){var c=this.getNodeDegree(a);if(a.getChild()==null)return c;for(var u=a.getChild().getNodes(),E=0;E<u.length;E++){var _=u[E];c+=this.getNodeDegreeWithChildren(_)}return c},y.prototype.performDFSOnCompounds=function(){this.compoundOrder=[],this.fillCompexOrderByDFS(this.graphManager.getRoot().getNodes())},y.prototype.fillCompexOrderByDFS=function(a){for(var c=0;c<a.length;c++){var u=a[c];u.getChild()!=null&&this.fillCompexOrderByDFS(u.getChild().getNodes()),this.getToBeTiled(u)&&this.compoundOrder.push(u)}},y.prototype.adjustLocations=function(a,c,u,E,_){c+=E,u+=_;for(var D=c,I=0;I<a.rows.length;I++){var w=a.rows[I];c=D;for(var R=0,G=0;G<w.length;G++){var x=w[G];x.rect.x=c,x.rect.y=u,c+=x.rect.width+a.horizontalPadding,x.rect.height>R&&(R=x.rect.height)}u+=R+a.verticalPadding}},y.prototype.tileCompoundMembers=function(a,c){var u=this;this.tiledMemberPack=[],Object.keys(a).forEach(function(E){var _=c[E];u.tiledMemberPack[E]=u.tileNodes(a[E],_.paddingLeft+_.paddingRight),_.rect.width=u.tiledMemberPack[E].width,_.rect.height=u.tiledMemberPack[E].height})},y.prototype.tileNodes=function(a,c){var u=o.TILING_PADDING_VERTICAL,E=o.TILING_PADDING_HORIZONTAL,_={rows:[],rowWidth:[],rowHeight:[],width:0,height:c,verticalPadding:u,horizontalPadding:E};a.sort(function(w,R){return w.rect.width*w.rect.height>R.rect.width*R.rect.height?-1:w.rect.width*w.rect.height<R.rect.width*R.rect.height?1:0});for(var D=0;D<a.length;D++){var I=a[D];_.rows.length==0?this.insertNodeToRow(_,I,0,c):this.canAddHorizontal(_,I.rect.width,I.rect.height)?this.insertNodeToRow(_,I,this.getShortestRowIndex(_),c):this.insertNodeToRow(_,I,_.rows.length,c),this.shiftToLastRow(_)}return _},y.prototype.insertNodeToRow=function(a,c,u,E){var _=E;u==a.rows.length&&(a.rows.push([]),a.rowWidth.push(_),a.rowHeight.push(0));var D=a.rowWidth[u]+c.rect.width;a.rows[u].length>0&&(D+=a.horizontalPadding),a.rowWidth[u]=D,a.width<D&&(a.width=D);var I=c.rect.height;u>0&&(I+=a.verticalPadding);var w=0;I>a.rowHeight[u]&&(w=a.rowHeight[u],a.rowHeight[u]=I,w=a.rowHeight[u]-w),a.height+=w,a.rows[u].push(c)},y.prototype.getShortestRowIndex=function(a){for(var c=-1,u=Number.MAX_VALUE,E=0;E<a.rows.length;E++)a.rowWidth[E]<u&&(c=E,u=a.rowWidth[E]);return c},y.prototype.getLongestRowIndex=function(a){for(var c=-1,u=Number.MIN_VALUE,E=0;E<a.rows.length;E++)a.rowWidth[E]>u&&(c=E,u=a.rowWidth[E]);return c},y.prototype.canAddHorizontal=function(a,c,u){var E=this.getShortestRowIndex(a);if(E<0)return!0;var _=a.rowWidth[E];if(_+a.horizontalPadding+c<=a.width)return!0;var D=0;a.rowHeight[E]<u&&E>0&&(D=u+a.verticalPadding-a.rowHeight[E]);var I=a.width-_>=c+a.horizontalPadding?(a.height+D)/(_+c+a.horizontalPadding):(a.height+D)/a.width;D=u+a.verticalPadding;var w=a.width<c?(a.height+D)/c:(a.height+D)/a.width;return w<1&&(w=1/w),I<1&&(I=1/I),I<w},y.prototype.shiftToLastRow=function(a){var c=this.getLongestRowIndex(a),u=a.rowWidth.length-1,E=a.rows[c],_=E[E.length-1],D=_.width+a.horizontalPadding;if(a.width-a.rowWidth[u]>D&&c!=u){E.splice(-1,1),a.rows[u].push(_),a.rowWidth[c]=a.rowWidth[c]-D,a.rowWidth[u]=a.rowWidth[u]+D,a.width=a.rowWidth[instance.getLongestRowIndex(a)];for(var I=Number.MIN_VALUE,w=0;w<E.length;w++)E[w].height>I&&(I=E[w].height);c>0&&(I+=a.verticalPadding);var R=a.rowHeight[c]+a.rowHeight[u];a.rowHeight[c]=I,a.rowHeight[u]<_.height+a.verticalPadding&&(a.rowHeight[u]=_.height+a.verticalPadding);var G=a.rowHeight[c]+a.rowHeight[u];a.height+=G-R,this.shiftToLastRow(a)}},y.prototype.tilingPreLayout=function(){o.TILE&&(this.groupZeroDegreeMembers(),this.clearCompounds(),this.clearZeroDegreeMembers())},y.prototype.tilingPostLayout=function(){o.TILE&&(this.repopulateZeroDegreeMembers(),this.repopulateCompounds())},y.prototype.reduceTrees=function(){for(var a=[],c=!0,u;c;){var E=this.graphManager.getAllNodes(),_=[];c=!1;for(var D=0;D<E.length;D++)u=E[D],u.getEdges().length==1&&!u.getEdges()[0].isInterGraph&&u.getChild()==null&&(_.push([u,u.getEdges()[0],u.getOwner()]),c=!0);if(c==1){for(var I=[],w=0;w<_.length;w++)_[w][0].getEdges().length==1&&(I.push(_[w]),_[w][0].getOwner().remove(_[w][0]));a.push(I),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()}}this.prunedNodesAll=a},y.prototype.growTree=function(a){for(var c=a.length,u=a[c-1],E,_=0;_<u.length;_++)E=u[_],this.findPlaceforPrunedNode(E),E[2].add(E[0]),E[2].add(E[1],E[1].source,E[1].target);a.splice(a.length-1,1),this.graphManager.resetAllNodes(),this.graphManager.resetAllEdges()},y.prototype.findPlaceforPrunedNode=function(a){var c,u,E=a[0];u=E==a[1].source?a[1].target:a[1].source;var _=u.startX,D=u.finishX,I=u.startY,w=u.finishY,R=[0,0,0,0];if(I>0)for(var G=_;G<=D;G++)R[0]+=this.grid[G][I-1].length+this.grid[G][I].length-1;if(D<this.grid.length-1)for(var G=I;G<=w;G++)R[1]+=this.grid[D+1][G].length+this.grid[D][G].length-1;if(w<this.grid[0].length-1)for(var G=_;G<=D;G++)R[2]+=this.grid[G][w+1].length+this.grid[G][w].length-1;if(_>0)for(var G=I;G<=w;G++)R[3]+=this.grid[_-1][G].length+this.grid[_][G].length-1;for(var x=v.MAX_VALUE,M,U,b=0;b<R.length;b++)R[b]<x?(x=R[b],M=1,U=b):R[b]==x&&M++;if(M==3&&x==0)R[0]==0&&R[1]==0&&R[2]==0?c=1:R[0]==0&&R[1]==0&&R[3]==0?c=0:R[0]==0&&R[2]==0&&R[3]==0?c=3:R[1]==0&&R[2]==0&&R[3]==0&&(c=2);else if(M==2&&x==0){var F=Math.floor(Math.random()*2);c=R[0]==0&&R[1]==0?F==0?0:1:R[0]==0&&R[2]==0?F==0?0:2:R[0]==0&&R[3]==0?F==0?0:3:R[1]==0&&R[2]==0?F==0?1:2:R[1]==0&&R[3]==0?F==0?1:3:F==0?2:3}else if(M==4&&x==0){var F=Math.floor(Math.random()*4);c=F}else c=U;c==0?E.setCenter(u.getCenterX(),u.getCenterY()-u.getHeight()/2-T.DEFAULT_EDGE_LENGTH-E.getHeight()/2):c==1?E.setCenter(u.getCenterX()+u.getWidth()/2+T.DEFAULT_EDGE_LENGTH+E.getWidth()/2,u.getCenterY()):c==2?E.setCenter(u.getCenterX(),u.getCenterY()+u.getHeight()/2+T.DEFAULT_EDGE_LENGTH+E.getHeight()/2):E.setCenter(u.getCenterX()-u.getWidth()/2-T.DEFAULT_EDGE_LENGTH-E.getWidth()/2,u.getCenterY())},L.exports=y}),(function(L,N,n){var i={};i.layoutBase=n(0),i.CoSEConstants=n(1),i.CoSEEdge=n(2),i.CoSEGraph=n(3),i.CoSEGraphManager=n(4),i.CoSELayout=n(6),i.CoSENode=n(5),L.exports=i})])})})),at=nt(V(((C,P)=>{(function(m,L){typeof C=="object"&&typeof P=="object"?P.exports=L(Q()):typeof define=="function"&&define.amd?define(["cose-base"],L):typeof C=="object"?C.cytoscapeCoseBilkent=L(Q()):m.cytoscapeCoseBilkent=L(m.coseBase)})(C,function(m){return(function(L){var N={};function n(i){if(N[i])return N[i].exports;var t=N[i]={i,l:!1,exports:{}};return L[i].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=L,n.c=N,n.i=function(i){return i},n.d=function(i,t,e){n.o(i,t)||Object.defineProperty(i,t,{configurable:!1,enumerable:!0,get:e})},n.n=function(i){var t=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(t,"a",t),t},n.o=function(i,t){return Object.prototype.hasOwnProperty.call(i,t)},n.p="",n(n.s=1)})([(function(L,N){L.exports=m}),(function(L,N,n){var i=n(0).layoutBase.LayoutConstants,t=n(0).layoutBase.FDLayoutConstants,e=n(0).CoSEConstants,r=n(0).CoSELayout,h=n(0).CoSENode,o=n(0).layoutBase.PointD,T=n(0).layoutBase.DimensionD,s={ready:function(){},stop:function(){},quality:"default",nodeDimensionsIncludeLabels:!1,refresh:30,fit:!0,padding:10,randomize:!0,nodeRepulsion:4500,idealEdgeLength:50,edgeElasticity:.45,nestingFactor:.1,gravity:.25,numIter:2500,tile:!0,animate:"end",animationDuration:500,tilingPaddingVertical:10,tilingPaddingHorizontal:10,gravityRangeCompound:1.5,gravityCompound:1,gravityRange:3.8,initialEnergyOnIncremental:.5};function l(f,d){var A={};for(var y in f)A[y]=f[y];for(var y in d)A[y]=d[y];return A}function g(f){this.options=l(s,f),p(this.options)}var p=function(f){f.nodeRepulsion!=null&&(e.DEFAULT_REPULSION_STRENGTH=t.DEFAULT_REPULSION_STRENGTH=f.nodeRepulsion),f.idealEdgeLength!=null&&(e.DEFAULT_EDGE_LENGTH=t.DEFAULT_EDGE_LENGTH=f.idealEdgeLength),f.edgeElasticity!=null&&(e.DEFAULT_SPRING_STRENGTH=t.DEFAULT_SPRING_STRENGTH=f.edgeElasticity),f.nestingFactor!=null&&(e.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=t.PER_LEVEL_IDEAL_EDGE_LENGTH_FACTOR=f.nestingFactor),f.gravity!=null&&(e.DEFAULT_GRAVITY_STRENGTH=t.DEFAULT_GRAVITY_STRENGTH=f.gravity),f.numIter!=null&&(e.MAX_ITERATIONS=t.MAX_ITERATIONS=f.numIter),f.gravityRange!=null&&(e.DEFAULT_GRAVITY_RANGE_FACTOR=t.DEFAULT_GRAVITY_RANGE_FACTOR=f.gravityRange),f.gravityCompound!=null&&(e.DEFAULT_COMPOUND_GRAVITY_STRENGTH=t.DEFAULT_COMPOUND_GRAVITY_STRENGTH=f.gravityCompound),f.gravityRangeCompound!=null&&(e.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=t.DEFAULT_COMPOUND_GRAVITY_RANGE_FACTOR=f.gravityRangeCompound),f.initialEnergyOnIncremental!=null&&(e.DEFAULT_COOLING_FACTOR_INCREMENTAL=t.DEFAULT_COOLING_FACTOR_INCREMENTAL=f.initialEnergyOnIncremental),f.quality=="draft"?i.QUALITY=0:f.quality=="proof"?i.QUALITY=2:i.QUALITY=1,e.NODE_DIMENSIONS_INCLUDE_LABELS=t.NODE_DIMENSIONS_INCLUDE_LABELS=i.NODE_DIMENSIONS_INCLUDE_LABELS=f.nodeDimensionsIncludeLabels,e.DEFAULT_INCREMENTAL=t.DEFAULT_INCREMENTAL=i.DEFAULT_INCREMENTAL=!f.randomize,e.ANIMATE=t.ANIMATE=i.ANIMATE=f.animate,e.TILE=f.tile,e.TILING_PADDING_VERTICAL=typeof f.tilingPaddingVertical=="function"?f.tilingPaddingVertical.call():f.tilingPaddingVertical,e.TILING_PADDING_HORIZONTAL=typeof f.tilingPaddingHorizontal=="function"?f.tilingPaddingHorizontal.call():f.tilingPaddingHorizontal};g.prototype.run=function(){var f,d,A=this.options;this.idToLNode={};var y=this.layout=new r,O=this;O.stopped=!1,this.cy=this.options.cy,this.cy.trigger({type:"layoutstart",layout:this});var a=y.newGraphManager();this.gm=a;var c=this.options.eles.nodes(),u=this.options.eles.edges();this.root=a.addRoot(),this.processChildrenList(this.root,this.getTopMostNodes(c),y);for(var E=0;E<u.length;E++){var _=u[E],D=this.idToLNode[_.data("source")],I=this.idToLNode[_.data("target")];if(D!==I&&D.getEdgesBetween(I).length==0){var w=a.add(y.newEdge(),D,I);w.id=_.id()}}var R=function(x,M){typeof x=="number"&&(x=M);var U=x.data("id"),b=O.idToLNode[U];return{x:b.getRect().getCenterX(),y:b.getRect().getCenterY()}},G=function x(){for(var M=function(){A.fit&&A.cy.fit(A.eles,A.padding),f||(f=!0,O.cy.one("layoutready",A.ready),O.cy.trigger({type:"layoutready",layout:O}))},U=O.options.refresh,b,F=0;F<U&&!b;F++)b=O.stopped||O.layout.tick();if(b){y.checkLayoutSuccess()&&!y.isSubLayout&&y.doPostLayout(),y.tilingPostLayout&&y.tilingPostLayout(),y.isLayoutFinished=!0,O.options.eles.nodes().positions(R),M(),O.cy.one("layoutstop",O.options.stop),O.cy.trigger({type:"layoutstop",layout:O}),d&&cancelAnimationFrame(d),f=!1;return}var S=O.layout.getPositionsData();A.eles.nodes().positions(function(Y,X){if(typeof Y=="number"&&(Y=X),!Y.isParent()){for(var W=Y.id(),B=S[W],H=Y;B==null&&(B=S[H.data("parent")]||S["DummyCompound_"+H.data("parent")],S[W]=B,H=H.parent()[0],H!=null););return B==null?{x:Y.position("x"),y:Y.position("y")}:{x:B.x,y:B.y}}}),M(),d=requestAnimationFrame(x)};return y.addListener("layoutstarted",function(){O.options.animate==="during"&&(d=requestAnimationFrame(G))}),y.runLayout(),this.options.animate!=="during"&&(O.options.eles.nodes().not(":parent").layoutPositions(O,O.options,R),f=!1),this},g.prototype.getTopMostNodes=function(f){for(var d={},A=0;A<f.length;A++)d[f[A].id()]=!0;return f.filter(function(y,O){typeof y=="number"&&(y=O);for(var a=y.parent()[0];a!=null;){if(d[a.id()])return!1;a=a.parent()[0]}return!0})},g.prototype.processChildrenList=function(f,d,A){for(var y=d.length,O=0;O<y;O++){var a=d[O],c=a.children(),u,E=a.layoutDimensions({nodeDimensionsIncludeLabels:this.options.nodeDimensionsIncludeLabels});if(u=a.outerWidth()!=null&&a.outerHeight()!=null?f.add(new h(A.graphManager,new o(a.position("x")-E.w/2,a.position("y")-E.h/2),new T(parseFloat(E.w),parseFloat(E.h)))):f.add(new h(this.graphManager)),u.id=a.data("id"),u.paddingLeft=parseInt(a.css("padding")),u.paddingTop=parseInt(a.css("padding")),u.paddingRight=parseInt(a.css("padding")),u.paddingBottom=parseInt(a.css("padding")),this.options.nodeDimensionsIncludeLabels&&a.isParent()){var _=a.boundingBox({includeLabels:!0,includeNodes:!1}).w,D=a.boundingBox({includeLabels:!0,includeNodes:!1}).h,I=a.css("text-halign");u.labelWidth=_,u.labelHeight=D,u.labelPos=I}if(this.idToLNode[a.data("id")]=u,isNaN(u.rect.x)&&(u.rect.x=0),isNaN(u.rect.y)&&(u.rect.y=0),c!=null&&c.length>0){var w=A.getGraphManager().add(A.newGraph(),u);this.processChildrenList(w,c,A)}}},g.prototype.stop=function(){return this.stopped=!0,this};var v=function(f){f("layout","cose-bilkent",g)};typeof cytoscape<"u"&&v(cytoscape),L.exports=v})])})}))(),1);z.use(at.default);function $(C,P){C.forEach(m=>{let L={id:m.id,labelText:m.label,height:m.height,width:m.width,padding:m.padding??0};Object.keys(m).forEach(N=>{["id","label","height","width","padding","x","y"].includes(N)||(L[N]=m[N])}),P.add({group:"nodes",data:L,position:{x:m.x??0,y:m.y??0}})})}k($,"addNodes");function K(C,P){C.forEach(m=>{let L={id:m.id,source:m.start,target:m.end};Object.keys(m).forEach(N=>{["id","start","end"].includes(N)||(L[N]=m[N])}),P.add({group:"edges",data:L})})}k(K,"addEdges");function J(C){return new Promise(P=>{let m=st("body").append("div").attr("id","cy").attr("style","display:none"),L=z({container:document.getElementById("cy"),style:[{selector:"edge",style:{"curve-style":"bezier"}}]});m.remove(),$(C.nodes,L),K(C.edges,L),L.nodes().forEach(function(N){N.layoutDimensions=()=>{let n=N.data();return{w:n.width,h:n.height}}}),L.layout({name:"cose-bilkent",quality:"proof",styleEnabled:!1,animate:!1}).run(),L.ready(N=>{j.info("Cytoscape ready",N),P(L)})})}k(J,"createCytoscapeInstance");function tt(C){return C.nodes().map(P=>{let m=P.data(),L=P.position(),N={id:m.id,x:L.x,y:L.y};return Object.keys(m).forEach(n=>{n!=="id"&&(N[n]=m[n])}),N})}k(tt,"extractPositionedNodes");function et(C){return C.edges().map(P=>{let m=P.data(),L=P._private.rscratch,N={id:m.id,source:m.source,target:m.target,startX:L.startX,startY:L.startY,midX:L.midX,midY:L.midY,endX:L.endX,endY:L.endY};return Object.keys(m).forEach(n=>{["id","source","target"].includes(n)||(N[n]=m[n])}),N})}k(et,"extractPositionedEdges");async function it(C,P){j.debug("Starting cose-bilkent layout algorithm");try{rt(C);let m=await J(C),L=tt(m),N=et(m);return j.debug(`Layout completed: ${L.length} nodes, ${N.length} edges`),{nodes:L,edges:N}}catch(m){throw j.error("Error in cose-bilkent layout algorithm:",m),m}}k(it,"executeCoseBilkentLayout");function rt(C){if(!C)throw Error("Layout data is required");if(!C.config)throw Error("Configuration is required in layout data");if(!C.rootNode)throw Error("Root node is required");if(!C.nodes||!Array.isArray(C.nodes))throw Error("No nodes found in layout data");if(!Array.isArray(C.edges))throw Error("Edges array is required in layout data");return!0}k(rt,"validateLayoutData");var ht=k(async(C,P,{insertCluster:m,insertEdge:L,insertEdgeLabel:N,insertMarkers:n,insertNode:i,log:t,positionEdgeLabel:e},{algorithm:r})=>{let h={},o={},T=P.select("g");n(T,C.markers,C.type,C.diagramId);let s=T.insert("g").attr("class","subgraphs"),l=T.insert("g").attr("class","edgePaths"),g=T.insert("g").attr("class","edgeLabels"),p=T.insert("g").attr("class","nodes");t.debug("Inserting nodes into DOM for dimension calculation"),await Promise.all(C.nodes.map(async d=>{if(d.isGroup){let A={...d};o[d.id]=A,h[d.id]=A,await m(s,d)}else{let A={...d};h[d.id]=A;let y=await i(p,d,{config:C.config,dir:C.direction||"TB"}),O=y.node().getBBox();A.width=O.width,A.height=O.height,A.domId=y,t.debug(`Node ${d.id} dimensions: ${O.width}x${O.height}`)}})),t.debug("Running cose-bilkent layout algorithm");let v={...C,nodes:C.nodes.map(d=>{let A=h[d.id];return{...d,width:A.width,height:A.height}})},f=await it(v,C.config);t.debug("Positioning nodes based on layout results"),f.nodes.forEach(d=>{let A=h[d.id];A!=null&&A.domId&&(A.domId.attr("transform",`translate(${d.x}, ${d.y})`),A.x=d.x,A.y=d.y,t.debug(`Positioned node ${A.id} at center (${d.x}, ${d.y})`))}),f.edges.forEach(d=>{let A=C.edges.find(y=>y.id===d.id);A&&(A.points=[{x:d.startX,y:d.startY},{x:d.midX,y:d.midY},{x:d.endX,y:d.endY}])}),t.debug("Inserting and positioning edges"),await Promise.all(C.edges.map(async d=>{await N(g,d);let A=h[d.start??""],y=h[d.end??""];if(A&&y){let O=f.edges.find(a=>a.id===d.id);if(O){t.debug("APA01 positionedEdge",O);let a={...d},c=L(l,a,o,C.type,A,y,C.diagramId);e(a,c)}else{let a={...d,points:[{x:A.x||0,y:A.y||0},{x:y.x||0,y:y.y||0}]},c=L(l,a,o,C.type,A,y,C.diagramId);e(a,c)}}})),t.debug("Cose-bilkent rendering completed")},"render");export{ht as render};
