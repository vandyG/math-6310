const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./data-grid-overlay-editor-Drp4I0tg.js","./emotion-is-prop-valid.esm-plUNooLR.js","./click-outside-container-BFEBn6Y8.js","./react-BcIddLXZ.js","./chunk-DZLz74EQ.js","./dist-BNjtn4W8.js","./react-dom-D6bRRS5R.js","./number-overlay-editor-CbWBjwI1.js"])))=>i.map(i=>d[i]);
var R0=Object.defineProperty;var E0=(qr,Cr,Jr)=>Cr in qr?R0(qr,Cr,{enumerable:!0,configurable:!0,writable:!0,value:Jr}):qr[Cr]=Jr;var rt=(qr,Cr,Jr)=>E0(qr,typeof Cr!="symbol"?Cr+"":Cr,Jr);import{s as Kt,t as J}from"./chunk-DZLz74EQ.js";import"./react-7g8sREeT.js";import{t as An}from"./react-BcIddLXZ.js";import"./react-dom-D6bRRS5R.js";import"./zod-BEi78Y5d.js";import{n as I0,t as T0}from"./jsx-runtime-DvsdsEjx.js";import"./_Uint8Array-CPNtPV0k.js";import"./isSymbol-D1Vf4s0g.js";import"./_arrayMap-DQI2GUNb.js";import"./toString-pPvo2488.js";import"./toNumber-Bjr00yqN.js";import"./isArrayLikeObject-CQy5-FN4.js";import"./_getTag-C4fv2peH.js";import"./_baseIsEqual-Cdnsi4t8.js";import"./merge-DrdmtLTL.js";import"./_baseSlice-B27Cqkm6.js";import"./upperFirst-CVedXayx.js";import"./_hasUnicode-CPHpt5EV.js";import{t as P0}from"./capitalize-DcZ4F_0s.js";import"./now-CKgsywea.js";import"./debounce-Bzqd6azt.js";import"./invariant-91cSKJcr.js";import{t as Ki}from"./Logger-BkkOJyg0.js";import"./hotkeys-CBY41Jr2.js";import"./utils-CfnN8i3Y.js";import"./constants-Cv7-oioA.js";import{t as O0}from"./ErrorBoundary-CeiDOU5x.js";import"./dist-CLazWf1X.js";import"./cn-Dr9kMPPj.js";import"./dist-D-dnh2ed.js";import"./useEventListener-g9rPKvBX.js";import{t as Xi}from"./events-BGfCi1Xy.js";import{t as Vi}from"./button-Bxk0BtBn.js";import{t as Ka}from"./preload-helper-CxnU7XTI.js";import{t as D0}from"./use-toast-C07-frN_.js";import{t as H0}from"./marked.esm-BVjBUuHx.js";import{r as z0}from"./useTheme-C5JyqXTm.js";import"./createLucideIcon-Be9UM2Pe.js";import"./check-hL6-9SZK.js";import{c as A0,i as L0,n as F0,s as j0,t as _0}from"./select-CMG6DC3j.js";import"./chevron-right-Caf5yL5B.js";import{a as Xa,c as Va,d as Ga,f as Ua,r as N0,s as qa,t as B0,u as Ja}from"./dropdown-menu-Bp1vhqcS.js";import{t as W0}from"./copy-DAVB02c8.js";import{n as $0,t as qo}from"./types-BBD3GQ0S.js";import{t as Y0}from"./plus-C1zexBxS.js";import{r as Qa}from"./input-Dm-m3XYB.js";import{t as K0}from"./trash-BpVsWH8l.js";import{r as Za,t as X0}from"./useNonce-Cw4ZAbgi.js";import"./namespace-BstGchRe.js";import{t as V0}from"./useLifecycle-Bnvt0QrQ.js";import"./menu-items-COILZQ4q.js";import"./fullscreen-BFmvQx5m.js";import"./tslib.es6-DItc8Tbq.js";import"./useNumberFormatter-DYIEUCTe.js";import{n as G0}from"./useEvent-BIiDVnhT.js";import"./useDebounce-9_rqRiHk.js";import{t as U0}from"./copy-BiKQh0sU.js";import"./emotion-is-prop-valid.esm-plUNooLR.js";import{t as q0}from"./prop-types-Bv8iPqhZ.js";import{t as Gi}from"./label-COeaBwl_.js";import{A as es,B as co,C as Qt,D as J0,E as Q0,F as Ui,G as ts,H as Z0,I as rs,J as Ln,K as pn,L as uo,M as ef,N as ns,O as qi,P as os,R as tf,S as is,T as Jo,U as ls,V as as,W as ss,_ as ho,a as Hr,b as fo,c as mn,d as lt,f as ve,g as Ji,h as Gr,i as rf,j as cs,k as us,m as ds,n as nf,o as fr,p as Ur,q as of,r as hs,s as fs,t as lf,v as Fn,w as Qo,x as Zo,y as af,z as sf}from"./click-outside-container-BFEBn6Y8.js";import{t as Zt}from"./dist-BNjtn4W8.js";let Qi,gs,cf=(async()=>{const qr=Zt("div")({name:"ImageOverlayEditorStyle",class:"gdg-i2iowwq",propsAsIs:!1});var Cr=J((e=>{(function(t,r){if(typeof define=="function"&&define.amd)define(["exports","react","prop-types"],r);else if(e!==void 0)r(e,An(),q0());else{var n={exports:{}};r(n.exports,t.react,t.propTypes),t.reactSwipe=n.exports}})(e,function(t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.setHasSupportToCaptureOption=f;var o=a(r),i=a(n);function a(y){return y&&y.__esModule?y:{default:y}}var l=Object.assign||function(y){for(var M=1;M<arguments.length;M++){var T=arguments[M];for(var P in T)Object.prototype.hasOwnProperty.call(T,P)&&(y[P]=T[P])}return y};function s(y,M){var T={};for(var P in y)M.indexOf(P)>=0||Object.prototype.hasOwnProperty.call(y,P)&&(T[P]=y[P]);return T}function c(y,M){if(!(y instanceof M))throw TypeError("Cannot call a class as a function")}var u=(function(){function y(M,T){for(var P=0;P<T.length;P++){var E=T[P];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(M,E.key,E)}}return function(M,T,P){return T&&y(M.prototype,T),P&&y(M,P),M}})();function h(y,M){if(!y)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:y}function g(y,M){if(typeof M!="function"&&M!==null)throw TypeError("Super expression must either be null or a function, not "+typeof M);y.prototype=Object.create(M&&M.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(y,M):y.__proto__=M)}var m=!1;function f(y){m=y}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){f(!0)}}))}catch{}function v(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return m?y:y.capture}function k(y){if("touches"in y){var M=y.touches[0],T=M.pageX,P=M.pageY;return{x:T,y:P}}var E=y.screenX,O=y.screenY;return{x:E,y:O}}var C=(function(y){g(M,y);function M(){var T;c(this,M);var P=[...arguments],E=h(this,(T=M.__proto__||Object.getPrototypeOf(M)).call.apply(T,[this].concat(P)));return E._handleSwipeStart=E._handleSwipeStart.bind(E),E._handleSwipeMove=E._handleSwipeMove.bind(E),E._handleSwipeEnd=E._handleSwipeEnd.bind(E),E._onMouseDown=E._onMouseDown.bind(E),E._onMouseMove=E._onMouseMove.bind(E),E._onMouseUp=E._onMouseUp.bind(E),E._setSwiperRef=E._setSwiperRef.bind(E),E}return u(M,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,v({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,v({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(T){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(T))}},{key:"_onMouseMove",value:function(T){this.mouseDown&&this._handleSwipeMove(T)}},{key:"_onMouseUp",value:function(T){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(T)}},{key:"_handleSwipeStart",value:function(T){var P=k(T),E=P.x,O=P.y;this.moveStart={x:E,y:O},this.props.onSwipeStart(T)}},{key:"_handleSwipeMove",value:function(T){if(this.moveStart){var P=k(T),E=P.x,O=P.y,L=E-this.moveStart.x,S=O-this.moveStart.y;this.moving=!0,this.props.onSwipeMove({x:L,y:S},T)&&T.cancelable&&T.preventDefault(),this.movePosition={deltaX:L,deltaY:S}}}},{key:"_handleSwipeEnd",value:function(T){this.props.onSwipeEnd(T);var P=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-P?this.props.onSwipeLeft(1,T):this.movePosition.deltaX>P&&this.props.onSwipeRight(1,T),this.movePosition.deltaY<-P?this.props.onSwipeUp(1,T):this.movePosition.deltaY>P&&this.props.onSwipeDown(1,T)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(T){this.swiper=T,this.props.innerRef(T)}},{key:"render",value:function(){var T=this.props;T.tagName;var P=T.className,E=T.style,O=T.children;T.allowMouseEvents,T.onSwipeUp,T.onSwipeDown,T.onSwipeLeft,T.onSwipeRight,T.onSwipeStart,T.onSwipeMove,T.onSwipeEnd,T.innerRef,T.tolerance;var L=s(T,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return o.default.createElement(this.props.tagName,l({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:P,style:E},L),O)}}]),M})(r.Component);C.displayName="ReactSwipe",C.propTypes={tagName:i.default.string,className:i.default.string,style:i.default.object,children:i.default.node,allowMouseEvents:i.default.bool,onSwipeUp:i.default.func,onSwipeDown:i.default.func,onSwipeLeft:i.default.func,onSwipeRight:i.default.func,onSwipeStart:i.default.func,onSwipeMove:i.default.func,onSwipeEnd:i.default.func,innerRef:i.default.func,tolerance:i.default.number.isRequired},C.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},t.default=C})})),Jr=J((e=>{(function(t,r){if(typeof define=="function"&&define.amd)define(["exports","./react-swipe"],r);else if(e!==void 0)r(e,Cr());else{var n={exports:{}};r(n.exports,t.reactSwipe),t.index=n.exports}})(e,function(t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=o(r);function o(i){return i&&i.__esModule?i:{default:i}}t.default=n.default})})),ps=J(((e,t)=>{(function(){var r={}.hasOwnProperty;function n(){for(var a="",l=0;l<arguments.length;l++){var s=arguments[l];s&&(a=i(a,o(s)))}return a}function o(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var s in a)r.call(a,s)&&a[s]&&(l=i(l,s));return l}function i(a,l){return l?a?a+" "+l:a+l:a}t!==void 0&&t.exports?(n.default=n,t.exports=n):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return n}):window.classNames=n})()})),Zi=J((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=r(ps());function r(o){return o&&o.__esModule?o:{default:o}}function n(o,i,a){return i in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a,o}e.default={ROOT:function(o){return(0,t.default)(n({"carousel-root":!0},o||"",!!o))},CAROUSEL:function(o){return(0,t.default)({carousel:!0,"carousel-slider":o})},WRAPPER:function(o,i){return(0,t.default)({"thumbs-wrapper":!o,"slider-wrapper":o,"axis-horizontal":i==="horizontal","axis-vertical":i!=="horizontal"})},SLIDER:function(o,i){return(0,t.default)({thumbs:!o,slider:o,animated:!i})},ITEM:function(o,i,a){return(0,t.default)({thumb:!o,slide:o,selected:i,previous:a})},ARROW_PREV:function(o){return(0,t.default)({"control-arrow control-prev":!0,"control-disabled":o})},ARROW_NEXT:function(o){return(0,t.default)({"control-arrow control-next":!0,"control-disabled":o})},DOT:function(o){return(0,t.default)({dot:!0,selected:o})}}})),ms=J((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.outerWidth=function(t){var r=t.offsetWidth,n=getComputedStyle(t);return r+=parseInt(n.marginLeft)+parseInt(n.marginRight),r}})),ei=J((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,r,n){var o=t===0?t:t+r,i=n==="horizontal"?[o,0,0]:[0,o,0],a="translate3d",l="("+i.join(",")+")";return a+l}})),el=J((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return window}})),tl=J((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=c(An()),r=l(Zi()),n=ms(),o=l(ei()),i=l(Jr()),a=l(el());function l(S){return S&&S.__esModule?S:{default:S}}function s(){if(typeof WeakMap!="function")return null;var S=new WeakMap;return s=function(){return S},S}function c(S){if(S&&S.__esModule)return S;if(S===null||u(S)!=="object"&&typeof S!="function")return{default:S};var R=s();if(R&&R.has(S))return R.get(S);var A={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in S)if(Object.prototype.hasOwnProperty.call(S,w)){var I=x?Object.getOwnPropertyDescriptor(S,w):null;I&&(I.get||I.set)?Object.defineProperty(A,w,I):A[w]=S[w]}return A.default=S,R&&R.set(S,A),A}function u(S){"@babel/helpers - typeof";return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},u(S)}function h(){return h=Object.assign||function(S){for(var R=1;R<arguments.length;R++){var A=arguments[R];for(var x in A)Object.prototype.hasOwnProperty.call(A,x)&&(S[x]=A[x])}return S},h.apply(this,arguments)}function g(S,R){if(!(S instanceof R))throw TypeError("Cannot call a class as a function")}function m(S,R){for(var A=0;A<R.length;A++){var x=R[A];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(S,x.key,x)}}function f(S,R,A){return R&&m(S.prototype,R),A&&m(S,A),S}function v(S,R){if(typeof R!="function"&&R!==null)throw TypeError("Super expression must either be null or a function");S.prototype=Object.create(R&&R.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),R&&k(S,R)}function k(S,R){return k=Object.setPrototypeOf||function(A,x){return A.__proto__=x,A},k(S,R)}function C(S){var R=T();return function(){var A=P(S),x;if(R){var w=P(this).constructor;x=Reflect.construct(A,arguments,w)}else x=A.apply(this,arguments);return y(this,x)}}function y(S,R){return R&&(u(R)==="object"||typeof R=="function")?R:M(S)}function M(S){if(S===void 0)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return S}function T(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function P(S){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(R){return R.__proto__||Object.getPrototypeOf(R)},P(S)}function E(S,R,A){return R in S?Object.defineProperty(S,R,{value:A,enumerable:!0,configurable:!0,writable:!0}):S[R]=A,S}var O=function(S){return S.hasOwnProperty("key")},L=(function(S){v(A,S);var R=C(A);function A(x){var w;return g(this,A),w=R.call(this,x),E(M(w),"itemsWrapperRef",void 0),E(M(w),"itemsListRef",void 0),E(M(w),"thumbsRef",void 0),E(M(w),"setItemsWrapperRef",function(I){w.itemsWrapperRef=I}),E(M(w),"setItemsListRef",function(I){w.itemsListRef=I}),E(M(w),"setThumbsRef",function(I,D){w.thumbsRef||(w.thumbsRef=[]),w.thumbsRef[D]=I}),E(M(w),"updateSizes",function(){if(!(!w.props.children||!w.itemsWrapperRef||!w.thumbsRef)){var I=t.Children.count(w.props.children),D=w.itemsWrapperRef.clientWidth,b=w.props.thumbWidth?w.props.thumbWidth:(0,n.outerWidth)(w.thumbsRef[0]),G=Math.floor(D/b),j=G<I,Z=j?I-G:0;w.setState(function(ee,X){return{itemSize:b,visibleItems:G,firstItem:j?w.getFirstItem(X.selectedItem):0,lastPosition:Z,showArrows:j}})}}),E(M(w),"handleClickItem",function(I,D,b){if(!O(b)||b.key==="Enter"){var G=w.props.onSelectItem;typeof G=="function"&&G(I,D)}}),E(M(w),"onSwipeStart",function(){w.setState({swiping:!0})}),E(M(w),"onSwipeEnd",function(){w.setState({swiping:!1})}),E(M(w),"onSwipeMove",function(I){var D=I.x;if(!w.state.itemSize||!w.itemsWrapperRef||!w.state.visibleItems)return!1;var b=0,G=t.Children.count(w.props.children),j=-(w.state.firstItem*100)/w.state.visibleItems,Z=-Math.max(G-w.state.visibleItems,0)*100/w.state.visibleItems;j===b&&D>0&&(D=0),j===Z&&D<0&&(D=0);var ee=w.itemsWrapperRef.clientWidth,X=j+100/(ee/D);return w.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(ce){w.itemsListRef.style[ce]=(0,o.default)(X,"%",w.props.axis)}),!0}),E(M(w),"slideRight",function(I){w.moveTo(w.state.firstItem-(typeof I=="number"?I:1))}),E(M(w),"slideLeft",function(I){w.moveTo(w.state.firstItem+(typeof I=="number"?I:1))}),E(M(w),"moveTo",function(I){I=I<0?0:I,I=I>=w.state.lastPosition?w.state.lastPosition:I,w.setState({firstItem:I})}),w.state={selectedItem:x.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},w}return f(A,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(x){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==x.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,a.default)().addEventListener("resize",this.updateSizes),(0,a.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,a.default)().removeEventListener("resize",this.updateSizes),(0,a.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(x){var w=x;return x>=this.state.lastPosition&&(w=this.state.lastPosition),x<this.state.firstItem+this.state.visibleItems&&(w=this.state.firstItem),x<this.state.firstItem&&(w=x),w}},{key:"renderItems",value:function(){var x=this;return this.props.children.map(function(w,I){var D=r.default.ITEM(!1,I===x.state.selectedItem),b={key:I,ref:function(G){return x.setThumbsRef(G,I)},className:D,onClick:x.handleClickItem.bind(x,I,x.props.children[I]),onKeyDown:x.handleClickItem.bind(x,I,x.props.children[I]),"aria-label":`${x.props.labels.item} ${I+1}`,style:{width:x.props.thumbWidth}};return t.default.createElement("li",h({},b,{role:"button",tabIndex:0}),w)})}},{key:"render",value:function(){var x=this;if(!this.props.children)return null;var w=t.Children.count(this.props.children)>1,I=this.state.showArrows&&this.state.firstItem>0,D=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,b={},G=-this.state.firstItem*(this.state.itemSize||0),j=(0,o.default)(G,"px",this.props.axis),Z=this.props.transitionTime+"ms";return b={WebkitTransform:j,MozTransform:j,MsTransform:j,OTransform:j,transform:j,msTransform:j,WebkitTransitionDuration:Z,MozTransitionDuration:Z,MsTransitionDuration:Z,OTransitionDuration:Z,transitionDuration:Z,msTransitionDuration:Z},t.default.createElement("div",{className:r.default.CAROUSEL(!1)},t.default.createElement("div",{className:r.default.WRAPPER(!1),ref:this.setItemsWrapperRef},t.default.createElement("button",{type:"button",className:r.default.ARROW_PREV(!I),onClick:function(){return x.slideRight()},"aria-label":this.props.labels.leftArrow}),w?t.default.createElement(i.default,{tagName:"ul",className:r.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:b,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):t.default.createElement("ul",{className:r.default.SLIDER(!1,this.state.swiping),ref:function(ee){return x.setItemsListRef(ee)},style:b},this.renderItems()),t.default.createElement("button",{type:"button",className:r.default.ARROW_NEXT(!D),onClick:function(){return x.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),A})(t.Component);e.default=L,E(L,"displayName","Thumbs"),E(L,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350})})),vs=J((e=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return document}})),rl=J((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=An(),r=n(ei());function n(o){return o&&o.__esModule?o:{default:o}}e.noop=function(){},e.defaultStatusFormatter=function(o,i){return`${o} of ${i}`},e.isKeyboardEvent=function(o){return o?o.hasOwnProperty("key"):!1},e.getPosition=function(o,i){if(i.infiniteLoop&&++o,o===0)return 0;var a=t.Children.count(i.children);if(i.centerMode&&i.axis==="horizontal"){var l=-o*i.centerSlidePercentage,s=a-1;return o&&(o!==s||i.infiniteLoop)?l+=(100-i.centerSlidePercentage)/2:o===s&&(l+=100-i.centerSlidePercentage),l}return-o*100},e.setPosition=function(o,i){var a={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(l){a[l]=(0,r.default)(o,"%",i)}),a}})),ws=J((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=An(),r=o(ei()),n=rl();function o(s){return s&&s.__esModule?s:{default:s}}function i(s,c){var u=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);c&&(h=h.filter(function(g){return Object.getOwnPropertyDescriptor(s,g).enumerable})),u.push.apply(u,h)}return u}function a(s){for(var c=1;c<arguments.length;c++){var u=arguments[c]==null?{}:arguments[c];c%2?i(Object(u),!0).forEach(function(h){l(s,h,u[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(u)):i(Object(u)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(u,h))})}return s}function l(s,c,u){return c in s?Object.defineProperty(s,c,{value:u,enumerable:!0,configurable:!0,writable:!0}):s[c]=u,s}e.slideAnimationHandler=function(s,c){var u={},h=c.selectedItem,g=h,m=t.Children.count(s.children)-1;if(s.infiniteLoop&&(h<0||h>m))return g<0?s.centerMode&&s.centerSlidePercentage&&s.axis==="horizontal"?u.itemListStyle=(0,n.setPosition)(-(m+2)*s.centerSlidePercentage-(100-s.centerSlidePercentage)/2,s.axis):u.itemListStyle=(0,n.setPosition)(-(m+2)*100,s.axis):g>m&&(u.itemListStyle=(0,n.setPosition)(0,s.axis)),u;var f=(0,n.getPosition)(h,s),v=(0,r.default)(f,"%",s.axis),k=s.transitionTime+"ms";return u.itemListStyle={WebkitTransform:v,msTransform:v,OTransform:v,transform:v},c.swiping||(u.itemListStyle=a(a({},u.itemListStyle),{},{WebkitTransitionDuration:k,MozTransitionDuration:k,OTransitionDuration:k,transitionDuration:k,msTransitionDuration:k})),u},e.slideSwipeAnimationHandler=function(s,c,u,h){var g={},m=c.axis==="horizontal",f=t.Children.count(c.children),v=0,k=(0,n.getPosition)(u.selectedItem,c),C=c.infiniteLoop?(0,n.getPosition)(f-1,c)-100:(0,n.getPosition)(f-1,c),y=m?s.x:s.y,M=y;k===v&&y>0&&(M=0),k===C&&y<0&&(M=0);var T=k+100/(u.itemSize/M),P=Math.abs(y)>c.swipeScrollTolerance;return c.infiniteLoop&&P&&(u.selectedItem===0&&T>-100?T-=f*100:u.selectedItem===f-1&&T<-f*100&&(T+=f*100)),(!c.preventMovementUntilSwipeScrollTolerance||P||u.swipeMovementStarted)&&(u.swipeMovementStarted||h({swipeMovementStarted:!0}),g.itemListStyle=(0,n.setPosition)(T,c.axis)),P&&!u.cancelClick&&h({cancelClick:!0}),g},e.slideStopSwipingHandler=function(s,c){var u=(0,n.getPosition)(c.selectedItem,s);return{itemListStyle:(0,n.setPosition)(u,s.axis)}},e.fadeAnimationHandler=function(s,c){var u=s.transitionTime+"ms",h="ease-in-out",g={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:h,msTransitionTimingFunction:h,MozTransitionTimingFunction:h,WebkitTransitionTimingFunction:h,OTransitionTimingFunction:h};return c.swiping||(g=a(a({},g),{},{WebkitTransitionDuration:u,MozTransitionDuration:u,OTransitionDuration:u,transitionDuration:u,msTransitionDuration:u})),{slideStyle:g,selectedStyle:a(a({},g),{},{opacity:1,position:"relative"}),prevStyle:a({},g)}}})),ys=J((e=>{Object.defineProperty(e,"__esModule",{value:!0});var t=h(An()),r=c(Jr()),n=c(Zi()),o=c(tl()),i=c(vs()),a=c(el()),l=rl(),s=ws();function c(x){return x&&x.__esModule?x:{default:x}}function u(){if(typeof WeakMap!="function")return null;var x=new WeakMap;return u=function(){return x},x}function h(x){if(x&&x.__esModule)return x;if(x===null||g(x)!=="object"&&typeof x!="function")return{default:x};var w=u();if(w&&w.has(x))return w.get(x);var I={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var b in x)if(Object.prototype.hasOwnProperty.call(x,b)){var G=D?Object.getOwnPropertyDescriptor(x,b):null;G&&(G.get||G.set)?Object.defineProperty(I,b,G):I[b]=x[b]}return I.default=x,w&&w.set(x,I),I}function g(x){"@babel/helpers - typeof";return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},g(x)}function m(){return m=Object.assign||function(x){for(var w=1;w<arguments.length;w++){var I=arguments[w];for(var D in I)Object.prototype.hasOwnProperty.call(I,D)&&(x[D]=I[D])}return x},m.apply(this,arguments)}function f(x,w){var I=Object.keys(x);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(x);w&&(D=D.filter(function(b){return Object.getOwnPropertyDescriptor(x,b).enumerable})),I.push.apply(I,D)}return I}function v(x){for(var w=1;w<arguments.length;w++){var I=arguments[w]==null?{}:arguments[w];w%2?f(Object(I),!0).forEach(function(D){R(x,D,I[D])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(I)):f(Object(I)).forEach(function(D){Object.defineProperty(x,D,Object.getOwnPropertyDescriptor(I,D))})}return x}function k(x,w){if(!(x instanceof w))throw TypeError("Cannot call a class as a function")}function C(x,w){for(var I=0;I<w.length;I++){var D=w[I];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(x,D.key,D)}}function y(x,w,I){return w&&C(x.prototype,w),I&&C(x,I),x}function M(x,w){if(typeof w!="function"&&w!==null)throw TypeError("Super expression must either be null or a function");x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),w&&T(x,w)}function T(x,w){return T=Object.setPrototypeOf||function(I,D){return I.__proto__=D,I},T(x,w)}function P(x){var w=L();return function(){var I=S(x),D;if(w){var b=S(this).constructor;D=Reflect.construct(I,arguments,b)}else D=I.apply(this,arguments);return E(this,D)}}function E(x,w){return w&&(g(w)==="object"||typeof w=="function")?w:O(x)}function O(x){if(x===void 0)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function L(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function S(x){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(w){return w.__proto__||Object.getPrototypeOf(w)},S(x)}function R(x,w,I){return w in x?Object.defineProperty(x,w,{value:I,enumerable:!0,configurable:!0,writable:!0}):x[w]=I,x}var A=(function(x){M(I,x);var w=P(I);function I(D){var b;k(this,I),b=w.call(this,D),R(O(b),"thumbsRef",void 0),R(O(b),"carouselWrapperRef",void 0),R(O(b),"listRef",void 0),R(O(b),"itemsRef",void 0),R(O(b),"timer",void 0),R(O(b),"animationHandler",void 0),R(O(b),"setThumbsRef",function(j){b.thumbsRef=j}),R(O(b),"setCarouselWrapperRef",function(j){b.carouselWrapperRef=j}),R(O(b),"setListRef",function(j){b.listRef=j}),R(O(b),"setItemsRef",function(j,Z){b.itemsRef||(b.itemsRef=[]),b.itemsRef[Z]=j}),R(O(b),"autoPlay",function(){t.Children.count(b.props.children)<=1||(b.clearAutoPlay(),b.props.autoPlay&&(b.timer=setTimeout(function(){b.increment()},b.props.interval)))}),R(O(b),"clearAutoPlay",function(){b.timer&&clearTimeout(b.timer)}),R(O(b),"resetAutoPlay",function(){b.clearAutoPlay(),b.autoPlay()}),R(O(b),"stopOnHover",function(){b.setState({isMouseEntered:!0},b.clearAutoPlay)}),R(O(b),"startOnLeave",function(){b.setState({isMouseEntered:!1},b.autoPlay)}),R(O(b),"isFocusWithinTheCarousel",function(){return b.carouselWrapperRef?!!((0,i.default)().activeElement===b.carouselWrapperRef||b.carouselWrapperRef.contains((0,i.default)().activeElement)):!1}),R(O(b),"navigateWithKeyboard",function(j){if(b.isFocusWithinTheCarousel()){var Z=b.props.axis==="horizontal",ee={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},X=Z?ee.ArrowRight:ee.ArrowDown,ce=Z?ee.ArrowLeft:ee.ArrowUp;X===j.keyCode?b.increment():ce===j.keyCode&&b.decrement()}}),R(O(b),"updateSizes",function(){if(!(!b.state.initialized||!b.itemsRef||b.itemsRef.length===0)){var j=b.props.axis==="horizontal",Z=b.itemsRef[0];if(Z){var ee=j?Z.clientWidth:Z.clientHeight;b.setState({itemSize:ee}),b.thumbsRef&&b.thumbsRef.updateSizes()}}}),R(O(b),"setMountState",function(){b.setState({hasMount:!0}),b.updateSizes()}),R(O(b),"handleClickItem",function(j,Z){if(t.Children.count(b.props.children)!==0){if(b.state.cancelClick){b.setState({cancelClick:!1});return}b.props.onClickItem(j,Z),j!==b.state.selectedItem&&b.setState({selectedItem:j})}}),R(O(b),"handleOnChange",function(j,Z){t.Children.count(b.props.children)<=1||b.props.onChange(j,Z)}),R(O(b),"handleClickThumb",function(j,Z){b.props.onClickThumb(j,Z),b.moveTo(j)}),R(O(b),"onSwipeStart",function(j){b.setState({swiping:!0}),b.props.onSwipeStart(j)}),R(O(b),"onSwipeEnd",function(j){b.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),b.props.onSwipeEnd(j),b.clearAutoPlay(),b.state.autoPlay&&b.autoPlay()}),R(O(b),"onSwipeMove",function(j,Z){b.props.onSwipeMove(Z);var ee=b.props.swipeAnimationHandler(j,b.props,b.state,b.setState.bind(O(b)));return b.setState(v({},ee)),!!Object.keys(ee).length}),R(O(b),"decrement",function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;b.moveTo(b.state.selectedItem-(typeof j=="number"?j:1))}),R(O(b),"increment",function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;b.moveTo(b.state.selectedItem+(typeof j=="number"?j:1))}),R(O(b),"moveTo",function(j){if(typeof j=="number"){var Z=t.Children.count(b.props.children)-1;j<0&&(j=b.props.infiniteLoop?Z:0),j>Z&&(j=b.props.infiniteLoop?0:Z),b.selectItem({selectedItem:j}),b.state.autoPlay&&b.state.isMouseEntered===!1&&b.resetAutoPlay()}}),R(O(b),"onClickNext",function(){b.increment(1)}),R(O(b),"onClickPrev",function(){b.decrement(1)}),R(O(b),"onSwipeForward",function(){b.increment(1),b.props.emulateTouch&&b.setState({cancelClick:!0})}),R(O(b),"onSwipeBackwards",function(){b.decrement(1),b.props.emulateTouch&&b.setState({cancelClick:!0})}),R(O(b),"changeItem",function(j){return function(Z){(!(0,l.isKeyboardEvent)(Z)||Z.key==="Enter")&&b.moveTo(j)}}),R(O(b),"selectItem",function(j){b.setState(v({previousItem:b.state.selectedItem},j),function(){b.setState(b.animationHandler(b.props,b.state))}),b.handleOnChange(j.selectedItem,t.Children.toArray(b.props.children)[j.selectedItem])}),R(O(b),"getInitialImage",function(){var j=b.props.selectedItem,Z=b.itemsRef&&b.itemsRef[j];return(Z&&Z.getElementsByTagName("img")||[])[0]}),R(O(b),"getVariableItemHeight",function(j){var Z=b.itemsRef&&b.itemsRef[j];if(b.state.hasMount&&Z&&Z.children.length){var ee=Z.children[0].getElementsByTagName("img")||[];if(ee.length>0){var X=ee[0];X.complete||X.addEventListener("load",function oe(){b.forceUpdate(),X.removeEventListener("load",oe)})}var ce=(ee[0]||Z.children[0]).clientHeight;return ce>0?ce:null}return null});var G={initialized:!1,previousItem:D.selectedItem,selectedItem:D.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:D.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return b.animationHandler=typeof D.animationHandler=="function"&&D.animationHandler||D.animationHandler==="fade"&&s.fadeAnimationHandler||s.slideAnimationHandler,b.state=v(v({},G),b.animationHandler(D,G)),b}return y(I,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(D,b){!D.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!D.autoFocus&&this.props.autoFocus&&this.forceFocus(),b.swiping&&!this.state.swiping&&this.setState(v({},this.props.stopSwipingHandler(this.props,this.state))),(D.selectedItem!==this.props.selectedItem||D.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),D.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var D=this;this.bindEvents(),this.state.autoPlay&&t.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var b=D.getInitialImage();b&&!b.complete?b.addEventListener("load",D.setMountState):D.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var D=this.carouselWrapperRef;this.props.stopOnHover&&D&&(D.addEventListener("mouseenter",this.stopOnHover),D.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var D=this.carouselWrapperRef;this.props.stopOnHover&&D&&(D.removeEventListener("mouseenter",this.stopOnHover),D.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,a.default)().addEventListener("resize",this.updateSizes),(0,a.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,i.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,a.default)().removeEventListener("resize",this.updateSizes),(0,a.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var D=this.getInitialImage();D&&D.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,i.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var D;(D=this.carouselWrapperRef)==null||D.focus()}},{key:"renderItems",value:function(D){var b=this;return this.props.children?t.Children.map(this.props.children,function(G,j){var Z=j===b.state.selectedItem,ee=j===b.state.previousItem,X=Z&&b.state.selectedStyle||ee&&b.state.prevStyle||b.state.slideStyle||{};b.props.centerMode&&b.props.axis==="horizontal"&&(X=v(v({},X),{},{minWidth:b.props.centerSlidePercentage+"%"})),b.state.swiping&&b.state.swipeMovementStarted&&(X=v(v({},X),{},{pointerEvents:"none"}));var ce={ref:function(oe){return b.setItemsRef(oe,j)},key:"itemKey"+j+(D?"clone":""),className:n.default.ITEM(!0,j===b.state.selectedItem,j===b.state.previousItem),onClick:b.handleClickItem.bind(b,j,G),style:X};return t.default.createElement("li",ce,b.props.renderItem(G,{isSelected:j===b.state.selectedItem,isPrevious:j===b.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var D=this,b=this.props,G=b.showIndicators,j=b.labels,Z=b.renderIndicator,ee=b.children;return G?t.default.createElement("ul",{className:"control-dots"},t.Children.map(ee,function(X,ce){return Z&&Z(D.changeItem(ce),ce===D.state.selectedItem,ce,j.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?t.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,t.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||t.Children.count(this.props.children)===0?null:t.default.createElement(o.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var D=this;if(!this.props.children||t.Children.count(this.props.children)===0)return null;var b=this.props.swipeable&&t.Children.count(this.props.children)>1,G=this.props.axis==="horizontal",j=this.props.showArrows&&t.Children.count(this.props.children)>1,Z=j&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,ee=j&&(this.state.selectedItem<t.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,X=this.renderItems(!0),ce=X.shift(),oe=X.pop(),de={className:n.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},Oe={};return G?(de.onSwipeLeft=this.onSwipeForward,de.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight&&(Oe.height=this.getVariableItemHeight(this.state.selectedItem)||"auto")):(de.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,de.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,de.style=v(v({},de.style),{},{height:this.state.itemSize}),Oe.height=this.state.itemSize),t.default.createElement("div",{"aria-label":this.props.ariaLabel,className:n.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},t.default.createElement("div",{className:n.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,Z,this.props.labels.leftArrow),t.default.createElement("div",{className:n.default.WRAPPER(!0,this.props.axis),style:Oe},b?t.default.createElement(r.default,m({tagName:"ul",innerRef:this.setListRef},de,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&oe,this.renderItems(),this.props.infiniteLoop&&ce):t.default.createElement("ul",{className:n.default.SLIDER(!0,this.state.swiping),ref:function(te){return D.setListRef(te)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&oe,this.renderItems(),this.props.infiniteLoop&&ce)),this.props.renderArrowNext(this.onClickNext,ee,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),I})(t.default.Component);e.default=A,R(A,"displayName","Carousel"),R(A,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:l.noop,onClickThumb:l.noop,onChange:l.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(x,w,I){return t.default.createElement("button",{type:"button","aria-label":I,className:n.default.ARROW_PREV(!w),onClick:x})},renderArrowNext:function(x,w,I){return t.default.createElement("button",{type:"button","aria-label":I,className:n.default.ARROW_NEXT(!w),onClick:x})},renderIndicator:function(x,w,I,D){return t.default.createElement("li",{className:n.default.DOT(w),onClick:x,onKeyDown:x,value:I,key:I,role:"button",tabIndex:0,"aria-label":`${D} ${I+1}`})},renderItem:function(x){return x},renderThumbs:function(x){var w=t.Children.map(x,function(I){var D=I;if(I.type!=="img"&&(D=t.Children.toArray(I.props.children).find(function(b){return b.type==="img"})),D)return D});return w.filter(function(I){return I}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):w},statusFormatter:l.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:s.slideSwipeAnimationHandler,stopSwipingHandler:s.slideStopSwipingHandler})})),bs=J((()=>{})),xs=J((e=>{Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Carousel",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"CarouselProps",{enumerable:!0,get:function(){return r.CarouselProps}}),Object.defineProperty(e,"Thumbs",{enumerable:!0,get:function(){return n.default}});var t=o(ys()),r=bs(),n=o(tl());function o(i){return i&&i.__esModule?i:{default:i}}})),Cs=J(((e,t)=>{var r=pn();t.exports=function(){return r.Date.now()}})),Ss=J(((e,t)=>{var r=/\s/;function n(o){for(var i=o.length;i--&&r.test(o.charAt(i)););return i}t.exports=n})),ks=J(((e,t)=>{var r=Ss(),n=/^\s+/;function o(i){return i&&i.slice(0,r(i)+1).replace(n,"")}t.exports=o})),ti=J(((e,t)=>{var r=ks(),n=co(),o=Z0(),i=NaN,a=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;function u(h){if(typeof h=="number")return h;if(o(h))return i;if(n(h)){var g=typeof h.valueOf=="function"?h.valueOf():h;h=n(g)?g+"":g}if(typeof h!="string")return h===0?h:+h;h=r(h);var m=l.test(h);return m||s.test(h)?c(h.slice(2),m?2:8):a.test(h)?i:+h}t.exports=u})),ri=J(((e,t)=>{var r=co(),n=Cs(),o=ti(),i="Expected a function",a=Math.max,l=Math.min;function s(c,u,h){var g,m,f,v,k,C,y=0,M=!1,T=!1,P=!0;if(typeof c!="function")throw TypeError(i);u=o(u)||0,r(h)&&(M=!!h.leading,T="maxWait"in h,f=T?a(o(h.maxWait)||0,u):f,P="trailing"in h?!!h.trailing:P);function E(D){var b=g,G=m;return g=m=void 0,y=D,v=c.apply(G,b),v}function O(D){return y=D,k=setTimeout(R,u),M?E(D):v}function L(D){var b=D-C,G=D-y,j=u-b;return T?l(j,f-G):j}function S(D){var b=D-C,G=D-y;return C===void 0||b>=u||b<0||T&&G>=f}function R(){var D=n();if(S(D))return A(D);k=setTimeout(R,L(D))}function A(D){return k=void 0,P&&g?E(D):(g=m=void 0,v)}function x(){k!==void 0&&clearTimeout(k),y=0,g=C=m=k=void 0}function w(){return k===void 0?v:A(n())}function I(){var D=n(),b=S(D);if(g=arguments,m=this,C=D,b){if(k===void 0)return O(C);if(T)return clearTimeout(k),k=setTimeout(R,u),E(C)}return k===void 0&&(k=setTimeout(R,u)),v}return I.cancel=x,I.flush=w,I}t.exports=s})),d=Kt(An()),Ms=Kt(ri());function _t(e,t,r,n,o=!1){let i=d.useRef();i.current=t,d.useEffect(()=>{if(r===null||r.addEventListener===void 0)return;let a=r,l=s=>{var c;(c=i.current)==null||c.call(a,s)};return a.addEventListener(e,l,{passive:n,capture:o}),()=>{a.removeEventListener(e,l,{capture:o})}},[e,r,n,o])}function zr(e,t){return e===void 0?void 0:t}var Rs=Math.PI;function nl(e){return e*Rs/180}const ol=(e,t,r)=>({x1:e-r/2,y1:t-r/2,x2:e+r/2,y2:t+r/2}),il=(e,t,r,n,o)=>{switch(e){case"left":return Math.floor(t)+n+o/2;case"center":return Math.floor(t+r/2);case"right":return Math.floor(t+r)-n-o/2}},ll=(e,t,r)=>Math.min(e,t-r*2),al=(e,t,r)=>r.x1<=e&&e<=r.x2&&r.y1<=t&&t<=r.y2,ni=e=>{let t=e.fgColor??"currentColor";return d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M12.7073 7.05029C7.87391 11.8837 10.4544 9.30322 6.03024 13.7273C5.77392 13.9836 5.58981 14.3071 5.50189 14.6587L4.52521 18.5655C4.38789 19.1148 4.88543 19.6123 5.43472 19.475L9.34146 18.4983C9.69313 18.4104 10.0143 18.2286 10.2706 17.9722L16.9499 11.2929",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}),d.createElement("path",{d:"M20.4854 4.92901L19.0712 3.5148C18.2901 2.73375 17.0238 2.73375 16.2428 3.5148L14.475 5.28257C15.5326 7.71912 16.4736 8.6278 18.7176 9.52521L20.4854 7.75744C21.2665 6.97639 21.2665 5.71006 20.4854 4.92901Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}))},Es=e=>{let t=e.fgColor??"currentColor";return d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M19 6L10.3802 17L5.34071 11.8758",vectorEffect:"non-scaling-stroke",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function Is(e,t,r){let[n,o]=d.useState(e),i=d.useRef(!0);d.useEffect(()=>()=>{i.current=!1},[]);let a=d.useRef((0,Ms.default)(l=>{i.current&&o(l)},r));return d.useLayoutEffect(()=>{i.current&&a.current(()=>e())},t),n}var Ts=RegExp("^[^A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF]*[\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC]");function oi(e){return Ts.test(e)?"rtl":"not-rtl"}var go=void 0;function ii(){if(typeof document>"u")return 0;if(go!==void 0)return go;let e=document.createElement("p");e.style.width="100%",e.style.height="200px";let t=document.createElement("div");t.id="testScrollbar",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.append(e),document.body.append(t);let r=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return r===n&&(n=t.clientWidth),t.remove(),go=r-n,go}var Qr=Symbol();function Ps(e){let t=d.useRef([Qr,e]);t.current[1]!==e&&(t.current[0]=e),t.current[1]=e;let[r,n]=d.useState(e),[,o]=d.useState(),i=d.useCallback(l=>{let s=t.current[0];s!==Qr&&(l=typeof l=="function"?l(s):l,l===s)||(s!==Qr&&o({}),n(c=>typeof l=="function"?l(s===Qr?c:s):l),t.current[0]=Qr)},[]),a=d.useCallback(()=>{t.current[0]=Qr,o({})},[]);return[t.current[0]===Qr?r:t.current[0],i,a]}function sl(e){if(e.length===0)return"";let t=0,r=0;for(let n of e){if(r+=n.length,r>1e4)break;t++}return e.slice(0,t).join(", ")}function Os(e){let t=d.useRef(e);return Jo(e,t.current)||(t.current=e),t.current}var Ds=Kt(xs());const Hs=e=>{let{urls:t,canWrite:r,onEditClick:n,renderImage:o}=e,i=t.filter(l=>l!=="");if(i.length===0)return null;let a=i.length>1;return d.createElement(qr,{"data-testid":"GDG-default-image-overlay-editor"},d.createElement(Ds.Carousel,{showArrows:a,showThumbs:!1,swipeable:a,emulateTouch:a,infiniteLoop:a},i.map(l=>{let s=(o==null?void 0:o(l))??d.createElement("img",{draggable:!1,src:l});return d.createElement("div",{className:"gdg-centering-container",key:l},s)})),r&&n&&d.createElement("button",{className:"gdg-edit-icon",onClick:n},d.createElement(ni,null)))},zs=Zt("div")({name:"MarkdownContainer",class:"gdg-mnuv029",propsAsIs:!1});var As=class extends d.PureComponent{constructor(){super(...arguments);rt(this,"targetElement",null);rt(this,"containerRefHook",t=>{this.targetElement=t,this.renderMarkdownIntoDiv()})}renderMarkdownIntoDiv(){let{targetElement:t,props:r}=this;if(t===null)return;let{contents:n,createNode:o}=r,i=H0(n),a=document.createRange();a.selectNodeContents(t),a.deleteContents();let l=o==null?void 0:o(i);if(l===void 0){let c=document.createElement("template");c.innerHTML=i,l=c.content}t.append(l);let s=t.getElementsByTagName("a");for(let c of s)c.target="_blank",c.rel="noreferrer noopener"}render(){return this.renderMarkdownIntoDiv(),d.createElement(zs,{ref:this.containerRefHook})}};const Ls=Zt("textarea")({name:"InputBox",class:"gdg-izpuzkl",propsAsIs:!1}),Fs=Zt("div")({name:"ShadowBox",class:"gdg-s69h75o",propsAsIs:!1}),js=Zt("div")({name:"GrowingEntryStyle",class:"gdg-g1y0xocz",propsAsIs:!1});var cl=0;const po=e=>{let{placeholder:t,value:r,onKeyDown:n,highlight:o,altNewline:i,validatedSelection:a,...l}=e,{onChange:s,className:c}=l,u=d.useRef(null),h=r??"";Qt(s!==void 0,"GrowingEntry must be a controlled input area");let[g]=d.useState(()=>"input-box-"+(cl=(cl+1)%1e7));d.useEffect(()=>{let f=u.current;if(f===null||f.disabled)return;let v=h.toString().length;f.focus(),f.setSelectionRange(o?0:v,v)},[]),d.useLayoutEffect(()=>{var f;if(a!==void 0){let v=typeof a=="number"?[a,null]:a;(f=u.current)==null||f.setSelectionRange(v[0],v[1])}},[a]);let m=d.useCallback(f=>{f.key==="Enter"&&f.shiftKey&&i===!0||(n==null||n(f))},[i,n]);return d.createElement(js,{className:"gdg-growing-entry"},d.createElement(Fs,{className:c},h+`
`),d.createElement(Ls,{...l,className:(c??"")+" gdg-input",id:g,ref:u,onKeyDown:m,value:h,placeholder:t,dir:"auto"}))};var vn=new Map,wn=new Map,li=new Map;function _s(){vn.clear(),li.clear(),wn.clear()}function Ns(e,t,r,n,o){let i=0,a={};for(let s of e)i+=r.get(s)??o,a[s]=(a[s]??0)+1;let l=t-i;for(let s of Object.keys(a)){let c=a[s],u=r.get(s)??o,h=u*c/i,g=l*h*n/c,m=u+g;r.set(s,m)}}function Bs(e,t){let r=new Map,n=0;for(let l of"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890,.-+=?"){let s=e.measureText(l).width;r.set(l,s),n+=s}let o=n/r.size,i=(t/o+3)/4,a=r.keys();for(let l of a)r.set(l,(r.get(l)??o)*i);return r}function jn(e,t,r,n){let o=wn.get(r);if(n&&o!==void 0&&o.count>2e4){let l=li.get(r);if(l===void 0&&(l=Bs(e,o.size),li.set(r,l)),o.count>5e5){let c=0;for(let u of t)c+=l.get(u)??o.size;return c*1.01}let s=e.measureText(t);return Ns(t,s.width,l,Math.max(.05,1-o.count/2e5),o.size),wn.set(r,{count:o.count+t.length,size:o.size}),s.width}let i=e.measureText(t),a=i.width/t.length;if(((o==null?void 0:o.count)??0)>2e4)return i.width;if(o===void 0)wn.set(r,{count:t.length,size:a});else{let l=a-o.size,s=t.length/(o.count+t.length),c=o.size+l*s;wn.set(r,{count:o.count+t.length,size:c})}return i.width}function Ws(e,t,r,n,o,i,a,l){if(t.length<=1)return t.length;if(o<r)return-1;let s=Math.floor(r/o*i),c=jn(e,t.slice(0,Math.max(0,s)),n,a),u=l==null?void 0:l(t);if(c!==r)if(c<r){for(;c<r;)s++,c=jn(e,t.slice(0,Math.max(0,s)),n,a);s--}else for(;c>r;){let h=u===void 0?t.lastIndexOf(" ",s-1):0;h>0?s=h:s--,c=jn(e,t.slice(0,Math.max(0,s)),n,a)}if(t[s]!==" "){let h=0;if(u===void 0)h=t.lastIndexOf(" ",s);else for(let g of u){if(g>s)break;h=g}h>0&&(s=h)}return s}function $s(e,t,r,n,o,i){let a=`${t}_${r}_${n}px`,l=vn.get(a);if(l!==void 0)return l;if(n<=0)return[];let s=[],c=t.split(`
`),u=wn.get(r),h=u===void 0?t.length:n/u.size*1.5,g=o&&u!==void 0&&u.count>2e4;for(let m of c){let f=jn(e,m.slice(0,Math.max(0,h)),r,g),v=Math.min(m.length,h);if(f<=n)s.push(m);else{for(;f>n;){let k=Ws(e,m,n,r,f,v,g,i),C=m.slice(0,Math.max(0,k));m=m.slice(C.length),s.push(C),f=jn(e,m.slice(0,Math.max(0,h)),r,g),v=Math.min(m.length,h)}f>0&&s.push(m)}}return s=s.map((m,f)=>f===0?m.trimEnd():m.trim()),vn.set(a,s),vn.size>500&&vn.delete(vn.keys().next().value),s}function Ys(e,t){return d.useMemo(()=>e.map((r,n)=>({group:r.group,grow:r.grow,hasMenu:r.hasMenu,icon:r.icon,id:r.id,menuIcon:r.menuIcon,overlayIcon:r.overlayIcon,sourceIndex:n,sticky:n<t,indicatorIcon:r.indicatorIcon,style:r.style,themeOverride:r.themeOverride,title:r.title,trailingRowOptions:r.trailingRowOptions,width:r.width,growOffset:r.growOffset,rowMarker:r.rowMarker,rowMarkerChecked:r.rowMarkerChecked,headerRowMarkerTheme:r.headerRowMarkerTheme,headerRowMarkerAlwaysVisible:r.headerRowMarkerAlwaysVisible,headerRowMarkerDisabled:r.headerRowMarkerDisabled})),[e,t])}function Ks(e,t){let[r,n]=t;if(e.columns.hasIndex(r)||e.rows.hasIndex(n))return!0;if(e.current!==void 0){if(Nn(e.current.cell,t))return!0;let o=[e.current.range,...e.current.rangeStack];for(let i of o)if(r>=i.x&&r<i.x+i.width&&n>=i.y&&n<i.y+i.height)return!0}return!1}function _n(e,t){return(e??"")===(t??"")}function Xs(e,t,r){return r.current===void 0||e[1]!==r.current.cell[1]?!1:t.span===void 0?r.current.cell[0]===e[0]:r.current.cell[0]>=t.span[0]&&r.current.cell[0]<=t.span[1]}function ul(e,t){let[r,n]=e;return r>=t.x&&r<t.x+t.width&&n>=t.y&&n<t.y+t.height}function Nn(e,t){return(e==null?void 0:e[0])===(t==null?void 0:t[0])&&(e==null?void 0:e[1])===(t==null?void 0:t[1])}function dl(e){return[e.x+e.width-1,e.y+e.height-1]}function hl(e,t,r){let n=r.x,o=r.x+r.width-1,i=r.y,a=r.y+r.height-1,[l,s]=e;if(s<i||s>a)return!1;if(t.span===void 0)return l>=n&&l<=o;let[c,u]=t.span;return c>=n&&c<=o||u>=n&&c<=o||c<n&&u>o}function Vs(e,t,r,n){let o=0;if(r.current===void 0)return o;let i=r.current.range;(n||i.height*i.width>1)&&hl(e,t,i)&&o++;for(let a of r.current.rangeStack)hl(e,t,a)&&o++;return o}function fl(e,t){let r=e;if(t!==void 0){let n=[...e],o=r[t.src];t.src>t.dest?(n.splice(t.src,1),n.splice(t.dest,0,o)):(n.splice(t.dest+1,0,o),n.splice(t.src,1)),n=n.map((i,a)=>({...i,sticky:e[a].sticky})),r=n}return r}function yn(e,t){let r=0,n=fl(e,t);for(let o=0;o<n.length;o++){let i=n[o];if(i.sticky)r+=i.width;else break}return r}function Zr(e,t,r){if(typeof r=="number")return t*r;{let n=0;for(let o=e-t;o<e;o++)n+=r(o);return n}}function ai(e,t,r,n,o){let i=fl(e,n),a=[];for(let c of i)if(c.sticky)a.push(c);else break;if(a.length>0)for(let c of a)r-=c.width;let l=t,s=o??0;for(;s<=r&&l<i.length;)s+=i[l].width,l++;for(let c=t;c<l;c++){let u=i[c];u.sticky||a.push(u)}return a}function Gs(e,t,r){let n=0;for(let o of t){let i=o.sticky?n:n+(r??0);if(e<=i+o.width)return o.sourceIndex;n+=o.width}return-1}function Us(e,t,r,n,o,i,a,l,s,c){let u=n+o;if(r&&e<=o)return-2;if(e<=u)return-1;let h=t;for(let f=0;f<c;f++){let v=i-1-f,k=typeof a=="number"?a:a(v);if(h-=k,e>=h)return v}let g=i-c,m=e-(s??0);if(typeof a=="number"){let f=Math.floor((m-u)/a)+l;return f>=g?void 0:f}else{let f=u;for(let v=l;v<g;v++){let k=a(v);if(m<=f+k)return v;f+=k}return}}var mo=0,Bn={},qs=typeof window>"u";async function Js(){var e;qs||((e=document==null?void 0:document.fonts)==null?void 0:e.ready)===void 0||(await document.fonts.ready,mo=0,Bn={},_s())}Js();function gl(e,t,r,n){return`${e}_${n??(t==null?void 0:t.font)}_${r}`}function bn(e,t,r,n="middle"){let o=gl(e,t,n,r),i=Bn[o];return i===void 0&&(i=t.measureText(e),Bn[o]=i,mo++),mo>1e4&&(Bn={},mo=0),i}function pl(e,t){let r=gl(e,void 0,"middle",t);return Bn[r]}function Ar(e,t){return typeof t!="string"&&(t=t.baseFontFull),Qs(e,t)}function ml(e,t){e.save(),e.textBaseline=t;let r=e.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZ");return e.restore(),r}var vl=[];function Qs(e,t){for(let o of vl)if(o.key===t)return o.val;let r=ml(e,"alphabetic"),n=-(ml(e,"middle").actualBoundingBoxDescent-r.actualBoundingBoxDescent)+r.actualBoundingBoxAscent/2;return vl.push({key:t,val:n}),n}function Zs(e,t,r,n,o,i){let{ctx:a,rect:l,theme:s}=e,c=2**53-1;return t!==void 0&&(c=r-t,c<500&&(a.globalAlpha=1-c/500,a.fillStyle=s.bgSearchResult,a.fillRect(l.x+1,l.y+1,l.width-(o?2:1),l.height-(i?2:1)),a.globalAlpha=1,n!==void 0&&(n.fillStyle=s.bgSearchResult))),c<500}function Wn(e,t,r){let{ctx:n,theme:o}=e,i=t??{},a=r??o.textDark;return a!==i.fillStyle&&(n.fillStyle=a,i.fillStyle=a),i}function wl(e,t,r,n,o,i,a,l,s){s==="right"?e.fillText(t,r+o-(l.cellHorizontalPadding+.5),n+i/2+a):s==="center"?e.fillText(t,r+o/2,n+i/2+a):e.fillText(t,r+l.cellHorizontalPadding+.5,n+i/2+a)}function yl(e,t){let r=bn("ABCi09jgqpy",e,t);return r.actualBoundingBoxAscent+r.actualBoundingBoxDescent}function ec(e,t){e.includes(`
`)&&(e=e.split(/\r?\n/,1)[0]);let r=t/4;return e.length>r&&(e=e.slice(0,r)),e}function tc(e,t,r,n,o,i,a,l,s,c){let u=l.baseFontFull,h=$s(e,t,u,o-l.cellHorizontalPadding*2,c??!1),g=yl(e,u),m=l.lineHeight*g,f=g+m*(h.length-1),v=f+l.cellVerticalPadding>i;v&&(e.save(),e.rect(r,n,o,i),e.clip());let k=n+i/2-f/2,C=Math.max(n+l.cellVerticalPadding,k);for(let y of h)if(wl(e,y,r,C,o,g,a,l,s),C+=m,C>n+i)break;v&&e.restore()}function Sr(e,t,r,n,o){let{ctx:i,rect:a,theme:l}=e,{x:s,y:c,width:u,height:h}=a;n??(n=!1),n||(t=ec(t,u));let g=Ar(i,l),m=oi(t)==="rtl";if(r===void 0&&m&&(r="right"),m&&(i.direction="rtl"),t.length>0){let f=!1;r==="right"?(i.textAlign="right",f=!0):r!==void 0&&r!=="left"&&(i.textAlign=r,f=!0),n?tc(i,t,s,c,u,h,g,l,r,o):wl(i,t,s,c,u,h,g,l,r),f&&(i.textAlign="start"),m&&(i.direction="inherit")}}function gr(e,t,r,n,o,i){typeof i=="number"&&(i={tl:i,tr:i,br:i,bl:i}),i={tl:Math.max(0,Math.min(i.tl,o/2,n/2)),tr:Math.max(0,Math.min(i.tr,o/2,n/2)),bl:Math.max(0,Math.min(i.bl,o/2,n/2)),br:Math.max(0,Math.min(i.br,o/2,n/2))},e.moveTo(t+i.tl,r),e.arcTo(t+n,r,t+n,r+i.tr,i.tr),e.arcTo(t+n,r+o,t+n-i.br,r+o,i.br),e.arcTo(t,r+o,t,r+o-i.bl,i.bl),e.arcTo(t,r,t+i.tl,r,i.tl)}function rc(e,t,r){let n=1.25;e.arc(t,r-n*3.5,n,0,2*Math.PI,!1),e.arc(t,r,n,0,2*Math.PI,!1),e.arc(t,r+n*3.5,n,0,2*Math.PI,!1)}function nc(e,t,r){let n=function(l,s){let c=s.x-l.x,u=s.y-l.y,h=Math.sqrt(c*c+u*u),g=c/h,m=u/h;return{x:c,y:s.y-l.y,len:h,nx:g,ny:m,ang:Math.atan2(m,g)}},o,i=t.length,a=t[i-1];for(let l=0;l<i;l++){let s=t[l%i],c=t[(l+1)%i],u=n(s,a),h=n(s,c),g=u.nx*h.ny-u.ny*h.nx,m=u.nx*h.nx-u.ny*-h.ny,f=Math.asin(g<-1?-1:g>1?1:g),v=1,k=!1;m<0?f<0?f=Math.PI+f:(f=Math.PI-f,v=-1,k=!0):f>0&&(v=-1,k=!0),o=s.radius===void 0?r:s.radius;let C=f/2,y=Math.abs(Math.cos(C)*o/Math.sin(C)),M;y>Math.min(u.len/2,h.len/2)?(y=Math.min(u.len/2,h.len/2),M=Math.abs(y*Math.sin(C)/Math.cos(C))):M=o;let T=s.x+h.nx*y,P=s.y+h.ny*y;T+=-h.ny*M*v,P+=h.nx*M*v,e.arc(T,P,M,u.ang+Math.PI/2*v,h.ang-Math.PI/2*v,k),a=s,s=c}e.closePath()}function si(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f){let v={x:0,y:i+c,width:0,height:0};if(e>=m.length||t>=u||t<-2||e<0)return v;let k=i-o;if(e>=h){let C=a>e?-1:1,y=yn(m);v.x+=y+s;for(let M=a;M!==e;M+=C)v.x+=m[C===1?M:M-1].width*C}else for(let C=0;C<e;C++)v.x+=m[C].width;if(v.width=m[e].width+1,t===-1)v.y=o,v.height=k;else if(t===-2){v.y=0,v.height=o;let C=e,y=m[e].group,M=m[e].sticky;for(;C>0&&_n(m[C-1].group,y)&&m[C-1].sticky===M;){let P=m[C-1];v.x-=P.width,v.width+=P.width,C--}let T=e;for(;T+1<m.length&&_n(m[T+1].group,y)&&m[T+1].sticky===M;){let P=m[T+1];v.width+=P.width,T++}if(!M){let P=yn(m),E=v.x-P;E<0&&(v.x-=E,v.width+=E),v.x+v.width>r&&(v.width=r-v.x)}}else if(t>=u-g){let C=u-t;for(v.y=n;C>0;){let y=t+C-1;v.height=typeof f=="number"?f:f(y),v.y-=v.height,C--}v.height+=1}else{let C=l>t?-1:1;if(typeof f=="number"){let y=t-l;v.y+=y*f}else for(let y=l;y!==t;y+=C)v.y+=f(y)*C;v.height=(typeof f=="number"?f:f(t))+1}return v}var ci=1<<21;function ir(e,t){return(t+2)*ci+e}function bl(e){return e%ci}function ui(e){return Math.floor(e/ci)-2}function di(e){let t=bl(e),r=ui(e);return[t,r]}var xl=class{constructor(){rt(this,"visibleWindow",{x:0,y:0,width:0,height:0});rt(this,"freezeCols",0);rt(this,"freezeRows",[]);rt(this,"isInWindow",e=>{let t=bl(e),r=ui(e),n=this.visibleWindow,o=t>=n.x&&t<=n.x+n.width||t<this.freezeCols,i=r>=n.y&&r<=n.y+n.height||this.freezeRows.includes(r);return o&&i})}setWindow(e,t,r){this.visibleWindow.x===e.x&&this.visibleWindow.y===e.y&&this.visibleWindow.width===e.width&&this.visibleWindow.height===e.height&&this.freezeCols===t&&Jo(this.freezeRows,r)||(this.visibleWindow=e,this.freezeCols=t,this.freezeRows=r,this.clearOutOfWindow())}},oc=class extends xl{constructor(){super(...arguments);rt(this,"cache",new Map);rt(this,"setValue",(t,r)=>{this.cache.set(ir(t[0],t[1]),r)});rt(this,"getValue",t=>this.cache.get(ir(t[0],t[1])));rt(this,"clearOutOfWindow",()=>{for(let[t]of this.cache.entries())this.isInWindow(t)||this.cache.delete(t)})}},$n=class{constructor(e=[]){rt(this,"cells");this.cells=new Set(e.map(t=>ir(t[0],t[1])))}add(e){this.cells.add(ir(e[0],e[1]))}has(e){return e===void 0?!1:this.cells.has(ir(e[0],e[1]))}remove(e){this.cells.delete(ir(e[0],e[1]))}clear(){this.cells.clear()}get size(){return this.cells.size}hasHeader(){for(let e of this.cells)if(ui(e)<0)return!0;return!1}hasItemInRectangle(e){for(let t=e.y;t<e.y+e.height;t++)for(let r=e.x;r<e.x+e.width;r++)if(this.cells.has(ir(r,t)))return!0;return!1}hasItemInRegion(e){for(let t of e)if(this.hasItemInRectangle(t))return!0;return!1}*values(){for(let e of this.cells)yield di(e)}},hi=150;function ic(e,t,r,n){var o,i;return((i=(o=n(t))==null?void 0:o.measure)==null?void 0:i.call(o,e,t,r))??hi}function Cl(e,t,r,n,o,i,a,l,s){let c=0,u=o===void 0?[]:o.map(m=>{let f=ic(e,m[n],t,s);return c=Math.max(c,f),f});if(u.length>5&&l){c=0;let m=0;for(let v of u)m+=v;let f=m/u.length;for(let v=0;v<u.length;v++)u[v]>=f*2?u[v]=0:c=Math.max(c,u[v])}let h=e.font;e.font=t.headerFontFull,c=Math.max(c,e.measureText(r.title).width+t.cellHorizontalPadding*2+(r.icon===void 0?0:28)),e.font=h;let g=Math.max(Math.ceil(i),Math.min(Math.floor(a),Math.ceil(c)));return{...r,width:g}}function lc(e,t,r,n,o,i,a,l,s){let c=d.useRef(t),u=d.useRef(r),h=d.useRef(a);c.current=t,u.current=r,h.current=a;let[g,m]=d.useMemo(()=>{if(typeof window>"u")return[null,null];let y=document.createElement("canvas");return y.style.display="none",y.style.opacity="0",y.style.position="fixed",[y,y.getContext("2d",{alpha:!1})]},[]);d.useLayoutEffect(()=>(g&&document.documentElement.append(g),()=>{g==null||g.remove()}),[g]);let f=d.useRef({}),v=d.useRef(),[k,C]=d.useState();return d.useLayoutEffect(()=>{let y=u.current;if(y===void 0||e.every(Zo))return;let M=Math.max(1,10-Math.floor(e.length/1e4)),T=0;M<c.current&&M>1&&(M--,T=1);let P={x:0,y:0,width:e.length,height:Math.min(c.current,M)},E={x:0,y:c.current-1,width:e.length,height:1};(async()=>{let O=y(P,s.signal),L=T>0?y(E,s.signal):void 0,S;S=typeof O=="object"?O:await is(O),L!==void 0&&(S=typeof L=="object"?[...S,...L]:[...S,...await is(L)]),v.current=e,C(S)})()},[s.signal,e]),d.useMemo(()=>{let y=e.every(Zo)?e:m===null?e.map(E=>Zo(E)?E:{...E,width:hi}):(m.font=h.current.baseFontFull,e.map((E,O)=>{if(Zo(E))return E;if(f.current[E.id]!==void 0)return{...E,width:f.current[E.id]};if(k===void 0||v.current!==e||E.id===void 0)return{...E,width:hi};let L=Cl(m,a,E,O,k,o,i,!0,l);return f.current[E.id]=L.width,L})),M=0,T=0,P=[];for(let[E,O]of y.entries())M+=O.width,O.grow!==void 0&&O.grow>0&&(T+=O.grow,P.push(E));if(M<n&&P.length>0){let E=[...y],O=n-M,L=O;for(let S=0;S<P.length;S++){let R=P[S],A=(y[R].grow??0)/T,x=S===P.length-1?L:Math.min(L,Math.floor(O*A));E[R]={...y[R],growOffset:x,width:y[R].width+x},L-=x}y=E}return{sizedColumns:y,nonGrowWidth:M}},[n,e,m,k,a,o,i,l])}var ac=J(((e,t)=>{function r(n,o,i){return n===n&&(i!==void 0&&(n=n<=i?n:i),o!==void 0&&(n=n>=o?n:o)),n}t.exports=r})),vo=J(((e,t)=>{var r=ac(),n=ti();function o(i,a,l){return l===void 0&&(l=a,a=void 0),l!==void 0&&(l=n(l),l=l===l?l:0),a!==void 0&&(a=n(a),a=a===a?a:0),r(n(i),a,l)}t.exports=o})),sc=J(((e,t)=>{var r="__lodash_hash_undefined__";function n(o){return this.__data__.set(o,r),this}t.exports=n})),cc=J(((e,t)=>{function r(n){return this.__data__.has(n)}t.exports=r})),Sl=J(((e,t)=>{var r=ns(),n=sc(),o=cc();function i(a){var l=-1,s=a==null?0:a.length;for(this.__data__=new r;++l<s;)this.add(a[l])}i.prototype.add=i.prototype.push=n,i.prototype.has=o,t.exports=i})),uc=J(((e,t)=>{function r(n,o,i,a){for(var l=n.length,s=i+(a?1:-1);a?s--:++s<l;)if(o(n[s],s,n))return s;return-1}t.exports=r})),dc=J(((e,t)=>{function r(n){return n!==n}t.exports=r})),hc=J(((e,t)=>{function r(n,o,i){for(var a=i-1,l=n.length;++a<l;)if(n[a]===o)return a;return-1}t.exports=r})),fc=J(((e,t)=>{var r=uc(),n=dc(),o=hc();function i(a,l,s){return l===l?o(a,l,s):r(a,n,s)}t.exports=i})),gc=J(((e,t)=>{var r=fc();function n(o,i){return!!(o!=null&&o.length)&&r(o,i,0)>-1}t.exports=n})),pc=J(((e,t)=>{function r(n,o,i){for(var a=-1,l=n==null?0:n.length;++a<l;)if(i(o,n[a]))return!0;return!1}t.exports=r})),kl=J(((e,t)=>{function r(n,o){return n.has(o)}t.exports=r})),Ml=J(((e,t)=>{var r=uo(),n=pn();t.exports=r(n,"Set")})),mc=J(((e,t)=>{function r(){}t.exports=r})),fi=J(((e,t)=>{function r(n){var o=-1,i=Array(n.size);return n.forEach(function(a){i[++o]=a}),i}t.exports=r})),vc=J(((e,t)=>{var r=Ml(),n=mc(),o=fi();t.exports=r&&1/o(new r([,-0]))[1]==1/0?function(i){return new r(i)}:n})),wc=J(((e,t)=>{var r=Sl(),n=gc(),o=pc(),i=kl(),a=vc(),l=fi(),s=200;function c(u,h,g){var m=-1,f=n,v=u.length,k=!0,C=[],y=C;if(g)k=!1,f=o;else if(v>=s){var M=h?null:a(u);if(M)return l(M);k=!1,f=i,y=new r}else y=h?[]:C;e:for(;++m<v;){var T=u[m],P=h?h(T):T;if(T=g||T!==0?T:0,k&&P===P){for(var E=y.length;E--;)if(y[E]===P)continue e;h&&y.push(P),C.push(T)}else f(y,P,g)||(y!==C&&y.push(P),C.push(T))}return C}t.exports=c})),yc=J(((e,t)=>{var r=wc();function n(o){return o&&o.length?r(o):[]}t.exports=n})),Rl=J(((e,t)=>{function r(n,o){for(var i=-1,a=o.length,l=n.length;++i<a;)n[l+i]=o[i];return n}t.exports=r})),bc=J(((e,t)=>{var r=ts(),n=cs(),o=Ln(),i=r?r.isConcatSpreadable:void 0;function a(l){return o(l)||n(l)||!!(i&&l&&l[i])}t.exports=a})),xc=J(((e,t)=>{var r=Rl(),n=bc();function o(i,a,l,s,c){var u=-1,h=i.length;for(l||(l=n),c||(c=[]);++u<h;){var g=i[u];a>0&&l(g)?a>1?o(g,a-1,l,s,c):r(c,g):s||(c[c.length]=g)}return c}t.exports=o})),Cc=J(((e,t)=>{var r=xc();function n(o){return o!=null&&o.length?r(o,1):[]}t.exports=n})),Sc=J(((e,t)=>{var r=Math.ceil,n=Math.max;function o(i,a,l,s){for(var c=-1,u=n(r((a-i)/(l||1)),0),h=Array(u);u--;)h[s?u:++c]=i,i+=l;return h}t.exports=o})),gi=J(((e,t)=>{var r=sf(),n=us();function o(i){return i!=null&&n(i.length)&&!r(i)}t.exports=o})),kc=J(((e,t)=>{var r=rs(),n=gi(),o=es(),i=co();function a(l,s,c){if(!i(c))return!1;var u=typeof s;return(u=="number"?n(c)&&o(s,c.length):u=="string"&&s in c)?r(c[s],l):!1}t.exports=a})),Mc=J(((e,t)=>{var r=ti(),n=1/0,o=17976931348623157e292;function i(a){return a?(a=r(a),a===n||a===-n?(a<0?-1:1)*o:a===a?a:0):a===0?a:0}t.exports=i})),Rc=J(((e,t)=>{var r=Sc(),n=kc(),o=Mc();function i(a){return function(l,s,c){return c&&typeof c!="number"&&n(l,s,c)&&(s=c=void 0),l=o(l),s===void 0?(s=l,l=0):s=o(s),c=c===void 0?l<s?1:-1:o(c),r(l,s,c,a)}}t.exports=i})),El=J(((e,t)=>{t.exports=Rc()()})),ht='<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">',Ec=e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}<rect x="2" y="2" width="16" height="16" rx="2" fill="${r}"/><path d="M15.75 4h-1.5a.25.25 0 0 0-.177.074L9.308 8.838a3.75 3.75 0 1 0 1.854 1.854l1.155-1.157.967.322a.5.5 0 0 0 .65-.55l-.18-1.208.363-.363.727.331a.5.5 0 0 0 .69-.59l-.254-.904.647-.647A.25.25 0 0 0 16 5.75v-1.5a.25.25 0 0 0-.25-.25zM7.5 13.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" fill="${t}"/></svg>`},Ic=e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}<rect x="2" y="2" width="16" height="16" rx="4" fill="${r}"/><path d="m12.223 13.314 3.052-2.826a.65.65 0 0 0 0-.984l-3.052-2.822c-.27-.25-.634-.242-.865.022-.232.263-.206.636.056.882l2.601 2.41-2.601 2.41c-.262.245-.288.619-.056.882.231.263.595.277.865.026Zm-4.444.005c.266.25.634.241.866-.027.231-.263.206-.636-.06-.882L5.983 10l2.602-2.405c.266-.25.291-.62.06-.887-.232-.263-.596-.272-.866-.022L4.723 9.51a.653.653 0 0 0 0 .983l3.056 2.827Z" fill="${t}"/></svg>`},Tc=e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${r}"/>
    <path d="M6.52 12.78H5.51V8.74l-1.33.47v-.87l2.29-.83h.05v5.27zm5.2 0H8.15v-.69l1.7-1.83a6.38 6.38 0 0 0 .34-.4c.09-.11.16-.22.22-.32s.1-.19.12-.27a.9.9 0 0 0 0-.56.63.63 0 0 0-.15-.23.58.58 0 0 0-.22-.15.75.75 0 0 0-.29-.05c-.27 0-.48.08-.62.23a.95.95 0 0 0-.2.65H8.03c0-.24.04-.46.13-.67a1.67 1.67 0 0 1 .97-.91c.23-.1.49-.14.77-.14.26 0 .5.04.7.11.21.08.38.18.52.32.14.13.25.3.32.48a1.74 1.74 0 0 1 .03 1.13 2.05 2.05 0 0 1-.24.47 4.16 4.16 0 0 1-.35.47l-.47.5-1 1.05h2.32v.8zm1.8-3.08h.55c.28 0 .48-.06.61-.2a.76.76 0 0 0 .2-.55.8.8 0 0 0-.05-.28.56.56 0 0 0-.13-.22.6.6 0 0 0-.23-.15.93.93 0 0 0-.32-.05.92.92 0 0 0-.29.05.72.72 0 0 0-.23.12.57.57 0 0 0-.21.46H12.4a1.3 1.3 0 0 1 .5-1.04c.15-.13.33-.23.54-.3a2.48 2.48 0 0 1 1.4 0c.2.06.4.15.55.28.15.13.27.28.36.47.08.19.13.4.13.65a1.15 1.15 0 0 1-.2.65 1.36 1.36 0 0 1-.58.49c.15.05.28.12.38.2a1.14 1.14 0 0 1 .43.62c.03.13.05.26.05.4 0 .25-.05.47-.14.66a1.42 1.42 0 0 1-.4.49c-.16.13-.35.23-.58.3a2.51 2.51 0 0 1-.73.1c-.22 0-.44-.03-.65-.09a1.8 1.8 0 0 1-.57-.28 1.43 1.43 0 0 1-.4-.47 1.41 1.41 0 0 1-.15-.66h1a.66.66 0 0 0 .22.5.87.87 0 0 0 .58.2c.25 0 .45-.07.6-.2a.71.71 0 0 0 .21-.56.97.97 0 0 0-.06-.36.61.61 0 0 0-.18-.25.74.74 0 0 0-.28-.15 1.33 1.33 0 0 0-.37-.04h-.55V9.7z" fill="${t}"/>
  </svg>`},Pc=e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${r}"/>
  <path d="M8.182 12.4h3.636l.655 1.6H14l-3.454-8H9.455L6 14h1.527l.655-1.6zM10 7.44l1.36 3.651H8.64L10 7.441z" fill="${t}"/>
</svg>`},Oc=e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
    <path
        d="M16.2222 2H3.77778C2.8 2 2 2.8 2 3.77778V16.2222C2 17.2 2.8 18 3.77778 18H16.2222C17.2 18 17.9911 17.2 17.9911 16.2222L18 3.77778C18 2.8 17.2 2 16.2222 2Z"
        fill="${r}"
    />
    <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7.66667 6.66669C5.73368 6.66669 4.16667 8.15907 4.16667 10C4.16667 11.841 5.73368 13.3334 7.66667 13.3334H12.3333C14.2663 13.3334 15.8333 11.841 15.8333 10C15.8333 8.15907 14.2663 6.66669 12.3333 6.66669H7.66667ZM12.5 12.5C13.8807 12.5 15 11.3807 15 10C15 8.61931 13.8807 7.50002 12.5 7.50002C11.1193 7.50002 10 8.61931 10 10C10 11.3807 11.1193 12.5 12.5 12.5Z"
        fill="${t}"
    />
</svg>`},Il=e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
<path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${r}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.29 4.947a3.368 3.368 0 014.723.04 3.375 3.375 0 01.041 4.729l-.009.009-1.596 1.597a3.367 3.367 0 01-5.081-.364.71.71 0 011.136-.85 1.95 1.95 0 002.942.21l1.591-1.593a1.954 1.954 0 00-.027-2.733 1.95 1.95 0 00-2.732-.027l-.91.907a.709.709 0 11-1.001-1.007l.915-.911.007-.007z" fill="${t}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.55 8.678a3.368 3.368 0 015.082.364.71.71 0 01-1.136.85 1.95 1.95 0 00-2.942-.21l-1.591 1.593a1.954 1.954 0 00.027 2.733 1.95 1.95 0 002.73.028l.906-.906a.709.709 0 111.003 1.004l-.91.91-.008.01a3.368 3.368 0 01-4.724-.042 3.375 3.375 0 01-.041-4.728l.009-.009L6.55 8.678z" fill="${t}"/>
</svg>
  `};const Dc={headerRowID:Ec,headerNumber:Tc,headerCode:Ic,headerString:Pc,headerBoolean:Oc,headerAudioUri:Il,headerVideoUri:e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${r}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 13.138a.5.5 0 00.748.434l5.492-3.138a.5.5 0 000-.868L7.748 6.427A.5.5 0 007 6.862v6.276z" fill="${t}"/>
</svg>`},headerEmoji:e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}
    <path d="M10 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 9.17A4.17 4.17 0 0 1 5.83 10 4.17 4.17 0 0 1 10 5.83 4.17 4.17 0 0 1 14.17 10 4.17 4.17 0 0 1 10 14.17z" fill="${t}"/>
    <path d="M8.33 8.21a.83.83 0 1 0-.03 1.67.83.83 0 0 0 .03-1.67zm3.34 0a.83.83 0 1 0-.04 1.67.83.83 0 0 0 .04-1.67z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.53 13.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${r}"/>
    <path d="M10 4a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 11a5 5 0 1 1 .01-10.01A5 5 0 0 1 10 15z" fill="${t}"/>
    <path d="M8 7.86a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2zm4 0a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.53 11.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
  </svg>`},headerImage:e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${r}"/>
  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M12.499 10.801a.5.5 0 01.835 0l2.698 4.098a.5.5 0 01-.418.775H10.22a.5.5 0 01-.417-.775l2.697-4.098z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.07 8.934a.5.5 0 01.824 0l4.08 5.958a.5.5 0 01-.412.782h-8.16a.5.5 0 01-.413-.782l4.08-5.958zM13.75 8.333a2.083 2.083 0 100-4.166 2.083 2.083 0 000 4.166z" fill="${t}"/>
</svg>`},headerUri:Il,headerPhone:e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}
    <path fill="${t}" d="M3 3h14v14H3z"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2zm-7.24 9.78h1.23c.15 0 .27.06.36.18l.98 1.28a.43.43 0 0 1-.05.58l-1.2 1.21a.45.45 0 0 1-.6.04A6.72 6.72 0 0 1 7.33 10c0-.61.1-1.2.25-1.78a6.68 6.68 0 0 1 2.12-3.3.44.44 0 0 1 .6.04l1.2 1.2c.16.17.18.42.05.59l-.98 1.29a.43.43 0 0 1-.36.17H8.98A5.38 5.38 0 0 0 8.67 10c0 .62.11 1.23.3 1.79z" fill="${r}"/>
  </svg>`},headerMarkdown:e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${r}"/>
    <path d="m13.49 13.15-2.32-3.27h1.4V7h1.86v2.88h1.4l-2.34 3.27zM11 13H9v-3l-1.5 1.92L6 10v3H4V7h2l1.5 2L9 7h2v6z" fill="${t}"/>
  </svg>`},headerDate:e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${r}"/>
  <path d="M14.8 4.182h-.6V3H13v1.182H7V3H5.8v1.182h-.6c-.66 0-1.2.532-1.2 1.182v9.454C4 15.468 4.54 16 5.2 16h9.6c.66 0 1.2-.532 1.2-1.182V5.364c0-.65-.54-1.182-1.2-1.182zm0 10.636H5.2V7.136h9.6v7.682z" fill="${t}"/>
</svg>`},headerTime:e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${r}"/>
    <path d="M10 4a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6zm0 10.8A4.8 4.8 0 0 1 5.2 10a4.8 4.8 0 1 1 4.8 4.8z" fill="${t}"/>
    <path d="M10 7H9v3.93L12.5 13l.5-.8-3-1.76V7z" fill="${t}"/>
  </svg>`},headerEmail:e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${r}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 8.643a1.357 1.357 0 100 2.714 1.357 1.357 0 000-2.714zM7.357 10a2.643 2.643 0 115.286 0 2.643 2.643 0 01-5.286 0z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.589 4.898A5.643 5.643 0 0115.643 10v.5a2.143 2.143 0 01-4.286 0V8a.643.643 0 011.286 0v2.5a.857.857 0 001.714 0V10a4.357 4.357 0 10-1.708 3.46.643.643 0 01.782 1.02 5.643 5.643 0 11-5.842-9.582z" fill="${t}"/>
</svg>`},headerReference:e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}
    <rect x="2" y="8" width="10" height="8" rx="2" fill="${r}"/>
    <rect x="8" y="4" width="10" height="8" rx="2" fill="${r}"/>
    <path d="M10.68 7.73V6l2.97 3.02-2.97 3.02v-1.77c-2.13 0-3.62.7-4.68 2.2.43-2.15 1.7-4.31 4.68-4.74z" fill="${t}"/>
  </svg>`},headerIfThenElse:e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <path fill="${t}" d="M4 3h12v14H4z"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.6 2A1.6 1.6 0 002 3.6v12.8A1.6 1.6 0 003.6 18h12.8a1.6 1.6 0 001.6-1.6V3.6A1.6 1.6 0 0016.4 2H3.6zm11.3 10.8a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7h-1.4a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.6-.693.117.117 0 00.1-.115V10.35a.117.117 0 00-.117-.116h-2.8a.117.117 0 00-.117.116v2.333c0 .064.053.117.117.117h.117a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7H9.3a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.117a.117.117 0 00.117-.117V10.35a.117.117 0 00-.117-.117h-2.8a.117.117 0 00-.117.117v2.342c0 .058.042.106.1.115a.7.7 0 01.6.693v1.4a.7.7 0 01-.7.7H5.1a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.35a.116.116 0 00.116-.117v-2.45c0-.515.418-.933.934-.933h2.917a.117.117 0 00.117-.117V6.85a.117.117 0 00-.117-.116h-2.45a.7.7 0 01-.7-.7V5.1a.7.7 0 01.7-.7h6.067a.7.7 0 01.7.7v.934a.7.7 0 01-.7.7h-2.45a.117.117 0 00-.118.116v2.333c0 .064.053.117.117.117H13.5c.516 0 .934.418.934.934v2.45c0 .063.052.116.116.116h.35z" fill="${r}"/>
</svg>`},headerSingleValue:e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${r}"/>
    <path d="M9.98 13.33c.45 0 .74-.3.73-.75l-.01-.1-.16-1.67 1.45 1.05a.81.81 0 0 0 .5.18c.37 0 .72-.32.72-.76 0-.3-.17-.54-.49-.68l-1.63-.77 1.63-.77c.32-.14.49-.37.49-.67 0-.45-.34-.76-.71-.76a.81.81 0 0 0-.5.18l-1.47 1.03.16-1.74.01-.08c.01-.46-.27-.76-.72-.76-.46 0-.76.32-.75.76l.01.08.16 1.74-1.47-1.03a.77.77 0 0 0-.5-.18.74.74 0 0 0-.72.76c0 .3.17.53.49.67l1.63.77-1.62.77c-.32.14-.5.37-.5.68 0 .44.35.75.72.75a.78.78 0 0 0 .5-.17L9.4 10.8l-.16 1.68v.09c-.02.44.28.75.74.75z" fill="${t}"/>
  </svg>`},headerLookup:e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${r}"/>
    <path d="M8 5.83H5.83a.83.83 0 0 0 0 1.67h1.69A4.55 4.55 0 0 1 8 5.83zm-.33 3.34H5.83a.83.83 0 0 0 0 1.66h2.72a4.57 4.57 0 0 1-.88-1.66zM5.83 12.5a.83.83 0 0 0 0 1.67h7.5a.83.83 0 1 0 0-1.67h-7.5zm8.8-2.9a3.02 3.02 0 0 0 .46-1.6c0-1.66-1.32-3-2.94-3C10.52 5 9.2 6.34 9.2 8s1.31 3 2.93 3c.58 0 1.11-.17 1.56-.47l2.04 2.08.93-.94-2.04-2.08zm-2.48.07c-.9 0-1.63-.75-1.63-1.67s.73-1.67 1.63-1.67c.9 0 1.63.75 1.63 1.67s-.73 1.67-1.63 1.67z" fill="${t}"/>
  </svg>`},headerTextTemplate:e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${r}"/>
  <path d="M7.676 4.726V3l2.976 3.021-2.976 3.022v-1.77c-2.125 0-3.613.69-4.676 2.201.425-2.158 1.7-4.316 4.676-4.748zM10.182 14.4h3.636l.655 1.6H16l-3.454-8h-1.091L8 16h1.527l.655-1.6zM12 9.44l1.36 3.65h-2.72L12 9.44z" fill="${t}"/>
</svg>`},headerMath:e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${r}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.167 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666H4.167z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.083 4.167a.833.833 0 10-1.666 0v4.166a.833.833 0 101.666 0V4.167zM11.667 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666h-4.166zM5.367 11.688a.833.833 0 00-1.179 1.179l2.947 2.946a.833.833 0 001.178-1.178l-2.946-2.947z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.313 12.867a.833.833 0 10-1.178-1.179l-2.947 2.947a.833.833 0 101.179 1.178l2.946-2.946z" fill="${t}"/>
  <path d="M10.833 12.5c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833zM10.833 15c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833z" fill="${t}"/>
</svg>`},headerRollup:e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${r}"/>
    <path d="M10 8.84a1.16 1.16 0 1 0 0 2.32 1.16 1.16 0 0 0 0-2.32zm3.02 3.61a3.92 3.92 0 0 0 .78-3.28.49.49 0 1 0-.95.2c.19.87-.02 1.78-.58 2.47a2.92 2.92 0 1 1-4.13-4.08 2.94 2.94 0 0 1 2.43-.62.49.49 0 1 0 .17-.96 3.89 3.89 0 1 0 2.28 6.27zM10 4.17a5.84 5.84 0 0 0-5.44 7.93.49.49 0 1 0 .9-.35 4.86 4.86 0 1 1 2.5 2.67.49.49 0 1 0-.4.88c.76.35 1.6.54 2.44.53a5.83 5.83 0 0 0 0-11.66zm3.02 3.5a.7.7 0 1 0-1.4 0 .7.7 0 0 0 1.4 0zm-6.97 5.35a.7.7 0 1 1 0 1.4.7.7 0 0 1 0-1.4z" fill="${t}"/>
  </svg>`},headerJoinStrings:e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${r}"/>
  <path d="M12.4 13.565c1.865-.545 3.645-2.083 3.645-4.396 0-1.514-.787-2.604-2.071-2.604C12.69 6.565 12 7.63 12 8.939c1.114.072 1.865.726 1.865 1.683 0 .933-.8 1.647-1.84 2.023l.375.92zM4 5h6v2H4zM4 9h5v2H4zM4 13h4v2H4z" fill="${t}"/>
</svg>`},headerSplitString:e=>{let t=e.fgColor,r=e.bgColor;return`
    ${ht}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${r}"/>
    <path d="M12.4 13.56c1.86-.54 3.65-2.08 3.65-4.4 0-1.5-.8-2.6-2.08-2.6S12 7.64 12 8.95c1.11.07 1.86.73 1.86 1.68 0 .94-.8 1.65-1.83 2.03l.37.91zM4 5h6v2H4zm0 4h5v2H4zm0 4h4v2H4z" fill="${t}"/>
  </svg>`},headerGeoDistance:e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${r}"/>
  <path d="M10 7a1 1 0 100-2v2zm0 6a1 1 0 100 2v-2zm0-8H7v2h3V5zm-3 6h5V9H7v2zm5 2h-2v2h2v-2zm1-1a1 1 0 01-1 1v2a3 3 0 003-3h-2zm-1-1a1 1 0 011 1h2a3 3 0 00-3-3v2zM4 8a3 3 0 003 3V9a1 1 0 01-1-1H4zm3-3a3 3 0 00-3 3h2a1 1 0 011-1V5z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.856 12.014a.5.5 0 00-.712.702L5.409 14l-1.265 1.284a.5.5 0 00.712.702l1.255-1.274 1.255 1.274a.5.5 0 00.712-.702L6.813 14l1.265-1.284a.5.5 0 00-.712-.702L6.11 13.288l-1.255-1.274zM12.856 4.014a.5.5 0 00-.712.702L13.409 6l-1.265 1.284a.5.5 0 10.712.702l1.255-1.274 1.255 1.274a.5.5 0 10.712-.702L14.813 6l1.265-1.284a.5.5 0 00-.712-.702L14.11 5.288l-1.255-1.274z" fill="${t}"/>
</svg>`},headerArray:e=>{let t=e.fgColor,r=e.bgColor;return`${ht}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${r}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.25 7.25a.75.75 0 000-1.5h-6.5a.75.75 0 100 1.5h6.5zM15 10a.75.75 0 01-.75.75h-6.5a.75.75 0 010-1.5h6.5A.75.75 0 0115 10zm-.75 4.25a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5zm-8.987-7a.75.75 0 100-1.5.75.75 0 000 1.5zm.75 2.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm-.75 4.25a.75.75 0 100-1.5.75.75 0 000 1.5z" fill="${t}"/>
</svg>`},rowOwnerOverlay:e=>{let t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2 15v1h14v-2.5c0-.87-.44-1.55-.98-2.04a6.19 6.19 0 0 0-1.9-1.14 12.1 12.1 0 0 0-2.48-.67A4 4 0 1 0 5 6a4 4 0 0 0 2.36 3.65c-.82.13-1.7.36-2.48.67-.69.28-1.37.65-1.9 1.13A2.8 2.8 0 0 0 2 13.5V15z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>`},protectedColumnOverlay:e=>{let t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.43 6.04v-.18a3.86 3.86 0 0 0-7.72 0v.18A2.15 2.15 0 0 0 3 8.14v5.72C3 15.04 3.96 16 5.14 16H12c1.18 0 2.14-.96 2.14-2.14V8.14c0-1.03-.73-1.9-1.71-2.1zM7.86 6v-.14a.71.71 0 1 1 1.43 0V6H7.86z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>
`},renameIcon:e=>{let t=e.bgColor;return`${ht}
    <path stroke="${t}" stroke-width="2" d="M12 3v14"/>
    <path stroke="${t}" stroke-width="2" stroke-linecap="round" d="M10 4h4m-4 12h4"/>
    <path d="M11 14h4a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3h-4v2h4a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4v2ZM9.5 8H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4.5v2H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h4.5v2Z" fill="${t}"/>
  </svg>
`}};function Hc(e,t){return e==="normal"?[t.bgIconHeader,t.fgIconHeader]:e==="selected"?["white",t.accentColor]:[t.accentColor,t.bgHeader]}var zc=class{constructor(e,t){rt(this,"onSettled");rt(this,"spriteMap",new Map);rt(this,"headerIcons");rt(this,"inFlight",0);this.onSettled=t,this.headerIcons=e??{}}drawSprite(e,t,r,n,o,i,a,l=1){let[s,c]=Hc(t,a),u=i*Math.ceil(window.devicePixelRatio),h=`${s}_${c}_${u}_${e}`,g=this.spriteMap.get(h);if(g===void 0){let m=this.headerIcons[e];if(m===void 0)return;g=document.createElement("canvas");let f=g.getContext("2d");if(f===null)return;let v=new Image;v.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(m({fgColor:c,bgColor:s}))}`,this.spriteMap.set(h,g);let k=v.decode();if(k===void 0)return;this.inFlight++,k.then(()=>{f.drawImage(v,0,0,u,u)}).finally(()=>{this.inFlight--,this.inFlight===0&&this.onSettled()})}else l<1&&(r.globalAlpha=l),r.drawImage(g,0,0,u,u,n,o,i,i),l<1&&(r.globalAlpha=1)}};function Tl(e){if(e.length===0)return;let t;for(let r of e)t=Math.min(t??r.y,r.y)}function wo(e,t,r,n,o,i,a,l,s){l??(l=t);let c=t,u=e,h=n-i,g=!1;for(;c<r&&u<h;){let m=o(u);if(c+m>l&&s(c,u,m,!1,a&&u===n-1)===!0){g=!0;break}c+=m,u++}if(!g){c=r;for(let m=0;m<i;m++){u=n-1-m;let f=o(u);c-=f,s(c,u,f,!0,a&&u===n-1)}}}function Lr(e,t,r,n,o,i){let a=0,l=0,s=o+n;for(let c of e){let u=c.sticky?l:a+r;if(i(c,u,s,c.sticky?0:l,t)===!0)break;a+=c.width,l+=c.sticky?c.width:0}}function Pl(e,t,r,n,o){let i=0,a=0;for(let l=0;l<e.length;l++){let s=e[l],c=l+1,u=s.width;for(s.sticky&&(a+=u);c<e.length&&_n(e[c].group,s.group)&&e[c].sticky===e[l].sticky;){let v=e[c];u+=v.width,c++,l++,v.sticky&&(a+=v.width)}let h=s.sticky?0:r,g=i+h,m=s.sticky?0:Math.max(0,a-g),f=Math.min(u-m,t-(g+m));o([s.sourceIndex,e[c-1].sourceIndex],s.group??"",g+m,0,f,n),i+=u}}function Ol(e,t,r,n,o,i,a){var g;let[l,s]=e,c,u,h=((g=a.find(m=>!m.sticky))==null?void 0:g.sourceIndex)??0;if(s>h){let m=Math.max(l,h),f=t,v=n;for(let k=i.sourceIndex-1;k>=m;k--)f-=a[k].width,v+=a[k].width;for(let k=i.sourceIndex+1;k<=s;k++)v+=a[k].width;u={x:f,y:r,width:v,height:o}}if(h>l){let m=Math.min(s,h-1),f=t,v=n;for(let k=i.sourceIndex-1;k>=l;k--)f-=a[k].width,v+=a[k].width;for(let k=i.sourceIndex+1;k<=m;k++)v+=a[k].width;c={x:f,y:r,width:v,height:o}}return[c,u]}function Ac(e,t,r,n){if(n==="any")return Dl(e,{x:t,y:r,width:1,height:1});if(n==="vertical"&&(t=e.x),n==="horizontal"&&(r=e.y),ul([t,r],e))return;let o=t-e.x,i=e.x+e.width-t,a=r-e.y+1,l=e.y+e.height-r,s=Math.min(n==="vertical"?2**53-1:o,n==="vertical"?2**53-1:i,n==="horizontal"?2**53-1:a,n==="horizontal"?2**53-1:l);return s===l?{x:e.x,y:e.y+e.height,width:e.width,height:r-e.y-e.height+1}:s===a?{x:e.x,y:r,width:e.width,height:e.y-r}:s===i?{x:e.x+e.width,y:e.y,width:t-e.x-e.width+1,height:e.height}:{x:t,y:e.y,width:e.x-t,height:e.height}}function Yn(e,t,r,n,o,i,a,l){return e<=o+a&&o<=e+r&&t<=i+l&&i<=t+n}function en(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function Dl(e,t){let r=Math.min(e.x,t.x),n=Math.min(e.y,t.y),o=Math.max(e.x+e.width,t.x+t.width)-r,i=Math.max(e.y+e.height,t.y+t.height)-n;return{x:r,y:n,width:o,height:i}}function Lc(e,t){return e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x+t.width&&e.y+e.height>=t.y+t.height}function Fc(e,t,r,n){if(e.x>t||e.y>r||e.x<0&&e.y<0&&e.x+e.width>t&&e.y+e.height>r)return;if(e.x>=0&&e.y>=0&&e.x+e.width<=t&&e.y+e.height<=r)return e;let o=t+4,i=r+4,a=-4-e.x,l=e.x+e.width-o,s=-4-e.y,c=e.y+e.height-i,u=a>0?e.x+Math.floor(a/n)*n:e.x,h=l>0?e.x+e.width-Math.floor(l/n)*n:e.x+e.width,g=s>0?e.y+Math.floor(s/n)*n:e.y,m=c>0?e.y+e.height-Math.floor(c/n)*n:e.y+e.height;return{x:u,y:g,width:h-u,height:m-g}}function jc(e,t,r,n,o){let[i,a,l,s]=t,[c,u,h,g]=o,{x:m,y:f,width:v,height:k}=e,C=[];if(v<=0||k<=0)return C;let y=m+v,M=f+k,T=m<i,P=f<a,E=m+v>l,O=f+k>s,L=m>=i&&m<l||y>i&&y<=l||m<i&&y>l,S=f>=a&&f<s||M>a&&M<=s||f<a&&M>s;if(L&&S){let R=Math.max(m,i),A=Math.max(f,a),x=Math.min(y,l),w=Math.min(M,s);C.push({rect:{x:R,y:A,width:x-R,height:w-A},clip:{x:c,y:u,width:h-c+1,height:g-u+1}})}if(T&&P){let R=m,A=f,x=Math.min(y,i),w=Math.min(M,a);C.push({rect:{x:R,y:A,width:x-R,height:w-A},clip:{x:0,y:0,width:c+1,height:u+1}})}if(P&&L){let R=Math.max(m,i),A=f,x=Math.min(y,l),w=Math.min(M,a);C.push({rect:{x:R,y:A,width:x-R,height:w-A},clip:{x:c,y:0,width:h-c+1,height:u+1}})}if(P&&E){let R=Math.max(m,l),A=f,x=y,w=Math.min(M,a);C.push({rect:{x:R,y:A,width:x-R,height:w-A},clip:{x:h,y:0,width:r-h+1,height:u+1}})}if(T&&S){let R=m,A=Math.max(f,a),x=Math.min(y,i),w=Math.min(M,s);C.push({rect:{x:R,y:A,width:x-R,height:w-A},clip:{x:0,y:u,width:c+1,height:g-u+1}})}if(E&&S){let R=Math.max(m,l),A=Math.max(f,a),x=y,w=Math.min(M,s);C.push({rect:{x:R,y:A,width:x-R,height:w-A},clip:{x:h,y:u,width:r-h+1,height:g-u+1}})}if(T&&O){let R=m,A=Math.max(f,s),x=Math.min(y,i),w=M;C.push({rect:{x:R,y:A,width:x-R,height:w-A},clip:{x:0,y:g,width:c+1,height:n-g+1}})}if(O&&L){let R=Math.max(m,i),A=Math.max(f,s),x=Math.min(y,l),w=M;C.push({rect:{x:R,y:A,width:x-R,height:w-A},clip:{x:c,y:g,width:h-c+1,height:n-g+1}})}if(E&&O){let R=Math.max(m,l),A=Math.max(f,s),x=y,w=M;C.push({rect:{x:R,y:A,width:x-R,height:w-A},clip:{x:h,y:g,width:r-h+1,height:n-g+1}})}return C}var _c={kind:ve.Loading,allowOverlay:!1};function Hl(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f,v,k,C,y,M,T,P,E,O,L,S,R,A,x,w,I,D,b,G,j){let Z=(M==null?void 0:M.size)??9007199254740991,ee=performance.now(),X=w.baseFontFull;e.font=X;let ce={ctx:e},oe=[0,0],de=k>0?Zr(s,k,c):0,Oe,te,$=Tl(y);return Lr(t,l,i,a,o,(Q,re,se,Be,Ae)=>{let Me=Math.max(0,Be-re),Xe=re+Me,He=o+1,ct=Q.width-Me,ut=n-o-1;if(y.length>0){let Ge=!1;for(let $e=0;$e<y.length;$e++){let Ue=y[$e];if(Yn(Xe,He,ct,ut,Ue.x,Ue.y,Ue.width,Ue.height)){Ge=!0;break}}if(!Ge)return}let Ze=()=>{e.save(),e.beginPath(),e.rect(Xe,He,ct,ut),e.clip()},ae=T.columns.hasIndex(Q.sourceIndex),Te=h(Q.group??"").overrideTheme,De=Q.themeOverride===void 0&&Te===void 0?w:Hr(w,Te,Q.themeOverride),We=De.baseFontFull;We!==X&&(X=We,e.font=We),Ze();let ye;return wo(Ae,se,n,s,c,k,C,$,(Ge,$e,Ue,we,be)=>{var mr,ar,er;if($e<0||(oe[0]=Q.sourceIndex,oe[1]=$e,M!==void 0&&!M.has(oe)))return;if(y.length>0){let Ve=!1;for(let yt=0;yt<y.length;yt++){let kt=y[yt];if(Yn(re,Ge,Q.width,Ue,kt.x,kt.y,kt.width,kt.height)){Ve=!0;break}}if(!Ve)return}let nt=T.rows.hasIndex($e),Je=m.hasIndex($e),qe=$e<s?u(oe):_c,pt=re,et=Q.width,Le=!1,Ct=!1;if(qe.span!==void 0){let[Ve,yt]=qe.span,kt=`${$e},${Ve},${yt},${Q.sticky}`;if(te===void 0&&(te=new Set),te.has(kt)){Z--;return}else{let Wt=Ol(qe.span,re,Ge,Q.width,Ue,Q,r),Ot=Q.sticky?Wt[0]:Wt[1];if(!Q.sticky&&Wt[0]!==void 0&&(Ct=!0),Ot!==void 0){pt=Ot.x,et=Ot.width,te.add(kt),e.restore(),ye=void 0,e.save(),e.beginPath();let Gt=Math.max(0,Be-Ot.x);e.rect(Ot.x+Gt,Ge,Ot.width-Gt,Ue),Oe===void 0&&(Oe=[]),Oe.push({x:Ot.x+Gt,y:Ge,width:Ot.width-Gt,height:Ue}),e.clip(),Le=!0}}}let Lt=g==null?void 0:g($e),St=be&&((mr=Q.trailingRowOptions)==null?void 0:mr.themeOverride)!==void 0?(ar=Q.trailingRowOptions)==null?void 0:ar.themeOverride:void 0,It=qe.themeOverride===void 0&&Lt===void 0&&St===void 0?De:Hr(De,Lt,St,qe.themeOverride);e.beginPath();let Nt=Xs(oe,qe,T),vt=Vs(oe,qe,T,v),pr=qe.span!==void 0&&T.columns.some(Ve=>qe.span!==void 0&&Ve>=qe.span[0]&&Ve<=qe.span[1]);Nt&&!f&&v?vt=0:Nt&&v&&(vt=Math.max(vt,1)),pr&&vt++,Nt||(nt&&vt++,ae&&!be&&vt++);let jr=qe.kind===ve.Protected?It.bgCellMedium:It.bgCell,ft;if((we||jr!==w.bgCell)&&(ft=fr(jr,ft)),vt>0||Je){Je&&(ft=fr(It.bgHeader,ft));for(let Ve=0;Ve<vt;Ve++)ft=fr(It.accentLight,ft)}else if(P!==void 0){for(let Ve of P)if(Ve[0]===Q.sourceIndex&&Ve[1]===$e){ft=fr(It.bgSearchResult,ft);break}}if(E!==void 0)for(let Ve=0;Ve<E.length;Ve++){let yt=E[Ve],kt=yt.range;yt.style!=="solid-outline"&&kt.x<=Q.sourceIndex&&Q.sourceIndex<kt.x+kt.width&&kt.y<=$e&&$e<kt.y+kt.height&&(ft=fr(yt.color,ft))}let kr=!1;if(M!==void 0){let Ve=Ge+1,yt=(we?Ve+Ue-1:Math.min(Ve+Ue-1,n-de))-Ve;(yt!==Ue-1||pt+1<=Be)&&(kr=!0,e.save(),e.beginPath(),e.rect(pt+1,Ve,et-1,yt),e.clip()),ft=ft===void 0?It.bgCell:fr(ft,It.bgCell)}let lr=Q.sourceIndex===r.length-1,Ee=$e===s-1;ft!==void 0&&(e.fillStyle=ft,ye!==void 0&&(ye.fillStyle=ft),M===void 0?e.fillRect(pt,Ge,et,Ue):e.fillRect(pt+1,Ge+1,et-(lr?2:1),Ue-(Ee?2:1))),qe.style==="faded"&&(e.globalAlpha=.6);let wt;for(let Ve=0;Ve<S.length;Ve++){let yt=S[Ve];if(yt.item[0]===Q.sourceIndex&&yt.item[1]===$e){wt=yt;break}}if(et>j&&!Ct){let Ve=It.baseFontFull;Ve!==X&&(e.font=Ve,X=Ve),ye=zl(e,qe,Q.sourceIndex,$e,lr,Ee,pt,Ge,et,Ue,vt>0,It,ft??It.bgCell,O,L,(wt==null?void 0:wt.hoverAmount)??0,R,x,ee,A,ye,I,D,b,G)}return kr&&e.restore(),qe.style==="faded"&&(e.globalAlpha=1),Z--,Le&&(e.restore(),(er=ye==null?void 0:ye.deprep)==null||er.call(ye,ce),ye=void 0,Ze(),X=We,e.font=We),Z<=0}),e.restore(),Z<=0}),Oe}var Kn=[0,0],Xn={x:0,y:0,width:0,height:0},pi=[void 0,()=>{}],mi=!1;function Nc(){mi=!0}function zl(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f,v,k,C,y,M,T,P,E,O,L){var D,b;let S,R;k!==void 0&&k[0][0]===r&&k[0][1]===n&&(S=k[1][0],R=k[1][1]);let A;Kn[0]=r,Kn[1]=n,Xn.x=a,Xn.y=l,Xn.width=s,Xn.height=c,pi[0]=E.getValue(Kn),pi[1]=G=>E.setValue(Kn,G),mi=!1;let x={ctx:e,theme:h,col:r,row:n,cell:t,rect:Xn,highlighted:u,cellFillColor:g,hoverAmount:v,frameTime:y,hoverX:S,drawState:pi,hoverY:R,imageLoader:m,spriteManager:f,hyperWrapping:C,overrideCursor:S===void 0?void 0:L,requestAnimationFrame:Nc},w=Zs(x,t.lastUpdated,y,T,o,i),I=O(t);if(I!==void 0){(T==null?void 0:T.renderer)!==I&&((D=T==null?void 0:T.deprep)==null||D.call(T,x),T=void 0);let G=(b=I.drawPrep)==null?void 0:b.call(I,x,T);M!==void 0&&!Fn(x.cell)?M(x,()=>I.draw(x,t)):I.draw(x,t),A=G===void 0?void 0:{deprep:G==null?void 0:G.deprep,fillStyle:G==null?void 0:G.fillStyle,font:G==null?void 0:G.font,renderer:I}}return(w||mi)&&(P==null||P(Kn)),A}function vi(e,t,r,n,o,i,a,l,s=-20,c=-20,u=void 0,h="center",g="square"){let m=Math.floor(o+a/2),f=g==="circle"?1e4:t.roundingRadius??4,v=ll(u??t.checkboxMaxSize,a,t.cellVerticalPadding),k=v/2,C=il(h,n,i,t.cellHorizontalPadding,v),y=ol(C,m,v),M=al(n+s,o+c,y);switch(r){case!0:e.beginPath(),gr(e,C-v/2,m-v/2,v,v,f),g==="circle"&&(k*=.8,v*=.8),e.fillStyle=l?t.accentColor:t.textMedium,e.fill(),e.beginPath(),e.moveTo(C-k+v/4.23,m-k+v/1.97),e.lineTo(C-k+v/2.42,m-k+v/1.44),e.lineTo(C-k+v/1.29,m-k+v/3.25),e.strokeStyle=t.bgCell,e.lineJoin="round",e.lineCap="round",e.lineWidth=1.9,e.stroke();break;case null:case!1:e.beginPath(),gr(e,C-v/2+.5,m-v/2+.5,v-1,v-1,f),e.lineWidth=1,e.strokeStyle=M?t.textDark:t.textMedium,e.stroke();break;case void 0:e.beginPath(),gr(e,C-v/2,m-v/2,v,v,f),e.fillStyle=M?t.textMedium:t.textLight,e.fill(),g==="circle"&&(k*=.8,v*=.8),e.beginPath(),e.moveTo(C-v/3,m),e.lineTo(C+v/3,m),e.strokeStyle=t.bgCell,e.lineCap="round",e.lineWidth=1.9,e.stroke();break;default:Qo(r)}}function Bc(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f,v,k,C,y){var L,S,R,A;let M=a+l;if(M<=0)return;e.fillStyle=h.bgHeader,e.fillRect(0,0,o,M);let T=(L=n==null?void 0:n[0])==null?void 0:L[0],P=(S=n==null?void 0:n[0])==null?void 0:S[1],E=(R=n==null?void 0:n[1])==null?void 0:R[0],O=(A=n==null?void 0:n[1])==null?void 0:A[1];e.font=h.headerFontFull,Lr(t,0,i,0,M,(x,w,I,D)=>{var $;if(k!==void 0&&!k.has([x.sourceIndex,-1]))return;let b=Math.max(0,D-w);e.save(),e.beginPath(),e.rect(w+b,l,x.width-b,a),e.clip();let G=v(x.group??"").overrideTheme,j=x.themeOverride===void 0&&G===void 0?h:Hr(h,G,x.themeOverride);j.bgHeader!==h.bgHeader&&(e.fillStyle=j.bgHeader,e.fill()),j!==h&&(e.font=j.headerFontFull);let Z=u.columns.hasIndex(x.sourceIndex),ee=s!==void 0||c||x.headerRowMarkerDisabled===!0,X=!ee&&P===-1&&T===x.sourceIndex,ce=ee?0:(($=m.find(Q=>Q.item[0]===x.sourceIndex&&Q.item[1]===-1))==null?void 0:$.hoverAmount)??0,oe=(u==null?void 0:u.current)!==void 0&&u.current.cell[0]===x.sourceIndex,de=Z?j.accentColor:oe?j.bgHeaderHasFocus:j.bgHeader,Oe=r?l:0,te=x.sourceIndex===0?0:1;Z?(e.fillStyle=de,e.fillRect(w+te,Oe,x.width-te,a)):(oe||ce>0)&&(e.beginPath(),e.rect(w+te,Oe,x.width-te,a),oe&&(e.fillStyle=j.bgHeaderHasFocus,e.fill()),ce>0&&(e.globalAlpha=ce,e.fillStyle=j.bgHeaderHovered,e.fill(),e.globalAlpha=1)),jl(e,w,Oe,x.width,a,x,Z,j,X,X?E:void 0,X?O:void 0,oe,ce,g,C,y),e.restore()}),r&&Wc(e,t,o,i,l,n,h,g,m,f,v,k)}function Wc(e,t,r,n,o,i,a,l,s,c,u,h){let[g,m]=(i==null?void 0:i[0])??[],f=0;Pl(t,r,n,o,(v,k,C,y,M,T)=>{if(h!==void 0&&!h.hasItemInRectangle({x:v[0],y:-2,width:v[1]-v[0]+1,height:1}))return;e.save(),e.beginPath(),e.rect(C,y,M,T),e.clip();let P=u(k),E=(P==null?void 0:P.overrideTheme)===void 0?a:Hr(a,P.overrideTheme),O=m===-2&&g!==void 0&&g>=v[0]&&g<=v[1],L=O?E.bgGroupHeaderHovered??E.bgHeaderHovered:E.bgGroupHeader??E.bgHeader;if(L!==a.bgHeader&&(e.fillStyle=L,e.fill()),e.fillStyle=E.textGroupHeader??E.textHeader,P!==void 0){let S=C;if(P.icon!==void 0&&(l.drawSprite(P.icon,"normal",e,S+8,(o-20)/2,20,E),S+=26),e.fillText(P.name,S+8,o/2+Ar(e,a.headerFontFull)),P.actions!==void 0&&O){let R=Al({x:C,y,width:M,height:T},P.actions);e.beginPath();let A=R[0].x-10,x=C+M-A;e.rect(A,0,x,o);let w=e.createLinearGradient(A,0,A+x,0),I=mn(L,0);w.addColorStop(0,I),w.addColorStop(10/x,L),w.addColorStop(1,L),e.fillStyle=w,e.fill(),e.globalAlpha=.6;let[D,b]=(i==null?void 0:i[1])??[-1,-1];for(let G=0;G<P.actions.length;G++){let j=P.actions[G],Z=R[G],ee=en(Z,D+C,b);ee&&(e.globalAlpha=1),l.drawSprite(j.icon,"normal",e,Z.x+Z.width/2-10,Z.y+Z.height/2-10,20,E),ee&&(e.globalAlpha=.6)}e.globalAlpha=1}}C!==0&&c(v[0])&&(e.beginPath(),e.moveTo(C+.5,0),e.lineTo(C+.5,o),e.strokeStyle=a.borderColor,e.lineWidth=1,e.stroke()),e.restore(),f=C+M}),e.beginPath(),e.moveTo(f+.5,0),e.lineTo(f+.5,o),e.moveTo(0,o+.5),e.lineTo(r,o+.5),e.strokeStyle=a.borderColor,e.lineWidth=1,e.stroke()}var xn=30;function $c(e,t,r,n,o){return o?{x:e,y:t,width:xn,height:Math.min(xn,n)}:{x:e+r-xn,y:Math.max(t,t+n/2-xn/2),width:xn,height:Math.min(xn,n)}}function Al(e,t){let r=[],n=e.x+e.width-26*t.length,o=e.y+e.height/2-13;for(let i=0;i<t.length;i++)r.push({x:n,y:o,width:26,height:26}),n+=26;return r}function Vn(e,t,r){return!r||e===void 0||(e.x=t-(e.x-t)-e.width),e}function Ll(e,t,r,n,o,i,a,l){var C;let s=a.cellHorizontalPadding,c=a.headerIconSize,u=$c(r,n,o,i,!1),h=r+s,g=t.icon===void 0?void 0:{x:h,y:n+(i-c)/2,width:c,height:c},m=g===void 0||t.overlayIcon===void 0?void 0:{x:g.x+9,y:g.y+6,width:18,height:18};g!==void 0&&(h+=Math.ceil(c*1.3));let f={x:h,y:n,width:o-h,height:i},v;if(t.indicatorIcon!==void 0){let y=e===void 0?((C=pl(t.title,a.headerFontFull))==null?void 0:C.width)??0:bn(t.title,e,a.headerFontFull).width;f.width=y,h+=y+s,v={x:h,y:n+(i-c)/2,width:c,height:c}}let k=r+o/2;return{menuBounds:Vn(u,k,l),iconBounds:Vn(g,k,l),iconOverlayBounds:Vn(m,k,l),textBounds:Vn(f,k,l),indicatorIconBounds:Vn(v,k,l)}}function Fl(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f,v){if(i.rowMarker!==void 0&&i.headerRowMarkerDisabled!==!0){let y=i.rowMarkerChecked;y!==!0&&i.headerRowMarkerAlwaysVisible!==!0&&(e.globalAlpha=h);let M=i.headerRowMarkerTheme===void 0?l:Hr(l,i.headerRowMarkerTheme);vi(e,M,y,t,r,n,o,!1,void 0,void 0,l.checkboxMaxSize,"center",i.rowMarker),y!==!0&&i.headerRowMarkerAlwaysVisible!==!0&&(e.globalAlpha=1);return}let k=a?l.textHeaderSelected:l.textHeader,C=i.hasMenu===!0&&(s||m&&a)&&v.menuBounds!==void 0;if(i.icon!==void 0&&v.iconBounds!==void 0){let y=a?"selected":"normal";i.style==="highlight"&&(y=a?"selected":"special"),g.drawSprite(i.icon,y,e,v.iconBounds.x,v.iconBounds.y,v.iconBounds.width,l),i.overlayIcon!==void 0&&v.iconOverlayBounds!==void 0&&g.drawSprite(i.overlayIcon,a?"selected":"special",e,v.iconOverlayBounds.x,v.iconOverlayBounds.y,v.iconOverlayBounds.width,l)}if(C&&n>35){let y=f?35:n-35,M=f?35*.7:n-35*.7,T=y/n,P=M/n,E=e.createLinearGradient(t,0,t+n,0),O=mn(k,0);E.addColorStop(f?1:0,k),E.addColorStop(T,k),E.addColorStop(P,O),E.addColorStop(f?0:1,O),e.fillStyle=E}else e.fillStyle=k;if(f&&(e.textAlign="right"),v.textBounds!==void 0&&e.fillText(i.title,f?v.textBounds.x+v.textBounds.width:v.textBounds.x,r+o/2+Ar(e,l.headerFontFull)),f&&(e.textAlign="left"),i.indicatorIcon!==void 0&&v.indicatorIconBounds!==void 0&&(!C||!Yn(v.menuBounds.x,v.menuBounds.y,v.menuBounds.width,v.menuBounds.height,v.indicatorIconBounds.x,v.indicatorIconBounds.y,v.indicatorIconBounds.width,v.indicatorIconBounds.height))){let y=a?"selected":"normal";i.style==="highlight"&&(y=a?"selected":"special"),g.drawSprite(i.indicatorIcon,y,e,v.indicatorIconBounds.x,v.indicatorIconBounds.y,v.indicatorIconBounds.width,l)}if(C&&v.menuBounds!==void 0){let y=v.menuBounds,M=c!==void 0&&u!==void 0&&en(y,c+t,u+r);if(M||(e.globalAlpha=.7),i.menuIcon===void 0||i.menuIcon===ds.Triangle){e.beginPath();let T=y.x+y.width/2-5.5,P=y.y+y.height/2-3;nc(e,[{x:T,y:P},{x:T+11,y:P},{x:T+5.5,y:P+6}],1),e.fillStyle=k,e.fill()}else if(i.menuIcon===ds.Dots){e.beginPath();let T=y.x+y.width/2,P=y.y+y.height/2;rc(e,T,P),e.fillStyle=k,e.fill()}else{let T=y.x+(y.width-l.headerIconSize)/2,P=y.y+(y.height-l.headerIconSize)/2;g.drawSprite(i.menuIcon,"normal",e,T,P,l.headerIconSize,l)}M||(e.globalAlpha=1)}}function jl(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f,v){let k=oi(i.title)==="rtl",C=Ll(e,i,t,r,n,o,l,k);f===void 0?Fl(e,t,r,n,o,i,a,l,s,c,u,g,m,v,k,C):f({ctx:e,theme:l,rect:{x:t,y:r,width:n,height:o},column:i,columnIndex:i.sourceIndex,isSelected:a,hoverAmount:g,isHovered:s,hasSelectedCell:h,spriteManager:m,menuBounds:(C==null?void 0:C.menuBounds)??{x:0,y:0,height:0,width:0},hoverX:c,hoverY:u},()=>Fl(e,t,r,n,o,i,a,l,s,c,u,g,m,v,k,C))}var Yc=J(((e,t)=>{var r=uo();t.exports=(function(){try{var n=r(Object,"defineProperty");return n({},"",{}),n}catch{}})()})),Kc=J(((e,t)=>{var r=Yc();function n(o,i,a){i=="__proto__"&&r?r(o,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):o[i]=a}t.exports=n})),Xc=J(((e,t)=>{function r(n,o,i,a){for(var l=-1,s=n==null?0:n.length;++l<s;){var c=n[l];o(a,c,i(c),n)}return a}t.exports=r})),Vc=J(((e,t)=>{function r(n){return function(o,i,a){for(var l=-1,s=Object(o),c=a(o),u=c.length;u--;){var h=c[n?u:++l];if(i(s[h],h,s)===!1)break}return o}}t.exports=r})),Gc=J(((e,t)=>{t.exports=Vc()()})),Uc=J(((e,t)=>{function r(n,o){for(var i=-1,a=Array(n);++i<n;)a[i]=o(i);return a}t.exports=r})),qc=J(((e,t)=>{function r(){return!1}t.exports=r})),_l=J(((e,t)=>{var r=pn(),n=qc(),o=typeof e=="object"&&e&&!e.nodeType&&e,i=o&&typeof t=="object"&&t&&!t.nodeType&&t,a=i&&i.exports===o?r.Buffer:void 0;t.exports=(a?a.isBuffer:void 0)||n})),Jc=J(((e,t)=>{var r=ss(),n=us(),o=ls(),i="[object Arguments]",a="[object Array]",l="[object Boolean]",s="[object Date]",c="[object Error]",u="[object Function]",h="[object Map]",g="[object Number]",m="[object Object]",f="[object RegExp]",v="[object Set]",k="[object String]",C="[object WeakMap]",y="[object ArrayBuffer]",M="[object DataView]",T="[object Float32Array]",P="[object Float64Array]",E="[object Int8Array]",O="[object Int16Array]",L="[object Int32Array]",S="[object Uint8Array]",R="[object Uint8ClampedArray]",A="[object Uint16Array]",x="[object Uint32Array]",w={};w[T]=w[P]=w[E]=w[O]=w[L]=w[S]=w[R]=w[A]=w[x]=!0,w[i]=w[a]=w[y]=w[l]=w[M]=w[s]=w[c]=w[u]=w[h]=w[g]=w[m]=w[f]=w[v]=w[k]=w[C]=!1;function I(D){return o(D)&&n(D.length)&&!!w[r(D)]}t.exports=I})),Qc=J(((e,t)=>{function r(n){return function(o){return n(o)}}t.exports=r})),Zc=J(((e,t)=>{var r=of(),n=typeof e=="object"&&e&&!e.nodeType&&e,o=n&&typeof t=="object"&&t&&!t.nodeType&&t,i=o&&o.exports===n&&r.process;t.exports=(function(){try{return o&&o.require&&o.require("util").types||i&&i.binding&&i.binding("util")}catch{}})()})),Nl=J(((e,t)=>{var r=Jc(),n=Qc(),o=Zc(),i=o&&o.isTypedArray;t.exports=i?n(i):r})),eu=J(((e,t)=>{var r=Uc(),n=cs(),o=Ln(),i=_l(),a=es(),l=Nl(),s=Object.prototype.hasOwnProperty;function c(u,h){var g=o(u),m=!g&&n(u),f=!g&&!m&&i(u),v=!g&&!m&&!f&&l(u),k=g||m||f||v,C=k?r(u.length,String):[],y=C.length;for(var M in u)(h||s.call(u,M))&&!(k&&(M=="length"||f&&(M=="offset"||M=="parent")||v&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||a(M,y)))&&C.push(M);return C}t.exports=c})),tu=J(((e,t)=>{var r=Object.prototype;function n(o){var i=o&&o.constructor,a=typeof i=="function"&&i.prototype||r;return o===a}t.exports=n})),ru=J(((e,t)=>{function r(n,o){return function(i){return n(o(i))}}t.exports=r})),nu=J(((e,t)=>{t.exports=ru()(Object.keys,Object)})),ou=J(((e,t)=>{var r=tu(),n=nu(),o=Object.prototype.hasOwnProperty;function i(a){if(!r(a))return n(a);var l=[];for(var s in Object(a))o.call(a,s)&&s!="constructor"&&l.push(s);return l}t.exports=i})),wi=J(((e,t)=>{var r=eu(),n=ou(),o=gi();function i(a){return o(a)?r(a):n(a)}t.exports=i})),iu=J(((e,t)=>{var r=Gc(),n=wi();function o(i,a){return i&&r(i,a,n)}t.exports=o})),lu=J(((e,t)=>{var r=gi();function n(o,i){return function(a,l){if(a==null)return a;if(!r(a))return o(a,l);for(var s=a.length,c=i?s:-1,u=Object(a);(i?c--:++c<s)&&l(u[c],c,u)!==!1;);return a}}t.exports=n})),au=J(((e,t)=>{var r=iu();t.exports=lu()(r)})),su=J(((e,t)=>{var r=au();function n(o,i,a,l){return r(o,function(s,c,u){i(l,s,a(s),u)}),l}t.exports=n})),cu=J(((e,t)=>{var r=Ui();function n(){this.__data__=new r,this.size=0}t.exports=n})),uu=J(((e,t)=>{function r(n){var o=this.__data__,i=o.delete(n);return this.size=o.size,i}t.exports=r})),du=J(((e,t)=>{function r(n){return this.__data__.get(n)}t.exports=r})),hu=J(((e,t)=>{function r(n){return this.__data__.has(n)}t.exports=r})),fu=J(((e,t)=>{var r=Ui(),n=os(),o=ns(),i=200;function a(l,s){var c=this.__data__;if(c instanceof r){var u=c.__data__;if(!n||u.length<i-1)return u.push([l,s]),this.size=++c.size,this;c=this.__data__=new o(u)}return c.set(l,s),this.size=c.size,this}t.exports=a})),Bl=J(((e,t)=>{var r=Ui(),n=cu(),o=uu(),i=du(),a=hu(),l=fu();function s(c){this.size=(this.__data__=new r(c)).size}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=l,t.exports=s})),gu=J(((e,t)=>{function r(n,o){for(var i=-1,a=n==null?0:n.length;++i<a;)if(o(n[i],i,n))return!0;return!1}t.exports=r})),Wl=J(((e,t)=>{var r=Sl(),n=gu(),o=kl(),i=1,a=2;function l(s,c,u,h,g,m){var f=u&i,v=s.length,k=c.length;if(v!=k&&!(f&&k>v))return!1;var C=m.get(s),y=m.get(c);if(C&&y)return C==c&&y==s;var M=-1,T=!0,P=u&a?new r:void 0;for(m.set(s,c),m.set(c,s);++M<v;){var E=s[M],O=c[M];if(h)var L=f?h(O,E,M,c,s,m):h(E,O,M,s,c,m);if(L!==void 0){if(L)continue;T=!1;break}if(P){if(!n(c,function(S,R){if(!o(P,R)&&(E===S||g(E,S,u,h,m)))return P.push(R)})){T=!1;break}}else if(!(E===O||g(E,O,u,h,m))){T=!1;break}}return m.delete(s),m.delete(c),T}t.exports=l})),pu=J(((e,t)=>{t.exports=pn().Uint8Array})),mu=J(((e,t)=>{function r(n){var o=-1,i=Array(n.size);return n.forEach(function(a,l){i[++o]=[l,a]}),i}t.exports=r})),vu=J(((e,t)=>{var r=ts(),n=pu(),o=rs(),i=Wl(),a=mu(),l=fi(),s=1,c=2,u="[object Boolean]",h="[object Date]",g="[object Error]",m="[object Map]",f="[object Number]",v="[object RegExp]",k="[object Set]",C="[object String]",y="[object Symbol]",M="[object ArrayBuffer]",T="[object DataView]",P=r?r.prototype:void 0,E=P?P.valueOf:void 0;function O(L,S,R,A,x,w,I){switch(R){case T:if(L.byteLength!=S.byteLength||L.byteOffset!=S.byteOffset)return!1;L=L.buffer,S=S.buffer;case M:return!(L.byteLength!=S.byteLength||!w(new n(L),new n(S)));case u:case h:case f:return o(+L,+S);case g:return L.name==S.name&&L.message==S.message;case v:case C:return L==S+"";case m:var D=a;case k:var b=A&s;if(D||(D=l),L.size!=S.size&&!b)return!1;var G=I.get(L);if(G)return G==S;A|=c,I.set(L,S);var j=i(D(L),D(S),A,x,w,I);return I.delete(L),j;case y:if(E)return E.call(L)==E.call(S)}return!1}t.exports=O})),wu=J(((e,t)=>{var r=Rl(),n=Ln();function o(i,a,l){var s=a(i);return n(i)?s:r(s,l(i))}t.exports=o})),yu=J(((e,t)=>{function r(n,o){for(var i=-1,a=n==null?0:n.length,l=0,s=[];++i<a;){var c=n[i];o(c,i,n)&&(s[l++]=c)}return s}t.exports=r})),bu=J(((e,t)=>{function r(){return[]}t.exports=r})),xu=J(((e,t)=>{var r=yu(),n=bu(),o=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols;t.exports=i?function(a){return a==null?[]:(a=Object(a),r(i(a),function(l){return o.call(a,l)}))}:n})),Cu=J(((e,t)=>{var r=wu(),n=xu(),o=wi();function i(a){return r(a,o,n)}t.exports=i})),Su=J(((e,t)=>{var r=Cu(),n=1,o=Object.prototype.hasOwnProperty;function i(a,l,s,c,u,h){var g=s&n,m=r(a),f=m.length,v=r(l).length;if(f!=v&&!g)return!1;for(var k=f;k--;){var C=m[k];if(!(g?C in l:o.call(l,C)))return!1}var y=h.get(a),M=h.get(l);if(y&&M)return y==l&&M==a;var T=!0;h.set(a,l),h.set(l,a);for(var P=g;++k<f;){C=m[k];var E=a[C],O=l[C];if(c)var L=g?c(O,E,C,l,a,h):c(E,O,C,a,l,h);if(!(L===void 0?E===O||u(E,O,s,c,h):L)){T=!1;break}P||(P=C=="constructor")}if(T&&!P){var S=a.constructor,R=l.constructor;S!=R&&"constructor"in a&&"constructor"in l&&!(typeof S=="function"&&S instanceof S&&typeof R=="function"&&R instanceof R)&&(T=!1)}return h.delete(a),h.delete(l),T}t.exports=i})),ku=J(((e,t)=>{var r=uo(),n=pn();t.exports=r(n,"DataView")})),Mu=J(((e,t)=>{var r=uo(),n=pn();t.exports=r(n,"Promise")})),Ru=J(((e,t)=>{var r=uo(),n=pn();t.exports=r(n,"WeakMap")})),Eu=J(((e,t)=>{var r=ku(),n=os(),o=Mu(),i=Ml(),a=Ru(),l=ss(),s=tf(),c="[object Map]",u="[object Object]",h="[object Promise]",g="[object Set]",m="[object WeakMap]",f="[object DataView]",v=s(r),k=s(n),C=s(o),y=s(i),M=s(a),T=l;(r&&T(new r(new ArrayBuffer(1)))!=f||n&&T(new n)!=c||o&&T(o.resolve())!=h||i&&T(new i)!=g||a&&T(new a)!=m)&&(T=function(P){var E=l(P),O=E==u?P.constructor:void 0,L=O?s(O):"";if(L)switch(L){case v:return f;case k:return c;case C:return h;case y:return g;case M:return m}return E}),t.exports=T})),Iu=J(((e,t)=>{var r=Bl(),n=Wl(),o=vu(),i=Su(),a=Eu(),l=Ln(),s=_l(),c=Nl(),u=1,h="[object Arguments]",g="[object Array]",m="[object Object]",f=Object.prototype.hasOwnProperty;function v(k,C,y,M,T,P){var E=l(k),O=l(C),L=E?g:a(k),S=O?g:a(C);L=L==h?m:L,S=S==h?m:S;var R=L==m,A=S==m,x=L==S;if(x&&s(k)){if(!s(C))return!1;E=!0,R=!1}if(x&&!R)return P||(P=new r),E||c(k)?n(k,C,y,M,T,P):o(k,C,L,y,M,T,P);if(!(y&u)){var w=R&&f.call(k,"__wrapped__"),I=A&&f.call(C,"__wrapped__");if(w||I){var D=w?k.value():k,b=I?C.value():C;return P||(P=new r),T(D,b,y,M,P)}}return x?(P||(P=new r),i(k,C,y,M,T,P)):!1}t.exports=v})),$l=J(((e,t)=>{var r=Iu(),n=ls();function o(i,a,l,s,c){return i===a?!0:i==null||a==null||!n(i)&&!n(a)?i!==i&&a!==a:r(i,a,l,s,o,c)}t.exports=o})),Tu=J(((e,t)=>{var r=Bl(),n=$l(),o=1,i=2;function a(l,s,c,u){var h=c.length,g=h,m=!u;if(l==null)return!g;for(l=Object(l);h--;){var f=c[h];if(m&&f[2]?f[1]!==l[f[0]]:!(f[0]in l))return!1}for(;++h<g;){f=c[h];var v=f[0],k=l[v],C=f[1];if(m&&f[2]){if(k===void 0&&!(v in l))return!1}else{var y=new r;if(u)var M=u(k,C,v,l,s,y);if(!(M===void 0?n(C,k,o|i,u,y):M))return!1}}return!0}t.exports=a})),Yl=J(((e,t)=>{var r=co();function n(o){return o===o&&!r(o)}t.exports=n})),Pu=J(((e,t)=>{var r=Yl(),n=wi();function o(i){for(var a=n(i),l=a.length;l--;){var s=a[l],c=i[s];a[l]=[s,c,r(c)]}return a}t.exports=o})),Kl=J(((e,t)=>{function r(n,o){return function(i){return i==null?!1:i[n]===o&&(o!==void 0||n in Object(i))}}t.exports=r})),Ou=J(((e,t)=>{var r=Tu(),n=Pu(),o=Kl();function i(a){var l=n(a);return l.length==1&&l[0][2]?o(l[0][0],l[0][1]):function(s){return s===a||r(s,a,l)}}t.exports=i})),Xl=J(((e,t)=>{var r=ef(),n=qi();function o(i,a){a=r(a,i);for(var l=0,s=a.length;i!=null&&l<s;)i=i[n(a[l++])];return l&&l==s?i:void 0}t.exports=o})),Du=J(((e,t)=>{var r=Xl();function n(o,i,a){var l=o==null?void 0:r(o,i);return l===void 0?a:l}t.exports=n})),Hu=J(((e,t)=>{function r(n,o){return n!=null&&o in Object(n)}t.exports=r})),zu=J(((e,t)=>{var r=Hu(),n=J0();function o(i,a){return i!=null&&n(i,a,r)}t.exports=o})),Au=J(((e,t)=>{var r=$l(),n=Du(),o=zu(),i=as(),a=Yl(),l=Kl(),s=qi(),c=1,u=2;function h(g,m){return i(g)&&a(m)?l(s(g),m):function(f){var v=n(f,g);return v===void 0&&v===m?o(f,g):r(m,v,c|u)}}t.exports=h})),Lu=J(((e,t)=>{function r(n){return n}t.exports=r})),Fu=J(((e,t)=>{function r(n){return function(o){return o==null?void 0:o[n]}}t.exports=r})),ju=J(((e,t)=>{var r=Xl();function n(o){return function(i){return r(i,o)}}t.exports=n})),_u=J(((e,t)=>{var r=Fu(),n=ju(),o=as(),i=qi();function a(l){return o(l)?r(i(l)):n(l)}t.exports=a})),Nu=J(((e,t)=>{var r=Ou(),n=Au(),o=Lu(),i=Ln(),a=_u();function l(s){return typeof s=="function"?s:s==null?o:typeof s=="object"?i(s)?n(s[0],s[1]):r(s):a(s)}t.exports=l})),Bu=J(((e,t)=>{var r=Xc(),n=su(),o=Nu(),i=Ln();function a(l,s){return function(c,u){var h=i(c)?r:n,g=s?s():{};return h(c,l,o(u,2),g)}}t.exports=a})),Wu=Kt(J(((e,t)=>{var r=Kc(),n=Bu(),o=Object.prototype.hasOwnProperty;t.exports=n(function(i,a,l){o.call(i,l)?i[l].push(a):r(i,l,[a])})}))());function $u(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f,v,k,C,y){if(C!==void 0||t[t.length-1]!==r[t.length-1])return;let M=Tl(k);Lr(t,s,a,l,i,(T,P,E,O,L)=>{if(T!==t[t.length-1])return;P+=T.width;let S=Math.max(P,O);S>n||(e.save(),e.beginPath(),e.rect(S,i+1,1e4,o-i-1),e.clip(),wo(L,E,o,c,u,f,v,M,(R,A,x,w)=>{if(!w&&k.length>0&&!k.some(j=>Yn(P,R,1e4,x,j.x,j.y,j.width,j.height)))return;let I=g.hasIndex(A),D=m.hasIndex(A);e.beginPath();let b=h==null?void 0:h(A),G=b===void 0?y:Hr(y,b);G.bgCell!==y.bgCell&&(e.fillStyle=G.bgCell,e.fillRect(P,R,1e4,x)),D&&(e.fillStyle=G.bgHeader,e.fillRect(P,R,1e4,x)),I&&(e.fillStyle=G.accentLight,e.fillRect(P,R,1e4,x))}),e.restore())})}function Yu(e,t,r,n,o,i,a,l,s){let c=!1;for(let f of t)if(!f.sticky){c=a(f.sourceIndex);break}let u=s.horizontalBorderColor??s.borderColor,h=s.borderColor,g=c?yn(t):0,m;if(g!==0&&(m=fs(h,s.bgCell),e.beginPath(),e.moveTo(g+.5,0),e.lineTo(g+.5,n),e.strokeStyle=m,e.stroke()),o>0){let f=h===u&&m!==void 0?m:fs(u,s.bgCell),v=Zr(i,o,l);e.beginPath(),e.moveTo(0,n-v+.5),e.lineTo(r,n-v+.5),e.strokeStyle=f,e.stroke()}}var Vl=(e,t,r)=>{let n=0,o=t,i=0,a=r;if(e!==void 0&&e.length>0){n=2**53-1,i=2**53-1,o=-(2**53-1),a=-(2**53-1);for(let l of e)n=Math.min(n,l.x-1),o=Math.max(o,l.x+l.width+1),i=Math.min(i,l.y-1),a=Math.max(a,l.y+l.height+1)}return{minX:n,maxX:o,minY:i,maxY:a}};function Ku(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f){var x,w;let v=f.bgCell,{minX:k,maxX:C,minY:y,maxY:M}=Vl(l,i,a),T=[],P=a-Zr(m,g,c),E=s,O=r,L=0;for(;E+o<P;){let I=E+o,D=c(O);if(I>=y&&I<=M-1){let b=(x=u==null?void 0:u(O))==null?void 0:x.bgCell;b!==void 0&&b!==v&&O>=m-g&&T.push({x:k,y:I,w:C-k,h:D,color:b})}E+=D,O<m-g&&(L=E),O++}let S=0,R=Math.min(P,M)-L;if(R>0)for(let I=0;I<t.length;I++){let D=t[I];if(D.width===0)continue;let b=D.sticky?S:S+n,G=(w=D.themeOverride)==null?void 0:w.bgCell;G!==void 0&&G!==v&&b>=k&&b<=C&&h(I+1)&&T.push({x:b,y:L,w:D.width,h:R,color:G}),S+=D.width}if(T.length===0)return;let A;e.beginPath();for(let I=T.length-1;I>=0;I--){let D=T[I];A===void 0?A=D.color:D.color!==A&&(e.fillStyle=A,e.fill(),e.beginPath(),A=D.color),e.rect(D.x,D.y,D.w,D.h)}A!==void 0&&(e.fillStyle=A,e.fill()),e.beginPath()}function Gl(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f,v,k,C=!1){if(s!==void 0){e.beginPath(),e.save(),e.rect(0,0,i,a);for(let x of s)e.rect(x.x+1,x.y+1,x.width-1,x.height-1);e.clip("evenodd")}let y=k.horizontalBorderColor??k.borderColor,M=k.borderColor,{minX:T,maxX:P,minY:E,maxY:O}=Vl(l,i,a),L=[];e.beginPath();let S=.5;for(let x=0;x<t.length;x++){let w=t[x];if(w.width===0)continue;S+=w.width;let I=w.sticky?S:S+n;I>=T&&I<=P&&m(x+1)&&L.push({x1:I,y1:Math.max(c,E),x2:I,y2:Math.min(a,O),color:M})}let R=a+.5;for(let x=v-f;x<v;x++){let w=h(x);R-=w,L.push({x1:T,y1:R,x2:P,y2:R,color:y})}if(C!==!0){let x=u+.5,w=r,I=R;for(;x+o<I;){let D=x+o;if(D>=E&&D<=O-1){let b=g==null?void 0:g(w);L.push({x1:T,y1:D,x2:P,y2:D,color:(b==null?void 0:b.horizontalBorderColor)??(b==null?void 0:b.borderColor)??y})}x+=h(w),w++}}let A=(0,Wu.default)(L,x=>x.color);for(let x of Object.keys(A)){e.strokeStyle=x;for(let w of A[x])e.moveTo(w.x1,w.y1),e.lineTo(w.x2,w.y2);e.stroke(),e.beginPath()}s!==void 0&&e.restore()}function Xu(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f,v,k,C,y){let M=[];e.imageSmoothingEnabled=!1;let T=Math.min(o.cellYOffset,a),P=Math.max(o.cellYOffset,a),E=0;if(typeof C=="number")E+=(P-T)*C;else for(let I=T;I<P;I++)E+=C(I);a>o.cellYOffset&&(E=-E),E+=s-o.translateY;let O=Math.min(o.cellXOffset,i),L=Math.max(o.cellXOffset,i),S=0;for(let I=O;I<L;I++)S+=v[I].width;i>o.cellXOffset&&(S=-S),S+=l-o.translateX;let R=yn(k);if(S!==0&&E!==0)return{regions:[]};let A=c>0?Zr(g,c,C):0,x=u-R-Math.abs(S),w=h-m-A-Math.abs(E)-1;if(x>150&&w>150){let I={sx:0,sy:0,sw:u*f,sh:h*f,dx:0,dy:0,dw:u*f,dh:h*f};if(E>0?(I.sy=(m+1)*f,I.sh=w*f,I.dy=(E+m+1)*f,I.dh=w*f,M.push({x:0,y:m,width:u,height:E+1})):E<0&&(I.sy=(-E+m+1)*f,I.sh=w*f,I.dy=(m+1)*f,I.dh=w*f,M.push({x:0,y:h+E-A,width:u,height:-E+A})),S>0?(I.sx=R*f,I.sw=x*f,I.dx=(S+R)*f,I.dw=x*f,M.push({x:R-1,y:0,width:S+2,height:h})):S<0&&(I.sx=(R-S)*f,I.sw=x*f,I.dx=R*f,I.dw=x*f,M.push({x:u+S,y:0,width:-S,height:h})),e.setTransform(1,0,0,1,0,0),y){if(R>0&&S!==0&&E===0&&(n===void 0||(r==null?void 0:r[1])!==!1)){let D=R*f,b=h*f;e.drawImage(t,0,0,D,b,0,0,D,b)}if(A>0&&S===0&&E!==0&&(n===void 0||(r==null?void 0:r[0])!==!1)){let D=(h-A)*f,b=u*f,G=A*f;e.drawImage(t,0,D,b,G,0,D,b,G)}}e.drawImage(t,I.sx,I.sy,I.sw,I.sh,I.dx,I.dy,I.dw,I.dh),e.scale(f,f)}return e.imageSmoothingEnabled=!0,{regions:M}}function Vu(e,t,r,n,o,i,a,l,s,c){let u=[];return t!==e.cellXOffset||r!==e.cellYOffset||n!==e.translateX||o!==e.translateY||Lr(s,r,n,o,l,(h,g,m,f)=>{if(h.sourceIndex===c){let v=Math.max(g,f)+1;return u.push({x:v,y:0,width:i-v,height:a}),!0}}),u}function Gu(e,t){if(t===void 0||e.width!==t.width||e.height!==t.height||e.theme!==t.theme||e.headerHeight!==t.headerHeight||e.rowHeight!==t.rowHeight||e.rows!==t.rows||e.freezeColumns!==t.freezeColumns||e.getRowThemeOverride!==t.getRowThemeOverride||e.isFocused!==t.isFocused||e.isResizing!==t.isResizing||e.verticalBorder!==t.verticalBorder||e.getCellContent!==t.getCellContent||e.highlightRegions!==t.highlightRegions||e.selection!==t.selection||e.dragAndDropState!==t.dragAndDropState||e.prelightCells!==t.prelightCells||e.touchMode!==t.touchMode||e.maxScaleFactor!==t.maxScaleFactor)return!1;if(e.mappedColumns!==t.mappedColumns){if(e.mappedColumns.length>100||e.mappedColumns.length!==t.mappedColumns.length)return!1;let r;for(let n=0;n<e.mappedColumns.length;n++){let o=e.mappedColumns[n],i=t.mappedColumns[n];if(Jo(o,i))continue;if(r!==void 0||o.width===i.width)return!1;let{width:a,...l}=o,{width:s,...c}=i;if(!Jo(l,c))return!1;r=n}return r===void 0?!0:r}return!0}function Ul(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f,v){let k=f==null?void 0:f.filter(O=>O.style!=="no-outline");if(k===void 0||k.length===0)return;let C=yn(l),y=Zr(m,g,h),M=[s,0,l.length,m-g],T=[C,0,t,r-y],P=k.map(O=>{let L=O.range,S=O.style??"dashed";return jc(L,M,t,r,T).map(R=>{let A=R.rect,x=si(A.x,A.y,t,r,u,c+u,n,o,i,a,m,s,g,l,h),w=A.width===1&&A.height===1?x:si(A.x+A.width-1,A.y+A.height-1,t,r,u,c+u,n,o,i,a,m,s,g,l,h);return A.x+A.width>=l.length&&--w.width,A.y+A.height>=m&&--w.height,{color:O.color,style:S,clip:R.clip,rect:Fc({x:x.x,y:x.y,width:w.x+w.width-x.x,height:w.y+w.height-x.y},t,r,8)}})}),E=()=>{e.lineWidth=1;let O=!1;for(let L of P)for(let S of L)if((S==null?void 0:S.rect)!==void 0&&Yn(0,0,t,r,S.rect.x,S.rect.y,S.rect.width,S.rect.height)){let R=O,A=!Lc(S.clip,S.rect);e.beginPath(),A&&(e.save(),e.rect(S.clip.x,S.clip.y,S.clip.width,S.clip.height),e.clip()),S.style==="dashed"&&!O?(e.setLineDash([5,3]),O=!0):(S.style==="solid"||S.style==="solid-outline")&&O&&(e.setLineDash([]),O=!1),e.strokeStyle=S.style==="solid-outline"?fr(fr(S.color,v.borderColor),v.bgCell):mn(S.color,1),e.closePath(),e.strokeRect(S.rect.x+.5,S.rect.y+.5,S.rect.width-1,S.rect.height-1),A&&(e.restore(),O=R)}O&&e.setLineDash([])};return E(),E}function ql(e,t,r,n,o){e.beginPath(),e.moveTo(t,r),e.lineTo(t,n),e.lineWidth=2,e.strokeStyle=o,e.stroke(),e.globalAlpha=1}function yi(e,t,r,n,o,i,a,l,s,c,u,h,g,m,f,v,k){if(u.current===void 0)return;let C=u.current.range,y=u.current.cell,M=[C.x+C.width-1,C.y+C.height-1];if(y[1]>=k&&M[1]>=k||!a.some(w=>w.sourceIndex===y[0]||w.sourceIndex===M[0]))return;let[T,P]=u.current.cell,E=g(u.current.cell),O=E.span??[T,T],L=P>=k-m,S=m>0&&!L?Zr(k,m,h)-1:0,R=M[1],A;if(Lr(a,n,o,i,c,(w,I,D,b,G)=>{if(w.sticky&&T>w.sourceIndex)return;let j=w.sourceIndex<O[0],Z=w.sourceIndex>O[1],ee=w.sourceIndex===M[0];if(!(!ee&&(j||Z)))return wo(G,D,r,k,h,m,f,void 0,(X,ce,oe)=>{if(ce!==P&&ce!==R)return;let de=I,Oe=w.width;if(E.span!==void 0){let te=Ol(E.span,I,X,w.width,oe,w,l),$=w.sticky?te[0]:te[1];$!==void 0&&(de=$.x,Oe=$.width)}return ce===R&&ee&&v&&(A=()=>{var te;b>de&&!w.sticky&&(e.beginPath(),e.rect(b,0,t-b,r),e.clip()),e.beginPath(),e.rect(de+Oe-4,X+oe-4,4,4),e.fillStyle=((te=w.themeOverride)==null?void 0:te.accentColor)??s.accentColor,e.fill()}),A!==void 0}),A!==void 0}),A===void 0)return;let x=()=>{e.save(),e.beginPath(),e.rect(0,c,t,r-c-S),e.clip(),A==null||A(),e.restore()};return x(),x}function Uu(e,t,r,n,o,i,a,l,s){s===void 0||s.size===0||(e.beginPath(),Pl(t,r,i,n,(c,u,h,g,m,f)=>{s.hasItemInRectangle({x:c[0],y:-2,width:c[1]-c[0]+1,height:1})&&e.rect(h,g,m,f)}),Lr(t,l,i,a,o,(c,u,h,g)=>{let m=Math.max(0,g-u),f=u+m+1,v=c.width-m-1;s.has([c.sourceIndex,-1])&&e.rect(f,n,v,o-n)}),e.clip())}function qu(e,t,r,n,o,i,a,l,s,c){let u=0;return Lr(e,i,n,o,r,(h,g,m,f,v)=>(wo(v,m,t,a,l,s,c,void 0,(k,C,y,M)=>{M||(u=Math.max(C,u))}),!0)),u}function Jl(e,t){var lr;let{canvasCtx:r,headerCanvasCtx:n,width:o,height:i,cellXOffset:a,cellYOffset:l,translateX:s,translateY:c,mappedColumns:u,enableGroups:h,freezeColumns:g,dragAndDropState:m,theme:f,drawFocus:v,headerHeight:k,groupHeaderHeight:C,disabledRows:y,rowHeight:M,verticalBorder:T,overrideCursor:P,isResizing:E,selection:O,fillHandle:L,freezeTrailingRows:S,rows:R,getCellContent:A,getGroupDetails:x,getRowThemeOverride:w,isFocused:I,drawHeaderCallback:D,prelightCells:b,drawCellCallback:G,highlightRegions:j,resizeCol:Z,imageLoader:ee,lastBlitData:X,hoverValues:ce,hyperWrapping:oe,hoverInfo:de,spriteManager:Oe,maxScaleFactor:te,hasAppendRow:$,touchMode:Q,enqueue:re,renderStateProvider:se,getCellRenderer:Be,renderStrategy:Ae,bufferACtx:Me,bufferBCtx:Xe,damage:He,minimumCellWidth:ct,resizeIndicator:ut}=e;if(o===0||i===0)return;let Ze=Ae==="double-buffer",ae=Math.min(te,Math.ceil(window.devicePixelRatio??1)),Te=Ae!=="direct"&&Gu(e,t),De=r.canvas;(De.width!==o*ae||De.height!==i*ae)&&(De.width=o*ae,De.height=i*ae,De.style.width=o+"px",De.style.height=i+"px");let We=n.canvas,ye=h?C+k:k,Ge=ye+1;(We.width!==o*ae||We.height!==Ge*ae)&&(We.width=o*ae,We.height=Ge*ae,We.style.width=o+"px",We.style.height=Ge+"px");let $e=Me.canvas,Ue=Xe.canvas;Ze&&($e.width!==o*ae||$e.height!==i*ae)&&($e.width=o*ae,$e.height=i*ae,X.current!==void 0&&(X.current.aBufferScroll=void 0)),Ze&&(Ue.width!==o*ae||Ue.height!==i*ae)&&(Ue.width=o*ae,Ue.height=i*ae,X.current!==void 0&&(X.current.bBufferScroll=void 0));let we=X.current;if(Te===!0&&a===(we==null?void 0:we.cellXOffset)&&l===(we==null?void 0:we.cellYOffset)&&s===(we==null?void 0:we.translateX)&&c===(we==null?void 0:we.translateY))return;let be=null;Ze&&(be=r);let nt=n,Je;Je=Ze?He===void 0?(we==null?void 0:we.lastBuffer)==="b"?Me:Xe:(we==null?void 0:we.lastBuffer)==="b"?Xe:Me:r;let qe=Je.canvas,pt=Ze?qe===$e?Ue:$e:De,et=typeof M=="number"?()=>M:M;nt.save(),Je.save(),nt.beginPath(),Je.beginPath(),nt.textBaseline="middle",Je.textBaseline="middle",ae!==1&&(nt.scale(ae,ae),Je.scale(ae,ae));let Le=ai(u,a,o,m,s),Ct=[],Lt=v&&((lr=O.current)==null?void 0:lr.cell[1])===l&&c===0,St=!1;if(j!==void 0){for(let Ee of j)if(Ee.style!=="no-outline"&&Ee.range.y===l&&c===0){St=!0;break}}let It=()=>{Bc(nt,Le,h,de,o,s,k,C,m,E,O,f,Oe,ce,T,x,He,D,Q),Gl(nt,Le,l,s,c,o,i,void 0,void 0,C,ye,et,w,T,S,R,f,!0),nt.beginPath(),nt.moveTo(0,Ge-.5),nt.lineTo(o,Ge-.5),nt.strokeStyle=fr(f.headerBottomBorderColor??f.horizontalBorderColor??f.borderColor,f.bgHeader),nt.stroke(),St&&Ul(nt,o,i,a,l,s,c,u,g,k,C,M,S,R,j,f),Lt&&yi(nt,o,i,l,s,c,Le,u,f,ye,O,et,A,S,$,L,R)};if(He!==void 0){let Ee=Le[Le.length-1].sourceIndex+1,wt=He.hasItemInRegion([{x:a,y:-2,width:Ee,height:2},{x:a,y:l,width:Ee,height:300},{x:0,y:l,width:g,height:300},{x:0,y:-2,width:g,height:2},{x:a,y:R-S,width:Ee,height:S,when:S>0}]),mr=ar=>{Hl(ar,Le,u,i,ye,s,c,l,R,et,A,x,w,y,I,v,S,$,Ct,He,O,b,j,ee,Oe,ce,de,G,oe,f,re,se,Be,P,ct);let er=O.current;L&&v&&er!==void 0&&He.has(dl(er.range))&&yi(ar,o,i,l,s,c,Le,u,f,ye,O,et,A,S,$,L,R)};wt&&(mr(Je),be!==null&&(be.save(),be.scale(ae,ae),be.textBaseline="middle",mr(be),be.restore()),He.hasHeader()&&(Uu(nt,Le,o,C,ye,s,c,l,He),It())),Je.restore(),nt.restore();return}if((Te!==!0||a!==(we==null?void 0:we.cellXOffset)||s!==(we==null?void 0:we.translateX)||Lt!==(we==null?void 0:we.mustDrawFocusOnHeader)||St!==(we==null?void 0:we.mustDrawHighlightRingsOnHeader))&&It(),Te===!0){Qt(pt!==void 0&&we!==void 0);let{regions:Ee}=Xu(Je,pt,pt===$e?we.aBufferScroll:we.bBufferScroll,pt===$e?we.bBufferScroll:we.aBufferScroll,we,a,l,s,c,S,o,i,R,ye,ae,u,Le,M,Ze);Ct=Ee}else Te!==!1&&(Qt(we!==void 0),Ct=Vu(we,a,l,s,c,o,i,ye,Le,Te));Yu(Je,Le,o,i,S,R,T,et,f);let Nt=Ul(Je,o,i,a,l,s,c,u,g,k,C,M,S,R,j,f),vt=v?yi(Je,o,i,l,s,c,Le,u,f,ye,O,et,A,S,$,L,R):void 0;if(Je.fillStyle=f.bgCell,Ct.length>0){Je.beginPath();for(let Ee of Ct)Je.rect(Ee.x,Ee.y,Ee.width,Ee.height);Je.clip(),Je.fill(),Je.beginPath()}else Je.fillRect(0,0,o,i);let pr=Hl(Je,Le,u,i,ye,s,c,l,R,et,A,x,w,y,I,v,S,$,Ct,He,O,b,j,ee,Oe,ce,de,G,oe,f,re,se,Be,P,ct);$u(Je,Le,u,o,i,ye,s,c,l,R,et,w,O.rows,y,S,$,Ct,He,f),Ku(Je,Le,l,s,c,o,i,Ct,ye,et,w,T,S,R,f),Gl(Je,Le,l,s,c,o,i,Ct,pr,C,ye,et,w,T,S,R,f),Nt==null||Nt(),vt==null||vt(),E&&ut!=="none"&&Lr(Le,0,s,0,ye,(Ee,wt)=>Ee.sourceIndex===Z?(ql(nt,wt+Ee.width,0,ye+1,fr(f.resizeIndicatorColor??f.accentLight,f.bgHeader)),ut==="full"&&ql(Je,wt+Ee.width,ye,i,fr(f.resizeIndicatorColor??f.accentLight,f.bgCell)),!0):!1),be!==null&&(be.fillStyle=f.bgCell,be.fillRect(0,0,o,i),be.drawImage(Je.canvas,0,0));let jr=qu(Le,i,ye,s,c,l,R,et,S,$);ee==null||ee.setWindow({x:a,y:l,width:Le.length,height:jr-l},g,Array.from({length:S},(Ee,wt)=>R-1-wt));let ft=we!==void 0&&(a!==we.cellXOffset||s!==we.translateX),kr=we!==void 0&&(l!==we.cellYOffset||c!==we.translateY);X.current={cellXOffset:a,cellYOffset:l,translateX:s,translateY:c,mustDrawFocusOnHeader:Lt,mustDrawHighlightRingsOnHeader:St,lastBuffer:Ze?qe===$e?"a":"b":void 0,aBufferScroll:qe===$e?[ft,kr]:we==null?void 0:we.aBufferScroll,bBufferScroll:qe===Ue?[ft,kr]:we==null?void 0:we.bBufferScroll},Je.restore(),nt.restore()}var Ql=Kt(vo()),Ju=80;function Qu(e){let t=e-1;return t*t*t+1}var Zu=class{constructor(e){rt(this,"callback");rt(this,"currentHoveredItem");rt(this,"leavingItems",[]);rt(this,"lastAnimationTime");rt(this,"addToLeavingItems",e=>{this.leavingItems.some(t=>Nn(t.item,e.item))||this.leavingItems.push(e)});rt(this,"removeFromLeavingItems",e=>{let t=this.leavingItems.find(r=>Nn(r.item,e));return this.leavingItems=this.leavingItems.filter(r=>r!==t),(t==null?void 0:t.hoverAmount)??0});rt(this,"cleanUpLeavingElements",()=>{this.leavingItems=this.leavingItems.filter(e=>e.hoverAmount>0)});rt(this,"shouldStep",()=>{let e=this.leavingItems.length>0,t=this.currentHoveredItem!==void 0&&this.currentHoveredItem.hoverAmount<1;return e||t});rt(this,"getAnimatingItems",()=>this.currentHoveredItem===void 0?this.leavingItems.map(e=>({...e,hoverAmount:Qu(e.hoverAmount)})):[...this.leavingItems,this.currentHoveredItem]);rt(this,"step",e=>{if(this.lastAnimationTime===void 0)this.lastAnimationTime=e;else{let t=(e-this.lastAnimationTime)/Ju;for(let n of this.leavingItems)n.hoverAmount=(0,Ql.default)(n.hoverAmount-t,0,1);this.currentHoveredItem!==void 0&&(this.currentHoveredItem.hoverAmount=(0,Ql.default)(this.currentHoveredItem.hoverAmount+t,0,1));let r=this.getAnimatingItems();this.callback(r),this.cleanUpLeavingElements()}this.shouldStep()?(this.lastAnimationTime=e,window.requestAnimationFrame(this.step)):this.lastAnimationTime=void 0});rt(this,"setHovered",e=>{var t;if(!Nn((t=this.currentHoveredItem)==null?void 0:t.item,e)){if(this.currentHoveredItem!==void 0&&this.addToLeavingItems(this.currentHoveredItem),e!==void 0){let r=this.removeFromLeavingItems(e);this.currentHoveredItem={item:e,hoverAmount:r}}else this.currentHoveredItem=void 0;this.lastAnimationTime===void 0&&window.requestAnimationFrame(this.step)}});this.callback=e}},ed=class{constructor(e){rt(this,"fn");rt(this,"val");this.fn=e}get value(){return this.val??(this.val=this.fn())}};function bi(e){return new ed(e)}const td=bi(()=>window.navigator.userAgent.includes("Firefox")),yo=bi(()=>window.navigator.userAgent.includes("Mac OS")&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")),bo=bi(()=>window.navigator.platform.toLowerCase().startsWith("mac"));function rd(e){let t=d.useRef([]),r=d.useRef(0),n=d.useRef(e);n.current=e;let o=d.useCallback(()=>{let i=()=>window.requestAnimationFrame(a),a=()=>{let l=t.current.map(di);t.current=[],n.current(new $n(l)),t.current.length>0?r.current++:r.current=0};window.requestAnimationFrame(r.current>600?i:a)},[]);return d.useCallback(i=>{t.current.length===0&&o();let a=ir(i[0],i[1]);t.current.includes(a)||t.current.push(a)},[o])}const Zl="header",ea="group-header";var Gn;(function(e){e[e.Start=-2]="Start",e[e.StartPadding=-1]="StartPadding",e[e.Center=0]="Center",e[e.EndPadding=1]="EndPadding",e[e.End=2]="End"})(Gn||(Gn={}));function ta(e,t){return e===t?!0:(e==null?void 0:e.kind)==="out-of-bounds"?(e==null?void 0:e.kind)===(t==null?void 0:t.kind)&&(e==null?void 0:e.location[0])===(t==null?void 0:t.location[0])&&(e==null?void 0:e.location[1])===(t==null?void 0:t.location[1])&&(e==null?void 0:e.region[0])===(t==null?void 0:t.region[0])&&(e==null?void 0:e.region[1])===(t==null?void 0:t.region[1]):(e==null?void 0:e.kind)===(t==null?void 0:t.kind)&&(e==null?void 0:e.location[0])===(t==null?void 0:t.location[0])&&(e==null?void 0:e.location[1])===(t==null?void 0:t.location[1])}var ra=Kt(vo()),nd=Kt(El()),na=6,od=(e,t)=>{var r;return e.kind===ve.Custom?e.copyData:((r=t==null?void 0:t(e))==null?void 0:r.getAccessibilityString(e))??""},id=d.memo(d.forwardRef((e,t)=>{let{width:r,height:n,accessibilityHeight:o,columns:i,cellXOffset:a,cellYOffset:l,headerHeight:s,fillHandle:c=!1,groupHeaderHeight:u,rowHeight:h,rows:g,getCellContent:m,getRowThemeOverride:f,onHeaderMenuClick:v,onHeaderIndicatorClick:k,enableGroups:C,isFilling:y,onCanvasFocused:M,onCanvasBlur:T,isFocused:P,selection:E,freezeColumns:O,onContextMenu:L,freezeTrailingRows:S,fixedShadowX:R=!0,fixedShadowY:A=!0,drawFocusRing:x,onMouseDown:w,onMouseUp:I,onMouseMoveRaw:D,onMouseMove:b,onItemHovered:G,dragAndDropState:j,firstColAccessible:Z,onKeyDown:ee,onKeyUp:X,highlightRegions:ce,canvasRef:oe,onDragStart:de,onDragEnd:Oe,eventTargetRef:te,isResizing:$,resizeColumn:Q,isDragging:re,isDraggable:se=!1,allowResize:Be,disabledRows:Ae,hasAppendRow:Me,getGroupDetails:Xe,theme:He,prelightCells:ct,headerIcons:ut,verticalBorder:Ze,drawCell:ae,drawHeader:Te,onCellFocused:De,onDragOverCell:We,onDrop:ye,onDragLeave:Ge,imageWindowLoader:$e,smoothScrollX:Ue=!1,smoothScrollY:we=!1,experimental:be,getCellRenderer:nt,resizeIndicator:Je="full"}=e,qe=e.translateX??0,pt=e.translateY??0,et=Math.max(O,Math.min(i.length-1,a)),Le=d.useRef(null),Ct=d.useRef((be==null?void 0:be.eventTarget)??window),Lt=Ct.current,St=$e,It=d.useRef(),[Nt,vt]=d.useState(!1),pr=d.useRef([]),jr=d.useRef(),[ft,kr]=d.useState(),[lr,Ee]=d.useState(),wt=d.useRef(null),[mr,ar]=d.useState(),[er,Ve]=d.useState(!1),yt=d.useRef(er);yt.current=er;let kt=d.useMemo(()=>new zc(ut,()=>{kn.current=void 0,nn.current()}),[ut]),Wt=C?u+s:s,Ot=d.useRef(-1),Gt=((be==null?void 0:be.enableFirefoxRescaling)??!1)&&td.value,_r=((be==null?void 0:be.enableSafariRescaling)??!1)&&yo.value;d.useLayoutEffect(()=>{window.devicePixelRatio===1||!Gt&&!_r||(Ot.current!==-1&&vt(!0),window.clearTimeout(Ot.current),Ot.current=window.setTimeout(()=>{vt(!1),Ot.current=-1},200))},[l,et,qe,pt,Gt,_r]);let Mt=Ys(i,O),bt=d.useMemo(()=>R?yn(Mt,j):0,[Mt,j,R]),Pt=d.useCallback((F,ne,ge)=>{let ue=F.getBoundingClientRect();if(ne>=Mt.length||ge>=g)return;let ie=ue.width/r,me=si(ne,ge,r,n,u,Wt,et,l,qe,pt,g,O,S,Mt,h);return ie!==1&&(me.x*=ie,me.y*=ie,me.width*=ie,me.height*=ie),me.x+=ue.x,me.y+=ue.y,me},[r,n,u,Wt,et,l,qe,pt,g,O,S,Mt,h]),Dt=d.useCallback((F,ne,ge,ue)=>{let ie=F.getBoundingClientRect(),me=ie.width/r,Fe=(ne-ie.left)/me,_e=(ge-ie.top)/me,Re=ai(Mt,et,r,void 0,qe),at=0,fe=0;ue instanceof MouseEvent&&(at=ue.button,fe=ue.buttons);let Ie=Gs(Fe,Re,qe),Ce=Us(_e,n,C,s,u,g,h,l,pt,S),Ne=(ue==null?void 0:ue.shiftKey)===!0,Rt=(ue==null?void 0:ue.ctrlKey)===!0,qt=(ue==null?void 0:ue.metaKey)===!0,Et=ue!==void 0&&!(ue instanceof MouseEvent)||(ue==null?void 0:ue.pointerType)==="touch",mt=[Fe<0?-1:r<Fe?1:0,_e<Wt?-1:n<_e?1:0],xt;if(Ie===-1||_e<0||Fe<0||Ce===void 0||Fe>r||_e>n){let it=Fe>r?1:Fe<0?-1:0,Xt=_e>n?1:_e<0?-1:0,zt=it*2,Kr=Xt*2;it===0&&(zt=Ie===-1?Gn.EndPadding:Gn.Center),Xt===0&&(Kr=Ce===void 0?Gn.EndPadding:Gn.Center);let sr=!1;if(Ie===-1&&Ce===-1){let At=Pt(F,Mt.length-1,-1);Qt(At!==void 0),sr=ne<At.x+At.width+5}let ot=Fe>r&&Fe<r+ii()||_e>n&&_e<n+ii();xt={kind:"out-of-bounds",location:[Ie===-1?Fe<0?0:Mt.length-1:Ie,Ce??g-1],region:[zt,Kr],shiftKey:Ne,ctrlKey:Rt,metaKey:qt,isEdge:sr,isTouch:Et,button:at,buttons:fe,scrollEdge:mt,isMaybeScrollbar:ot}}else if(Ce<=-1){let it=Pt(F,Ie,Ce);Qt(it!==void 0);let Xt=it!==void 0&&it.x+it.width-ne<=5,zt=Ie-1;ne-it.x<=5&&zt>=0?(Xt=!0,it=Pt(F,zt,Ce),Qt(it!==void 0),xt={kind:C&&Ce===-2?ea:Zl,location:[zt,Ce],bounds:it,group:Mt[zt].group??"",isEdge:Xt,shiftKey:Ne,ctrlKey:Rt,metaKey:qt,isTouch:Et,localEventX:ne-it.x,localEventY:ge-it.y,button:at,buttons:fe,scrollEdge:mt}):xt={kind:C&&Ce===-2?ea:Zl,group:Mt[Ie].group??"",location:[Ie,Ce],bounds:it,isEdge:Xt,shiftKey:Ne,ctrlKey:Rt,metaKey:qt,isTouch:Et,localEventX:ne-it.x,localEventY:ge-it.y,button:at,buttons:fe,scrollEdge:mt}}else{let it=Pt(F,Ie,Ce);Qt(it!==void 0);let Xt=it!==void 0&&it.x+it.width-ne<5,zt=!1;if(c&&E.current!==void 0){let Kr=dl(E.current.range),sr=Pt(F,Kr[0],Kr[1]);if(sr!==void 0){let ot=sr.x+sr.width-2,At=sr.y+sr.height-2;zt=Math.abs(ot-ne)<na&&Math.abs(At-ge)<na}}xt={kind:"cell",location:[Ie,Ce],bounds:it,isEdge:Xt,shiftKey:Ne,ctrlKey:Rt,isFillHandle:zt,metaKey:qt,isTouch:Et,localEventX:ne-it.x,localEventY:ge-it.y,button:at,buttons:fe,scrollEdge:mt}}return xt},[r,Mt,et,qe,n,C,s,u,g,h,l,pt,S,Pt,c,E,Wt]),[Mr]=ft??[],ko=d.useRef(()=>{}),Nr=d.useRef(ft);Nr.current=ft;let[Rr,Er]=d.useMemo(()=>{let F=document.createElement("canvas"),ne=document.createElement("canvas");return F.style.display="none",F.style.opacity="0",F.style.position="fixed",ne.style.display="none",ne.style.opacity="0",ne.style.position="fixed",[F.getContext("2d",{alpha:!1}),ne.getContext("2d",{alpha:!1})]},[]);d.useLayoutEffect(()=>{if(!(Rr===null||Er===null))return document.documentElement.append(Rr.canvas),document.documentElement.append(Er.canvas),()=>{Rr.canvas.remove(),Er.canvas.remove()}},[Rr,Er]);let vr=d.useMemo(()=>new oc,[]),Mo=Gt&&Nt?1:_r&&Nt?2:5,Ro=(be==null?void 0:be.disableMinimumCellWidth)===!0?1:10,kn=d.useRef(),Mn=d.useRef(null),Rn=d.useRef(null),rn=d.useCallback(()=>{var Fe;let F=Le.current,ne=wt.current;if(F===null||ne===null||(Mn.current===null&&(Mn.current=F.getContext("2d",{alpha:!1}),F.width=0,F.height=0),Rn.current===null&&(Rn.current=ne.getContext("2d",{alpha:!1}),ne.width=0,ne.height=0),Mn.current===null||Rn.current===null||Rr===null||Er===null))return;let ge=!1,ue=_e=>{ge=!0,ar(_e)},ie=kn.current,me={headerCanvasCtx:Rn.current,canvasCtx:Mn.current,bufferACtx:Rr,bufferBCtx:Er,width:r,height:n,cellXOffset:et,cellYOffset:l,translateX:Math.round(qe),translateY:Math.round(pt),mappedColumns:Mt,enableGroups:C,freezeColumns:O,dragAndDropState:j,theme:He,headerHeight:s,groupHeaderHeight:u,disabledRows:Ae??lt.empty(),rowHeight:h,verticalBorder:Ze,isResizing:$,resizeCol:Q,isFocused:P,selection:E,fillHandle:c,drawCellCallback:ae,hasAppendRow:Me,overrideCursor:ue,maxScaleFactor:Mo,freezeTrailingRows:S,rows:g,drawFocus:x,getCellContent:m,getGroupDetails:Xe??(_e=>({name:_e})),getRowThemeOverride:f,drawHeaderCallback:Te,prelightCells:ct,highlightRegions:ce,imageLoader:St,lastBlitData:jr,damage:It.current,hoverValues:pr.current,hoverInfo:Nr.current,spriteManager:kt,scrolling:Nt,hyperWrapping:(be==null?void 0:be.hyperWrapping)??!1,touchMode:er,enqueue:ko.current,renderStateProvider:vr,renderStrategy:(be==null?void 0:be.renderStrategy)??(yo.value?"double-buffer":"single-buffer"),getCellRenderer:nt,minimumCellWidth:Ro,resizeIndicator:Je};me.damage===void 0?(kn.current=me,Jl(me,ie)):Jl(me,void 0),!ge&&(me.damage===void 0||me.damage.has((Fe=Nr==null?void 0:Nr.current)==null?void 0:Fe[0]))&&ar(void 0)},[Rr,Er,r,n,et,l,qe,pt,Mt,C,O,j,He,s,u,Ae,h,Ze,$,Me,Q,P,E,c,S,g,x,Mo,m,Xe,f,ae,Te,ct,ce,St,kt,Nt,be==null?void 0:be.hyperWrapping,be==null?void 0:be.renderStrategy,er,vr,nt,Ro,Je]),nn=d.useRef(rn);d.useLayoutEffect(()=>{rn(),nn.current=rn},[rn]),d.useLayoutEffect(()=>{(async()=>{var F;((F=document==null?void 0:document.fonts)==null?void 0:F.ready)!==void 0&&(await document.fonts.ready,kn.current=void 0,nn.current())})()},[]);let Br=d.useCallback(F=>{It.current=F,nn.current(),It.current=void 0},[]);ko.current=rd(Br);let Eo=d.useCallback(F=>{Br(new $n(F.map(ne=>ne.cell)))},[Br]);St.setCallback(Br);let[Ei,Io]=d.useState(!1),[on,Wr]=Mr??[],Ii=on!==void 0&&Wr===-1&&i[on].headerRowMarkerDisabled!==!0,qn=on!==void 0&&Wr===-2,To=!1,Jn=!1,ln=mr;if(ln===void 0&&on!==void 0&&Wr!==void 0&&Wr>-1&&Wr<g){let F=m([on,Wr],!0);To=F.kind===Gr.NewRow||F.kind===Gr.Marker&&F.markerKind!=="number",Jn=F.kind===ve.Boolean&&Ji(F),ln=F.cursor}let Qn=re?"grabbing":(lr??!1)||$?"col-resize":Ei||y?"crosshair":ln===void 0?Ii||To||Jn||qn?"pointer":"default":ln,st=d.useMemo(()=>({contain:"strict",display:"block",cursor:Qn}),[Qn]),Ut=d.useRef("default"),Po=te==null?void 0:te.current;Po!=null&&Ut.current!==st.cursor&&(Po.style.cursor=Ut.current=st.cursor);let Ir=d.useCallback((F,ne,ge,ue)=>{if(Xe===void 0)return;let ie=Xe(F);if(ie.actions!==void 0){let me=Al(ne,ie.actions);for(let[Fe,_e]of me.entries())if(en(_e,ge+ne.x,ue+_e.y))return ie.actions[Fe]}},[Xe]),Tr=d.useCallback((F,ne,ge,ue)=>{let ie=Mt[ne];if(!re&&!$&&!(lr??!1)){let me=Pt(F,ne,-1);Qt(me!==void 0);let Fe=Ll(void 0,ie,me.x,me.y,me.width,me.height,He,oi(ie.title)==="rtl");if(ie.hasMenu===!0&&Fe.menuBounds!==void 0&&en(Fe.menuBounds,ge,ue))return{area:"menu",bounds:Fe.menuBounds};if(ie.indicatorIcon!==void 0&&Fe.indicatorIconBounds!==void 0&&en(Fe.indicatorIconBounds,ge,ue))return{area:"indicator",bounds:Fe.indicatorIconBounds}}},[Mt,Pt,lr,re,$,He]),En=d.useRef(0),$r=d.useRef(),an=d.useRef(!1),sn=d.useCallback(F=>{let ne=Le.current,ge=te==null?void 0:te.current;if(ne===null||F.target!==ne&&F.target!==ge)return;an.current=!0;let ue,ie;if(F instanceof MouseEvent?(ue=F.clientX,ie=F.clientY):(ue=F.touches[0].clientX,ie=F.touches[0].clientY),F.target===ge&&ge!==null){let Fe=ge.getBoundingClientRect();if(ue>Fe.right||ie>Fe.bottom)return}let me=Dt(ne,ue,ie,F);$r.current=me.location,me.isTouch&&(En.current=Date.now()),yt.current!==me.isTouch&&Ve(me.isTouch),!(me.kind==="header"&&Tr(ne,me.location[0],ue,ie)!==void 0)&&(me.kind==="group-header"&&Ir(me.group,me.bounds,me.localEventX,me.localEventY)!==void 0||(w==null||w(me),!me.isTouch&&se!==!0&&se!==me.kind&&me.button<3&&me.button!==1&&F.preventDefault()))},[te,se,Dt,Ir,Tr,w]);_t("touchstart",sn,Lt,!1),_t("mousedown",sn,Lt,!1);let Pr=d.useRef(0),cn=d.useCallback(F=>{var Ie,Ce;let ne=Pr.current;Pr.current=Date.now();let ge=Le.current;if(an.current=!1,I===void 0||ge===null)return;let ue=te==null?void 0:te.current,ie=F.target!==ge&&F.target!==ue,me,Fe,_e=!0;if(F instanceof MouseEvent){if(me=F.clientX,Fe=F.clientY,_e=F.button<3,F.pointerType==="touch")return}else me=F.changedTouches[0].clientX,Fe=F.changedTouches[0].clientY;let Re=Dt(ge,me,Fe,F);Re.isTouch&&En.current!==0&&Date.now()-En.current>500&&(Re={...Re,isLongTouch:!0}),ne!==0&&Date.now()-ne<(Re.isTouch?1e3:500)&&(Re={...Re,isDoubleClick:!0}),yt.current!==Re.isTouch&&Ve(Re.isTouch),!ie&&F.cancelable&&_e&&F.preventDefault();let[at]=Re.location,fe=Tr(ge,at,me,Fe);if(Re.kind==="header"&&fe!==void 0){(Re.button!==0||((Ie=$r.current)==null?void 0:Ie[0])!==at||((Ce=$r.current)==null?void 0:Ce[1])!==-1)&&I(Re,!0);return}else if(Re.kind==="group-header"){let Ne=Ir(Re.group,Re.bounds,Re.localEventX,Re.localEventY);if(Ne!==void 0){Re.button===0&&Ne.onClick(Re);return}}I(Re,ie)},[I,te,Dt,Tr,Ir]);_t("mouseup",cn,Lt,!1),_t("touchend",cn,Lt,!1);let Ti=d.useCallback(F=>{var at,fe;let ne=Le.current;if(ne===null)return;let ge=te==null?void 0:te.current,ue=F.target!==ne&&F.target!==ge,ie,me,Fe=!0;F instanceof MouseEvent?(ie=F.clientX,me=F.clientY,Fe=F.button<3):(ie=F.changedTouches[0].clientX,me=F.changedTouches[0].clientY);let _e=Dt(ne,ie,me,F);yt.current!==_e.isTouch&&Ve(_e.isTouch),!ue&&F.cancelable&&Fe&&F.preventDefault();let[Re]=_e.location;if(_e.kind==="header"){let Ie=Tr(ne,Re,ie,me);Ie!==void 0&&_e.button===0&&((at=$r.current)==null?void 0:at[0])===Re&&((fe=$r.current)==null?void 0:fe[1])===-1&&(Ie.area==="menu"?v==null||v(Re,Ie.bounds):Ie.area==="indicator"&&(k==null||k(Re,Ie.bounds)))}else if(_e.kind==="group-header"){let Ie=Ir(_e.group,_e.bounds,_e.localEventX,_e.localEventY);Ie!==void 0&&_e.button===0&&Ie.onClick(_e)}},[te,Dt,Tr,v,k,Ir]);_t("click",Ti,Lt,!1);let Oo=d.useCallback(F=>{let ne=Le.current,ge=te==null?void 0:te.current;if(ne===null||F.target!==ne&&F.target!==ge||L===void 0)return;let ue=Dt(ne,F.clientX,F.clientY,F);L(ue,()=>{F.cancelable&&F.preventDefault()})},[te,Dt,L]);_t("contextmenu",Oo,(te==null?void 0:te.current)??null,!1);let Pe=d.useCallback(F=>{It.current=new $n(F.map(ne=>ne.item)),pr.current=F,nn.current(),It.current=void 0},[]),Zn=d.useMemo(()=>new Zu(Pe),[Pe]),Do=d.useRef(Zn);Do.current=Zn,d.useLayoutEffect(()=>{let F=Do.current;if(Mr===void 0||Mr[1]<0){F.setHovered(Mr);return}let ne=m(Mr,!0),ge=nt(ne),ue=ge===void 0&&ne.kind===ve.Custom||(ge==null?void 0:ge.needsHover)!==void 0&&(typeof ge.needsHover=="boolean"?ge.needsHover:ge.needsHover(ne));F.setHovered(ue?Mr:void 0)},[m,nt,Mr]);let tr=d.useRef(),Pi=d.useCallback(F=>{var _e;let ne=Le.current;if(ne===null)return;let ge=te==null?void 0:te.current,ue=F.target!==ne&&F.target!==ge,ie=Dt(ne,F.clientX,F.clientY,F);if(ie.kind!=="out-of-bounds"&&ue&&!an.current&&!ie.isTouch)return;let me=(Re,at)=>{kr(fe=>fe===Re||(fe==null?void 0:fe[0][0])===(Re==null?void 0:Re[0][0])&&(fe==null?void 0:fe[0][1])===(Re==null?void 0:Re[0][1])&&((fe==null?void 0:fe[1][0])===(Re==null?void 0:Re[1][0])&&(fe==null?void 0:fe[1][1])===(Re==null?void 0:Re[1][1])||!at)?fe:Re)};if(!ta(ie,tr.current))ar(void 0),G==null||G(ie),me(ie.kind==="out-of-bounds"?void 0:[ie.location,[ie.localEventX,ie.localEventY]],!0),tr.current=ie;else if(ie.kind==="cell"||ie.kind==="header"||ie.kind==="group-header"){let Re=!1,at=!0;if(ie.kind==="cell"){let Ie=m(ie.location);at=((_e=nt(Ie))==null?void 0:_e.needsHoverPosition)??Ie.kind===ve.Custom,Re=at}else Re=!0;let fe=[ie.location,[ie.localEventX,ie.localEventY]];me(fe,at),Nr.current=fe,Re&&Br(new $n([ie.location]))}let Fe=ie.location[0]>=(Z?0:1);Ee(ie.kind==="header"&&ie.isEdge&&Fe&&Be===!0),Io(ie.kind==="cell"&&ie.isFillHandle),D==null||D(F),b(ie)},[te,Dt,Z,Be,D,b,G,m,nt,Br]);_t("mousemove",Pi,Lt,!0);let wr=d.useCallback(F=>{let ne=Le.current;if(ne===null)return;let ge,ue;E.current!==void 0&&(ge=Pt(ne,E.current.cell[0],E.current.cell[1]),ue=E.current.cell),ee==null||ee({bounds:ge,stopPropagation:()=>F.stopPropagation(),preventDefault:()=>F.preventDefault(),cancel:()=>{},ctrlKey:F.ctrlKey,metaKey:F.metaKey,shiftKey:F.shiftKey,altKey:F.altKey,key:F.key,keyCode:F.keyCode,rawEvent:F,location:ue})},[ee,E,Pt]),eo=d.useCallback(F=>{let ne=Le.current;if(ne===null)return;let ge,ue;E.current!==void 0&&(ge=Pt(ne,E.current.cell[0],E.current.cell[1]),ue=E.current.cell),X==null||X({bounds:ge,stopPropagation:()=>F.stopPropagation(),preventDefault:()=>F.preventDefault(),cancel:()=>{},ctrlKey:F.ctrlKey,metaKey:F.metaKey,shiftKey:F.shiftKey,altKey:F.altKey,key:F.key,keyCode:F.keyCode,rawEvent:F,location:ue})},[X,E,Pt]),Ho=d.useCallback(F=>{if(Le.current=F,oe!==void 0&&(oe.current=F),be==null?void 0:be.eventTarget)Ct.current=be.eventTarget;else if(F===null)Ct.current=window;else{let ne=F.getRootNode();ne===document&&(Ct.current=window),Ct.current=ne}},[oe,be==null?void 0:be.eventTarget]),zo=d.useCallback(F=>{let ne=Le.current;if(ne===null||se===!1||$){F.preventDefault();return}let ge,ue,ie=Dt(ne,F.clientX,F.clientY);if(se!==!0&&ie.kind!==se){F.preventDefault();return}let me=(Ie,Ce)=>{ge=Ie,ue=Ce},Fe,_e,Re,at=(Ie,Ce,Ne)=>{Fe=Ie,_e=Ce,Re=Ne},fe=!1;if(de==null||de({...ie,setData:me,setDragImage:at,preventDefault:()=>fe=!0,defaultPrevented:()=>fe}),!fe&&ge!==void 0&&ue!==void 0&&F.dataTransfer!==null)if(F.dataTransfer.setData(ge,ue),F.dataTransfer.effectAllowed="copyLink",Fe!==void 0&&_e!==void 0&&Re!==void 0)F.dataTransfer.setDragImage(Fe,_e,Re);else{let[Ie,Ce]=ie.location;if(Ce!==void 0){let Ne=document.createElement("canvas"),Rt=Pt(ne,Ie,Ce);Qt(Rt!==void 0);let qt=Math.ceil(window.devicePixelRatio??1);Ne.width=Rt.width*qt,Ne.height=Rt.height*qt;let Et=Ne.getContext("2d");Et!==null&&(Et.scale(qt,qt),Et.textBaseline="middle",Ce===-1?(Et.font=He.headerFontFull,Et.fillStyle=He.bgHeader,Et.fillRect(0,0,Ne.width,Ne.height),jl(Et,0,0,Rt.width,Rt.height,Mt[Ie],!1,He,!1,void 0,void 0,!1,0,kt,Te,!1)):(Et.font=He.baseFontFull,Et.fillStyle=He.bgCell,Et.fillRect(0,0,Ne.width,Ne.height),zl(Et,m([Ie,Ce]),0,Ce,!1,!1,0,0,Rt.width,Rt.height,!1,He,He.bgCell,St,kt,1,void 0,!1,0,void 0,void 0,void 0,vr,nt,()=>{}))),Ne.style.left="-100%",Ne.style.position="absolute",Ne.style.width=`${Rt.width}px`,Ne.style.height=`${Rt.height}px`,document.body.append(Ne),F.dataTransfer.setDragImage(Ne,Rt.width/2,Rt.height/2),window.setTimeout(()=>{Ne.remove()},0)}}else F.preventDefault()},[se,$,Dt,de,Pt,He,Mt,kt,Te,m,St,vr,nt]);_t("dragstart",zo,(te==null?void 0:te.current)??null,!1,!1);let to=d.useRef(),Oi=d.useCallback(F=>{let ne=Le.current;if(ye!==void 0&&F.preventDefault(),ne===null||We===void 0)return;let[ge,ue]=Dt(ne,F.clientX,F.clientY).location,ie=ge-(Z?0:1),[me,Fe]=to.current??[];(me!==ie||Fe!==ue)&&(to.current=[ie,ue],We([ie,ue],F.dataTransfer))},[Z,Dt,We,ye]);_t("dragover",Oi,(te==null?void 0:te.current)??null,!1,!1);let yr=d.useCallback(()=>{to.current=void 0,Oe==null||Oe()},[Oe]);_t("dragend",yr,(te==null?void 0:te.current)??null,!1,!1);let Yr=d.useCallback(F=>{let ne=Le.current;if(ne===null||ye===void 0)return;F.preventDefault();let[ge,ue]=Dt(ne,F.clientX,F.clientY).location,ie=ge-(Z?0:1);ye([ie,ue],F.dataTransfer)},[Z,Dt,ye]);_t("drop",Yr,(te==null?void 0:te.current)??null,!1,!1);let rr=d.useCallback(()=>{Ge==null||Ge()},[Ge]);_t("dragleave",rr,(te==null?void 0:te.current)??null,!1,!1);let B=d.useRef(E);B.current=E;let dt=d.useRef(null),Or=d.useCallback(F=>{var ne;Le.current===null||!Le.current.contains(document.activeElement)||(F===null&&B.current.current!==void 0?(ne=oe==null?void 0:oe.current)==null||ne.focus({preventScroll:!0}):F!==null&&F.focus({preventScroll:!0}),dt.current=F)},[oe]);d.useImperativeHandle(t,()=>({focus:()=>{var ne;let F=dt.current;F===null||!document.contains(F)?(ne=oe==null?void 0:oe.current)==null||ne.focus({preventScroll:!0}):F.focus({preventScroll:!0})},getBounds:(F,ne)=>{if(!(oe===void 0||oe.current===null))return Pt(oe.current,F??0,ne??-1)},damage:Eo,getMouseArgsForPosition:(F,ne,ge)=>{if(!(oe===void 0||oe.current===null))return Dt(oe.current,F,ne,ge)}}),[oe,Eo,Pt]);let ro=d.useRef(),Ao=Is(()=>{var _e,Re,at;if(r<50||(be==null?void 0:be.disableAccessibilityTree)===!0)return null;let F=ai(Mt,et,r,j,qe),ne=Z?0:-1;!Z&&((_e=F[0])==null?void 0:_e.sourceIndex)===0&&(F=F.slice(1));let[ge,ue]=((Re=E.current)==null?void 0:Re.cell)??[],ie=(at=E.current)==null?void 0:at.range,me=F.map(fe=>fe.sourceIndex),Fe=(0,nd.default)(l,Math.min(g,l+o));return ge!==void 0&&ue!==void 0&&!(me.includes(ge)&&Fe.includes(ue))&&Or(null),d.createElement("table",{key:"access-tree",role:"grid","aria-rowcount":g+1,"aria-multiselectable":"true","aria-colcount":Mt.length+ne},d.createElement("thead",{role:"rowgroup"},d.createElement("tr",{role:"row","aria-rowindex":1},F.map(fe=>d.createElement("th",{role:"columnheader","aria-selected":E.columns.hasIndex(fe.sourceIndex),"aria-colindex":fe.sourceIndex+1+ne,tabIndex:-1,onFocus:Ie=>{if(Ie.target!==dt.current)return De==null?void 0:De([fe.sourceIndex,-1])},key:fe.sourceIndex},fe.title)))),d.createElement("tbody",{role:"rowgroup"},Fe.map(fe=>d.createElement("tr",{role:"row","aria-selected":E.rows.hasIndex(fe),key:fe,"aria-rowindex":fe+2},F.map(Ie=>{let Ce=Ie.sourceIndex,Ne=ir(Ce,fe),Rt=ge===Ce&&ue===fe,qt=ie!==void 0&&Ce>=ie.x&&Ce<ie.x+ie.width&&fe>=ie.y&&fe<ie.y+ie.height,Et=`glide-cell-${Ce}-${fe}`,mt=[Ce,fe],xt=m(mt,!0);return d.createElement("td",{key:Ne,role:"gridcell","aria-colindex":Ce+1+ne,"aria-selected":qt,"aria-readonly":Fn(xt)||!fo(xt),id:Et,"data-testid":Et,onClick:()=>{let it=oe==null?void 0:oe.current;if(it!=null)return ee==null?void 0:ee({bounds:Pt(it,Ce,fe),cancel:()=>{},preventDefault:()=>{},stopPropagation:()=>{},ctrlKey:!1,key:"Enter",keyCode:13,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:mt})},onFocusCapture:it=>{var Xt,zt;if(!(it.target===dt.current||((Xt=ro.current)==null?void 0:Xt[0])===Ce&&((zt=ro.current)==null?void 0:zt[1])===fe))return ro.current=mt,De==null?void 0:De(mt)},ref:Rt?Or:void 0,tabIndex:-1},od(xt,nt))})))))},[r,Mt,et,j,qe,g,l,o,E,Or,m,oe,ee,Pt,De],200),In=O===0||!R?0:et>O?1:(0,ra.default)(-qe/100,0,1),Di=-l*32+pt,Y=A?(0,ra.default)(-Di/100,0,1):0,$t=d.useMemo(()=>{if(!In&&!Y)return null;let F={position:"absolute",top:0,left:bt,width:r-bt,height:n,opacity:In,pointerEvents:"none",transition:Ue?void 0:"opacity 0.2s",boxShadow:"inset 13px 0 10px -13px rgba(0, 0, 0, 0.2)"},ne={position:"absolute",top:Wt,left:0,width:r,height:n,opacity:Y,pointerEvents:"none",transition:we?void 0:"opacity 0.2s",boxShadow:"inset 0 13px 10px -13px rgba(0, 0, 0, 0.2)"};return d.createElement(d.Fragment,null,In>0&&d.createElement("div",{id:"shadow-x",style:F}),Y>0&&d.createElement("div",{id:"shadow-y",style:ne}))},[In,Y,bt,r,Ue,Wt,n,we]),Ht=d.useMemo(()=>({position:"absolute",top:0,left:0}),[]);return d.createElement(d.Fragment,null,d.createElement("canvas",{"data-testid":"data-grid-canvas",tabIndex:0,onKeyDown:wr,onKeyUp:eo,onFocus:M,onBlur:T,ref:Ho,style:st},Ao),d.createElement("canvas",{ref:wt,style:Ht}),$t)})),ld=Kt(vo());function Un(e,t,r,n){return(0,ld.default)(Math.round(t-(e.growOffset??0)),Math.ceil(r),Math.floor(n))}var ad=e=>{let[t,r]=d.useState(),[n,o]=d.useState(),[i,a]=d.useState(),[l,s]=d.useState(),[c,u]=d.useState(!1),[h,g]=d.useState(),[m,f]=d.useState(),[v,k]=d.useState(),[C,y]=d.useState(!1),[M,T]=d.useState(),{onHeaderMenuClick:P,onHeaderIndicatorClick:E,getCellContent:O,onColumnMoved:L,onColumnResize:S,onColumnResizeStart:R,onColumnResizeEnd:A,gridRef:x,maxColumnWidth:w,minColumnWidth:I,onRowMoved:D,lockColumns:b,onColumnProposeMove:G,onMouseDown:j,onMouseUp:Z,onItemHovered:ee,onDragStart:X,canvasRef:ce}=e,oe=(S??A??R)!==void 0,{columns:de,selection:Oe}=e,te=Oe.columns,$=d.useCallback(ae=>{let[Te,De]=ae.location;i!==void 0&&l!==Te&&Te>=b?(u(!0),s(Te)):m!==void 0&&De!==void 0?(y(!0),k(Math.max(0,De))):n===void 0&&!c&&!C&&(ee==null||ee(ae))},[i,m,l,ee,b,n,c,C]),Q=L!==void 0,re=d.useCallback(ae=>{var Te;if(ae.button===0){let[De,We]=ae.location;if(ae.kind==="out-of-bounds"&&ae.isEdge&&oe){let ye=(Te=x==null?void 0:x.current)==null?void 0:Te.getBounds(de.length-1,-1);ye!==void 0&&(r(ye.x),o(de.length-1))}else if(ae.kind==="header"&&De>=b){let ye=ce==null?void 0:ce.current;if(ae.isEdge&&oe&&ye){r(ae.bounds.x),o(De);let Ge=ye.getBoundingClientRect().width/ye.offsetWidth,$e=ae.bounds.width/Ge;R==null||R(de[De],$e,De,$e+(de[De].growOffset??0))}else ae.kind==="header"&&Q&&(g(ae.bounds.x),a(De))}else ae.kind==="cell"&&b>0&&De===0&&We!==void 0&&D!==void 0&&(T(ae.bounds.y),f(We))}j==null||j(ae)},[j,oe,b,D,x,de,Q,R,ce]),se=d.useCallback((ae,Te)=>{c||C||(P==null||P(ae,Te))},[c,C,P]),Be=d.useCallback((ae,Te)=>{c||C||(E==null||E(ae,Te))},[c,C,E]),Ae=d.useRef(-1),Me=d.useCallback(()=>{Ae.current=-1,f(void 0),k(void 0),T(void 0),y(!1),a(void 0),s(void 0),g(void 0),u(!1),o(void 0),r(void 0)},[]),Xe=d.useCallback((ae,Te)=>{if(ae.button===0){if(n!==void 0){if((te==null?void 0:te.hasIndex(n))===!0)for(let We of te){if(We===n)continue;let ye=de[We],Ge=Un(ye,Ae.current,I,w);S==null||S(ye,Ge,We,Ge+(ye.growOffset??0))}let De=Un(de[n],Ae.current,I,w);if(A==null||A(de[n],De,n,De+(de[n].growOffset??0)),te.hasIndex(n))for(let We of te){if(We===n)continue;let ye=de[We],Ge=Un(ye,Ae.current,I,w);A==null||A(ye,Ge,We,Ge+(ye.growOffset??0))}}Me(),i!==void 0&&l!==void 0&&(G==null?void 0:G(i,l))!==!1&&(L==null||L(i,l)),m!==void 0&&v!==void 0&&(D==null||D(m,v))}Z==null||Z(ae,Te)},[Z,n,i,l,m,v,te,A,de,I,w,S,L,D,Me,G]),He=d.useMemo(()=>{if(!(i===void 0||l===void 0)&&i!==l&&(G==null?void 0:G(i,l))!==!1)return{src:i,dest:l}},[i,l,G]),ct=d.useCallback(ae=>{let Te=ce==null?void 0:ce.current;if(i!==void 0&&h!==void 0)Math.abs(ae.clientX-h)>20&&u(!0);else if(m!==void 0&&M!==void 0)Math.abs(ae.clientY-M)>20&&y(!0);else if(n!==void 0&&t!==void 0&&Te){let De=Te.getBoundingClientRect().width/Te.offsetWidth,We=(ae.clientX-t)/De,ye=de[n],Ge=Un(ye,We,I,w);if(S==null||S(ye,Ge,n,Ge+(ye.growOffset??0)),Ae.current=We,(te==null?void 0:te.first())===n)for(let $e of te){if($e===n)continue;let Ue=de[$e],we=Un(Ue,Ae.current,I,w);S==null||S(Ue,we,$e,we+(Ue.growOffset??0))}}},[i,h,m,M,n,t,de,I,w,S,te,ce]),ut=d.useCallback((ae,Te)=>{if(m===void 0||v===void 0)return O(ae,Te);let[De,We]=ae;return We===v?We=m:(We>v&&--We,We>=m&&(We+=1)),O([De,We],Te)},[m,v,O]),Ze=d.useCallback(ae=>{X==null||X(ae),ae.defaultPrevented()||Me()},[Me,X]);return d.createElement(id,{accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,enableGroups:e.enableGroups,eventTargetRef:e.eventTargetRef,experimental:e.experimental,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,headerIcons:e.headerIcons,height:e.height,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,resizeColumn:n,isDraggable:e.isDraggable,isFilling:e.isFilling,isFocused:e.isFocused,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDrop:e.onDrop,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,resizeIndicator:e.resizeIndicator,verticalBorder:e.verticalBorder,width:e.width,getCellContent:ut,isResizing:n!==void 0,onHeaderMenuClick:se,onHeaderIndicatorClick:Be,isDragging:c,onItemHovered:$,onDragStart:Ze,onMouseDown:re,allowResize:oe,onMouseUp:Xe,dragAndDropState:He,onMouseMoveRaw:ct,ref:x})};function sd(e){let t=(0,d.useRef)(null),[r,n]=(0,d.useState)({width:e==null?void 0:e[0],height:e==null?void 0:e[1]});return(0,d.useLayoutEffect)(()=>{let o=new window.ResizeObserver(i=>{for(let a of i){let{width:l,height:s}=a&&a.contentRect||{};n(c=>c.width===l&&c.height===s?c:{width:l,height:s})}});return t.current&&o.observe(t.current,void 0),()=>{o.disconnect()}},[t.current]),{ref:t,...r}}var cd=(e,t,r)=>{let n=(0,d.useRef)(null),o=(0,d.useRef)(null),i=(0,d.useRef)(null),a=(0,d.useRef)(0),l=(0,d.useRef)(t);l.current=t;let s=r.current;(0,d.useEffect)(()=>{let c=()=>{var g,m;if(o.current===!1&&s!==null){let f=[s.scrollLeft,s.scrollTop];if(((g=i.current)==null?void 0:g[0])===f[0]&&((m=i.current)==null?void 0:m[1])===f[1])if(a.current>10){i.current=null,o.current=null;return}else a.current++;else a.current=0,l.current(f[0],f[1]),i.current=f;n.current=window.setTimeout(c,8.333333333333334)}},u=()=>{o.current=!0,i.current=null,n.current!==null&&(window.clearTimeout(n.current),n.current=null)},h=g=>{g.touches.length===0&&(o.current=!1,a.current=0,n.current=window.setTimeout(c,8.333333333333334))};if(e&&s!==null){let g=s;return g.addEventListener("touchstart",u),g.addEventListener("touchend",h),()=>{g.removeEventListener("touchstart",u),g.removeEventListener("touchend",h),n.current!==null&&window.clearTimeout(n.current)}}},[e,s])},ud=()=>e=>e.isSafari?"scroll":"auto",dd=Zt("div")({name:"ScrollRegionStyle",class:"gdg-s1dgczr6",propsAsIs:!1,vars:{"s1dgczr6-0":[ud()]}}),hd=33554400,fd=5e6;function gd(e){let[t,r]=d.useState(!1),n=typeof window>"u"?null:window,o=d.useRef(0);return _t("touchstart",d.useCallback(()=>{window.clearTimeout(o.current),r(!0)},[]),n,!0,!1),_t("touchend",d.useCallback(i=>{i.touches.length===0&&(o.current=window.setTimeout(()=>r(!1),e))},[e]),n,!0,!1),t}const pd=e=>{var Oe,te;let{children:t,clientHeight:r,scrollHeight:n,scrollWidth:o,update:i,draggable:a,className:l,preventDiagonalScrolling:s=!1,paddingBottom:c=0,paddingRight:u=0,rightElement:h,rightElementProps:g,kineticScrollPerfHack:m=!1,scrollRef:f,initialSize:v}=e,k=[],C=(g==null?void 0:g.sticky)??!1,y=(g==null?void 0:g.fill)??!1,M=d.useRef(0),T=d.useRef(0),P=d.useRef(null),E=typeof window>"u"?1:window.devicePixelRatio,O=d.useRef(E);d.useEffect(()=>{if(O.current!==E){M.current=0,T.current=0,O.current=E;let $=P.current;$!==null&&D.current($.scrollLeft,$.scrollTop)}},[E]);let L=d.useRef({scrollLeft:0,scrollTop:0,lockDirection:void 0}),S=d.useRef(null),R=gd(200),[A,x]=d.useState(!0),w=d.useRef(0);d.useLayoutEffect(()=>{if(!A||R||L.current.lockDirection===void 0)return;let $=P.current;if($===null)return;let[Q,re]=L.current.lockDirection;Q===void 0?re!==void 0&&($.scrollTop=re):$.scrollLeft=Q,L.current.lockDirection=void 0},[R,A]);let I=d.useCallback(($,Q)=>{var De;let re=P.current;if(re===null)return;Q??(Q=re.scrollTop),$??($=re.scrollLeft);let se=L.current.scrollTop,Be=L.current.scrollLeft,Ae=$-Be,Me=Q-se;R&&Ae!==0&&Me!==0&&(Math.abs(Ae)>3||Math.abs(Me)>3)&&s&&L.current.lockDirection===void 0&&(L.current.lockDirection=Math.abs(Ae)<Math.abs(Me)?[Be,void 0]:[void 0,se]);let Xe=L.current.lockDirection;$=(Xe==null?void 0:Xe[0])??$,Q=(Xe==null?void 0:Xe[1])??Q,L.current.scrollLeft=$,L.current.scrollTop=Q;let He=re.clientWidth,ct=re.clientHeight,ut=Q,Ze=T.current-ut,ae=re.scrollHeight-ct;T.current=ut;let Te;if(ae>0&&n>re.scrollHeight+5)if(Math.abs(Ze)>2e3||ut===0||ut===ae){let We=Math.max(0,Math.min(1,ut/ae)),ye=n-ct;Te=We*ye,M.current=Te}else M.current-=Ze,Te=M.current;else Te=ut,M.current=Te;Te=Math.max(0,Math.min(Te,n-ct)),M.current=Te,Xe!==void 0&&(window.clearTimeout(w.current),x(!1),w.current=window.setTimeout(()=>x(!0),200)),i({x:$,y:Te,width:He-u,height:ct-c,paddingRight:((De=S.current)==null?void 0:De.clientWidth)??0})},[c,u,n,i,s,R]);cd(m&&yo.value,I,P);let D=d.useRef(I);D.current=I;let b=d.useRef(),G=d.useRef(!1);d.useLayoutEffect(()=>{G.current?I():G.current=!0},[I,c,u]);let j=d.useCallback($=>{P.current=$,f!==void 0&&(f.current=$)},[f]),Z=0,ee=0,X=Math.min(n,hd);for(k.push(d.createElement("div",{key:Z++,style:{width:o,height:0}}));ee<X;){let $=Math.min(fd,X-ee);k.push(d.createElement("div",{key:Z++,style:{width:0,height:$}})),ee+=$}let{ref:ce,width:oe,height:de}=sd(v);return typeof window<"u"&&(((Oe=b.current)==null?void 0:Oe.height)!==de||((te=b.current)==null?void 0:te.width)!==oe)&&(window.setTimeout(()=>D.current(),0),b.current={width:oe,height:de}),(oe??0)===0||(de??0)===0?d.createElement("div",{ref:ce}):d.createElement("div",{ref:ce},d.createElement(dd,{isSafari:yo.value},d.createElement("div",{className:"dvn-underlay"},t),d.createElement("div",{ref:j,style:b.current,draggable:a,onDragStart:$=>{a||($.stopPropagation(),$.preventDefault())},className:"dvn-scroller "+(l??""),onScroll:()=>I()},d.createElement("div",{className:"dvn-scroll-inner"+(h===void 0?" dvn-hidden":"")},d.createElement("div",{className:"dvn-stack"},k),h!==void 0&&d.createElement(d.Fragment,null,!y&&d.createElement("div",{className:"dvn-spacer"}),d.createElement("div",{ref:S,style:{height:de,maxHeight:r-Math.ceil(E%1),position:"sticky",top:0,paddingLeft:1,marginBottom:-40,marginRight:u,flexGrow:y?1:void 0,right:C?u??0:void 0,pointerEvents:"auto"}},h))))))};var md=e=>{let{columns:t,rows:r,rowHeight:n,headerHeight:o,groupHeaderHeight:i,enableGroups:a,freezeColumns:l,experimental:s,nonGrowWidth:c,clientSize:u,className:h,onVisibleRegionChanged:g,scrollRef:m,preventDiagonalScrolling:f,rightElement:v,rightElementProps:k,overscrollX:C,overscrollY:y,initialSize:M,smoothScrollX:T=!1,smoothScrollY:P=!1,isDraggable:E}=e,{paddingRight:O,paddingBottom:L}=s??{},[S,R]=u,A=d.useRef(),x=d.useRef(),w=d.useRef(),I=d.useRef(),D=c+Math.max(0,C??0),b=a?o+i:o;if(typeof n=="number")b+=r*n;else for(let ee=0;ee<r;ee++)b+=n(ee);y!==void 0&&(b+=y);let G=d.useRef(),j=d.useCallback(()=>{var Be,Ae;if(G.current===void 0)return;let ee={...G.current},X=0,ce=ee.x<0?-ee.x:0,oe=0,de=0;ee.x=ee.x<0?0:ee.x;let Oe=0;for(let Me=0;Me<l;Me++)Oe+=t[Me].width;for(let Me of t){let Xe=X-Oe;if(ee.x>=Xe+Me.width)X+=Me.width,de++,oe++;else if(ee.x>Xe)X+=Me.width,T?ce+=Xe-ee.x:de++,oe++;else if(ee.x+ee.width>Xe)X+=Me.width,oe++;else break}let te=0,$=0,Q=0;if(typeof n=="number")P?($=Math.floor(ee.y/n),te=$*n-ee.y):$=Math.ceil(ee.y/n),Q=Math.ceil(ee.height/n)+$,te<0&&Q++;else{let Me=0;for(let Xe=0;Xe<r;Xe++){let He=n(Xe),ct=Me+(P?0:He/2);if(ee.y>=Me+He)Me+=He,$++,Q++;else if(ee.y>ct)Me+=He,P?te+=ct-ee.y:$++,Q++;else if(ee.y+ee.height>He/2+Me)Me+=He,Q++;else break}}$=Math.max(0,Math.min($,r-1)),Q=Math.max($,Math.min(Q,r));let re={x:de,y:$,width:oe-de,height:Q-$},se=A.current;(se===void 0||se.y!==re.y||se.x!==re.x||se.height!==re.height||se.width!==re.width||x.current!==ce||w.current!==te||ee.width!==((Be=I.current)==null?void 0:Be[0])||ee.height!==((Ae=I.current)==null?void 0:Ae[1]))&&(g==null||g({x:de,y:$,width:oe-de,height:Q-$},ee.width,ee.height,ee.paddingRight??0,ce,te),A.current=re,x.current=ce,w.current=te,I.current=[ee.width,ee.height])},[t,n,r,g,l,T,P]),Z=d.useCallback(ee=>{G.current=ee,j()},[j]);return d.useEffect(()=>{j()},[j]),d.createElement(pd,{scrollRef:m,className:h,kineticScrollPerfHack:s==null?void 0:s.kineticScrollPerfHack,preventDiagonalScrolling:f,draggable:E===!0||typeof E=="string",scrollWidth:D+(O??0),scrollHeight:b+(L??0),clientHeight:R,rightElement:v,paddingBottom:L,paddingRight:O,rightElementProps:k,update:Z,initialSize:M},d.createElement(ad,{eventTargetRef:m,width:S,height:R,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onHeaderIndicatorClick:e.onHeaderIndicatorClick,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,onColumnProposeMove:e.onColumnProposeMove,verticalBorder:e.verticalBorder,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,resizeIndicator:e.resizeIndicator}))};const vd=Zt("div")({name:"SearchWrapper",class:"gdg-seveqep",propsAsIs:!1});var wd=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 244l144-144 144 144M256 120v292"})),yd=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"})),bd=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"})),xd=10,Cd=e=>{let{canvasRef:t,cellYOffset:r,rows:n,columns:o,searchInputRef:i,searchValue:a,searchResults:l,onSearchValueChange:s,getCellsForSelection:c,onSearchResultsChanged:u,showSearch:h=!1,onSearchClose:g}=e,[m]=d.useState(()=>"search-box-"+Math.round(Math.random()*1e3)),[f,v]=d.useState(""),k=a??f,C=d.useCallback(X=>{v(X),s==null||s(X)},[s]),[y,M]=d.useState(),T=d.useRef(y);T.current=y,d.useEffect(()=>{l!==void 0&&(l.length>0?M(X=>({rowsSearched:n,results:l.length,selectedIndex:(X==null?void 0:X.selectedIndex)??-1})):M(void 0))},[n,l]);let P=d.useRef();P.current===void 0&&(P.current=new AbortController);let E=d.useRef(),[O,L]=d.useState([]),S=l??O,R=d.useCallback(()=>{E.current!==void 0&&(window.cancelAnimationFrame(E.current),E.current=void 0,P.current.abort())},[]),A=d.useRef(r);A.current=r;let x=d.useCallback(X=>{let ce=new RegExp(X.replace(/([$()*+.?[\\\]^{|}-])/g,"\\$1"),"i"),oe=A.current,de=Math.min(10,n),Oe=0;M(void 0),L([]);let te=[],$=async()=>{var ct;if(c===void 0)return;let Q=performance.now(),re=n-Oe,se=c({x:0,y:oe,width:o.length,height:Math.min(de,re,n-oe)},P.current.signal);typeof se=="function"&&(se=await se());let Be=!1;for(let[ut,Ze]of se.entries())for(let[ae,Te]of Ze.entries()){let De;switch(Te.kind){case ve.Text:case ve.Number:De=Te.displayData;break;case ve.Uri:case ve.Markdown:De=Te.data;break;case ve.Boolean:De=typeof Te.data=="boolean"?Te.data.toString():void 0;break;case ve.Image:case ve.Bubble:De=Te.data.join("\u{1F433}");break;case ve.Custom:De=Te.copyData;break}De!==void 0&&ce.test(De)&&(te.push([ae,ut+oe]),Be=!0)}let Ae=performance.now();Be&&L([...te]),Oe+=se.length,Qt(Oe<=n);let Me=((ct=T.current)==null?void 0:ct.selectedIndex)??-1;M({results:te.length,rowsSearched:Oe,selectedIndex:Me}),u==null||u(te,Me),oe+de>=n?oe=0:oe+=de;let Xe=Ae-Q,He=xd/Math.max(Xe,1);de=Math.ceil(de*He),Oe<n&&te.length<1e3&&(E.current=window.requestAnimationFrame($))};R(),E.current=window.requestAnimationFrame($)},[R,o.length,c,u,n]),w=d.useCallback(()=>{var X;g==null||g(),M(void 0),L([]),u==null||u([],-1),R(),(X=t==null?void 0:t.current)==null||X.focus()},[R,t,g,u]),I=d.useCallback(X=>{C(X.target.value),l===void 0&&(X.target.value===""?(M(void 0),L([]),R()):x(X.target.value))},[x,R,C,l]);d.useEffect(()=>{h&&i.current!==null&&(C(""),i.current.focus({preventScroll:!0}))},[h,i,C]);let D=d.useCallback(X=>{var oe;if((oe=X==null?void 0:X.stopPropagation)==null||oe.call(X),y===void 0)return;let ce=(y.selectedIndex+1)%y.results;M({...y,selectedIndex:ce}),u==null||u(S,ce)},[y,u,S]),b=d.useCallback(X=>{var oe;if((oe=X==null?void 0:X.stopPropagation)==null||oe.call(X),y===void 0)return;let ce=(y.selectedIndex-1)%y.results;ce<0&&(ce+=y.results),M({...y,selectedIndex:ce}),u==null||u(S,ce)},[u,S,y]),G=d.useCallback(X=>{(X.ctrlKey||X.metaKey)&&X.nativeEvent.code==="KeyF"||X.key==="Escape"?(w(),X.stopPropagation(),X.preventDefault()):X.key==="Enter"&&(X.shiftKey?b():D())},[w,D,b]);d.useEffect(()=>()=>{R()},[R]);let[j,Z]=d.useState(!1);d.useEffect(()=>{if(h)Z(!0);else{let X=setTimeout(()=>Z(!1),150);return()=>clearTimeout(X)}},[h]);let ee=d.useMemo(()=>{if(!h&&!j)return null;let X;y!==void 0&&(X=y.results>=1e3?"over 1000":`${y.results} result${y.results===1?"":"s"}`,y.selectedIndex>=0&&(X=`${y.selectedIndex+1} of ${X}`));let ce=de=>{de.stopPropagation()},oe={width:`${Math.floor(((y==null?void 0:y.rowsSearched)??0)/n*100)}%`};return d.createElement(vd,{className:"gdg-search-bar"+(h?"":" out"),onMouseDown:ce,onMouseMove:ce,onMouseUp:ce,onClick:ce},d.createElement("div",{className:"gdg-search-bar-inner"},d.createElement("input",{id:m,"aria-hidden":!h,"data-testid":"search-input",ref:i,onChange:I,value:k,tabIndex:h?void 0:-1,onKeyDownCapture:G}),d.createElement("button",{type:"button","aria-label":"Previous Result","aria-hidden":!h,tabIndex:h?void 0:-1,onClick:b,disabled:((y==null?void 0:y.results)??0)===0},wd),d.createElement("button",{type:"button","aria-label":"Next Result","aria-hidden":!h,tabIndex:h?void 0:-1,onClick:D,disabled:((y==null?void 0:y.results)??0)===0},yd),g!==void 0&&d.createElement("button",{type:"button","aria-label":"Close Search","aria-hidden":!h,"data-testid":"search-close-button",tabIndex:h?void 0:-1,onClick:w},bd)),y===void 0?d.createElement("div",{className:"gdg-search-status"},d.createElement("label",{htmlFor:m},"Type to search")):d.createElement(d.Fragment,null,d.createElement("div",{className:"gdg-search-status"},d.createElement("div",{"data-testid":"search-result-area"},X)),d.createElement("div",{className:"gdg-search-progress",style:oe})))},[h,j,y,n,m,i,I,k,G,b,D,g,w]);return d.createElement(d.Fragment,null,d.createElement(md,{prelightCells:S,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,className:e.className,clientSize:e.clientSize,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,nonGrowWidth:e.nonGrowWidth,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,initialSize:e.initialSize,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onHeaderIndicatorClick:e.onHeaderIndicatorClick,onMouseMove:e.onMouseMove,onVisibleRegionChanged:e.onVisibleRegionChanged,overscrollX:e.overscrollX,overscrollY:e.overscrollY,preventDiagonalScrolling:e.preventDiagonalScrolling,rightElement:e.rightElement,rightElementProps:e.rightElementProps,rowHeight:e.rowHeight,rows:e.rows,scrollRef:e.scrollRef,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,onColumnProposeMove:e.onColumnProposeMove,drawFocusRing:e.drawFocusRing,drawCell:e.drawCell,drawHeader:e.drawHeader,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,resizeIndicator:e.resizeIndicator}),ee)},Sd=()=>e=>Math.max(16,e.targetHeight-10),kd=Zt("input")({name:"RenameInput",class:"gdg-r17m35ur",propsAsIs:!1,vars:{"r17m35ur-0":[Sd(),"px"]}});const Md=e=>{let{bounds:t,group:r,onClose:n,canvasBounds:o,onFinish:i}=e,[a,l]=d.useState(r);return d.createElement(lf,{style:{position:"absolute",left:t.x-o.left+1,top:t.y-o.top,width:t.width-2,height:t.height},className:"gdg-c1tqibwd",onClickOutside:n},d.createElement(kd,{targetHeight:t.height,"data-testid":"group-rename-input",value:a,onBlur:n,onFocus:s=>s.target.setSelectionRange(0,a.length),onChange:s=>l(s.target.value),onKeyDown:s=>{s.key==="Enter"?i(a):s.key==="Escape"&&n()},autoFocus:!0}))};function Rd(e,t){return e===void 0?!1:e.length>1&&e.startsWith("_")?Number.parseInt(e.slice(1))===t.keyCode:e.length===1&&e>="a"&&e<="z"?e.toUpperCase().codePointAt(0)===t.keyCode:e===t.key}function Ye(e,t,r){let n=oa(e,t);return n&&(r.didMatch=!0),n}function oa(e,t){if(e.length===0)return!1;if(e.includes("|")){let s=e.split("|");for(let c of s)if(oa(c,t))return!0;return!1}let r=!1,n=!1,o=!1,i=!1,a=e.split("+"),l=a.pop();if(!Rd(l,t))return!1;if(a[0]==="any")return!0;for(let s of a)switch(s){case"ctrl":r=!0;break;case"shift":n=!0;break;case"alt":o=!0;break;case"meta":i=!0;break;case"primary":bo.value?i=!0:r=!0;break}return t.altKey===o&&t.ctrlKey===r&&t.shiftKey===n&&t.metaKey===i}function Ed(e,t,r,n,o,i,a){let l=d.useCallback((u,h,g,m)=>{var y;(i==="cell"||i==="multi-cell")&&u!==void 0&&(u={...u,range:{x:u.cell[0],y:u.cell[1],width:1,height:1}}),!a&&u!==void 0&&u.range.width>1&&(u={...u,range:{...u.range,width:1,x:u.cell[0]}});let f=r==="mixed"&&(g||m==="drag"),v=n==="mixed"&&f,k=o==="mixed"&&f,C={current:u===void 0?void 0:{...u,rangeStack:m==="drag"?((y=e.current)==null?void 0:y.rangeStack)??[]:[]},columns:v?e.columns:lt.empty(),rows:k?e.rows:lt.empty()};g&&(i==="multi-rect"||i==="multi-cell")&&C.current!==void 0&&e.current!==void 0&&(C={...C,current:{...C.current,rangeStack:[...e.current.rangeStack,e.current.range]}}),t(C,h)},[n,e,r,i,a,o,t]),s=d.useCallback((u,h,g)=>{u??(u=e.rows),h!==void 0&&(u=u.add(h));let m;if(o==="exclusive"&&u.length>0)m={current:void 0,columns:lt.empty(),rows:u};else{let f=g&&r==="mixed",v=g&&n==="mixed";m={current:f?e.current:void 0,columns:v?e.columns:lt.empty(),rows:u}}t(m,!1)},[n,e,r,o,t]),c=d.useCallback((u,h,g)=>{u??(u=e.columns),h!==void 0&&(u=u.add(h));let m;if(n==="exclusive"&&u.length>0)m={current:void 0,rows:lt.empty(),columns:u};else{let f=g&&r==="mixed",v=g&&o==="mixed";m={current:f?e.current:void 0,rows:v?e.rows:lt.empty(),columns:u}}t(m,!1)},[n,e,r,o,t]);return[l,s,c]}function Id(e,t,r,n,o){let i=d.useCallback(s=>{if(e===!0){let c=[];for(let u=s.y;u<s.y+s.height;u++){let h=[];for(let g=s.x;g<s.x+s.width;g++)g<0||u>=o?h.push({kind:ve.Loading,allowOverlay:!1}):h.push(t([g,u]));c.push(h)}return c}return(e==null?void 0:e(s,n.signal))??[]},[n.signal,t,e,o]),a=e===void 0?void 0:i,l=d.useCallback(s=>{if(a===void 0)return[];let c={...s,x:s.x-r};if(c.x<0){c.x=0,c.width--;let u=a(c,n.signal);return typeof u=="function"?async()=>(await u()).map(h=>[{kind:ve.Loading,allowOverlay:!1},...h]):u.map(h=>[{kind:ve.Loading,allowOverlay:!1},...h])}return a(c,n.signal)},[n.signal,a,r]);return[e===void 0?void 0:l,a]}function Td(e){if(e.copyData!==void 0)return{formatted:e.copyData,rawValue:e.copyData,format:"string",doNotEscape:!0};switch(e.kind){case ve.Boolean:return{formatted:e.data===!0?"TRUE":e.data===!1?"FALSE":e.data===void 0?"INDETERMINATE":"",rawValue:e.data,format:"boolean"};case ve.Custom:return{formatted:e.copyData,rawValue:e.copyData,format:"string"};case ve.Image:case ve.Bubble:return{formatted:e.data,rawValue:e.data,format:"string-array"};case ve.Drilldown:return{formatted:e.data.map(t=>t.text),rawValue:e.data.map(t=>t.text),format:"string-array"};case ve.Text:return{formatted:e.displayData??e.data,rawValue:e.data,format:"string"};case ve.Uri:return{formatted:e.displayData??e.data,rawValue:e.data,format:"url"};case ve.Markdown:case ve.RowID:return{formatted:e.data,rawValue:e.data,format:"string"};case ve.Number:return{formatted:e.displayData,rawValue:e.data,format:"number"};case ve.Loading:return{formatted:"#LOADING",rawValue:"",format:"string"};case ve.Protected:return{formatted:"************",rawValue:"",format:"string"};default:Qo(e)}}function Pd(e,t){return e.map((r,n)=>{let o=t[n];return r.map(i=>i.span!==void 0&&i.span[0]!==o?{formatted:"",rawValue:"",format:"string"}:Td(i))})}function ia(e,t){return(t?/[\t\n",]/:/[\t\n"]/).test(e)&&(e=`"${e.replace(/"/g,'""')}"`),e}function Od(e){var r;let t=[];for(let n of e){let o=[];for(let i of n)i.format==="url"?o.push(((r=i.rawValue)==null?void 0:r.toString())??""):i.format==="string-array"?o.push(i.formatted.map(a=>ia(a,!0)).join(",")):o.push(i.doNotEscape===!0?i.formatted:ia(i.formatted,!1));t.push(o.join("	"))}return t.join(`
`)}function xi(e){return e.replace(/\t/g,"    ").replace(/ {2,}/g,t=>"<span> </span>".repeat(t.length))}function la(e){return'"'+e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"'}function Dd(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function Hd(e){var r;let t=[];t.push('<style type="text/css"><!--br {mso-data-placement:same-cell;}--></style>',"<table><tbody>");for(let n of e){t.push("<tr>");for(let o of n){let i=`gdg-format="${o.format}"`;o.format==="url"?t.push(`<td ${i}><a href="${o.rawValue}">${xi(o.formatted)}</a></td>`):o.format==="string-array"?t.push(`<td ${i}><ol>${o.formatted.map((a,l)=>`<li gdg-raw-value=${la(o.rawValue[l])}>`+xi(a)+"</li>").join("")}</ol></td>`):t.push(`<td gdg-raw-value=${la(((r=o.rawValue)==null?void 0:r.toString())??"")} ${i}>${xi(o.formatted)}</td>`)}t.push("</tr>")}return t.push("</tbody></table>"),t.join("")}function zd(e,t){let r=Pd(e,t),n=Od(r),o=Hd(r);return{textPlain:n,textHtml:o}}function aa(e){var a;let t=document.createElement("html");t.innerHTML=e.replace(/&nbsp;/g," ");let r=t.querySelector("table");if(r===null)return;let n=[r],o=[],i;for(;n.length>0;){let l=n.pop();if(l===void 0)break;if(l instanceof HTMLTableElement||l.nodeName==="TBODY")n.push(...[...l.children].reverse());else if(l instanceof HTMLTableRowElement)i!==void 0&&o.push(i),i=[],n.push(...[...l.children].reverse());else if(l instanceof HTMLTableCellElement){let s=l.cloneNode(!0),c=s.children.length===1&&s.children[0].nodeName==="P"?s.children[0]:null,u=(c==null?void 0:c.children.length)===1&&c.children[0].nodeName==="FONT",h=s.querySelectorAll("br");for(let f of h)f.replaceWith(`
`);let g=s.getAttribute("gdg-raw-value"),m=s.getAttribute("gdg-format")??"string";if(s.querySelector("a")!==null)i==null||i.push({rawValue:((a=s.querySelector("a"))==null?void 0:a.getAttribute("href"))??"",formatted:s.textContent??"",format:m});else if(s.querySelector("ol")!==null){let f=s.querySelectorAll("li");i==null||i.push({rawValue:[...f].map(v=>v.getAttribute("gdg-raw-value")??""),formatted:[...f].map(v=>v.textContent??""),format:"string-array"})}else if(g!==null)i==null||i.push({rawValue:Dd(g),formatted:s.textContent??"",format:m});else{let f=s.textContent??"";u&&(f=f.replace(/\n(?!\n)/g,"")),i==null||i.push({rawValue:f??"",formatted:f??"",format:m})}}}return i!==void 0&&o.push(i),o}function Ad(e,t,r,n,o){var l;let i=e;if(n==="allowPartial"||e.current===void 0||t===void 0)return e;let a=!1;do{if((e==null?void 0:e.current)===void 0)break;let s=(l=e.current)==null?void 0:l.range,c=[];if(s.width>2){let g=t({x:s.x,y:s.y,width:1,height:s.height},o.signal);if(typeof g=="function")return i;c.push(...g);let m=t({x:s.x+s.width-1,y:s.y,width:1,height:s.height},o.signal);if(typeof m=="function")return i;c.push(...m)}else{let g=t({x:s.x,y:s.y,width:s.width,height:s.height},o.signal);if(typeof g=="function")return i;c.push(...g)}let u=s.x-r,h=s.x+s.width-1-r;for(let g of c)for(let m of g)m.span!==void 0&&(u=Math.min(m.span[0],u),h=Math.max(m.span[1],h));u===s.x-r&&h===s.x+s.width-1-r?a=!0:e={current:{cell:e.current.cell??[0,0],range:{x:u+r,y:s.y,width:h-u+1,height:s.height},rangeStack:e.current.rangeStack},columns:e.columns,rows:e.rows}}while(!a);return e}function sa(e){return e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1).replace(/""/g,'"')),e}function Ld(e){let t;(function(l){l[l.None=0]="None",l[l.inString=1]="inString",l[l.inStringPostQuote=2]="inStringPostQuote"})(t||(t={}));let r=[],n=[],o=0,i=t.None;e=e.replace(/\r\n/g,`
`);let a=0;for(let l of e){switch(i){case t.None:l==="	"||l===`
`?(n.push(e.slice(o,a)),o=a+1,l===`
`&&(r.push(n),n=[])):l==='"'&&(i=t.inString);break;case t.inString:l==='"'&&(i=t.inStringPostQuote);break;case t.inStringPostQuote:l==='"'?i=t.inString:((l==="	"||l===`
`)&&(n.push(sa(e.slice(o,a))),o=a+1,l===`
`&&(r.push(n),n=[])),i=t.None);break}a++}return o<e.length&&n.push(sa(e.slice(o,e.length))),r.push(n),r.map(l=>l.map(s=>({rawValue:s,formatted:s,format:"string"})))}function ca(e,t,r){var a;let n=zd(e,t),o=l=>{var s;(s=window.navigator.clipboard)==null||s.writeText(l)},i=(l,s)=>{var c;return((c=window.navigator.clipboard)==null?void 0:c.write)===void 0?!1:(window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([l],{type:"text/plain"}),"text/html":new Blob([s],{type:"text/html"})})]),!0)};((a=window.navigator.clipboard)==null?void 0:a.write)!==void 0||(r==null?void 0:r.clipboardData)!==void 0?((l,s)=>{var c,u;try{if(r===void 0||r.clipboardData===null)throw Error("No clipboard data");(c=r==null?void 0:r.clipboardData)==null||c.setData("text/plain",l),(u=r==null?void 0:r.clipboardData)==null||u.setData("text/html",s)}catch{i(l,s)||o(l)}})(n.textPlain,n.textHtml):o(n.textPlain),r==null||r.preventDefault()}function ua(e){return e!==!0}function da(e){return typeof e=="string"?e:`${e}px`}var Fd=()=>e=>e.innerWidth,jd=()=>e=>e.innerHeight,_d=Zt("div")({name:"Wrapper",class:"gdg-wmyidgi",propsAsIs:!1,vars:{"wmyidgi-0":[Fd()],"wmyidgi-1":[jd()]}});const Nd=e=>{let{inWidth:t,inHeight:r,children:n,...o}=e;return d.createElement(_d,{innerHeight:da(r),innerWidth:da(t),...o},n)};var Bd=2,Wd=1300;function $d(e,t,r){let n=d.useRef(0),[o,i]=e??[0,0];d.useEffect(()=>{if(o===0&&i===0){n.current=0;return}let a=!1,l=0,s=c=>{var u;if(!a){if(l===0)l=c;else{let h=c-l;n.current=Math.min(1,n.current+h/Wd);let g=n.current**1.618*h*Bd;(u=t.current)==null||u.scrollBy(o*g,i*g),l=c,r==null||r()}window.requestAnimationFrame(s)}};return window.requestAnimationFrame(s),()=>{a=!0}},[t,o,i,r])}function Yd({rowHeight:e,headerHeight:t,groupHeaderHeight:r,theme:n,overscrollX:o,overscrollY:i,scaleToRem:a,remSize:l}){let[s,c,u,h,g,m]=d.useMemo(()=>{if(!a||l===16)return[e,t,r,n,o,i];let f=l/16,v=e,k=hs();return[typeof v=="number"?v*f:C=>Math.ceil(v(C)*f),Math.ceil(t*f),Math.ceil(r*f),{...n,headerIconSize:((n==null?void 0:n.headerIconSize)??k.headerIconSize)*f,cellHorizontalPadding:((n==null?void 0:n.cellHorizontalPadding)??k.cellHorizontalPadding)*f,cellVerticalPadding:((n==null?void 0:n.cellVerticalPadding)??k.cellVerticalPadding)*f},Math.ceil((o??0)*f),Math.ceil((i??0)*f)]},[r,t,o,i,l,e,a,n]);return{rowHeight:s,headerHeight:c,groupHeaderHeight:u,theme:h,overscrollX:g,overscrollY:m}}const Fr={downFill:!1,rightFill:!1,clear:!0,closeOverlay:!0,acceptOverlayDown:!0,acceptOverlayUp:!0,acceptOverlayLeft:!0,acceptOverlayRight:!0,copy:!0,paste:!0,cut:!0,search:!1,delete:!0,activateCell:!0,scrollToSelectedCell:!0,goToFirstCell:!0,goToFirstColumn:!0,goToFirstRow:!0,goToLastCell:!0,goToLastColumn:!0,goToLastRow:!0,goToNextPage:!0,goToPreviousPage:!0,selectToFirstCell:!0,selectToFirstColumn:!0,selectToFirstRow:!0,selectToLastCell:!0,selectToLastColumn:!0,selectToLastRow:!0,selectAll:!0,selectRow:!0,selectColumn:!0,goUpCell:!0,goRightCell:!0,goDownCell:!0,goLeftCell:!0,goUpCellRetainSelection:!0,goRightCellRetainSelection:!0,goDownCellRetainSelection:!0,goLeftCellRetainSelection:!0,selectGrowUp:!0,selectGrowRight:!0,selectGrowDown:!0,selectGrowLeft:!0};function Ke(e,t){return e===!0?t:e===!1?"":e}function ha(e){let t=bo.value;return{activateCell:Ke(e.activateCell," |Enter|shift+Enter"),clear:Ke(e.clear,"any+Escape"),closeOverlay:Ke(e.closeOverlay,"any+Escape"),acceptOverlayDown:Ke(e.acceptOverlayDown,"Enter"),acceptOverlayUp:Ke(e.acceptOverlayUp,"shift+Enter"),acceptOverlayLeft:Ke(e.acceptOverlayLeft,"shift+Tab"),acceptOverlayRight:Ke(e.acceptOverlayRight,"Tab"),copy:e.copy,cut:e.cut,delete:Ke(e.delete,t?"Backspace|Delete":"Delete"),downFill:Ke(e.downFill,"primary+_68"),scrollToSelectedCell:Ke(e.scrollToSelectedCell,"primary+Enter"),goDownCell:Ke(e.goDownCell,"ArrowDown"),goDownCellRetainSelection:Ke(e.goDownCellRetainSelection,"alt+ArrowDown"),goLeftCell:Ke(e.goLeftCell,"ArrowLeft|shift+Tab"),goLeftCellRetainSelection:Ke(e.goLeftCellRetainSelection,"alt+ArrowLeft"),goRightCell:Ke(e.goRightCell,"ArrowRight|Tab"),goRightCellRetainSelection:Ke(e.goRightCellRetainSelection,"alt+ArrowRight"),goUpCell:Ke(e.goUpCell,"ArrowUp"),goUpCellRetainSelection:Ke(e.goUpCellRetainSelection,"alt+ArrowUp"),goToFirstCell:Ke(e.goToFirstCell,"primary+Home"),goToFirstColumn:Ke(e.goToFirstColumn,"Home|primary+ArrowLeft"),goToFirstRow:Ke(e.goToFirstRow,"primary+ArrowUp"),goToLastCell:Ke(e.goToLastCell,"primary+End"),goToLastColumn:Ke(e.goToLastColumn,"End|primary+ArrowRight"),goToLastRow:Ke(e.goToLastRow,"primary+ArrowDown"),goToNextPage:Ke(e.goToNextPage,"PageDown"),goToPreviousPage:Ke(e.goToPreviousPage,"PageUp"),paste:e.paste,rightFill:Ke(e.rightFill,"primary+_82"),search:Ke(e.search,"primary+f"),selectAll:Ke(e.selectAll,"primary+a"),selectColumn:Ke(e.selectColumn,"ctrl+ "),selectGrowDown:Ke(e.selectGrowDown,"shift+ArrowDown"),selectGrowLeft:Ke(e.selectGrowLeft,"shift+ArrowLeft"),selectGrowRight:Ke(e.selectGrowRight,"shift+ArrowRight"),selectGrowUp:Ke(e.selectGrowUp,"shift+ArrowUp"),selectRow:Ke(e.selectRow,"shift+ "),selectToFirstCell:Ke(e.selectToFirstCell,"primary+shift+Home"),selectToFirstColumn:Ke(e.selectToFirstColumn,"primary+shift+ArrowLeft"),selectToFirstRow:Ke(e.selectToFirstRow,"primary+shift+ArrowUp"),selectToLastCell:Ke(e.selectToLastCell,"primary+shift+End"),selectToLastColumn:Ke(e.selectToLastColumn,"primary+shift+ArrowRight"),selectToLastRow:Ke(e.selectToLastRow,"primary+shift+ArrowDown")}}function Kd(e){let t=Os(e);return d.useMemo(()=>{if(t===void 0)return ha(Fr);let r={...t,goToNextPage:(t==null?void 0:t.goToNextPage)??(t==null?void 0:t.pageDown)??Fr.goToNextPage,goToPreviousPage:(t==null?void 0:t.goToPreviousPage)??(t==null?void 0:t.pageUp)??Fr.goToPreviousPage,goToFirstCell:(t==null?void 0:t.goToFirstCell)??(t==null?void 0:t.first)??Fr.goToFirstCell,goToLastCell:(t==null?void 0:t.goToLastCell)??(t==null?void 0:t.last)??Fr.goToLastCell,selectToFirstCell:(t==null?void 0:t.selectToFirstCell)??(t==null?void 0:t.first)??Fr.selectToFirstCell,selectToLastCell:(t==null?void 0:t.selectToLastCell)??(t==null?void 0:t.last)??Fr.selectToLastCell};return ha({...Fr,...r})},[t])}function Xd(e){function t(r,n,o){if(typeof r=="number")return{headerIndex:r,isCollapsed:!1,depth:n,path:o};let i={headerIndex:r.headerIndex,isCollapsed:r.isCollapsed,depth:n,path:o};return r.subGroups!==void 0&&(i.subGroups=r.subGroups.map((a,l)=>t(a,n+1,[...o,l])).sort((a,l)=>a.headerIndex-l.headerIndex)),i}return e.map((r,n)=>t(r,0,[n])).sort((r,n)=>r.headerIndex-n.headerIndex)}function Ci(e,t){let r=[];function n(l,s,c=!1){let u=s===null?t-l.headerIndex:s-l.headerIndex;if(l.subGroups!==void 0&&(u=l.subGroups[0].headerIndex-l.headerIndex),u--,r.push({rowIndex:-1,headerIndex:l.headerIndex,contentIndex:-1,skip:c,isCollapsed:l.isCollapsed,depth:l.depth,path:l.path,rows:u}),l.subGroups)for(let h=0;h<l.subGroups.length;h++){let g=h<l.subGroups.length-1?l.subGroups[h+1].headerIndex:s;n(l.subGroups[h],g,c||l.isCollapsed)}}let o=Xd(e.groups);for(let l=0;l<o.length;l++){let s=l<o.length-1?o[l+1].headerIndex:null;n(o[l],s)}let i=0,a=0;for(let l of r)l.contentIndex=a,a+=l.rows,l.rowIndex=i,i+=l.isCollapsed?1:l.rows+1;return r.filter(l=>l.skip===!1).map(l=>{let{skip:s,...c}=l;return c})}function Si(e,t){if(t===void 0||Ci.length===0)return{path:[e],originalIndex:e,isGroupHeader:!1,groupIndex:e,contentIndex:e,groupRows:-1};let r=e;for(let n of t){if(r===0)return{path:[...n.path,-1],originalIndex:n.headerIndex,isGroupHeader:!0,groupIndex:-1,contentIndex:-1,groupRows:n.rows};if(n.isCollapsed)r--;else{if(r<=n.rows)return{path:[...n.path,r-1],originalIndex:n.headerIndex+r,isGroupHeader:!1,groupIndex:r-1,contentIndex:n.contentIndex+r-1,groupRows:n.rows};r=r-n.rows-1}}return{path:[e],originalIndex:e,isGroupHeader:!1,groupIndex:e,contentIndex:e,groupRows:-1}}function Vd(e,t,r,n){let o=d.useMemo(()=>e===void 0?void 0:Ci(e,t),[e,t]),i=d.useMemo(()=>o==null?void 0:o.reduce((u,h)=>(u[h.rowIndex]=h,u),{}),[o]),a=d.useMemo(()=>o===void 0?t:o.reduce((u,h)=>u+(h.isCollapsed?1:h.rows+1),0),[o,t]),l=d.useMemo(()=>e===void 0||typeof r=="number"&&e.height===r?r:u=>i!=null&&i[u]?e.height:typeof r=="number"?r:r(u),[i,e,r]),s=d.useCallback(u=>{if(o===void 0)return u;let h=u;for(let g of o){if(h===0)return;if(h--,!g.isCollapsed){if(h<g.rows)return g.contentIndex+h;h-=g.rows}}return u},[o]),c=zr(n??(e==null?void 0:e.themeOverride),d.useCallback(u=>{if(e===void 0)return n==null?void 0:n(u,u,u);if(n===void 0&&(e==null?void 0:e.themeOverride)===void 0)return;let{isGroupHeader:h,contentIndex:g,groupIndex:m}=Si(u,o);return h?e.themeOverride:n==null?void 0:n(u,m,g)},[o,n,e]));return e===void 0?{rowHeight:l,rows:t,rowNumberMapper:s,getRowThemeOverride:c}:{rowHeight:l,rows:a,rowNumberMapper:s,getRowThemeOverride:c}}function Gd(e,t){let r=d.useMemo(()=>e===void 0?void 0:Ci(e,t),[e,t]);return{getRowGroupingForPath:ga,updateRowGroupingByPath:fa,mapper:d.useCallback(n=>{if(typeof n=="number")return Si(n,r);let o=Si(n[1],r);return{...o,originalIndex:[n[0],o.originalIndex]}},[r])}}function fa(e,t,r){let[n,...o]=t;return o[0]===-1?e.map((i,a)=>a===n?{...i,...r}:i):e.map((i,a)=>a===n?{...i,subGroups:fa(i.subGroups??[],o,r)}:i)}function ga(e,t){let[r,...n]=t;return n[0]===-1?e[r]:ga(e[r].subGroups??[],n)}function Ud(e,t){let[r]=d.useState(()=>({value:e,callback:t,facade:{get current(){return r.value},set current(n){let o=r.value;o!==n&&(r.value=n,r.callback(n,o))}}}));return r.callback=t,r.facade}function qd(e,t,r,n,o){let[i,a]=d.useMemo(()=>[t!==void 0&&typeof r=="number"?Math.floor(t/r):0,t!==void 0&&typeof r=="number"?-(t%r):0],[t,r]),l=d.useMemo(()=>({x:n.current.x,y:i,width:n.current.width??1,height:n.current.height??1,ty:a}),[n,a,i]),[s,c,u]=Ps(l),h=d.useRef(o);h.current=o;let g=Ud(null,v=>{v!==null&&t!==void 0?v.scrollTop=t:v!==null&&e!==void 0&&(v.scrollLeft=e)}),m=(s.height??1)>1;d.useLayoutEffect(()=>{if(t!==void 0&&g.current!==null&&m){if(g.current.scrollTop===t)return;g.current.scrollTop=t,g.current.scrollTop!==t&&u(),h.current()}},[t,m,u,g]);let f=(s.width??1)>1;return d.useLayoutEffect(()=>{if(e!==void 0&&g.current!==null&&f){if(g.current.scrollLeft===e)return;g.current.scrollLeft=e,g.current.scrollLeft!==e&&u(),h.current()}},[e,f,u,g]),{visibleRegion:s,setVisibleRegion:c,scrollRef:g}}var tn=Kt(vo()),Jd=Kt(yc()),pa=Kt(Cc()),Cn=Kt(El()),Qd=Kt(ri()),Zd=d.lazy(async()=>await Ka(()=>import("./data-grid-overlay-editor-Drp4I0tg.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),eh=0;function th(e){return(0,Jd.default)((0,pa.default)((0,pa.default)(e).filter(t=>t.span!==void 0).map(t=>{var r,n;return(0,Cn.default)((((r=t.span)==null?void 0:r[0])??0)+1,(((n=t.span)==null?void 0:n[1])??0)+1)})))}function xo(e,t){return e===void 0||t===0||e.columns.length===0&&e.current===void 0?e:{current:e.current===void 0?void 0:{cell:[e.current.cell[0]+t,e.current.cell[1]],range:{...e.current.range,x:e.current.range.x+t},rangeStack:e.current.rangeStack.map(r=>({...r,x:r.x+t}))},rows:e.rows,columns:e.columns.offset(t)}}var Co={kind:ve.Loading,allowOverlay:!1},So={columns:lt.empty(),rows:lt.empty(),current:void 0};const rh=d.forwardRef((e,t)=>{var Wa,$a,Ya;let[r,n]=d.useState(So),[o,i]=d.useState(),a=d.useRef(null),l=d.useRef(null),[s,c]=d.useState(),u=d.useRef(),h=typeof window>"u"?null:window,{imageEditorOverride:g,getRowThemeOverride:m,markdownDivCreateNode:f,width:v,height:k,columns:C,rows:y,getCellContent:M,onCellClicked:T,onCellActivated:P,onFillPattern:E,onFinishedEditing:O,coercePasteValue:L,drawHeader:S,drawCell:R,editorBloom:A,onHeaderClicked:x,onColumnProposeMove:w,rangeSelectionColumnSpanning:I=!0,spanRangeBehavior:D="default",onGroupHeaderClicked:b,onCellContextMenu:G,className:j,onHeaderContextMenu:Z,getCellsForSelection:ee,onGroupHeaderContextMenu:X,onGroupHeaderRenamed:ce,onCellEdited:oe,onCellsEdited:de,onSearchResultsChanged:Oe,searchResults:te,onSearchValueChange:$,searchValue:Q,onKeyDown:re,onKeyUp:se,keybindings:Be,editOnType:Ae=!0,onRowAppended:Me,onColumnMoved:Xe,validateCell:He,highlightRegions:ct,rangeSelect:ut="rect",columnSelect:Ze="multi",rowSelect:ae="multi",rangeSelectionBlending:Te="exclusive",columnSelectionBlending:De="exclusive",rowSelectionBlending:We="exclusive",onDelete:ye,onDragStart:Ge,onMouseMove:$e,onPaste:Ue,copyHeaders:we=!1,freezeColumns:be=0,cellActivationBehavior:nt="second-click",rowSelectionMode:Je="auto",onHeaderMenuClick:qe,onHeaderIndicatorClick:pt,getGroupDetails:et,rowGrouping:Le,onSearchClose:Ct,onItemHovered:Lt,onSelectionCleared:St,showSearch:It,onVisibleRegionChanged:Nt,gridSelection:vt,onGridSelectionChange:pr,minColumnWidth:jr=50,maxColumnWidth:ft=500,maxColumnAutoWidth:kr,provideEditor:lr,trailingRowOptions:Ee,freezeTrailingRows:wt=0,allowedFillDirections:mr="orthogonal",scrollOffsetX:ar,scrollOffsetY:er,verticalBorder:Ve,onDragOverCell:yt,onDrop:kt,onColumnResize:Wt,onColumnResizeEnd:Ot,onColumnResizeStart:Gt,customRenderers:_r,fillHandle:Mt,experimental:bt,fixedShadowX:Pt,fixedShadowY:Dt,headerIcons:Mr,imageWindowLoader:ko,initialSize:Nr,isDraggable:Rr,onDragLeave:Er,onRowMoved:vr,overscrollX:Mo,overscrollY:Ro,preventDiagonalScrolling:kn,rightElement:Mn,rightElementProps:Rn,trapFocus:rn=!1,smoothScrollX:nn,smoothScrollY:Br,scaleToRem:Eo=!1,rowHeight:Ei=34,headerHeight:Io=36,groupHeaderHeight:on=Io,theme:Wr,isOutsideClick:Ii,renderers:qn,resizeIndicator:To,scrollToActiveCell:Jn=!0,drawFocusRing:ln=!0}=e,Qn=ln==="no-editor"?o===void 0:ln,st=typeof e.rowMarkers=="string"?void 0:e.rowMarkers,Ut=(st==null?void 0:st.kind)??e.rowMarkers??"none",Po=(st==null?void 0:st.width)??e.rowMarkerWidth,Ir=(st==null?void 0:st.startIndex)??e.rowMarkerStartIndex??1,Tr=(st==null?void 0:st.theme)??e.rowMarkerTheme,En=st==null?void 0:st.headerTheme,$r=st==null?void 0:st.headerAlwaysVisible,an=ae!=="multi"||(st==null?void 0:st.headerDisabled)===!0,sn=(st==null?void 0:st.checkboxStyle)??"square",Pr=Math.max(jr,20),cn=Math.max(ft,Pr),Ti=Math.max(kr??cn,Pr),Oo=d.useMemo(()=>typeof window>"u"?{fontSize:"16px"}:window.getComputedStyle(document.documentElement),[]),{rows:Pe,rowNumberMapper:Zn,rowHeight:Do,getRowThemeOverride:tr}=Vd(Le,y,Ei,m),Pi=d.useMemo(()=>Number.parseFloat(Oo.fontSize),[Oo]),{rowHeight:wr,headerHeight:eo,groupHeaderHeight:Ho,theme:zo,overscrollX:to,overscrollY:Oi}=Yd({groupHeaderHeight:on,headerHeight:Io,overscrollX:Mo,overscrollY:Ro,remSize:Pi,rowHeight:Do,scaleToRem:Eo,theme:Wr}),yr=Kd(Be),Yr=Po??(y>1e4?48:y>1e3?44:y>100?36:32),rr=Ut!=="none",B=rr?1:0,dt=Me!==void 0,Or=(Ee==null?void 0:Ee.sticky)===!0,[ro,Ao]=d.useState(!1),In=It??ro,Di=d.useCallback(()=>{Ct===void 0?Ao(!1):Ct()},[Ct]),Y=d.useMemo(()=>vt===void 0?void 0:xo(vt,B),[vt,B])??r,$t=d.useRef();$t.current===void 0&&($t.current=new AbortController),d.useEffect(()=>()=>$t==null?void 0:$t.current.abort(),[]);let[Ht,F]=Id(ee,M,B,$t.current,Pe),ne=d.useCallback((p,H,z)=>{if(He===void 0)return!0;let _=[p[0]-B,p[1]];return He==null?void 0:He(_,H,z)},[B,He]),ge=d.useRef(vt),ue=d.useCallback((p,H)=>{H&&(p=Ad(p,Ht,B,D,$t.current)),pr===void 0?n(p):(ge.current=xo(p,-B),pr(ge.current))},[pr,Ht,B,D]),ie=zr(Wt,d.useCallback((p,H,z,_)=>{Wt==null||Wt(C[z-B],H,z-B,_)},[Wt,B,C])),me=zr(Ot,d.useCallback((p,H,z,_)=>{Ot==null||Ot(C[z-B],H,z-B,_)},[Ot,B,C])),Fe=zr(Gt,d.useCallback((p,H,z,_)=>{Gt==null||Gt(C[z-B],H,z-B,_)},[Gt,B,C])),_e=zr(S,d.useCallback((p,H)=>(S==null?void 0:S({...p,columnIndex:p.columnIndex-B},H))??!1,[S,B])),Re=zr(R,d.useCallback((p,H)=>(R==null?void 0:R({...p,col:p.col-B},H))??!1,[R,B])),at=d.useCallback(p=>{if(ye!==void 0){let H=ye(xo(p,-B));return typeof H=="boolean"?H:xo(H,B)}return!0},[ye,B]),[fe,Ie,Ce]=Ed(Y,ue,Te,De,We,ut,I),Ne=d.useMemo(()=>Hr(hs(),zo),[zo]),[Rt,qt]=d.useState([0,0,0]),Et=d.useMemo(()=>{if(qn===void 0)return{};let p={};for(let H of qn)p[H.kind]=H;return p},[qn]),mt=d.useCallback(p=>p.kind===ve.Custom?_r==null?void 0:_r.find(H=>H.isMatch(p)):Et[p.kind],[_r,Et]),{sizedColumns:xt,nonGrowWidth:it}=lc(C,Pe,F,Rt[0]-(B===0?0:Yr)-Rt[2],Pr,Ti,Ne,mt,$t.current);Ut!=="none"&&(it+=Yr);let Xt=d.useMemo(()=>xt.some(p=>p.group!==void 0),[xt]),zt=Xt?eo+Ho:eo,Kr=Y.rows.length,sr=Ut==="none"?void 0:Kr===0?!1:Kr===Pe?!0:void 0,ot=d.useMemo(()=>Ut==="none"?xt:[{title:"",width:Yr,icon:void 0,hasMenu:!1,style:"normal",themeOverride:Tr,rowMarker:sn,rowMarkerChecked:sr,headerRowMarkerTheme:En,headerRowMarkerAlwaysVisible:$r,headerRowMarkerDisabled:an},...xt],[Ut,xt,Yr,Tr,sn,sr,En,$r,an]),At=d.useRef({height:1,width:1,x:0,y:0}),Lo=d.useRef(!1),{setVisibleRegion:Ea,visibleRegion:un,scrollRef:gt}=qd(ar,er,wr,At,()=>Lo.current=!0);At.current=un;let Uh=un.x+B,Fo=un.y,Ft=d.useRef(null),Vt=d.useCallback(p=>{var H;p===!0?(H=Ft.current)==null||H.focus():window.requestAnimationFrame(()=>{var z;(z=Ft.current)==null||z.focus()})},[]),Yt=dt?Pe+1:Pe,nr=d.useCallback(p=>{let H=B===0?p:p.map(_=>({..._,location:[_.location[0]-B,_.location[1]]})),z=de==null?void 0:de(H);if(z!==!0)for(let _ of H)oe==null||oe(_.location,_.value);return z},[oe,de,B]),[dn,Hi]=d.useState(),jo=Y.current!==void 0&&Y.current.range.width*Y.current.range.height>1?Y.current.range:void 0,Tn=Qn?(Wa=Y.current)==null?void 0:Wa.cell:void 0,_o=Tn==null?void 0:Tn[0],No=Tn==null?void 0:Tn[1],qh=d.useMemo(()=>{if((ct===void 0||ct.length===0)&&(jo??_o??No??dn)===void 0)return;let p=[];if(ct!==void 0)for(let H of ct){let z=ot.length-H.range.x-B;z>0&&p.push({color:H.color,range:{...H.range,x:H.range.x+B,width:Math.min(z,H.range.width)},style:H.style})}return dn!==void 0&&p.push({color:mn(Ne.accentColor,0),range:dn,style:"dashed"}),jo!==void 0&&p.push({color:mn(Ne.accentColor,.5),range:jo,style:"solid-outline"}),_o!==void 0&&No!==void 0&&p.push({color:Ne.accentColor,range:{x:_o,y:No,width:1,height:1},style:"solid-outline"}),p.length>0?p:void 0},[dn,jo,_o,No,ct,ot.length,Ne.accentColor,B]),Ia=d.useRef(ot);Ia.current=ot;let Jt=d.useCallback(([p,H],z=!1)=>{var N,V,W,K,q,U,pe;let _=dt&&H===Yt-1;if(p===0&&rr){if(_)return Co;let he=Zn(H);return he===void 0?Co:{kind:Gr.Marker,allowOverlay:!1,checkboxStyle:sn,checked:(Y==null?void 0:Y.rows.hasIndex(H))===!0,markerKind:Ut==="clickable-number"?"number":Ut,row:Ir+he,drawHandle:vr!==void 0,cursor:Ut==="clickable-number"?"pointer":void 0}}else if(_){let he=p===B?(Ee==null?void 0:Ee.hint)??"":"",le=Ia.current[p];if(((N=le==null?void 0:le.trailingRowOptions)==null?void 0:N.disabled)===!0)return Co;{let xe=((V=le==null?void 0:le.trailingRowOptions)==null?void 0:V.hint)??he,ze=((W=le==null?void 0:le.trailingRowOptions)==null?void 0:W.addIcon)??(Ee==null?void 0:Ee.addIcon);return{kind:Gr.NewRow,hint:xe,allowOverlay:!1,icon:ze}}}else{let he=p-B;if(z||(bt==null?void 0:bt.strict)===!0){let xe=At.current,ze=xe.x>he||he>xe.x+xe.width||xe.y>H||H>xe.y+xe.height||H>=Ai.current,Qe=he===((q=(K=xe.extras)==null?void 0:K.selected)==null?void 0:q[0])&&H===((U=xe.extras)==null?void 0:U.selected[1]),Se=!1;if(((pe=xe.extras)==null?void 0:pe.freezeRegions)!==void 0){for(let ke of xe.extras.freezeRegions)if(en(ke,he,H)){Se=!0;break}}if(ze&&!Qe&&!Se)return Co}let le=M([he,H]);return B!==0&&le.span!==void 0&&(le={...le,span:[le.span[0]+B,le.span[1]+B]}),le}},[dt,Yt,rr,Zn,sn,Y==null?void 0:Y.rows,Ut,Ir,vr,B,Ee==null?void 0:Ee.hint,Ee==null?void 0:Ee.addIcon,bt==null?void 0:bt.strict,M]),zi=d.useCallback(p=>{let H=(et==null?void 0:et(p))??{name:p};return ce!==void 0&&p!==""&&(H={icon:H.icon,name:H.name,overrideTheme:H.overrideTheme,actions:[...H.actions??[],{title:"Rename",icon:"renameIcon",onClick:z=>Fi({group:H.name,bounds:z.bounds})}]}),H},[et,ce]),Bo=d.useCallback(p=>{var K;let[H,z]=p.cell,_=ot[H],N=(_==null?void 0:_.group)===void 0||(K=zi(_.group))==null?void 0:K.overrideTheme,V=_==null?void 0:_.themeOverride,W=tr==null?void 0:tr(z);i({...p,theme:Hr(Ne,N,V,W,p.content.themeOverride)})},[tr,ot,zi,Ne]),Pn=d.useCallback((p,H,z)=>{var W;if(Y.current===void 0)return;let[_,N]=Y.current.cell,V=Jt([_,N]);if(V.kind!==ve.Boolean&&V.allowOverlay){let K=V;if(z!==void 0)switch(K.kind){case ve.Number:{let q=Q0(()=>z==="-"?-0:Number.parseFloat(z),0);K={...K,data:Number.isNaN(q)?0:q};break}case ve.Text:case ve.Markdown:case ve.Uri:K={...K,data:z};break}Bo({target:p,content:K,initialValue:z,cell:[_,N],highlight:z===void 0,forceEditMode:z!==void 0})}else V.kind===ve.Boolean&&H&&V.readonly!==!0&&(nr([{location:Y.current.cell,value:{...V,data:ua(V.data)}}]),(W=Ft.current)==null||W.damage([{cell:Y.current.cell}]))},[Jt,Y,nr,Bo]),Ta=d.useCallback((p,H)=>{var N;let z=(N=Ft.current)==null?void 0:N.getBounds(p,H);if(z===void 0||gt.current===null)return;let _=Jt([p,H]);_.allowOverlay&&Bo({target:z,content:_,initialValue:void 0,highlight:!0,cell:[p,H],forceEditMode:!0})},[Jt,gt,Bo]),Tt=d.useCallback((p,H,z="both",_=0,N=0,V=void 0)=>{if(gt.current!==null){let W=Ft.current,K=l.current,q=typeof p=="number"?p:p.unit==="cell"?p.amount:void 0,U=typeof H=="number"?H:H.unit==="cell"?H.amount:void 0,pe=typeof p!="number"&&p.unit==="px"?p.amount:void 0,he=typeof H!="number"&&H.unit==="px"?H.amount:void 0;if(W!==null&&K!==null){let le={x:0,y:0,width:0,height:0},xe=0,ze=0;if((q!==void 0||U!==void 0)&&(le=W.getBounds((q??0)+B,U??0)??le,le.width===0||le.height===0))return;let Qe=K.getBoundingClientRect(),Se=Qe.width/K.offsetWidth;if(pe!==void 0&&(le={...le,x:pe-Qe.left-gt.current.scrollLeft,width:1}),he!==void 0&&(le={...le,y:he+Qe.top-gt.current.scrollTop,height:1}),le!==void 0){let ke={x:le.x-_,y:le.y-N,width:le.width+2*_,height:le.height+2*N},tt=0;for(let Yi=0;Yi<be;Yi++)tt+=xt[Yi].width;let Bt=0,jt=wt+(Or?1:0);jt>0&&(Bt=Zr(Yt,jt,wr));let dr=tt*Se+Qe.left+B*Yr*Se,xr=Qe.right,hr=Qe.top+zt*Se,Dr=Qe.bottom-Bt*Se,Go=le.width+_*2;switch(V==null?void 0:V.hAlign){case"start":xr=dr+Go;break;case"end":dr=xr-Go;break;case"center":dr=Math.floor((dr+xr)/2)-Go/2,xr=dr+Go;break}let Uo=le.height+N*2;switch(V==null?void 0:V.vAlign){case"start":Dr=hr+Uo;break;case"end":hr=Dr-Uo;break;case"center":hr=Math.floor((hr+Dr)/2)-Uo/2,Dr=hr+Uo;break}dr>ke.x?xe=ke.x-dr:xr<ke.x+ke.width&&(xe=ke.x+ke.width-xr),hr>ke.y?ze=ke.y-hr:Dr<ke.y+ke.height&&(ze=ke.y+ke.height-Dr),z==="vertical"||typeof p=="number"&&p<be?xe=0:(z==="horizontal"||typeof H=="number"&&H>=Yt-jt)&&(ze=0),(xe!==0||ze!==0)&&(Se!==1&&(xe/=Se,ze/=Se),gt.current.scrollTo({left:xe+gt.current.scrollLeft,top:ze+gt.current.scrollTop,behavior:(V==null?void 0:V.behavior)??"auto"}))}}}},[B,wt,Yr,gt,zt,be,xt,Yt,Or,wr]),Pa=d.useRef(Ta),Oa=d.useRef(M),Ai=d.useRef(Pe);Pa.current=Ta,Oa.current=M,Ai.current=Pe;let On=d.useCallback(async(p,H=!0,z)=>{var q,U;if(((U=(q=ot[p])==null?void 0:q.trailingRowOptions)==null?void 0:U.disabled)===!0)return;let _=Me==null?void 0:Me(),N,V=!0;_!==void 0&&(N=await _,N==="top"&&(V=!1),typeof N=="number"&&(V=!1));let W=0,K=()=>{if(Ai.current<=Pe){W<500&&window.setTimeout(K,W),W=50+W*2;return}let pe=typeof N=="number"?N:V?Pe:0;Vo.current(p-B,pe,"both",0,0,z?{behavior:z}:void 0),fe({cell:[p,pe],range:{x:p,y:pe,width:1,height:1}},!1,!1,"edit");let he=Oa.current([p-B,pe]);he.allowOverlay&&fo(he)&&he.readonly!==!0&&H&&window.setTimeout(()=>{Pa.current(p,pe)},0)};K()},[ot,Me,B,Pe,fe]),Wo=d.useCallback(p=>{var z,_;let H=((_=(z=xt[p])==null?void 0:z.trailingRowOptions)==null?void 0:_.targetColumn)??(Ee==null?void 0:Ee.targetColumn);if(typeof H=="number")return H+(rr?1:0);if(typeof H=="object"){let N=C.indexOf(H);if(N>=0)return N+(rr?1:0)}},[xt,C,rr,Ee==null?void 0:Ee.targetColumn]),Xr=d.useRef(),Dn=d.useRef(),no=d.useCallback((p,H)=>{var N;let[z,_]=H;return Hr(Ne,(N=ot[z])==null?void 0:N.themeOverride,tr==null?void 0:tr(_),p.themeOverride)},[tr,ot,Ne]),{mapper:hn}=Gd(Le,y),cr=Le==null?void 0:Le.navigationBehavior,oo=d.useCallback(p=>{var pe,he,le;let H=bo.value?p.metaKey:p.ctrlKey,z=H&&ae==="multi",_=H&&Ze==="multi",[N,V]=p.location,W=Y.columns,K=Y.rows,[q,U]=((pe=Y.current)==null?void 0:pe.cell)??[];if(p.kind==="cell"){if(Dn.current=void 0,fn.current=[N,V],N===0&&rr){if(dt===!0&&V===Pe||Ut==="number"||ae==="none")return;let xe=Jt(p.location);if(xe.kind!==Gr.Marker)return;if(vr!==void 0){let Se=mt(xe);Qt((Se==null?void 0:Se.kind)===Gr.Marker);let ke=(he=Se==null?void 0:Se.onClick)==null?void 0:he.call(Se,{...p,cell:xe,posX:p.localEventX,posY:p.localEventY,bounds:p.bounds,theme:no(xe,p.location),preventDefault:()=>{}});if(ke===void 0||ke.checked===xe.checked)return}i(void 0),Vt();let ze=K.hasIndex(V),Qe=Xr.current;if(ae==="multi"&&(p.shiftKey||p.isLongTouch===!0)&&Qe!==void 0&&K.hasIndex(Qe)){let Se=[Math.min(Qe,V),Math.max(Qe,V)+1];z||Je==="multi"?Ie(void 0,Se,!0):Ie(lt.fromSingleSelection(Se),void 0,z)}else ae==="multi"&&(z||p.isTouch||Je==="multi")?ze?Ie(K.remove(V),void 0,!0):(Ie(void 0,V,!0),Xr.current=V):ze&&K.length===1?Ie(lt.empty(),void 0,H):(Ie(lt.fromSingleSelection(V),void 0,H),Xr.current=V)}else if(N>=B&&dt&&V===Pe){let xe=Wo(N);On(xe??N)}else if(q!==N||U!==V){let xe=Jt(p.location),ze=mt(xe);if((ze==null?void 0:ze.onSelect)!==void 0){let ke=!1;if(ze.onSelect({...p,cell:xe,posX:p.localEventX,posY:p.localEventY,bounds:p.bounds,preventDefault:()=>ke=!0,theme:no(xe,p.location)}),ke)return}if(cr==="block"&&hn(V).isGroupHeader)return;let Qe=Or&&V===Pe,Se=Or&&Y!==void 0&&((le=Y.current)==null?void 0:le.cell[1])===Pe;if((p.shiftKey||p.isLongTouch===!0)&&q!==void 0&&U!==void 0&&Y.current!==void 0&&!Se){if(Qe)return;let ke=Math.min(N,q),tt=Math.max(N,q),Bt=Math.min(V,U),jt=Math.max(V,U);fe({...Y.current,range:{x:ke,y:Bt,width:tt-ke+1,height:jt-Bt+1}},!0,H,"click"),Xr.current=void 0,Vt()}else fe({cell:[N,V],range:{x:N,y:V,width:1,height:1}},!0,H,"click"),Xr.current=void 0,i(void 0),Vt()}}else if(p.kind==="header")if(fn.current=[N,V],i(void 0),rr&&N===0)Xr.current=void 0,Dn.current=void 0,!an&&ae==="multi"&&(K.length===Pe?Ie(lt.empty(),void 0,H):Ie(lt.fromSingleSelection([0,Pe]),void 0,H),Vt());else{let xe=Dn.current;if(Ze==="multi"&&(p.shiftKey||p.isLongTouch===!0)&&xe!==void 0&&W.hasIndex(xe)){let ze=[Math.min(xe,N),Math.max(xe,N)+1];_?Ce(void 0,ze,H):Ce(lt.fromSingleSelection(ze),void 0,H)}else _?(W.hasIndex(N)?Ce(W.remove(N),void 0,H):Ce(void 0,N,H),Dn.current=N):Ze!=="none"&&(W.hasIndex(N)?Ce(W.remove(N),void 0,H):Ce(lt.fromSingleSelection(N),void 0,H),Dn.current=N);Xr.current=void 0,Vt()}else p.kind==="group-header"?fn.current=[N,V]:p.kind==="out-of-bounds"&&!p.isMaybeScrollbar&&(ue(So,!1),i(void 0),Vt(),St==null||St(),Xr.current=void 0,Dn.current=void 0)},[ae,Ze,Y,rr,B,dt,Pe,Ut,Jt,vr,Vt,Je,mt,no,Ie,Wo,On,cr,hn,Or,fe,Ce,ue,St]),io=d.useRef(!1),fn=d.useRef(),Da=d.useRef(un),or=d.useRef(),Jh=d.useCallback(p=>{if(Hn.current=!1,Da.current=At.current,p.button!==0&&p.button!==1){or.current=void 0;return}let H=performance.now();or.current={button:p.button,time:H,location:p.location},(p==null?void 0:p.kind)==="header"&&(io.current=!0);let z=p.kind==="cell"&&p.isFillHandle;!z&&p.kind!=="cell"&&p.isEdge||(c({previousSelection:Y,fillHandle:z}),fn.current=void 0,!p.isTouch&&p.button===0&&!z?oo(p):!p.isTouch&&p.button===1&&(fn.current=p.location))},[Y,oo]),[Li,Fi]=d.useState(),Ha=d.useCallback(p=>{if(p.kind!=="group-header"||Ze!=="multi")return;let H=bo.value?p.metaKey:p.ctrlKey,[z]=p.location,_=Y.columns;if(z<B)return;let N=ot[z],V=z,W=z;for(let K=z-1;K>=B&&_n(N.group,ot[K].group);K--)V--;for(let K=z+1;K<ot.length&&_n(N.group,ot[K].group);K++)W++;if(Vt(),H)if(_.hasAll([V,W+1])){let K=_;for(let q=V;q<=W;q++)K=K.remove(q);Ce(K,void 0,H)}else Ce(void 0,[V,W+1],H);else Ce(lt.fromSingleSelection([V,W+1]),void 0,H)},[Ze,Vt,Y.columns,ot,B,Ce]),Hn=d.useRef(!1),$o=d.useCallback(async p=>{if(Ht!==void 0&&ie!==void 0){let H=At.current.y,z=At.current.height,_=Ht({x:p,y:H,width:1,height:Math.min(z,Pe-H)},$t.current.signal);typeof _!="object"&&(_=await _());let N=xt[p-B],V=document.createElement("canvas").getContext("2d",{alpha:!1});if(V!==null){V.font=Ne.baseFontFull;let W=Cl(V,Ne,N,0,_,Pr,cn,!1,mt);ie==null||ie(N,W.width,p,W.width)}}},[xt,Ht,cn,Ne,Pr,ie,B,Pe,mt]),[Qh,ji]=d.useState(),zn=d.useCallback(async(p,H)=>{var K,q;let z=(K=p.current)==null?void 0:K.range;if(z===void 0||Ht===void 0||H.current===void 0)return;let _=H.current.range;if(E!==void 0){let U=!1;if(E({fillDestination:{..._,x:_.x-B},patternSource:{...z,x:z.x-B},preventDefault:()=>U=!0}),U)return}let N=Ht(z,$t.current.signal);typeof N!="object"&&(N=await N());let V=N,W=[];for(let U=0;U<_.width;U++)for(let pe=0;pe<_.height;pe++){let he=[_.x+U,_.y+pe];if(ul(he,z))continue;let le=V[pe%z.height][U%z.width];Fn(le)||!fo(le)||W.push({location:he,value:{...le}})}nr(W),(q=Ft.current)==null||q.damage(W.map(U=>({cell:U.location})))},[Ht,nr,E,B]),za=d.useCallback(()=>{if(Y.current===void 0||Y.current.range.width<=1)return;let p={...Y,current:{...Y.current,range:{...Y.current.range,width:1}}};zn(p,Y)},[zn,Y]),Aa=d.useCallback(()=>{if(Y.current===void 0||Y.current.range.height<=1)return;let p={...Y,current:{...Y.current,range:{...Y.current.range,height:1}}};zn(p,Y)},[zn,Y]),Zh=d.useCallback((p,H)=>{var pe,he;let z=s;if(c(void 0),Hi(void 0),ji(void 0),io.current=!1,H)return;if((z==null?void 0:z.fillHandle)===!0&&Y.current!==void 0&&((pe=z.previousSelection)==null?void 0:pe.current)!==void 0){if(dn===void 0)return;let le={...Y,current:{...Y.current,range:Dl(z.previousSelection.current.range,dn)}};zn(z.previousSelection,le),ue(le,!0);return}let[_,N]=p.location,[V,W]=fn.current??[],K=()=>{Hn.current=!0},q=le=>{var ze,Qe,Se;let xe=le.isTouch||V===_&&W===N;if(xe&&(T==null||T([_-B,N],{...le,preventDefault:K})),le.button===1)return!Hn.current;if(!Hn.current){let ke=Jt(p.location),tt=mt(ke);if(tt!==void 0&&tt.onClick!==void 0&&xe){let jt=tt.onClick({...le,cell:ke,posX:le.localEventX,posY:le.localEventY,bounds:le.bounds,theme:no(ke,p.location),preventDefault:K});jt!==void 0&&!Fn(jt)&&ho(jt)&&(nr([{location:le.location,value:jt}]),(ze=Ft.current)==null||ze.damage([{cell:le.location}]))}if(Hn.current||Y.current===void 0)return!1;let Bt=!1;switch(ke.activationBehaviorOverride??nt){case"double-click":case"second-click":{if(((Se=(Qe=z==null?void 0:z.previousSelection)==null?void 0:Qe.current)==null?void 0:Se.cell)===void 0)break;let[jt,dr]=Y.current.cell,[xr,hr]=z.previousSelection.current.cell;Bt=_===jt&&_===xr&&N===dr&&N===hr&&(le.isDoubleClick===!0||nt==="second-click");break}case"single-click":Bt=!0;break}if(Bt)return P==null||P([_-B,N]),Pn(le.bounds,!1),!0}return!1},U=p.location[0]-B;if(p.isTouch){let le=At.current,xe=Da.current;if(le.x!==xe.x||le.y!==xe.y)return;if(p.isLongTouch===!0){if(p.kind==="cell"&&Nn((he=Y.current)==null?void 0:he.cell,p.location)){G==null||G([U,p.location[1]],{...p,preventDefault:K});return}else if(p.kind==="header"&&Y.columns.hasIndex(_)){Z==null||Z(U,{...p,preventDefault:K});return}else if(p.kind==="group-header"){if(U<0)return;X==null||X(U,{...p,preventDefault:K});return}}p.kind==="cell"?q(p)||oo(p):p.kind==="group-header"?b==null||b(U,{...p,preventDefault:K}):(p.kind==="header"&&(x==null||x(U,{...p,preventDefault:K})),oo(p));return}if(p.kind==="header"){if(U<0)return;p.isEdge?p.isDoubleClick===!0&&$o(_):p.button===0&&_===V&&N===W&&(x==null||x(U,{...p,preventDefault:K}))}if(p.kind==="group-header"){if(U<0)return;p.button===0&&_===V&&N===W&&(b==null||b(U,{...p,preventDefault:K}),Hn.current||Ha(p))}p.kind==="cell"&&(p.button===0||p.button===1)&&q(p),fn.current=void 0},[s,Y,B,dn,zn,ue,T,Jt,mt,nt,no,nr,P,Pn,G,Z,X,oo,b,x,$o,Ha]),e0=d.useCallback(p=>{let H={...p,location:[p.location[0]-B,p.location[1]]};$e==null||$e(H),s!==void 0&&p.buttons===0&&(c(void 0),Hi(void 0),ji(void 0),io.current=!1),ji(z=>{var _;return io.current?[p.scrollEdge[0],0]:p.scrollEdge[0]===(z==null?void 0:z[0])&&p.scrollEdge[1]===z[1]?z:s===void 0||(((_=or.current)==null?void 0:_.location[0])??0)<B?void 0:p.scrollEdge})},[s,$e,B]),t0=d.useCallback((p,H)=>{qe==null||qe(p-B,H)},[qe,B]),r0=d.useCallback((p,H)=>{pt==null||pt(p-B,H)},[pt,B]),br=($a=Y==null?void 0:Y.current)==null?void 0:$a.cell,n0=d.useCallback((p,H,z,_,N,V)=>{Lo.current=!1;let W=br;W!==void 0&&(W=[W[0]-B,W[1]]);let K=be===0?void 0:{x:0,y:p.y,width:be,height:p.height},q=[];K!==void 0&&q.push(K),wt>0&&(q.push({x:p.x-B,y:Pe-wt,width:p.width,height:wt}),be>0&&q.push({x:0,y:Pe-wt,width:be,height:wt}));let U={x:p.x-B,y:p.y,width:p.width,height:dt&&p.y+p.height>=Pe?p.height-1:p.height,tx:N,ty:V,extras:{selected:W,freezeRegion:K,freezeRegions:q}};At.current=U,Ea(U),qt([H,z,_]),Nt==null||Nt(U,U.tx,U.ty,U.extras)},[br,B,dt,Pe,be,wt,Ea,Nt]),o0=zr(w,d.useCallback((p,H)=>(w==null?void 0:w(p-B,H-B))!==!1,[w,B])),i0=zr(Xe,d.useCallback((p,H)=>{Xe==null||Xe(p-B,H-B),Ze!=="none"&&Ce(lt.fromSingleSelection(H),void 0,!0)},[Ze,Xe,B,Ce])),_i=d.useRef(!1),l0=d.useCallback(p=>{if(p.location[0]===0&&B>0){p.preventDefault();return}Ge==null||Ge({...p,location:[p.location[0]-B,p.location[1]]}),p.defaultPrevented()||(_i.current=!0),c(void 0)},[Ge,B]),a0=d.useCallback(()=>{_i.current=!1},[]),La=Le==null?void 0:Le.selectionBehavior,Yo=d.useCallback(p=>{if(La!=="block-spanning")return;let{isGroupHeader:H,path:z,groupRows:_}=hn(p);if(H)return[p,p];let N=z[z.length-1],V=p-N,W=p+_-N-1;return[V,W]},[hn,La]),Ni=d.useRef(),Bi=d.useCallback(p=>{var H,z,_;if(!ta(p,Ni.current)&&(Ni.current=p,!(((H=or==null?void 0:or.current)==null?void 0:H.button)!==void 0&&or.current.button>=1))){if(p.buttons!==0&&s!==void 0&&((z=or.current)==null?void 0:z.location[0])===0&&p.location[0]===0&&B===1&&ae==="multi"&&s.previousSelection&&!s.previousSelection.rows.hasIndex(or.current.location[1])&&Y.rows.hasIndex(or.current.location[1])){let N=Math.min(or.current.location[1],p.location[1]),V=Math.max(or.current.location[1],p.location[1])+1;Ie(lt.fromSingleSelection([N,V]),void 0,!1)}if(p.buttons!==0&&s!==void 0&&Y.current!==void 0&&!_i.current&&!io.current&&(ut==="rect"||ut==="multi-rect")){let[N,V]=Y.current.cell,[W,K]=p.location;if(K<0&&(K=At.current.y),s.fillHandle===!0&&((_=s.previousSelection)==null?void 0:_.current)!==void 0){let q=s.previousSelection.current.range;K=Math.min(K,dt?Pe-1:Pe);let U=Ac(q,W,K,mr);Hi(U)}else{if(dt&&V===Pe)return;if(dt&&K===Pe)if(p.kind==="out-of-bounds")K--;else return;W=Math.max(W,B);let q=Yo(V);K=q===void 0?K:(0,tn.default)(K,q[0],q[1]);let U=W-N,pe=K-V,he={x:U>=0?N:W,y:pe>=0?V:K,width:Math.abs(U)+1,height:Math.abs(pe)+1};fe({...Y.current,range:he},!0,!1,"drag")}}Lt==null||Lt({...p,location:[p.location[0]-B,p.location[1]]})}},[s,B,ae,Y,ut,Lt,Ie,dt,Pe,mr,Yo,fe]),s0=d.useCallback(()=>{var W,K;let p=Ni.current;if(p===void 0)return;let[H,z]=p.scrollEdge,[_,N]=p.location,V=At.current;H===-1?_=((K=(W=V.extras)==null?void 0:W.freezeRegion)==null?void 0:K.x)??V.x:H===1&&(_=V.x+V.width),z===-1?N=Math.max(0,V.y):z===1&&(N=Math.min(Pe-1,V.y+V.height)),_=(0,tn.default)(_,0,ot.length-1),N=(0,tn.default)(N,0,Pe-1),Bi({...p,location:[_,N]})},[ot.length,Bi,Pe]);$d(Qh,gt,s0);let ur=d.useCallback(p=>{if(Y.current===void 0)return;let[H,z]=p,[_,N]=Y.current.cell,V=Y.current.range,W=V.x,K=V.x+V.width,q=V.y,U=V.y+V.height,[pe,he]=Yo(N)??[0,Pe-1],le=he+1;if(z!==0)switch(z){case 2:U=le,q=N,Tt(0,U,"vertical");break;case-2:q=pe,U=N+1,Tt(0,q,"vertical");break;case 1:q<N?(q++,Tt(0,q,"vertical")):(U=Math.min(le,U+1),Tt(0,U,"vertical"));break;case-1:U>N+1?(U--,Tt(0,U,"vertical")):(q=Math.max(pe,q-1),Tt(0,q,"vertical"));break;default:Qo(z)}if(H!==0)if(H===2)K=ot.length,W=_,Tt(K-1-B,0,"horizontal");else if(H===-2)W=B,K=_+1,Tt(W-B,0,"horizontal");else{let xe=[];if(Ht!==void 0){let ze=Ht({x:W,y:q,width:K-W-B,height:U-q},$t.current.signal);typeof ze=="object"&&(xe=th(ze))}if(H===1){let ze=!1;if(W<_){if(xe.length>0){let Qe=(0,Cn.default)(W+1,_+1).find(Se=>!xe.includes(Se-B));Qe!==void 0&&(W=Qe,ze=!0)}else W++,ze=!0;ze&&Tt(W,0,"horizontal")}ze||(K=Math.min(ot.length,K+1),Tt(K-1-B,0,"horizontal"))}else if(H===-1){let ze=!1;if(K>_+1){if(xe.length>0){let Qe=(0,Cn.default)(K-1,_,-1).find(Se=>!xe.includes(Se-B));Qe!==void 0&&(K=Qe,ze=!0)}else K--,ze=!0;ze&&Tt(K-B,0,"horizontal")}ze||(W=Math.max(B,W-1),Tt(W-B,0,"horizontal"))}else Qo(H)}fe({cell:Y.current.cell,range:{x:W,y:q,width:K-W,height:U-q}},!0,!1,"keyboard-select")},[Ht,Yo,Y,ot.length,B,Pe,Tt,fe]),Wi=d.useRef(Jn);Wi.current=Jn;let Vr=d.useCallback((p,H,z,_)=>{let N=Yt-(z?0:1);p=(0,tn.default)(p,B,xt.length-1+B),H=(0,tn.default)(H,0,N);let V=br==null?void 0:br[0],W=br==null?void 0:br[1];if(p===V&&H===W)return!1;if(_&&Y.current!==void 0){let K=[...Y.current.rangeStack];(Y.current.range.width>1||Y.current.range.height>1)&&K.push(Y.current.range),ue({...Y,current:{cell:[p,H],range:{x:p,y:H,width:1,height:1},rangeStack:K}},!0)}else fe({cell:[p,H],range:{x:p,y:H,width:1,height:1}},!0,!1,"keyboard-nav");return u.current!==void 0&&u.current[0]===p&&u.current[1]===H&&(u.current=void 0),Wi.current&&Tt(p-B,H),!0},[Yt,B,xt.length,br,Y,Tt,ue,fe]),c0=d.useCallback((p,H)=>{(o==null?void 0:o.cell)!==void 0&&p!==void 0&&ho(p)&&(nr([{location:o.cell,value:p}]),window.requestAnimationFrame(()=>{var N;(N=Ft.current)==null||N.damage([{cell:o.cell}])})),Vt(!0),i(void 0);let[z,_]=H;if(Y.current!==void 0&&(z!==0||_!==0)){let N=Y.current.cell[1]===Yt-1&&p!==void 0;Vr((0,tn.default)(Y.current.cell[0]+z,0,ot.length-1),(0,tn.default)(Y.current.cell[1]+_,0,Yt-1),N,!1)}O==null||O(p,H)},[o==null?void 0:o.cell,Vt,Y,O,nr,Yt,Vr,ot.length]),u0=d.useMemo(()=>`gdg-overlay-${eh++}`,[]),gn=d.useCallback(p=>{var z,_,N,V,W;Vt();let H=[];for(let K=p.x;K<p.x+p.width;K++)for(let q=p.y;q<p.y+p.height;q++){let U=M([K-B,q]);if(!U.allowOverlay&&U.kind!==ve.Boolean)continue;let pe;if(U.kind===ve.Custom){let he=mt(U),le=(z=he==null?void 0:he.provideEditor)==null?void 0:z.call(he,{...U,location:[K-B,q]});(he==null?void 0:he.onDelete)===void 0?af(le)&&(pe=(_=le==null?void 0:le.deletedValue)==null?void 0:_.call(le,U)):pe=he.onDelete(U)}else(ho(U)&&U.allowOverlay||U.kind===ve.Boolean)&&(pe=(V=(N=mt(U))==null?void 0:N.onDelete)==null?void 0:V.call(N,U));pe!==void 0&&!Fn(pe)&&ho(pe)&&H.push({location:[K,q],value:pe})}nr(H),(W=Ft.current)==null||W.damage(H.map(K=>({cell:K.location})))},[Vt,M,mt,nr,B]),lo=o!==void 0,Fa=d.useCallback(p=>{var ze,Qe;let H=()=>{p.stopPropagation(),p.preventDefault()},z={didMatch:!1},{bounds:_}=p,N=Y.columns,V=Y.rows,W=yr;if(!lo&&Ye(W.clear,p,z))ue(So,!1),St==null||St();else if(!lo&&Ye(W.selectAll,p,z))ue({columns:lt.empty(),rows:lt.empty(),current:{cell:((ze=Y.current)==null?void 0:ze.cell)??[B,0],range:{x:B,y:0,width:C.length,height:Pe},rangeStack:[]}},!1);else if(Ye(W.search,p,z))(Qe=a==null?void 0:a.current)==null||Qe.focus({preventScroll:!0}),Ao(!0);else if(Ye(W.delete,p,z)){let Se=(at==null?void 0:at(Y))??!0;if(Se!==!1){let ke=Se===!0?Y:Se;if(ke.current!==void 0){gn(ke.current.range);for(let tt of ke.current.rangeStack)gn(tt)}for(let tt of ke.rows)gn({x:B,y:tt,width:C.length,height:1});for(let tt of ke.columns)gn({x:tt,y:0,width:1,height:Pe})}}if(z.didMatch)return H(),!0;if(Y.current===void 0)return!1;let[K,q]=Y.current.cell,[,U]=Y.current.cell,pe=!1,he=!1;if(Ye(W.scrollToSelectedCell,p,z)?Vo.current(K-B,q):Ze!=="none"&&Ye(W.selectColumn,p,z)?N.hasIndex(K)?Ce(N.remove(K),void 0,!0):Ze==="single"?Ce(lt.fromSingleSelection(K),void 0,!0):Ce(void 0,K,!0):ae!=="none"&&Ye(W.selectRow,p,z)?V.hasIndex(q)?Ie(V.remove(q),void 0,!0):ae==="single"?Ie(lt.fromSingleSelection(q),void 0,!0):Ie(void 0,q,!0):!lo&&_!==void 0&&Ye(W.activateCell,p,z)?q===Pe&&dt?window.setTimeout(()=>{let Se=Wo(K);On(Se??K)},0):(P==null||P([K-B,q]),Pn(_,!0)):Y.current.range.height>1&&Ye(W.downFill,p,z)?Aa():Y.current.range.width>1&&Ye(W.rightFill,p,z)?za():Ye(W.goToNextPage,p,z)?q+=Math.max(1,At.current.height-4):Ye(W.goToPreviousPage,p,z)?q-=Math.max(1,At.current.height-4):Ye(W.goToFirstCell,p,z)?(i(void 0),q=0,K=0):Ye(W.goToLastCell,p,z)?(i(void 0),q=2**53-1,K=2**53-1):Ye(W.selectToFirstCell,p,z)?(i(void 0),ur([-2,-2])):Ye(W.selectToLastCell,p,z)?(i(void 0),ur([2,2])):lo?(Ye(W.closeOverlay,p,z)&&i(void 0),Ye(W.acceptOverlayDown,p,z)&&(i(void 0),q++),Ye(W.acceptOverlayUp,p,z)&&(i(void 0),q--),Ye(W.acceptOverlayLeft,p,z)&&(i(void 0),K--),Ye(W.acceptOverlayRight,p,z)&&(i(void 0),K++)):(Ye(W.goDownCell,p,z)?q+=1:Ye(W.goUpCell,p,z)?--q:Ye(W.goRightCell,p,z)?K+=1:Ye(W.goLeftCell,p,z)?--K:Ye(W.goDownCellRetainSelection,p,z)?(q+=1,pe=!0):Ye(W.goUpCellRetainSelection,p,z)?(--q,pe=!0):Ye(W.goRightCellRetainSelection,p,z)?(K+=1,pe=!0):Ye(W.goLeftCellRetainSelection,p,z)?(--K,pe=!0):Ye(W.goToLastRow,p,z)?q=Pe-1:Ye(W.goToFirstRow,p,z)?q=-(2**53-1):Ye(W.goToLastColumn,p,z)?K=2**53-1:Ye(W.goToFirstColumn,p,z)?K=-(2**53-1):(ut==="rect"||ut==="multi-rect")&&(Ye(W.selectGrowDown,p,z)?ur([0,1]):Ye(W.selectGrowUp,p,z)?ur([0,-1]):Ye(W.selectGrowRight,p,z)?ur([1,0]):Ye(W.selectGrowLeft,p,z)?ur([-1,0]):Ye(W.selectToLastRow,p,z)?ur([0,2]):Ye(W.selectToFirstRow,p,z)?ur([0,-2]):Ye(W.selectToLastColumn,p,z)?ur([2,0]):Ye(W.selectToFirstColumn,p,z)&&ur([-2,0])),he=z.didMatch),cr!==void 0&&cr!=="normal"&&q!==U){let Se=cr==="skip-up"||cr==="skip"||cr==="block",ke=cr==="skip-down"||cr==="skip"||cr==="block",tt=q<U;if(tt&&Se){for(;q>=0&&hn(q).isGroupHeader;)q--;q<0&&(q=U)}else if(!tt&&ke){for(;q<Pe&&hn(q).isGroupHeader;)q++;q>=Pe&&(q=U)}}let le=Vr(K,q,!1,pe),xe=z.didMatch;return xe&&(le||!he||rn)&&H(),xe},[cr,lo,Y,yr,Ze,ae,ut,B,hn,Pe,Vr,ue,St,C.length,at,rn,gn,Ce,Ie,dt,Wo,On,P,Pn,Aa,za,ur]),ao=d.useCallback(p=>{let H=!1;if(re!==void 0&&re({...p,...p.location&&{location:[p.location[0]-B,p.location[1]]},cancel:()=>{H=!0}}),H||Fa(p)||Y.current===void 0)return;let[z,_]=Y.current.cell,N=At.current;if(Ae&&!p.metaKey&&!p.ctrlKey&&Y.current!==void 0&&p.key.length===1&&/[\p{L}\p{M}\p{N}\p{S}\p{P}]/u.test(p.key)&&p.bounds!==void 0&&fo(M([z-B,Math.max(0,Math.min(_,Pe-1))]))){if((!dt||_!==Pe)&&(N.y>_||_>N.y+N.height||N.x>z||z>N.x+N.width))return;P==null||P([z-B,_]),Pn(p.bounds,!0,p.key),p.stopPropagation(),p.preventDefault()}},[Ae,re,Fa,Y,M,B,Pe,dt,P,Pn]),d0=d.useCallback((p,H)=>{let z=p.location[0]-B;if(p.kind==="header"&&(Z==null||Z(z,{...p,preventDefault:H})),p.kind==="group-header"){if(z<0)return;X==null||X(z,{...p,preventDefault:H})}if(p.kind==="cell"){let[_,N]=p.location;G==null||G([z,N],{...p,preventDefault:H}),Ks(Y,p.location)||Vr(_,N,!1,!1)}},[Y,G,X,Z,B,Vr]),$i=d.useCallback(async p=>{var W,K,q;if(!yr.paste)return;function H(U,pe,he,le){var ze,Qe;let xe=typeof he=="object"?(he==null?void 0:he.join(`
`))??"":(he==null?void 0:he.toString())??"";if(!Fn(U)&&fo(U)&&U.readonly!==!0){let Se=L==null?void 0:L(xe,U);if(Se!==void 0&&ho(Se))return{location:pe,value:Se};let ke=mt(U);if(ke===void 0)return;if(ke.kind===ve.Custom){Qt(U.kind===ve.Custom);let tt=(ze=ke.onPaste)==null?void 0:ze.call(ke,xe,U.data);return tt===void 0?void 0:{location:pe,value:{...U,data:tt}}}else{let tt=(Qe=ke.onPaste)==null?void 0:Qe.call(ke,xe,U,{formatted:le,formattedString:typeof le=="string"?le:le==null?void 0:le.join(`
`),rawValue:he});return tt===void 0?void 0:(Qt(tt.kind===U.kind),{location:pe,value:tt})}}}let z=Y.columns,_=Y.rows,N=((W=gt.current)==null?void 0:W.contains(document.activeElement))===!0||((K=l.current)==null?void 0:K.contains(document.activeElement))===!0,V;if(Y.current===void 0?z.length===1?V=[z.first()??0,0]:_.length===1&&(V=[B,_.first()??0]):V=[Y.current.range.x,Y.current.range.y],N&&V!==void 0){let U,pe,he="text/plain",le="text/html";if(navigator.clipboard.read!==void 0){let Se=await navigator.clipboard.read();for(let ke of Se){if(ke.types.includes(le)){let tt=await(await ke.getType(le)).text(),Bt=aa(tt);if(Bt!==void 0){U=Bt;break}}ke.types.includes(he)&&(pe=await(await ke.getType(he)).text())}}else if(navigator.clipboard.readText!==void 0)pe=await navigator.clipboard.readText();else if(p!==void 0&&(p==null?void 0:p.clipboardData)!==null){if(p.clipboardData.types.includes(le)){let Se=p.clipboardData.getData(le);U=aa(Se)}U===void 0&&p.clipboardData.types.includes(he)&&(pe=p.clipboardData.getData(he))}else return;let[xe,ze]=V,Qe=[];do{if(Ue===void 0){let Se=Jt(V),ke=pe??(U==null?void 0:U.map(Bt=>Bt.map(jt=>jt.rawValue).join("	")).join("	"))??"",tt=H(Se,V,ke,void 0);tt!==void 0&&Qe.push(tt);break}if(U===void 0){if(pe===void 0)return;U=Ld(pe)}if(Ue===!1||typeof Ue=="function"&&(Ue==null?void 0:Ue([V[0]-B,V[1]],U.map(Se=>Se.map(ke=>{var tt;return((tt=ke.rawValue)==null?void 0:tt.toString())??""}))))!==!0)return;for(let[Se,ke]of U.entries()){if(Se+ze>=Pe)break;for(let[tt,Bt]of ke.entries()){let jt=[tt+xe,Se+ze],[dr,xr]=jt;if(dr>=ot.length||xr>=Yt)continue;let hr=Jt(jt),Dr=H(hr,jt,Bt.rawValue,Bt.formatted);Dr!==void 0&&Qe.push(Dr)}}}while(!1);nr(Qe),(q=Ft.current)==null||q.damage(Qe.map(Se=>({cell:Se.location})))}},[L,mt,Jt,Y,yr.paste,gt,ot.length,nr,Yt,Ue,B,Pe]);_t("paste",$i,h,!1,!0);let so=d.useCallback(async(p,H)=>{var W,K;if(!yr.copy)return;let z=H===!0||((W=gt.current)==null?void 0:W.contains(document.activeElement))===!0||((K=l.current)==null?void 0:K.contains(document.activeElement))===!0,_=Y.columns,N=Y.rows,V=(q,U)=>{if(!we)ca(q,U,p);else{let pe=U.map(he=>({kind:ve.Text,data:C[he].title,displayData:C[he].title,allowOverlay:!1}));ca([pe,...q],U,p)}};if(z&&Ht!==void 0){if(Y.current!==void 0){let q=Ht(Y.current.range,$t.current.signal);typeof q!="object"&&(q=await q()),V(q,(0,Cn.default)(Y.current.range.x-B,Y.current.range.x+Y.current.range.width-B))}else if(N!==void 0&&N.length>0){let q=[...N].map(U=>{let pe=Ht({x:B,y:U,width:C.length,height:1},$t.current.signal);return typeof pe=="object"?pe[0]:pe().then(he=>he[0])});if(q.some(U=>U instanceof Promise)){let U=await Promise.all(q);V(U,(0,Cn.default)(C.length))}else V(q,(0,Cn.default)(C.length))}else if(_.length>0){let q=[],U=[];for(let pe of _){let he=Ht({x:pe,y:0,width:1,height:Pe},$t.current.signal);typeof he!="object"&&(he=await he()),q.push(he),U.push(pe-B)}if(q.length===1)V(q[0],U);else{let pe=q.reduce((he,le)=>he.map((xe,ze)=>[...xe,...le[ze]]));V(pe,U)}}}},[C,Ht,Y,yr.copy,B,gt,Pe,we]);_t("copy",so,h,!1,!1);let h0=d.useCallback(async p=>{var H,z;if(yr.cut&&(((H=gt.current)==null?void 0:H.contains(document.activeElement))===!0||((z=l.current)==null?void 0:z.contains(document.activeElement))===!0)&&(await so(p),Y.current!==void 0)){let _={current:{cell:Y.current.cell,range:Y.current.range,rangeStack:[]},rows:lt.empty(),columns:lt.empty()},N=at==null?void 0:at(_);if(N===!1||(_=N===!0?_:N,_.current===void 0))return;gn(_.current.range)}},[gn,Y,yr.cut,so,gt,at]);_t("cut",h0,h,!1,!1);let f0=d.useCallback((p,H)=>{if(Oe!==void 0){B!==0&&(p=p.map(N=>[N[0]-B,N[1]])),Oe(p,H);return}if(p.length===0||H===-1)return;let[z,_]=p[H];u.current!==void 0&&u.current[0]===z&&u.current[1]===_||(u.current=[z,_],Vr(z,_,!1,!1))},[Oe,B,Vr]),[Ko,Xo]=((Ya=vt==null?void 0:vt.current)==null?void 0:Ya.cell)??[],Vo=d.useRef(Tt);Vo.current=Tt,d.useLayoutEffect(()=>{var p,H,z,_;Wi.current&&!Lo.current&&Ko!==void 0&&Xo!==void 0&&(Ko!==((H=(p=ge.current)==null?void 0:p.current)==null?void 0:H.cell[0])||Xo!==((_=(z=ge.current)==null?void 0:z.current)==null?void 0:_.cell[1]))&&Vo.current(Ko,Xo),Lo.current=!1},[Ko,Xo]);let ja=Y.current!==void 0&&(Y.current.cell[0]>=ot.length||Y.current.cell[1]>=Yt);d.useLayoutEffect(()=>{ja&&ue(So,!1)},[ja,ue]);let g0=d.useMemo(()=>dt===!0&&(Ee==null?void 0:Ee.tint)===!0?lt.fromSingleSelection(Yt-1):lt.empty(),[Yt,dt,Ee==null?void 0:Ee.tint]),p0=d.useCallback(p=>typeof Ve=="boolean"?Ve:(Ve==null?void 0:Ve(p-B))??!0,[B,Ve]),m0=d.useMemo(()=>{if(Li===void 0||l.current===null)return null;let{bounds:p,group:H}=Li,z=l.current.getBoundingClientRect();return d.createElement(Md,{bounds:p,group:H,canvasBounds:z,onClose:()=>Fi(void 0),onFinish:_=>{Fi(void 0),ce==null||ce(H,_)}})},[ce,Li]),v0=Math.min(ot.length,be+(rr?1:0));d.useImperativeHandle(t,()=>({appendRow:(p,H)=>On(p+B,H),updateCells:p=>{var H;return B!==0&&(p=p.map(z=>({cell:[z.cell[0]+B,z.cell[1]]}))),(H=Ft.current)==null?void 0:H.damage(p)},getBounds:(p,H)=>{var z;if(!((l==null?void 0:l.current)===null||(gt==null?void 0:gt.current)===null)){if(p===void 0&&H===void 0){let _=l.current.getBoundingClientRect(),N=_.width/gt.current.clientWidth;return{x:_.x-gt.current.scrollLeft*N,y:_.y-gt.current.scrollTop*N,width:gt.current.scrollWidth*N,height:gt.current.scrollHeight*N}}return(z=Ft.current)==null?void 0:z.getBounds((p??0)+B,H)}},focus:()=>{var p;return(p=Ft.current)==null?void 0:p.focus()},emit:async p=>{switch(p){case"delete":ao({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!1,key:"Delete",keyCode:46,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-right":ao({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"r",keyCode:82,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-down":ao({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"d",keyCode:68,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"copy":await so(void 0,!0);break;case"paste":await $i();break}},scrollTo:Tt,remeasureColumns:p=>{for(let H of p)$o(H+B)},getMouseArgsForPosition:(p,H,z)=>{if((Ft==null?void 0:Ft.current)===null)return;let _=Ft.current.getMouseArgsForPosition(p,H,z);if(_!==void 0)return{..._,location:[_.location[0]-B,_.location[1]]}}}),[On,$o,gt,so,ao,$i,B,Tt]);let[_a,Na]=br??[],w0=d.useCallback(p=>{let[H,z]=p;if(z===-1){Ze!=="none"&&(Ce(lt.fromSingleSelection(H),void 0,!1),Vt());return}_a===H&&Na===z||(fe({cell:p,range:{x:H,y:z,width:1,height:1}},!0,!1,"keyboard-nav"),Tt(H,z))},[Ze,Vt,Tt,_a,Na,fe,Ce]),[y0,b0]=d.useState(!1),Ba=d.useRef((0,Qd.default)(p=>{b0(p)},5)),x0=d.useCallback(()=>{Ba.current(!0),Y.current===void 0&&Y.columns.length===0&&Y.rows.length===0&&s===void 0&&fe({cell:[B,Fo],range:{x:B,y:Fo,width:1,height:1}},!0,!1,"keyboard-select")},[Fo,Y,s,B,fe]),C0=d.useCallback(()=>{Ba.current(!1)},[]),[S0,k0]=d.useMemo(()=>{let p,H=(bt==null?void 0:bt.scrollbarWidthOverride)??ii(),z=Pe+(dt?1:0);if(typeof wr=="number")p=zt+z*wr;else{let N=0,V=Math.min(z,10);for(let W=0;W<V;W++)N+=wr(W);N=Math.floor(N/V),p=zt+z*N}p+=H;let _=ot.reduce((N,V)=>V.width+N,0)+H;return[`${Math.min(1e5,_)}px`,`${Math.min(1e5,p)}px`]},[ot,bt==null?void 0:bt.scrollbarWidthOverride,wr,Pe,dt,zt]),M0=d.useMemo(()=>rf(Ne),[Ne]);return d.createElement(nf.Provider,{value:Ne},d.createElement(Nd,{style:M0,className:j,inWidth:v??S0,inHeight:k??k0},d.createElement(Cd,{fillHandle:Mt,drawFocusRing:Qn,experimental:bt,fixedShadowX:Pt,fixedShadowY:Dt,getRowThemeOverride:tr,headerIcons:Mr,imageWindowLoader:ko,initialSize:Nr,isDraggable:Rr,onDragLeave:Er,onRowMoved:vr,overscrollX:to,overscrollY:Oi,preventDiagonalScrolling:kn,rightElement:Mn,rightElementProps:Rn,smoothScrollX:nn,smoothScrollY:Br,className:j,enableGroups:Xt,onCanvasFocused:x0,onCanvasBlur:C0,canvasRef:l,onContextMenu:d0,theme:Ne,cellXOffset:Uh,cellYOffset:Fo,accessibilityHeight:un.height,onDragEnd:a0,columns:ot,nonGrowWidth:it,drawHeader:_e,onColumnProposeMove:o0,drawCell:Re,disabledRows:g0,freezeColumns:v0,lockColumns:B,firstColAccessible:B===0,getCellContent:Jt,minColumnWidth:Pr,maxColumnWidth:cn,searchInputRef:a,showSearch:In,onSearchClose:Di,highlightRegions:qh,getCellsForSelection:Ht,getGroupDetails:zi,headerHeight:eo,isFocused:y0,groupHeaderHeight:Xt?Ho:0,freezeTrailingRows:wt+(dt&&(Ee==null?void 0:Ee.sticky)===!0?1:0),hasAppendRow:dt,onColumnResize:ie,onColumnResizeEnd:me,onColumnResizeStart:Fe,onCellFocused:w0,onColumnMoved:i0,onDragStart:l0,onHeaderMenuClick:t0,onHeaderIndicatorClick:r0,onItemHovered:Bi,isFilling:(s==null?void 0:s.fillHandle)===!0,onMouseMove:e0,onKeyDown:ao,onKeyUp:se,onMouseDown:Jh,onMouseUp:Zh,onDragOverCell:yt,onDrop:kt,onSearchResultsChanged:f0,onVisibleRegionChanged:n0,clientSize:Rt,rowHeight:wr,searchResults:te,searchValue:Q,onSearchValueChange:$,rows:Yt,scrollRef:gt,selection:Y,translateX:un.tx,translateY:un.ty,verticalBorder:p0,gridRef:Ft,getCellRenderer:mt,resizeIndicator:To}),m0,o!==void 0&&d.createElement(d.Suspense,{fallback:null},d.createElement(Zd,{...o,validateCell:ne,bloom:A,id:u0,getCellRenderer:mt,className:(bt==null?void 0:bt.isSubGrid)===!0?"click-outside-ignore":void 0,provideEditor:lr,imageEditorOverride:g,onFinishEditing:c0,markdownDivCreateNode:f,isOutsideClick:Ii,customEventTarget:bt==null?void 0:bt.eventTarget}))))});function ma(e){let{cell:t,posX:r,posY:n,bounds:o,theme:i}=e,{width:a,height:l,x:s,y:c}=o,u=t.maxSize??i.checkboxMaxSize,h=Math.floor(o.y+l/2),g=ll(u,l,i.cellVerticalPadding),m=il(t.contentAlign??"center",s,a,i.cellHorizontalPadding,g),f=ol(m,h,g),v=al(s+r,c+n,f);return Ji(t)&&v}const nh={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??"false"},kind:ve.Boolean,needsHover:!0,useLabel:!1,needsHoverPosition:!0,measure:()=>50,draw:e=>oh(e,e.cell.data,Ji(e.cell),e.cell.maxSize??e.theme.checkboxMaxSize,e.cell.hoverEffectIntensity??.35),onDelete:e=>({...e,data:!1}),onSelect:e=>{ma(e)&&e.preventDefault()},onClick:e=>{if(ma(e))return{...e.cell,data:ua(e.cell.data)}},onPaste:(e,t)=>{let r=null;return e.toLowerCase()==="true"?r=!0:e.toLowerCase()==="false"?r=!1:e.toLowerCase()==="indeterminate"&&(r=void 0),r===t.data?void 0:{...t,data:r}}};function oh(e,t,r,n,o){if(!r&&t===null)return;let{ctx:i,hoverAmount:a,theme:l,rect:s,highlighted:c,hoverX:u,hoverY:h,cell:{contentAlign:g}}=e,{x:m,y:f,width:v,height:k}=s,C=!1;if(o>0){let y=r?1-o+o*a:.4;if(t===null&&(y*=a),y===0)return;y<1&&(C=!0,i.globalAlpha=y)}vi(i,l,t,m,f,v,k,c,u,h,n,g),C&&(i.globalAlpha=1)}const ih=Zt("div")({name:"BubblesOverlayEditorStyle",class:"gdg-b1ygi5by",propsAsIs:!1});var lh=e=>{let{bubbles:t}=e;return d.createElement(ih,null,t.map((r,n)=>d.createElement("div",{key:n,className:"boe-bubble"},r)),d.createElement("textarea",{className:"gdg-input",autoFocus:!0}))};const ah={getAccessibilityString:e=>sl(e.data),kind:ve.Bubble,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,r)=>{let n=t.data.reduce((o,i)=>e.measureText(i).width+o+r.bubblePadding*2+r.bubbleMargin,0);return t.data.length===0?r.cellHorizontalPadding*2:n+2*r.cellHorizontalPadding-r.bubbleMargin},draw:e=>sh(e,e.cell.data),provideEditor:()=>e=>{let{value:t}=e;return d.createElement(lh,{bubbles:t.data})},onPaste:()=>{}};function sh(e,t){let{rect:r,theme:n,ctx:o,highlighted:i}=e,{x:a,y:l,width:s,height:c}=r,u=a+n.cellHorizontalPadding,h=[];for(let g of t){if(u>a+s)break;let m=bn(g,o,n.baseFontFull).width;h.push({x:u,width:m}),u+=m+n.bubblePadding*2+n.bubbleMargin}o.beginPath();for(let g of h)gr(o,g.x,l+(c-n.bubbleHeight)/2,g.width+n.bubblePadding*2,n.bubbleHeight,n.roundingRadius??n.bubbleHeight/2);o.fillStyle=i?n.bgBubbleSelected:n.bgBubble,o.fill();for(let[g,m]of h.entries())o.beginPath(),o.fillStyle=n.textBubble,o.fillText(t[g],m.x+n.bubblePadding,l+c/2+Ar(o,n))}var ch=Zt("div")({name:"DrilldownOverlayEditorStyle",class:"gdg-d4zsq0x",propsAsIs:!1}),uh=e=>{let{drilldowns:t}=e;return d.createElement(ch,null,t.map((r,n)=>d.createElement("div",{key:n,className:"doe-bubble"},r.img!==void 0&&d.createElement("img",{src:r.img}),d.createElement("div",null,r.text))))};const dh={getAccessibilityString:e=>sl(e.data.map(t=>t.text)),kind:ve.Drilldown,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,r)=>t.data.reduce((n,o)=>e.measureText(o.text).width+n+r.bubblePadding*2+r.bubbleMargin+(o.img===void 0?0:18),0)+2*r.cellHorizontalPadding-4,draw:e=>fh(e,e.cell.data),provideEditor:()=>e=>{let{value:t}=e;return d.createElement(uh,{drilldowns:t.data})},onPaste:()=>{}};var ki={};function hh(e,t,r,n){let o=Math.ceil(window.devicePixelRatio),i=r-10,a=r*o,l=n+5,s=n*3,c=(s+10)*o,u=`${e},${t},${o},${r}`;if(ki[u]!==void 0)return{el:ki[u],height:a,width:c,middleWidth:4*o,sideWidth:l*o,padding:5*o,dpr:o};let h=document.createElement("canvas"),g=h.getContext("2d");return g===null?null:(h.width=c,h.height=a,g.scale(o,o),ki[u]=h,g.beginPath(),gr(g,5,5,s,i,n),g.shadowColor="rgba(24, 25, 34, 0.4)",g.shadowBlur=1,g.fillStyle=e,g.fill(),g.shadowColor="rgba(24, 25, 34, 0.3)",g.shadowOffsetY=1,g.shadowBlur=5,g.fillStyle=e,g.fill(),g.shadowOffsetY=0,g.shadowBlur=0,g.shadowBlur=0,g.beginPath(),gr(g,5.5,5.5,s,i,n),g.strokeStyle=t,g.lineWidth=1,g.stroke(),{el:h,height:a,width:c,sideWidth:l*o,middleWidth:n*o,padding:5*o,dpr:o})}function fh(e,t){let{rect:r,theme:n,ctx:o,imageLoader:i,col:a,row:l}=e,{x:s,width:c}=r,u=n.baseFontFull,h=yl(o,u),g=Math.min(r.height,Math.max(16,Math.ceil(h*n.lineHeight)*2)),m=Math.floor(r.y+(r.height-g)/2),f=g-10,v=n.bubblePadding,k=n.bubbleMargin,C=s+n.cellHorizontalPadding,y=n.roundingRadius??6,M=hh(n.bgCell,n.drilldownBorder,g,y),T=[];for(let P of t){if(C>s+c)break;let E=bn(P.text,o,u).width,O=0;P.img!==void 0&&i.loadOrGetImage(P.img,a,l)!==void 0&&(O=f-8+4);let L=E+O+v*2;T.push({x:C,width:L}),C+=L+k}if(M!==null){let{el:P,height:E,middleWidth:O,sideWidth:L,width:S,dpr:R,padding:A}=M,x=L/R,w=A/R;for(let I of T){let D=Math.floor(I.x),b=Math.floor(I.width),G=b-(x-w)*2;o.imageSmoothingEnabled=!1,o.drawImage(P,0,0,L,E,D-w,m,x,g),G>0&&o.drawImage(P,L,0,O,E,D+(x-w),m,G,g),o.drawImage(P,S-L,0,L,E,D+b-(x-w),m,x,g),o.imageSmoothingEnabled=!0}}o.beginPath();for(let[P,E]of T.entries()){let O=t[P],L=E.x+v;if(O.img!==void 0){let S=i.loadOrGetImage(O.img,a,l);if(S!==void 0){let R=f-8,A=0,x=0,w=S.width,I=S.height;w>I?(A+=(w-I)/2,w=I):I>w&&(x+=(I-w)/2,I=w),o.beginPath(),gr(o,L,m+g/2-R/2,R,R,n.roundingRadius??3),o.save(),o.clip(),o.drawImage(S,A,x,w,I,L,m+g/2-R/2,R,R),o.restore(),L+=R+4}}o.beginPath(),o.fillStyle=n.textBubble,o.fillText(O.text,L,m+g/2+Ar(o,n))}}const gh={getAccessibilityString:e=>e.data.join(", "),kind:ve.Image,needsHover:!1,useLabel:!1,needsHoverPosition:!1,draw:e=>ph(e,e.cell.displayData??e.cell.data,e.cell.rounding??e.theme.roundingRadius??4,e.cell.contentAlign),measure:(e,t)=>t.data.length*50,onDelete:e=>({...e,data:[]}),provideEditor:()=>e=>{let{value:t,onFinishedEditing:r,imageEditorOverride:n}=e,o=n??Hs;return d.createElement(o,{urls:t.data,canWrite:t.readonly!==!0,onCancel:r,onChange:i=>{r({...t,data:[i]})}})},onPaste:(e,t)=>{e=e.trim();let r=e.split(",").map(n=>{try{return new URL(n),n}catch{return}}).filter(n=>n!==void 0);if(!(r.length===t.data.length&&r.every((n,o)=>n===t.data[o])))return{...t,data:r}}};var Mi=4;function ph(e,t,r,n){let{rect:o,col:i,row:a,theme:l,ctx:s,imageLoader:c}=e,{x:u,y:h,height:g,width:m}=o,f=g-l.cellVerticalPadding*2,v=[],k=0;for(let y=0;y<t.length;y++){let M=t[y];if(M.length===0)continue;let T=c.loadOrGetImage(M,i,a);if(T!==void 0){v[y]=T;let P=T.width*(f/T.height);k+=P+Mi}}if(k===0)return;k-=Mi;let C=u+l.cellHorizontalPadding;n==="right"?C=Math.floor(u+m-l.cellHorizontalPadding-k):n==="center"&&(C=Math.floor(u+m/2-k/2));for(let y of v){if(y===void 0)continue;let M=y.width*(f/y.height);r>0&&(s.beginPath(),gr(s,C,h+l.cellVerticalPadding,M,f,r),s.save(),s.clip()),s.drawImage(y,C,h+l.cellVerticalPadding,M,f),r>0&&s.restore(),C+=M+Mi}}function mh(e,t){let r=e*49632+t*325176;return r^=r<<13,r^=r>>17,r^=r<<5,r/4294967295*2}const vh={getAccessibilityString:()=>"",kind:ve.Loading,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:()=>120,draw:e=>{let{cell:t,col:r,row:n,ctx:o,rect:i,theme:a}=e;if(t.skeletonWidth===void 0||t.skeletonWidth===0)return;let l=t.skeletonWidth;t.skeletonWidthVariability!==void 0&&t.skeletonWidthVariability>0&&(l+=Math.round(mh(r,n)*t.skeletonWidthVariability));let s=a.cellHorizontalPadding;l+s*2>=i.width&&(l=i.width-s*2-1);let c=t.skeletonHeight??Math.min(18,i.height-2*a.cellVerticalPadding);gr(o,i.x+s,i.y+(i.height-c)/2,l,c,a.roundingRadius??3),o.fillStyle=mn(a.textDark,.1),o.fill()},onPaste:()=>{}};var wh=()=>e=>e.targetWidth;const va=Zt("div")({name:"MarkdownOverlayEditorStyle",class:"gdg-m1pnx84e",propsAsIs:!1,vars:{"m1pnx84e-0":[wh(),"px"]}}),yh=e=>{let{value:t,onChange:r,forceEditMode:n,createNode:o,targetRect:i,onFinish:a,validatedSelection:l}=e,s=t.data,c=t.readonly===!0,[u,h]=d.useState(s===""||n),g=d.useCallback(()=>{h(f=>!f)},[]),m=s?"gdg-ml-6":"";return u?d.createElement(va,{targetWidth:i.width-20},d.createElement(po,{autoFocus:!0,highlight:!1,validatedSelection:l,value:s,onKeyDown:f=>{f.key==="Enter"&&f.stopPropagation()},onChange:r}),d.createElement("div",{className:`gdg-edit-icon gdg-checkmark-hover ${m}`,onClick:()=>a(t)},d.createElement(Es,null))):d.createElement(va,{targetWidth:i.width},d.createElement(As,{contents:s,createNode:o}),!c&&d.createElement(d.Fragment,null,d.createElement("div",{className:"spacer"}),d.createElement("div",{className:`gdg-edit-icon gdg-edit-hover ${m}`,onClick:g},d.createElement(ni,null))),d.createElement("textarea",{className:"gdg-md-edit-textarea gdg-input",autoFocus:!0}))},bh={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:ve.Markdown,needsHover:!1,needsHoverPosition:!1,drawPrep:Wn,measure:(e,t,r)=>{let n=t.data.split(`
`)[0];return e.measureText(n).width+2*r.cellHorizontalPadding},draw:e=>Sr(e,e.cell.data,e.cell.contentAlign),onDelete:e=>({...e,data:""}),provideEditor:()=>e=>{let{onChange:t,value:r,target:n,onFinishedEditing:o,markdownDivCreateNode:i,forceEditMode:a,validatedSelection:l}=e;return d.createElement(yh,{onFinish:o,targetRect:n,value:r,validatedSelection:l,onChange:s=>t({...r,data:s.target.value}),forceEditMode:a,createNode:i})},onPaste:(e,t)=>e===t.data?void 0:{...t,data:e}},xh={getAccessibilityString:e=>e.row.toString(),kind:Gr.Marker,needsHover:!0,needsHoverPosition:!1,drawPrep:Ch,measure:()=>44,draw:e=>kh(e,e.cell.row,e.cell.checked,e.cell.markerKind,e.cell.drawHandle,e.cell.checkboxStyle),onClick:e=>{let{bounds:t,cell:r,posX:n,posY:o}=e,{width:i,height:a}=t,l=r.drawHandle?7+(i-7)/2:i/2,s=a/2;if(Math.abs(n-l)<=10&&Math.abs(o-s)<=10)return{...r,checked:!r.checked}},onPaste:()=>{}};function Ch(e,t){let{ctx:r,theme:n}=e,o=n.markerFontFull,i=t??{};return(i==null?void 0:i.font)!==o&&(r.font=o,i.font=o),i.deprep=Sh,r.textAlign="center",i}function Sh(e){let{ctx:t}=e;t.textAlign="start"}function kh(e,t,r,n,o,i){let{ctx:a,rect:l,hoverAmount:s,theme:c}=e,{x:u,y:h,width:g,height:m}=l,f=r?1:n==="checkbox-visible"?.6+.4*s:s;if(n!=="number"&&f>0){a.globalAlpha=f;let v=7*(r?s:1);if(vi(a,c,r,o?u+v:u,h,o?g-v:g,m,!0,void 0,void 0,c.checkboxMaxSize,"center",i),o){a.globalAlpha=s,a.beginPath();for(let k of[3,6])for(let C of[-5,-1,3])a.rect(u+k,h+m/2+C,2,2);a.fillStyle=c.textLight,a.fill(),a.beginPath()}a.globalAlpha=1}if(n==="number"||n==="both"&&!r){let v=t.toString(),k=c.markerFontFull,C=u+g/2;n==="both"&&s!==0&&(a.globalAlpha=1-s),a.fillStyle=c.textLight,a.font=k,a.fillText(v,C,h+m/2+Ar(a,k)),s!==0&&(a.globalAlpha=1)}}const Mh={getAccessibilityString:()=>"",kind:Gr.NewRow,needsHover:!0,needsHoverPosition:!1,measure:()=>200,draw:e=>Rh(e,e.cell.hint,e.cell.icon),onPaste:()=>{}};function Rh(e,t,r){let{ctx:n,rect:o,hoverAmount:i,theme:a,spriteManager:l}=e,{x:s,y:c,width:u,height:h}=o;n.beginPath(),n.globalAlpha=i,n.rect(s+1,c+1,u,h-2),n.fillStyle=a.bgHeaderHovered,n.fill(),n.globalAlpha=1,n.beginPath();let g=t!=="",m=0;if(r!==void 0){let f=h-8,v=s+8/2,k=c+8/2;l.drawSprite(r,"normal",n,v,k,f,a,g?1:i),m=f}else{m=24;let f=g?12:i*12,v=g?0:(1-i)*12*.5,k=a.cellHorizontalPadding+4;f>0&&(n.moveTo(s+k+v,c+h/2),n.lineTo(s+k+v+f,c+h/2),n.moveTo(s+k+v+f*.5,c+h/2-f*.5),n.lineTo(s+k+v+f*.5,c+h/2+f*.5),n.lineWidth=2,n.strokeStyle=a.bgIconHeader,n.lineCap="round",n.stroke())}n.fillStyle=a.textMedium,n.fillText(t,m+s+a.cellHorizontalPadding+.5,c+h/2+Ar(n,a)),n.beginPath()}function wa(e,t,r,n,o,i,a){e.textBaseline="alphabetic";let l=Eh(e,o,n,t,(r==null?void 0:r.fullSize)??!1);e.beginPath(),gr(e,l.x,l.y,l.width,l.height,t.roundingRadius??4),e.globalAlpha=i,e.fillStyle=(r==null?void 0:r.bgColor)??mn(t.textDark,.1),e.fill(),e.globalAlpha=1,e.fillStyle=t.textDark,e.textBaseline="middle",a==null||a("text")}function Eh(e,t,r,n,o){let i=n.cellHorizontalPadding,a=n.cellVerticalPadding;if(o)return{x:t.x+i/2,y:t.y+a/2+1,width:t.width-i,height:t.height-a-1};let l=bn(r,e,n.baseFontFull,"alphabetic"),s=t.height-a,c=Math.min(s,l.actualBoundingBoxAscent*2.5);return{x:t.x+i/2,y:t.y+(t.height-c)/2+1,width:l.width+i*3,height:c-1}}var Ih=d.lazy(async()=>await Ka(()=>import("./number-overlay-editor-CbWBjwI1.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([7,1,5,3,4]),import.meta.url));const Th={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:ve.Number,needsHover:e=>e.hoverEffect===!0,needsHoverPosition:!1,useLabel:!0,drawPrep:Wn,draw:e=>{let{hoverAmount:t,cell:r,ctx:n,theme:o,rect:i,overrideCursor:a}=e,{hoverEffect:l,displayData:s,hoverEffectTheme:c}=r;l===!0&&t>0&&wa(n,o,c,s,i,t,a),Sr(e,e.cell.displayData,e.cell.contentAlign)},measure:(e,t,r)=>e.measureText(t.displayData).width+r.cellHorizontalPadding*2,onDelete:e=>({...e,data:void 0}),provideEditor:()=>e=>{let{isHighlighted:t,onChange:r,value:n,validatedSelection:o}=e;return d.createElement(d.Suspense,{fallback:null},d.createElement(Ih,{highlight:t,disabled:n.readonly===!0,value:n.data,fixedDecimals:n.fixedDecimals,allowNegative:n.allowNegative,thousandSeparator:n.thousandSeparator,decimalSeparator:n.decimalSeparator,validatedSelection:o,onChange:i=>r({...n,data:Number.isNaN(i.floatValue??0)?0:i.floatValue})}))},onPaste:(e,t,r)=>{let n=typeof r.rawValue=="number"?r.rawValue:Number.parseFloat(typeof r.rawValue=="string"?r.rawValue:e);if(!(Number.isNaN(n)||t.data===n))return{...t,data:n,displayData:r.formattedString??t.displayData}}},Ph={getAccessibilityString:()=>"",measure:()=>108,kind:ve.Protected,needsHover:!1,needsHoverPosition:!1,draw:Oh,onPaste:()=>{}};function Oh(e){let{ctx:t,theme:r,rect:n}=e,{x:o,y:i,height:a}=n;t.beginPath();let l=2.5,s=o+r.cellHorizontalPadding+l,c=i+a/2,u=Math.cos(nl(30))*l,h=Math.sin(nl(30))*l;for(let g=0;g<12;g++)t.moveTo(s,c-l),t.lineTo(s,c+l),t.moveTo(s+u,c-h),t.lineTo(s-u,c+h),t.moveTo(s-u,c-h),t.lineTo(s+u,c+h),s+=8;t.lineWidth=1.1,t.lineCap="square",t.strokeStyle=r.textLight,t.stroke()}const Dh={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:ve.RowID,needsHover:!1,needsHoverPosition:!1,drawPrep:(e,t)=>Wn(e,t,e.theme.textLight),draw:e=>Sr(e,e.cell.data,e.cell.contentAlign),measure:(e,t,r)=>e.measureText(t.data).width+r.cellHorizontalPadding*2,provideEditor:()=>e=>{let{isHighlighted:t,onChange:r,value:n,validatedSelection:o}=e;return d.createElement(po,{highlight:t,autoFocus:n.readonly!==!0,disabled:n.readonly!==!1,value:n.data,validatedSelection:o,onChange:i=>r({...n,data:i.target.value})})},onPaste:()=>{}},Hh={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:ve.Text,needsHover:e=>e.hoverEffect===!0,needsHoverPosition:!1,drawPrep:Wn,useLabel:!0,draw:e=>{let{cell:t,hoverAmount:r,hyperWrapping:n,ctx:o,rect:i,theme:a,overrideCursor:l}=e,{displayData:s,contentAlign:c,hoverEffect:u,allowWrapping:h,hoverEffectTheme:g}=t;u===!0&&r>0&&wa(o,a,g,s,i,r,l),Sr(e,s,c,h,n)},measure:(e,t,r)=>{let n=t.displayData.split(`
`,t.allowWrapping===!0?void 0:1),o=0;for(let i of n)o=Math.max(o,e.measureText(i).width);return o+2*r.cellHorizontalPadding},onDelete:e=>({...e,data:""}),provideEditor:e=>({disablePadding:e.allowWrapping===!0,editor:t=>{let{isHighlighted:r,onChange:n,value:o,validatedSelection:i}=t;return d.createElement(po,{style:e.allowWrapping===!0?{padding:"3px 8.5px"}:void 0,highlight:r,autoFocus:o.readonly!==!0,disabled:o.readonly===!0,altNewline:!0,value:o.data,validatedSelection:i,onChange:a=>n({...o,data:a.target.value})})}}),onPaste:(e,t,r)=>e===t.data?void 0:{...t,data:e,displayData:r.formattedString??t.displayData}},zh=Zt("div")({name:"UriOverlayEditorStyle",class:"gdg-u1rrojo",propsAsIs:!1});var Ah=e=>{let{uri:t,onChange:r,forceEditMode:n,readonly:o,validatedSelection:i,preview:a}=e,[l,s]=d.useState(!o&&(t===""||n)),c=d.useCallback(()=>{s(!0)},[]);return l?d.createElement(po,{validatedSelection:i,highlight:!0,autoFocus:!0,value:t,onChange:r}):d.createElement(zh,null,d.createElement("a",{className:"gdg-link-area",href:t,target:"_blank",rel:"noopener noreferrer"},a),!o&&d.createElement("div",{className:"gdg-edit-icon",onClick:c},d.createElement(ni,null)),d.createElement("textarea",{className:"gdg-input",autoFocus:!0}))};function ya(e,t,r,n){let o=r.cellHorizontalPadding,i=t.height/2-e.actualBoundingBoxAscent/2,a=e.width,l=e.actualBoundingBoxAscent;return n==="right"?o=t.width-a-r.cellHorizontalPadding:n==="center"&&(o=t.width/2-a/2),{x:o,y:i,width:a,height:l}}function ba(e){let{cell:t,bounds:r,posX:n,posY:o,theme:i}=e,a=t.displayData??t.data;if(t.hoverEffect!==!0||t.onClickUri===void 0)return!1;let l=pl(a,i.baseFontFull);if(l===void 0)return!1;let s=ya(l,r,i,t.contentAlign);return en({x:s.x-4,y:s.y-4,width:s.width+8,height:s.height+8},n,o)}const Lh={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:ve.Uri,needsHover:e=>e.hoverEffect===!0,needsHoverPosition:!0,useLabel:!0,drawPrep:Wn,draw:e=>{let{cell:t,theme:r,overrideCursor:n,hoverX:o,hoverY:i,rect:a,ctx:l}=e,s=t.displayData??t.data,c=t.hoverEffect===!0;if(n!==void 0&&c&&o!==void 0&&i!==void 0){let u=bn(s,l,r.baseFontFull),{x:h,y:g,width:m,height:f}=ya(u,a,r,t.contentAlign);if(o>=h-4&&o<=h-4+m+8&&i>=g-4&&i<=g-4+f+8){let v=Ar(l,r.baseFontFull);n("pointer");let k=g-v;l.beginPath(),l.moveTo(a.x+h,Math.floor(a.y+k+f+5)+.5),l.lineTo(a.x+h+m,Math.floor(a.y+k+f+5)+.5),l.strokeStyle=r.linkColor,l.stroke(),l.save(),l.fillStyle=e.cellFillColor,Sr({...e,rect:{...a,x:a.x-1}},s,t.contentAlign),Sr({...e,rect:{...a,x:a.x-2}},s,t.contentAlign),Sr({...e,rect:{...a,x:a.x+1}},s,t.contentAlign),Sr({...e,rect:{...a,x:a.x+2}},s,t.contentAlign),l.restore()}}l.fillStyle=c?r.linkColor:r.textDark,Sr(e,s,t.contentAlign)},onSelect:e=>{ba(e)&&e.preventDefault()},onClick:e=>{var r;let{cell:t}=e;ba(e)&&((r=t.onClickUri)==null||r.call(t,e))},measure:(e,t,r)=>e.measureText(t.displayData??t.data).width+r.cellHorizontalPadding*2,onDelete:e=>({...e,data:""}),provideEditor:e=>t=>{let{onChange:r,value:n,forceEditMode:o,validatedSelection:i}=t;return d.createElement(Ah,{forceEditMode:n.readonly!==!0&&(o||e.hoverEffect===!0&&e.onClickUri!==void 0),uri:n.data,preview:n.displayData??n.data,validatedSelection:i,readonly:n.readonly===!0,onChange:a=>r({...n,data:a.target.value})})},onPaste:(e,t,r)=>e===t.data?void 0:{...t,data:e,displayData:r.formattedString??t.displayData}},Fh=[xh,Mh,nh,ah,dh,gh,vh,bh,Th,Ph,Dh,Hh,Lh];var jh=Kt(J(((e,t)=>{var r=ri(),n=co(),o="Expected a function";function i(a,l,s){var c=!0,u=!0;if(typeof a!="function")throw TypeError(o);return n(s)&&(c="leading"in s?!!s.leading:c,u="trailing"in s?!!s.trailing:u),r(a,l,{leading:c,maxWait:l,trailing:u})}t.exports=i}))()),Ri=[],_h=class extends xl{constructor(){super(...arguments);rt(this,"imageLoaded",()=>{});rt(this,"loadedLocations",[]);rt(this,"cache",{});rt(this,"sendLoaded",(0,jh.default)(()=>{this.imageLoaded(new $n(this.loadedLocations)),this.loadedLocations=[]},20));rt(this,"clearOutOfWindow",()=>{let t=Object.keys(this.cache);for(let r of t){let n=this.cache[r],o=!1;for(let i=0;i<n.cells.length;i++){let a=n.cells[i];if(this.isInWindow(a)){o=!0;break}}o?n.cells=n.cells.filter(this.isInWindow):(n.cancel(),delete this.cache[r])}})}setCallback(t){this.imageLoaded=t}loadImage(t,r,n,o){let i=!1,a=Ri.pop()??new Image,l=!1,s={img:void 0,cells:[ir(r,n)],url:t,cancel:()=>{l||(l=!0,Ri.length<12?Ri.unshift(a):i||(a.src=""))}},c=new Promise(u=>a.addEventListener("load",()=>u(null)));requestAnimationFrame(async()=>{try{a.src=t,await c,await a.decode();let u=this.cache[o];if(u!==void 0&&!l){u.img=a;for(let h of u.cells)this.loadedLocations.push(di(h));i=!0,this.sendLoaded()}}catch{s.cancel()}}),this.cache[o]=s}loadOrGetImage(t,r,n){let o=t,i=this.cache[o];if(i!==void 0){let a=ir(r,n);return i.cells.includes(a)||i.cells.push(a),i.img}else this.loadImage(t,r,n,o)}};const Nh=d.forwardRef((e,t)=>{let r=d.useMemo(()=>({...Dc,...e.headerIcons}),[e.headerIcons]),n=d.useMemo(()=>e.renderers??Fh,[e.renderers]),o=d.useMemo(()=>e.imageWindowLoader??new _h,[e.imageWindowLoader]);return d.createElement(rh,{...e,renderers:n,headerIcons:r,ref:t,imageWindowLoader:o})});function Bh(e){switch(e){case"string":return ve.Text;case"number":return ve.Number;case"boolean":return ve.Boolean;default:return ve.Text}}function Wh(e){switch(e){case"string":return Ur.HeaderString;case"number":case"integer":return Ur.HeaderNumber;case"boolean":return Ur.HeaderBoolean;case"date":case"datetime":return Ur.HeaderDate;case"time":return Ur.HeaderTime;case"unknown":return Ur.HeaderString;default:return Za(e),Ur.HeaderString}}function xa(e){return"rowIdx"in e&&"columnId"in e&&"value"in e}function $h(e){return"rowIdx"in e&&"type"in e}function Yh(e){return"columnIdx"in e&&"type"in e}function Kh(e){let{selection:t,data:r,setData:n,onAddEdits:o,columns:i,editableColumns:a}=e;if(!t.current)return;let{range:l}=t.current,{x:s,y:c}=l;navigator.clipboard.readText().then(u=>{if(!u.trim())return;let h=u.split(`
`).filter(f=>f.trim()),g=[];for(let f of h){let v=f.split("	");g.push(v)}if(g.length===0)return;let m=[];for(let[f,v]of g.entries()){if(!v)continue;let k=c+f;if(k>=r.length)break;for(let[C,y]of v.entries()){if(y===void 0)continue;let M=s+C;if(!i||M>=i.length)break;let T=i[M],P=T.dataType;if(!(a==="all"||a.includes(T.title)))continue;let E=y;switch(P){case"integer":case"number":{let L=Number(y);if(Number.isNaN(L))continue;E=L;break}case"boolean":{let L=y.toLowerCase();E=L==="true"||L==="1";break}}let O=i[M].title;m.push({rowIdx:k,columnId:O,value:E})}}m.length>0&&(o(m),n(f=>{let v=[...f];for(let k of m)if(xa(k)){let C=k.rowIdx,y=k.columnId;if(C<v.length){let M=v[C];y in M&&(M[y]=k.value)}}return v}))}).catch(u=>{Ki.error("Failed to read clipboard data",u)})}function Xh(e){return e==="light"?{lineHeight:1.25}:{lineHeight:1.25,accentColor:"#7c3aed",accentLight:"rgba(124, 58, 237, 0.15)",textDark:"#f4f4f5",textMedium:"#a1a1aa",textLight:"#71717a",textBubble:"#f4f4f5",bgIconHeader:"#a1a1aa",fgIconHeader:"#18181b",textHeader:"#d4d4d8",textHeaderSelected:"#18181b",bgCell:"#18181b",bgCellMedium:"#27272a",bgHeader:"#27272a",bgHeaderHasFocus:"#3f3f46",bgHeaderHovered:"#3f3f46",bgBubble:"#27272a",bgBubbleSelected:"#7c3aed",bgSearchResult:"#312e81",borderColor:"#27272a",drilldownBorder:"#7c3aed",linkColor:"#818cf8",headerFontStyle:"bold 14px",baseFontStyle:"13px"}}var Ca=Kt(I0()),je=Kt(T0());const Vh=e=>{let t=(0,Ca.c)(19),{currentColumnName:r,onRename:n,onCancel:o}=e,[i,a]=(0,d.useState)(""),l;t[0]!==r||t[1]!==i||t[2]!==n?(l=()=>{i.trim()&&(n(i.trim()),a(r))},t[0]=r,t[1]=i,t[2]=n,t[3]=l):l=t[3];let s=l,c;t[4]!==s||t[5]!==o?(c=y=>{y.key==="Enter"?s():y.key==="Escape"&&o()},t[4]=s,t[5]=o,t[6]=c):c=t[6];let u=c,h;t[7]===Symbol.for("react.memo_cache_sentinel")?(h=(0,je.jsxs)(Ua,{children:[(0,je.jsx)($0,{className:"mr-2 h-3.5 w-3.5"}),"Rename column"]}),t[7]=h):h=t[7];let g;t[8]===Symbol.for("react.memo_cache_sentinel")?(g=(0,je.jsx)(Gi,{htmlFor:"rename-input",children:"Column name"}),t[8]=g):g=t[8];let m;t[9]===Symbol.for("react.memo_cache_sentinel")?(m=y=>a(y.target.value),t[9]=m):m=t[9];let f;t[10]!==u||t[11]!==i?(f=(0,je.jsxs)("div",{children:[g,(0,je.jsx)(Qa,{value:i,onChange:m,placeholder:"Enter new column name",className:"mt-1",onKeyDown:u})]}),t[10]=u,t[11]=i,t[12]=f):f=t[12];let v=!i.trim(),k;t[13]!==s||t[14]!==v?(k=(0,je.jsx)(Vi,{onClick:s,disabled:v,size:"sm",className:"w-full",children:"Rename"}),t[13]=s,t[14]=v,t[15]=k):k=t[15];let C;return t[16]!==f||t[17]!==k?(C=(0,je.jsxs)(Ja,{children:[h,(0,je.jsx)(qa,{children:(0,je.jsx)(Ga,{className:"w-64 p-4",children:(0,je.jsxs)("div",{className:"space-y-3",children:[f,k]})})})]}),t[16]=f,t[17]=k,t[18]=C):C=t[18],C},Sa=e=>{let t=(0,Ca.c)(77),{direction:r,onAdd:n,onCancel:o}=e,[i,a]=(0,d.useState)(""),[l,s]=(0,d.useState)("string"),c,u,h,g,m,f,v,k,C,y,M,T,P,E,O;if(t[0]!==i||t[1]!==l||t[2]!==r||t[3]!==n||t[4]!==o){let G=["string","number","boolean","datetime"],j;t[20]!==i||t[21]!==l||t[22]!==n?(j=()=>{i.trim()&&(n(i.trim(),l),a(""),s("string"))},t[20]=i,t[21]=l,t[22]=n,t[23]=j):j=t[23],f=j;let Z;t[24]!==f||t[25]!==o?(Z=se=>{se.key==="Enter"?f():se.key==="Escape"&&o()},t[24]=f,t[25]=o,t[26]=Z):Z=t[26];let ee=Z;m=Ja;let X;t[27]===Symbol.for("react.memo_cache_sentinel")?(X=(0,je.jsx)(Y0,{className:"mr-2 h-3.5 w-3.5"}),t[27]=X):X=t[27],t[28]===r?O=t[29]:(O=(0,je.jsxs)(Ua,{children:[X,"Add column to the ",r]}),t[28]=r,t[29]=O),g=qa,h=Ga,E="w-64 p-4",T="space-y-3";let ce=`add-column-input-${r}`,oe;t[30]===ce?oe=t[31]:(oe=(0,je.jsx)(Gi,{htmlFor:ce,children:"Column name"}),t[30]=ce,t[31]=oe);let de=`add-column-input-${r}`,Oe;t[32]===Symbol.for("react.memo_cache_sentinel")?(Oe=se=>a(se.target.value),t[32]=Oe):Oe=t[32];let te;t[33]!==i||t[34]!==ee||t[35]!==de?(te=(0,je.jsx)(Qa,{id:de,value:i,onChange:Oe,placeholder:"Enter column name",className:"mt-1",onKeyDown:ee}),t[33]=i,t[34]=ee,t[35]=de,t[36]=te):te=t[36],t[37]!==oe||t[38]!==te?(P=(0,je.jsxs)("div",{children:[oe,te]}),t[37]=oe,t[38]=te,t[39]=P):P=t[39];let $=`add-column-type-${r}`;t[40]===$?M=t[41]:(M=(0,je.jsx)(Gi,{htmlFor:$,children:"Data type"}),t[40]=$,t[41]=M),u=_0,k=l,t[42]===Symbol.for("react.memo_cache_sentinel")?(C=se=>s(se),t[42]=C):C=t[42];let Q=`add-column-type-${r}`,re;t[43]===Symbol.for("react.memo_cache_sentinel")?(re=(0,je.jsx)(A0,{}),t[43]=re):re=t[43],t[44]===Q?y=t[45]:(y=(0,je.jsx)(j0,{id:Q,className:"mt-1",children:re}),t[44]=Q,t[45]=y),c=F0,v=G.map(Gh),t[0]=i,t[1]=l,t[2]=r,t[3]=n,t[4]=o,t[5]=c,t[6]=u,t[7]=h,t[8]=g,t[9]=m,t[10]=f,t[11]=v,t[12]=k,t[13]=C,t[14]=y,t[15]=M,t[16]=T,t[17]=P,t[18]=E,t[19]=O}else c=t[5],u=t[6],h=t[7],g=t[8],m=t[9],f=t[10],v=t[11],k=t[12],C=t[13],y=t[14],M=t[15],T=t[16],P=t[17],E=t[18],O=t[19];let L;t[46]!==c||t[47]!==v?(L=(0,je.jsx)(c,{children:v}),t[46]=c,t[47]=v,t[48]=L):L=t[48];let S;t[49]!==u||t[50]!==L||t[51]!==k||t[52]!==C||t[53]!==y?(S=(0,je.jsxs)(u,{value:k,onValueChange:C,children:[y,L]}),t[49]=u,t[50]=L,t[51]=k,t[52]=C,t[53]=y,t[54]=S):S=t[54];let R;t[55]!==S||t[56]!==M?(R=(0,je.jsxs)("div",{children:[M,S]}),t[55]=S,t[56]=M,t[57]=R):R=t[57];let A=!i.trim(),x;t[58]!==f||t[59]!==A?(x=(0,je.jsx)(Vi,{onClick:f,disabled:A,size:"sm",className:"w-full",children:"Add"}),t[58]=f,t[59]=A,t[60]=x):x=t[60];let w;t[61]!==R||t[62]!==x||t[63]!==T||t[64]!==P?(w=(0,je.jsxs)("div",{className:T,children:[P,R,x]}),t[61]=R,t[62]=x,t[63]=T,t[64]=P,t[65]=w):w=t[65];let I;t[66]!==h||t[67]!==w||t[68]!==E?(I=(0,je.jsx)(h,{className:E,children:w}),t[66]=h,t[67]=w,t[68]=E,t[69]=I):I=t[69];let D;t[70]!==g||t[71]!==I?(D=(0,je.jsx)(g,{children:I}),t[70]=g,t[71]=I,t[72]=D):D=t[72];let b;return t[73]!==m||t[74]!==D||t[75]!==O?(b=(0,je.jsxs)(m,{children:[O,D]}),t[73]=m,t[74]=D,t[75]=O,t[76]=b):b=t[76],b};function Gh(e){return(0,je.jsx)(L0,{value:e,children:P0(e)},e)}function ka(e,t){return e.map(r=>{let n=r,o=Object.keys(n);if(t<0||t>=o.length)return n;let i=o[t],{[i]:a,...l}=n;return l})}function Ma(e,t){return t?e.map(r=>({...r,[t]:""})):e}function Ra(e,t,r){return!t||!r||t===r?e:e.map(n=>{let o=n,{[t]:i,...a}=o;return{...a,[r]:o[t]}})}function Sn(e){var a;let{columnFields:t,columnIdx:r,type:n,dataType:o,newColumnName:i}=e;switch(n){case"insert":{if(!i)return Ki.error("newName is required for insert"),t;let l=Object.entries(t),s=[...l.slice(0,r),[i,o||"string"],...l.slice(r)];return Object.fromEntries(s)}case"remove":{if(r<0||r>=Object.keys(t).length)return t;let l=(a=Object.entries(t)[r])==null?void 0:a[0];if(l){let{[l]:s,...c}=t;return c}return t}case"rename":{if(!i)return Ki.error("newName is required for rename"),t;if(r<0||r>=Object.keys(t).length)return t;let l=Object.entries(t),s=[...l.slice(0,r),[i,o||"string"],...l.slice(r+1)];return Object.fromEntries(s)}}}Qi=({data:e,setData:t,columnFields:r,setColumnFields:n,editableColumns:o,edits:i,onAddEdits:a,onAddRows:l,onDeleteRows:s,onRenameColumn:c,onDeleteColumn:u,onAddColumn:h})=>{let{theme:g}=z0(),m=(0,d.useRef)(null),[f,v]=(0,d.useState)(),[k,C]=(0,d.useState)(!1),[y,M]=d.useState({columns:lt.empty(),rows:lt.empty()}),[T,P]=(0,d.useState)({}),E=X0();V0(()=>{if(i.length===0)return;let $=new Map;for(let re of i)if(xa(re))if(re.rowIdx>=e.length){$.has(re.rowIdx)||$.set(re.rowIdx,{});let se=$.get(re.rowIdx);se&&(se[re.columnId]=re.value)}else t(se=>{let Be=[...se];return Be[re.rowIdx][re.columnId]=re.value,Be});else if($h(re)&&re.type===qo.Remove)t(se=>se.filter((Be,Ae)=>Ae!==re.rowIdx));else if(Yh(re))switch(re.type){case qo.Remove:t(se=>ka(se,re.columnIdx)),n(se=>Sn({columnFields:se,columnIdx:re.columnIdx,type:"remove"}));break;case qo.Insert:n(se=>Sn({columnFields:se,columnIdx:re.columnIdx,type:"insert",newColumnName:re.newName})),t(se=>Ma(se,re.newName));break;case qo.Rename:{let se=O[re.columnIdx].title,Be=re.newName;if(!se||!Be)return;n(Ae=>Sn({columnFields:Ae,columnIdx:re.columnIdx,type:"rename",newColumnName:Be})),t(Ae=>Ra(Ae,se,Be));break}}let Q=[...$.entries()].sort(([re],[se])=>re-se).map(([,re])=>re);Q.length>0&&t(re=>[...re,...Q]),E()});let O=(0,d.useMemo)(()=>{let $=[];for(let[Q,re]of Object.entries(r)){let se=o==="all"||o.includes(Q);$.push({id:Q,title:Q,width:T[Q],icon:se?Wh(re):Ur.ProtectedColumnOverlay,style:"normal",kind:Bh(re),dataType:re,hasMenu:!0,themeOverride:se?void 0:{bgCell:g==="light"?"#F9F9FA":"#1e1e21"}})}return $},[r,T,o,g]),L=(0,d.useCallback)($=>{let[Q,re]=$,se=e[re][O[Q].title],Be=O[Q].kind,Ae=o==="all"||o.includes(O[Q].title);if(Be===ve.Boolean){let Me=!!se;return{kind:ve.Boolean,allowOverlay:!1,readonly:!Ae,data:Me}}return Be===ve.Number&&typeof se=="number"?{kind:ve.Number,allowOverlay:Ae,readonly:!Ae,displayData:String(se),data:se}:{kind:ve.Text,allowOverlay:Ae,readonly:!Ae,displayData:String(se),data:String(se)}},[O,e,o]),S=(0,d.useCallback)(($,Q)=>{let[re,se]=$,Be=O[re],Ae=Be.title,Me=Q.data;(Be.dataType==="number"||Be.dataType==="integer")&&(Q.data===void 0||Q.data==="")&&(Me=null),t(Xe=>{let He=[...Xe];return He[se][Ae]=Me,He}),a([{rowIdx:se,columnId:Ae,value:Me}])},[O,a,t]),R=(0,d.useCallback)(($,Q)=>{P(re=>({...re,[$.title]:Q}))},[]),A=(0,d.useCallback)(($,Q,re)=>{let[se,Be]=$,Ae=O[se].title;switch(r[Ae]){case"number":case"integer":if(Number.isNaN(Number(Q.data)))return!1;break;case"boolean":if(typeof Q.data!="boolean")return!1;break}return!0},[r,O]),x=(0,d.useCallback)($=>{if(m.current){if(Xi.isMetaOrCtrl($)&&$.key==="c"){m.current.emit("copy");return}if(Xi.isMetaOrCtrl($)&&$.key==="v"){Kh({selection:y,data:e,setData:t,columns:O,editableColumns:o,onAddEdits:a});return}if(Xi.isMetaOrCtrl($)&&$.key==="f"){C(Q=>!Q),$.stopPropagation(),$.preventDefault();return}if($.key==="Escape"){C(!1);return}}},[O,e,o,a,y,t]),w=(0,d.useCallback)(()=>{let $=Object.fromEntries(O.map(Q=>{let re=Q.dataType;switch(re){case"boolean":return[Q.title,!1];case"number":case"integer":return[Q.title,null];case"date":case"datetime":case"time":return[Q.title,new Date];case"string":case"unknown":return[Q.title,""];default:return Za(re),[Q.title,""]}}));l([$]),t(Q=>[...Q,$])},[O,l,t]),I=()=>{let $=y.rows.toArray();s($);let Q=0;for(let re of $){let se=re-Q;t(Be=>Be.filter((Ae,Me)=>Me!==se)),Q++}M({columns:lt.empty(),rows:lt.empty()})},D=G0(($,Q)=>{v({col:$,bounds:Q})}),b=async()=>{if(f){let $=O[f.col].title;await U0($),v(void 0)}};function G($){D0({title:`Column '${$}' already exists`,description:"Please enter a different column name",variant:"danger"})}let j=$=>{if(f){let Q=O[f.col].title;if(r[$]){G($);return}let re=O[f.col].dataType;c(f.col,$),n(se=>Sn({columnFields:se,columnIdx:f.col,type:"rename",dataType:re,newColumnName:$})),t(se=>Ra(se,Q,$)),v(void 0)}},Z=()=>{f&&(u(f.col),n($=>Sn({columnFields:$,columnIdx:f.col,type:"remove"})),t($=>ka($,f.col)),v(void 0))},ee=$=>{let{direction:Q,columnName:re,dataType:se}=$;if(f){let Be=f.col+(Q==="left"?0:1),Ae=Math.max(0,Math.min(Be,O.length));if(r[re]){G(re);return}h(Ae,re),n(Me=>Sn({columnFields:Me,columnIdx:Ae,type:"insert",dataType:se,newColumnName:re})),t(Me=>Ma(Me,re)),v(void 0)}},X=(f==null?void 0:f.col)===O.length-1,ce=f!==void 0,oe="mr-2 h-3.5 w-3.5",de={hint:"New row",sticky:!0,tint:!0},Oe=e.length>1e5,te=o==="all";return(0,je.jsxs)("div",{className:"relative",children:[(0,je.jsx)(O0,{children:(0,je.jsx)(Nh,{ref:m,getCellContent:L,columns:O,gridSelection:y,onGridSelectionChange:M,rows:e.length,overscrollX:50,smoothScrollX:!Oe,smoothScrollY:!Oe,validateCell:A,getCellsForSelection:!0,onPaste:!0,showSearch:k,fillHandle:!0,allowedFillDirections:"vertical",onKeyDown:x,height:e.length>10?450:void 0,width:"100%",rowMarkers:{kind:"both"},rowSelectionMode:"multi",onCellEdited:S,onColumnResize:R,onHeaderMenuClick:D,theme:Xh(g),trailingRowOptions:de,onRowAppended:w,maxColumnAutoWidth:600,maxColumnWidth:600})}),(()=>{if(!ce)return;let $=(0,je.jsxs)(je.Fragment,{children:[te&&(0,je.jsx)(Vh,{currentColumnName:O[f.col].title,onRename:j,onCancel:()=>v(void 0)}),(0,je.jsx)(Va,{}),(0,je.jsx)(Sa,{direction:"left",onAdd:(Q,re)=>ee({direction:"left",columnName:Q,dataType:re}),onCancel:()=>v(void 0)}),(0,je.jsx)(Sa,{direction:"right",onAdd:(Q,re)=>ee({direction:"right",columnName:Q,dataType:re}),onCancel:()=>v(void 0)}),(0,je.jsx)(Va,{}),!X&&te&&(0,je.jsxs)(Xa,{onClick:Z,className:"text-destructive focus:text-destructive",children:[(0,je.jsx)(K0,{className:oe}),"Delete column"]})]});return(0,je.jsx)(B0,{open:ce,onOpenChange:Q=>!Q&&v(void 0),children:(0,je.jsxs)(N0,{style:{left:(f==null?void 0:f.bounds.x)??0,top:((f==null?void 0:f.bounds.y)??0)+((f==null?void 0:f.bounds.height)??0)},className:"fixed w-52",children:[(0,je.jsxs)(Xa,{onClick:b,children:[(0,je.jsx)(W0,{className:oe}),"Copy column name"]}),!Oe&&$]})})})(),(0,je.jsx)("div",{className:"absolute bottom-1 right-2 w-26",children:(0,je.jsx)(Vi,{variant:"destructive",size:"sm",disabled:y.rows.length===0,className:"right-2 h-7",onClick:I,children:y.rows.length<=1?"Delete row":"Delete rows"})})]})},gs=Qi})();export{Qi as GlideDataEditor,cf as __tla,gs as default};
