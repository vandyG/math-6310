import{s as Tt}from"./chunk-DZLz74EQ.js";import{t as Ct}from"./react-BcIddLXZ.js";import"./emotion-is-prop-valid.esm-plUNooLR.js";import{t as jt}from"./dist-BNjtn4W8.js";var D=Tt(Ct());const Rt=jt("div")({name:"NumberOverlayEditorStyle",class:"gdg-n15fjm3e",propsAsIs:!1});function it(t,r){var e={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&r.indexOf(a)<0&&(e[a]=t[a]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(t);n<a.length;n++)r.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(t,a[n])&&(e[a[n]]=t[a[n]]);return e}var tt;(function(t){t.event="event",t.props="prop"})(tt||(tt={}));function q(){}function Ft(t){var r,e=void 0;return function(){for(var a=[],n=arguments.length;n--;)a[n]=arguments[n];return r&&a.length===r.length&&a.every(function(u,l){return u===r[l]})||(r=a,e=t.apply(void 0,a)),e}}function Y(t){return!!(t||"").match(/\d/)}function X(t){return t==null}function Bt(t){return typeof t=="number"&&isNaN(t)}function lt(t){return X(t)||Bt(t)||typeof t=="number"&&!isFinite(t)}function ct(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Mt(t){switch(t){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function kt(t,r,e){var a=Mt(e),n=t.search(/[1-9]/);return n=n===-1?t.length:n,t.substring(0,n)+t.substring(n,t.length).replace(a,"$1"+r)}function Lt(t){var r=(0,D.useRef)(t);return r.current=t,(0,D.useRef)(function(){for(var e=[],a=arguments.length;a--;)e[a]=arguments[a];return r.current.apply(r,e)}).current}function nt(t,r){r===void 0&&(r=!0);var e=t[0]==="-",a=e&&r;t=t.replace("-","");var n=t.split("."),u=n[0],l=n[1]||"";return{beforeDecimal:u,afterDecimal:l,hasNegation:e,addNegation:a}}function Wt(t){if(!t)return t;var r=t[0]==="-";r&&(t=t.substring(1,t.length));var e=t.split("."),a=e[0].replace(/^0+/,"")||"0",n=e[1]||"";return(r?"-":"")+a+(n?"."+n:"")}function st(t,r,e){for(var a="",n=e?"0":"",u=0;u<=r-1;u++)a+=t[u]||n;return a}function ft(t,r){return Array(r+1).join(t)}function vt(t){var r=t+"",e=r[0]==="-"?"-":"";e&&(r=r.substring(1));var a=r.split(/[eE]/g),n=a[0],u=a[1];if(u=Number(u),!u)return e+n;n=n.replace(".","");var l=1+u,g=n.length;return l<0?n="0."+ft("0",Math.abs(l))+n:l>=g?n+=ft("0",l-g):n=(n.substring(0,l)||"0")+"."+n.substring(l),e+n}function dt(t,r,e){if(["","-"].indexOf(t)!==-1)return t;var a=(t.indexOf(".")!==-1||e)&&r,n=nt(t),u=n.beforeDecimal,l=n.afterDecimal,g=n.hasNegation,b=parseFloat("0."+(l||"0")),p=(l.length<=r?"0."+l:b.toFixed(r)).split("."),h=u;u&&Number(p[0])&&(h=u.split("").reverse().reduce(function(c,A,d){return c.length>d?(Number(c[0])+Number(A)).toString()+c.substring(1,c.length):A+c},p[0]));var f=st(p[1]||"",r,e),S=g?"-":"",y=a?".":"";return""+S+h+y+f}function Q(t,r){if(t.value=t.value,t!==null){if(t.createTextRange){var e=t.createTextRange();return e.move("character",r),e.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(r,r),!0):(t.focus(),!1)}}var mt=Ft(function(t,r){for(var e=0,a=0,n=t.length,u=r.length;t[e]===r[e]&&e<n;)e++;for(;t[n-1-a]===r[u-1-a]&&u-a>e&&n-a>e;)a++;return{from:{start:e,end:n-a},to:{start:e,end:u-a}}}),Pt=function(t,r){var e=Math.min(t.selectionStart,r);return{from:{start:e,end:t.selectionEnd},to:{start:e,end:r}}};function Kt(t,r,e){return Math.min(Math.max(t,r),e)}function ut(t){return Math.max(t.selectionStart,t.selectionEnd)}function Gt(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Ut(t){return{from:{start:0,end:0},to:{start:0,end:t.length},lastValue:""}}function _t(t){var r=t.currentValue,e=t.formattedValue,a=t.currentValueIndex,n=t.formattedValueIndex;return r[a]===e[n]}function $t(t,r,e,a,n,u,l){l===void 0&&(l=_t);var g=n.findIndex(function(B){return B}),b=t.slice(0,g);!r&&!e.startsWith(b)&&(r=b,e=b+e,a+=b.length);for(var p=e.length,h=t.length,f={},S=Array(p),y=0;y<p;y++){S[y]=-1;for(var c=0,A=h;c<A;c++)if(l({currentValue:e,lastValue:r,formattedValue:t,currentValueIndex:y,formattedValueIndex:c})&&f[c]!==!0){S[y]=c,f[c]=!0;break}}for(var d=a;d<p&&(S[d]===-1||!u(e[d]));)d++;var E=d===p||S[d]===-1?h:S[d];for(d=a-1;d>0&&S[d]===-1;)d--;var j=d===-1||S[d]===-1?0:S[d]+1;return j>E?E:a-j<E-a?j:E}function gt(t,r,e,a){var n=t.length;if(r=Kt(r,0,n),a==="left"){for(;r>=0&&!e[r];)r--;r===-1&&(r=e.indexOf(!0))}else{for(;r<=n&&!e[r];)r++;r>n&&(r=e.lastIndexOf(!0))}return r===-1&&(r=n),r}function qt(t){for(var r=Array.from({length:t.length+1}).map(function(){return!0}),e=0,a=r.length;e<a;e++)r[e]=!!(Y(t[e])||Y(t[e-1]));return r}function pt(t,r,e,a,n,u){u===void 0&&(u=q);var l=Lt(function(c,A){var d,E;return lt(c)?(E="",d=""):typeof c=="number"||A?(E=typeof c=="number"?vt(c):c,d=a(E)):(E=n(c,void 0),d=a(E)),{formattedValue:d,numAsString:E}}),g=(0,D.useState)(function(){return l(X(t)?r:t,e)}),b=g[0],p=g[1],h=function(c,A){c.formattedValue!==b.formattedValue&&p({formattedValue:c.formattedValue,numAsString:c.value}),u(c,A)},f=t,S=e;X(t)&&(f=b.numAsString,S=!0);var y=l(f,S);return(0,D.useMemo)(function(){p(y)},[y.formattedValue]),[b,h]}function Zt(t){return t.replace(/[^0-9]/g,"")}function zt(t){return t}function Ht(t){var r=t.type;r===void 0&&(r="text");var e=t.displayType;e===void 0&&(e="input");var a=t.customInput,n=t.renderText,u=t.getInputRef,l=t.format;l===void 0&&(l=zt);var g=t.removeFormatting;g===void 0&&(g=Zt);var b=t.defaultValue,p=t.valueIsNumericString,h=t.onValueChange,f=t.isAllowed,S=t.onChange;S===void 0&&(S=q);var y=t.onKeyDown;y===void 0&&(y=q);var c=t.onMouseUp;c===void 0&&(c=q);var A=t.onFocus;A===void 0&&(A=q);var d=t.onBlur;d===void 0&&(d=q);var E=t.value,j=t.getCaretBoundary;j===void 0&&(j=qt);var B=t.isValidInputCharacter;B===void 0&&(B=Y);var Z=t.isCharacterSame,P=it(t,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),z=pt(E,b,!!p,l,g,h),G=z[0],x=G.formattedValue,k=G.numAsString,H=z[1],K=(0,D.useRef)(),s=(0,D.useRef)({formattedValue:x,numAsString:k}),m=function(o,i){s.current={formattedValue:o.formattedValue,numAsString:o.value},H(o,i)},T=(0,D.useState)(!1),I=T[0],W=T[1],w=(0,D.useRef)(null),C=(0,D.useRef)({setCaretTimeout:null,focusTimeout:null});(0,D.useEffect)(function(){return W(!0),function(){clearTimeout(C.current.setCaretTimeout),clearTimeout(C.current.focusTimeout)}},[]);var J=l,R=function(o,i){var v=parseFloat(i);return{formattedValue:o,value:i,floatValue:isNaN(v)?void 0:v}},L=function(o,i,v){o.selectionStart===0&&o.selectionEnd===o.value.length||(Q(o,i),C.current.setCaretTimeout=setTimeout(function(){o.value===v&&o.selectionStart!==i&&Q(o,i)},0))},M=function(o,i,v){return gt(o,i,j(o),v)},et=function(o,i,v){var O=j(i),F=$t(i,x,o,v,O,B,Z);return F=gt(i,F,O),F},bt=function(o){var i=o.formattedValue;i===void 0&&(i="");var v=o.input,O=o.source,F=o.event,N=o.numAsString,V;if(v){var U=o.inputValue||v.value,_=ut(v);v.value=i,V=et(U,i,_),V!==void 0&&L(v,V,i)}i!==x&&m(R(i,N),{event:F,source:O})};(0,D.useEffect)(function(){var o=s.current,i=o.formattedValue,v=o.numAsString;(x!==i||k!==v)&&m(R(x,k),{event:void 0,source:tt.props})},[x,k]);var yt=w.current?ut(w.current):void 0;(typeof window<"u"?D.useLayoutEffect:D.useEffect)(function(){var o=w.current;if(x!==s.current.formattedValue&&o){var i=et(s.current.formattedValue,x,yt);o.value=x,L(o,i,x)}},[x]);var Vt=function(o,i,v){var O=i.target,F=K.current?Pt(K.current,O.selectionEnd):mt(x,o),N=Object.assign(Object.assign({},F),{lastValue:x}),V=g(o,N),U=J(V);if(V=g(U,void 0),f&&!f(R(U,V))){var _=i.target,$=ut(_),It=et(o,x,$);return _.value=x,L(_,It,x),!1}return bt({formattedValue:U,numAsString:V,inputValue:o,event:i,source:v,input:i.target}),!0},at=function(o,i){i===void 0&&(i=0);var v=o.selectionStart,O=o.selectionEnd;K.current={selectionStart:v,selectionEnd:O+i}},xt=function(o){var i=o.target.value;Vt(i,o,tt.event)&&S(o),K.current=void 0},wt=function(o){var i=o.target,v=o.key,O=i.selectionStart,F=i.selectionEnd,N=i.value;N===void 0&&(N="");var V;v==="ArrowLeft"||v==="Backspace"?V=Math.max(O-1,0):v==="ArrowRight"?V=Math.min(O+1,N.length):v==="Delete"&&(V=O);var U=0;v==="Delete"&&O===F&&(U=1);var _=v==="ArrowLeft"||v==="ArrowRight";if(V===void 0||O!==F&&!_){y(o),at(i,U);return}var $=V;_?($=M(N,V,v==="ArrowLeft"?"left":"right"),$!==V&&o.preventDefault()):v==="Delete"&&!B(N[V])?$=M(N,V,"right"):v==="Backspace"&&!B(N[V])&&($=M(N,V,"left")),$!==V&&L(i,$,N),y(o),at(i,U)},Nt=function(o){var i=o.target,v=function(){var O=i.selectionStart,F=i.selectionEnd,N=i.value;if(N===void 0&&(N=""),O===F){var V=M(N,O);V!==O&&L(i,V,N)}};v(),requestAnimationFrame(function(){v()}),c(o),at(i)},Dt=function(o){o.persist&&o.persist();var i=o.target,v=o.currentTarget;w.current=i,C.current.focusTimeout=setTimeout(function(){var O=i.selectionStart,F=i.selectionEnd,N=i.value;N===void 0&&(N="");var V=M(N,O);V!==O&&!(O===0&&F===N.length)&&L(i,V,N),A(Object.assign(Object.assign({},o),{currentTarget:v}))},0)},Et=function(o){w.current=null,clearTimeout(C.current.focusTimeout),clearTimeout(C.current.setCaretTimeout),d(o)},Ot=I&&Gt()?"numeric":void 0,ot=Object.assign({inputMode:Ot},P,{type:r,value:x,onChange:xt,onKeyDown:wt,onMouseUp:Nt,onFocus:Dt,onBlur:Et});if(e==="text")return n?D.createElement(D.Fragment,null,n(x,P)||null):D.createElement("span",Object.assign({},P,{ref:u}),x);if(a){var At=a;return D.createElement(At,Object.assign({},ot,{ref:u}))}return D.createElement("input",Object.assign({},ot,{ref:u}))}function ht(t,r){var e=r.decimalScale,a=r.fixedDecimalScale,n=r.prefix;n===void 0&&(n="");var u=r.suffix;u===void 0&&(u="");var l=r.allowNegative,g=r.thousandsGroupStyle;if(g===void 0&&(g="thousand"),t===""||t==="-")return t;var b=rt(r),p=b.thousandSeparator,h=b.decimalSeparator,f=e!==0&&t.indexOf(".")!==-1||e&&a,S=nt(t,l),y=S.beforeDecimal,c=S.afterDecimal,A=S.addNegation;return e!==void 0&&(c=st(c,e,!!a)),p&&(y=kt(y,p,g)),n&&(y=n+y),u&&(c+=u),A&&(y="-"+y),t=y+(f&&h||"")+c,t}function rt(t){var r=t.decimalSeparator;r===void 0&&(r=".");var e=t.thousandSeparator,a=t.allowedDecimalSeparators;return e===!0&&(e=","),a||(a=[r,"."]),{decimalSeparator:r,thousandSeparator:e,allowedDecimalSeparators:a}}function Jt(t,r){t===void 0&&(t="");var e=RegExp("(-)"),a=RegExp("(-)(.)*(-)"),n=e.test(t),u=a.test(t);return t=t.replace(/-/g,""),n&&!u&&r&&(t="-"+t),t}function Qt(t,r){return RegExp("(^-)|[0-9]|"+ct(t),r?"g":void 0)}function Xt(t,r,e){return t===""?!0:!(r!=null&&r.match(/\d/))&&!(e!=null&&e.match(/\d/))&&typeof t=="string"&&!isNaN(Number(t))}function Yt(t,r,e){var a;r===void 0&&(r=Ut(t));var n=e.allowNegative,u=e.prefix;u===void 0&&(u="");var l=e.suffix;l===void 0&&(l="");var g=e.decimalScale,b=r.from,p=r.to,h=p.start,f=p.end,S=rt(e),y=S.allowedDecimalSeparators,c=S.decimalSeparator,A=t[f]===c;if(Y(t)&&(t===u||t===l)&&r.lastValue==="")return t;if(f-h===1&&y.indexOf(t[h])!==-1){var d=g===0?"":c;t=t.substring(0,h)+d+t.substring(h+1,t.length)}var E=function(w,C,J){var R=!1,L=!1;u.startsWith("-")?R=!1:w.startsWith("--")?(R=!1,L=!0):l.startsWith("-")&&w.length===l.length?R=!1:w[0]==="-"&&(R=!0);var M=R?1:0;return L&&(M=2),M&&(w=w.substring(M),C-=M,J-=M),{value:w,start:C,end:J,hasNegation:R}},j=E(t,h,f),B=j.hasNegation;a=j,t=a.value,h=a.start,f=a.end;var Z=E(r.lastValue,b.start,b.end),P=Z.start,z=Z.end,G=Z.value,x=t.substring(h,f);t.length&&G.length&&(P>G.length-l.length||z<u.length)&&!(x&&l.startsWith(x))&&(t=G);var k=0;t.startsWith(u)?k+=u.length:h<u.length&&(k=h),t=t.substring(k),f-=k;var H=t.length,K=t.length-l.length;t.endsWith(l)?H=K:(f>K||f>t.length-l.length)&&(H=f),t=t.substring(0,H),t=Jt(B?"-"+t:t,n),t=(t.match(Qt(c,!0))||[]).join("");var s=t.indexOf(c);t=t.replace(new RegExp(ct(c),"g"),function(w,C){return C===s?".":""});var m=nt(t,n),T=m.beforeDecimal,I=m.afterDecimal,W=m.addNegation;return p.end-p.start<b.end-b.start&&T===""&&A&&!parseFloat(I)&&(t=W?"-":""),t}function tr(t,r){var e=r.prefix;e===void 0&&(e="");var a=r.suffix;a===void 0&&(a="");var n=Array.from({length:t.length+1}).map(function(){return!0}),u=t[0]==="-";n.fill(!1,0,e.length+(u?1:0));var l=t.length;return n.fill(!1,l-a.length+1,l+1),n}function rr(t){var r=rt(t),e=r.thousandSeparator,a=r.decimalSeparator,n=t.prefix;n===void 0&&(n="");var u=t.allowNegative;if(u===void 0&&(u=!0),e===a)throw Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+e+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+a+` (default value for decimalSeparator is .)
     `);return n.startsWith("-")&&u&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+n+`
      allowNegative: `+u+`
    `),u=!1),Object.assign(Object.assign({},t),{allowNegative:u})}function er(t){t=rr(t),t.decimalSeparator,t.allowedDecimalSeparators,t.thousandsGroupStyle;var r=t.suffix,e=t.allowNegative,a=t.allowLeadingZeros,n=t.onKeyDown;n===void 0&&(n=q);var u=t.onBlur;u===void 0&&(u=q);var l=t.thousandSeparator,g=t.decimalScale,b=t.fixedDecimalScale,p=t.prefix;p===void 0&&(p="");var h=t.defaultValue,f=t.value,S=t.valueIsNumericString,y=t.onValueChange,c=it(t,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),A=rt(t),d=A.decimalSeparator,E=A.allowedDecimalSeparators,j=function(s){return ht(s,t)},B=function(s,m){return Yt(s,m,t)},Z=X(f)?h:f,P=S??Xt(Z,p,r);X(f)?X(h)||P||(P=typeof h=="number"):P||(P=typeof f=="number");var z=function(s){return lt(s)?s:(typeof s=="number"&&(s=vt(s)),P&&typeof g=="number"?dt(s,g,!!b):s)},G=pt(z(f),z(h),!!P,j,B,y),x=G[0],k=x.numAsString,H=x.formattedValue,K=G[1];return Object.assign(Object.assign({},c),{value:H,valueIsNumericString:!1,isValidInputCharacter:function(s){return s===d?!0:Y(s)},isCharacterSame:function(s){var m=s.currentValue,T=s.lastValue,I=s.formattedValue,W=s.currentValueIndex,w=s.formattedValueIndex,C=m[W],J=I[w],R=mt(T,m).to,L=function(M){return B(M).indexOf(".")+p.length};return f===0&&b&&g&&m[R.start]===d&&L(m)<W&&L(I)>w?!1:W>=R.start&&W<R.end&&E&&E.includes(C)&&J===d?!0:C===J},onValueChange:K,format:j,removeFormatting:B,getCaretBoundary:function(s){return tr(s,t)},onKeyDown:function(s){var m=s.target,T=s.key,I=m.selectionStart,W=m.selectionEnd,w=m.value;if(w===void 0&&(w=""),(T==="Backspace"||T==="Delete")&&W<p.length){s.preventDefault();return}if(I!==W){n(s);return}T==="Backspace"&&w[0]==="-"&&I===p.length+1&&e&&Q(m,1),g&&b&&(T==="Backspace"&&w[I-1]===d?(Q(m,I-1),s.preventDefault()):T==="Delete"&&w[I]===d&&s.preventDefault()),E!=null&&E.includes(T)&&w[I]===d&&Q(m,I+1);var C=l===!0?",":l;T==="Backspace"&&w[I-1]===C&&Q(m,I-1),T==="Delete"&&w[I]===C&&Q(m,I+1),n(s)},onBlur:function(s){var m=k;if(m.match(/\d/g)||(m=""),a||(m=Wt(m)),b&&g&&(m=dt(m,g,b)),m!==k){var T=ht(m,t);K({formattedValue:T,value:m,floatValue:parseFloat(m)},{event:s,source:tt.event})}u(s)}})}function ar(t){var r=er(t);return D.createElement(Ht,Object.assign({},r))}function St(){var t,r,e;return((e=(r=(t=Intl.NumberFormat())==null?void 0:t.formatToParts(1.1))==null?void 0:r.find(a=>a.type==="decimal"))==null?void 0:e.value)??"."}function nr(){return St()==="."?",":"."}var ur=t=>{let{value:r,onChange:e,disabled:a,highlight:n,validatedSelection:u,fixedDecimals:l,allowNegative:g,thousandSeparator:b,decimalSeparator:p}=t,h=D.useRef();return D.useLayoutEffect(()=>{var f;if(u!==void 0){let S=typeof u=="number"?[u,null]:u;(f=h.current)==null||f.setSelectionRange(S[0],S[1])}},[u]),D.createElement(Rt,null,D.createElement(ar,{autoFocus:!0,getInputRef:h,className:"gdg-input",onFocus:f=>f.target.setSelectionRange(n?0:f.target.value.length,f.target.value.length),disabled:a===!0,decimalScale:l,allowNegative:g,thousandSeparator:b??nr(),decimalSeparator:p??St(),value:Object.is(r,-0)?"-":r??"",onValueChange:e}))};export{ur as default};
