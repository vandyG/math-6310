import{s as v}from"./chunk-DZLz74EQ.js";import{i as M,o as p,r as d}from"./react-7g8sREeT.js";import{t as N}from"./react-BcIddLXZ.js";import{n as P}from"./jsx-runtime-DvsdsEjx.js";import{n as b,t as _}from"./Logger-BkkOJyg0.js";import{a as x,s as w}from"./hotkeys-CBY41Jr2.js";import{f as C}from"./utils-CfnN8i3Y.js";import{t as y}from"./useEventListener-g9rPKvBX.js";import{n as g}from"./useEvent-BIiDVnhT.js";function D(){try{return window.__MARIMO_MOUNT_CONFIG__.version}catch{return _.warn("Failed to get version from mount config"),null}}var F=D()||"latest";const I=p(F),S=p(!0),E=p(null);var A=p({});function G(){return d(A)}function H(){let o=M(A);return{registerAction:g((t,r)=>{o(n=>({...n,[t]:r}))}),unregisterAction:g(t=>{o(r=>{let{[t]:n,...e}=r;return e})})}}var O=v(P()),R=v(N());function T(o,t){let r=(0,O.c)(13),{registerAction:n,unregisterAction:e}=H(),i=d(C),a=t===b.NOOP,f;r[0]===t?f=r[1]:(f=s=>t(s),r[0]=t,r[1]=f);let m=g(f),u;r[2]!==t||r[3]!==i||r[4]!==o?(u=s=>{let h=i.getHotkey(o).key;w(h)(s)&&t(s)!==!1&&(s.preventDefault(),s.stopPropagation())},r[2]=t,r[3]=i,r[4]=o,r[5]=u):u=r[5];let k=g(u);y(document,"keydown",k);let c,l;r[6]!==a||r[7]!==m||r[8]!==n||r[9]!==o||r[10]!==e?(c=()=>{if(!a)return n(o,m),()=>e(o)},l=[m,o,a,n,e],r[6]=a,r[7]=m,r[8]=n,r[9]=o,r[10]=e,r[11]=c,r[12]=l):(c=r[11],l=r[12]),(0,R.useEffect)(c,l)}function U(o,t){let r=(0,O.c)(2),n;r[0]===t?n=r[1]:(n=e=>{for(let[i,a]of x.entries(t))w(i)(e)&&(_.debug("Satisfied",i,e),a(e)!==!1&&(e.preventDefault(),e.stopPropagation()))},r[0]=t,r[1]=n),y(o,"keydown",n)}export{E as a,I as i,U as n,S as o,G as r,T as t};
