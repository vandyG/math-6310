import{s as L}from"./chunk-DZLz74EQ.js";import{t as $}from"./react-BcIddLXZ.js";import{n as ee,t as te}from"./jsx-runtime-DvsdsEjx.js";import{a as K,r as re}from"./dist-CLazWf1X.js";import{t as ne}from"./cn-Dr9kMPPj.js";import{S as w,a as oe,b as ie,c as ae,d as le,g as se,l as ce,n as ue,o as de,p as pe,s as fe,t as he,u as X,v as Y,w as xe}from"./namespace-BstGchRe.js";var s=L($(),1),p=L(te(),1),[k,Ye]=xe("Tooltip",[X]),D=X(),z="TooltipProvider",ge=700,O="tooltip.open",[ve,M]=k(z),I=r=>{let{__scopeTooltip:e,delayDuration:t=ge,skipDelayDuration:n=300,disableHoverableContent:o=!1,children:i}=r,l=s.useRef(!0),u=s.useRef(!1),a=s.useRef(0);return s.useEffect(()=>{let f=a.current;return()=>window.clearTimeout(f)},[]),(0,p.jsx)(ve,{scope:e,isOpenDelayedRef:l,delayDuration:t,onOpen:s.useCallback(()=>{window.clearTimeout(a.current),l.current=!1},[]),onClose:s.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(()=>l.current=!0,n)},[n]),isPointerInTransitRef:u,onPointerInTransitChange:s.useCallback(f=>{u.current=f},[]),disableHoverableContent:o,children:i})};I.displayName=z;var _="Tooltip",[me,R]=k(_),q=r=>{let{__scopeTooltip:e,children:t,open:n,defaultOpen:o,onOpenChange:i,disableHoverableContent:l,delayDuration:u}=r,a=M(_,r.__scopeTooltip),f=D(e),[c,x]=s.useState(null),h=le(),d=s.useRef(0),g=l??a.disableHoverableContent,m=u??a.delayDuration,v=s.useRef(!1),[b,y]=ie({prop:n,defaultProp:o??!1,onChange:S=>{S?(a.onOpen(),document.dispatchEvent(new CustomEvent(O))):a.onClose(),i==null||i(S)},caller:_}),T=s.useMemo(()=>b?v.current?"delayed-open":"instant-open":"closed",[b]),E=s.useCallback(()=>{window.clearTimeout(d.current),d.current=0,v.current=!1,y(!0)},[y]),j=s.useCallback(()=>{window.clearTimeout(d.current),d.current=0,y(!1)},[y]),F=s.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{v.current=!0,y(!0),d.current=0},m)},[m,y]);return s.useEffect(()=>()=>{d.current&&(d.current=(window.clearTimeout(d.current),0))},[]),(0,p.jsx)(ce,{...f,children:(0,p.jsx)(me,{scope:e,contentId:h,open:b,stateAttribute:T,trigger:c,onTriggerChange:x,onTriggerEnter:s.useCallback(()=>{a.isOpenDelayedRef.current?F():E()},[a.isOpenDelayedRef,F,E]),onTriggerLeave:s.useCallback(()=>{g?j():(window.clearTimeout(d.current),d.current=0)},[j,g]),onOpen:E,onClose:j,disableHoverableContent:g,children:t})})};q.displayName=_;var N="TooltipTrigger",G=s.forwardRef((r,e)=>{let{__scopeTooltip:t,...n}=r,o=R(N,t),i=M(N,t),l=D(t),u=s.useRef(null),a=K(e,u,o.onTriggerChange),f=s.useRef(!1),c=s.useRef(!1),x=s.useCallback(()=>f.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",x),[x]),(0,p.jsx)(de,{asChild:!0,...l,children:(0,p.jsx)(se.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...n,ref:a,onPointerMove:w(r.onPointerMove,h=>{h.pointerType!=="touch"&&!c.current&&!i.isPointerInTransitRef.current&&(o.onTriggerEnter(),c.current=!0)}),onPointerLeave:w(r.onPointerLeave,()=>{o.onTriggerLeave(),c.current=!1}),onPointerDown:w(r.onPointerDown,()=>{o.open&&o.onClose(),f.current=!0,document.addEventListener("pointerup",x,{once:!0})}),onFocus:w(r.onFocus,()=>{f.current||o.onOpen()}),onBlur:w(r.onBlur,o.onClose),onClick:w(r.onClick,o.onClose)})})});G.displayName=N;var H="TooltipPortal",[ye,be]=k(H,{forceMount:void 0}),A=r=>{let{__scopeTooltip:e,forceMount:t,children:n,container:o}=r,i=R(H,e);return(0,p.jsx)(ye,{scope:e,forceMount:t,children:(0,p.jsx)(Y,{present:t||i.open,children:(0,p.jsx)(oe,{asChild:!0,container:o,children:n})})})};A.displayName=H;var C="TooltipContent",J=s.forwardRef((r,e)=>{let t=be(C,r.__scopeTooltip),{forceMount:n=t.forceMount,side:o="top",...i}=r,l=R(C,r.__scopeTooltip);return(0,p.jsx)(Y,{present:n||l.open,children:l.disableHoverableContent?(0,p.jsx)(Q,{side:o,...i,ref:e}):(0,p.jsx)(we,{side:o,...i,ref:e})})}),we=s.forwardRef((r,e)=>{let t=R(C,r.__scopeTooltip),n=M(C,r.__scopeTooltip),o=s.useRef(null),i=K(e,o),[l,u]=s.useState(null),{trigger:a,onClose:f}=t,c=o.current,{onPointerInTransitChange:x}=n,h=s.useCallback(()=>{u(null),x(!1)},[x]),d=s.useCallback((g,m)=>{let v=g.currentTarget,b={x:g.clientX,y:g.clientY},y=_e(b,v.getBoundingClientRect()),T=Re(b,y),E=ke(m.getBoundingClientRect()),j=Pe([...T,...E]);u(j),x(!0)},[x]);return s.useEffect(()=>()=>h(),[h]),s.useEffect(()=>{if(a&&c){let g=v=>d(v,c),m=v=>d(v,a);return a.addEventListener("pointerleave",g),c.addEventListener("pointerleave",m),()=>{a.removeEventListener("pointerleave",g),c.removeEventListener("pointerleave",m)}}},[a,c,d,h]),s.useEffect(()=>{if(l){let g=m=>{let v=m.target,b={x:m.clientX,y:m.clientY},y=(a==null?void 0:a.contains(v))||(c==null?void 0:c.contains(v)),T=!De(b,l);y?h():T&&(h(),f())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[a,c,l,f,h]),(0,p.jsx)(Q,{...r,ref:i})}),[Ce,Te]=k(_,{isInside:!1}),Ee=re("TooltipContent"),Q=s.forwardRef((r,e)=>{let{__scopeTooltip:t,children:n,"aria-label":o,onEscapeKeyDown:i,onPointerDownOutside:l,...u}=r,a=R(C,t),f=D(t),{onClose:c}=a;return s.useEffect(()=>(document.addEventListener(O,c),()=>document.removeEventListener(O,c)),[c]),s.useEffect(()=>{if(a.trigger){let x=h=>{var d;(d=h.target)!=null&&d.contains(a.trigger)&&c()};return window.addEventListener("scroll",x,{capture:!0}),()=>window.removeEventListener("scroll",x,{capture:!0})}},[a.trigger,c]),(0,p.jsx)(pe,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:x=>x.preventDefault(),onDismiss:c,children:(0,p.jsxs)(ae,{"data-state":a.stateAttribute,...f,...u,ref:e,style:{...u.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[(0,p.jsx)(Ee,{children:n}),(0,p.jsx)(Ce,{scope:t,isInside:!0,children:(0,p.jsx)(ue,{id:a.contentId,role:"tooltip",children:o||n})})]})})});J.displayName=C;var U="TooltipArrow",je=s.forwardRef((r,e)=>{let{__scopeTooltip:t,...n}=r,o=D(t);return Te(U,t).isInside?null:(0,p.jsx)(fe,{...o,...n,ref:e})});je.displayName=U;function _e(r,e){let t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),o=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,n,o,i)){case i:return"left";case o:return"right";case t:return"top";case n:return"bottom";default:throw Error("unreachable")}}function Re(r,e,t=5){let n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function ke(r){let{top:e,right:t,bottom:n,left:o}=r;return[{x:o,y:e},{x:t,y:e},{x:t,y:n},{x:o,y:n}]}function De(r,e){let{x:t,y:n}=r,o=!1;for(let i=0,l=e.length-1;i<e.length;l=i++){let u=e[i],a=e[l],f=u.x,c=u.y,x=a.x,h=a.y;c>n!=h>n&&t<(x-f)*(n-c)/(h-c)+f&&(o=!o)}return o}function Pe(r){let e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),Le(e)}function Le(r){if(r.length<=1)return r.slice();let e=[];for(let n=0;n<r.length;n++){let o=r[n];for(;e.length>=2;){let i=e[e.length-1],l=e[e.length-2];if((i.x-l.x)*(o.y-l.y)>=(i.y-l.y)*(o.x-l.x))e.pop();else break}e.push(o)}e.pop();let t=[];for(let n=r.length-1;n>=0;n--){let o=r[n];for(;t.length>=2;){let i=t[t.length-1],l=t[t.length-2];if((i.x-l.x)*(o.y-l.y)>=(i.y-l.y)*(o.x-l.x))t.pop();else break}t.push(o)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var Oe=I,Me=q,Ie=G,V=J,B=L(ee()),Ne=r=>{let e=(0,B.c)(6),t,n;e[0]===r?(t=e[1],n=e[2]):({delayDuration:n,...t}=r,e[0]=r,e[1]=t,e[2]=n);let o=n===void 0?400:n,i;return e[3]!==o||e[4]!==t?(i=(0,p.jsx)(Oe,{delayDuration:o,...t}),e[3]=o,e[4]=t,e[5]=i):i=e[5],i},W=Me,Z=Ie,P=s.forwardRef((r,e)=>{let t=(0,B.c)(11),n,o,i;t[0]===r?(n=t[1],o=t[2],i=t[3]):({className:n,sideOffset:i,...o}=r,t[0]=r,t[1]=n,t[2]=o,t[3]=i);let l=i===void 0?4:i,u;t[4]===n?u=t[5]:(u=ne("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-xs data-[side=bottom]:slide-in-from-top-1 data-[side=left]:slide-in-from-right-1 data-[side=right]:slide-in-from-left-1 data-[side=top]:slide-in-from-bottom-1",n),t[4]=n,t[5]=u);let a;return t[6]!==o||t[7]!==e||t[8]!==l||t[9]!==u?(a=(0,p.jsx)(he,{children:(0,p.jsx)(V,{ref:e,sideOffset:l,className:u,...o})}),t[6]=o,t[7]=e,t[8]=l,t[9]=u,t[10]=a):a=t[10],a});P.displayName=V.displayName;var He=r=>{let e=(0,B.c)(22),t,n,o,i,l,u,a,f;e[0]===r?(t=e[1],n=e[2],o=e[3],i=e[4],l=e[5],u=e[6],a=e[7],f=e[8]):({content:o,children:n,usePortal:u,asChild:a,tabIndex:f,side:l,align:t,...i}=r,e[0]=r,e[1]=t,e[2]=n,e[3]=o,e[4]=i,e[5]=l,e[6]=u,e[7]=a,e[8]=f);let c=u===void 0?!0:u,x=a===void 0?!0:a;if(o==null||o==="")return n;let h;e[9]!==x||e[10]!==n||e[11]!==f?(h=(0,p.jsx)(Z,{asChild:x,tabIndex:f,children:n}),e[9]=x,e[10]=n,e[11]=f,e[12]=h):h=e[12];let d;e[13]!==t||e[14]!==o||e[15]!==l||e[16]!==c?(d=c?(0,p.jsx)(A,{children:(0,p.jsx)(P,{side:l,align:t,children:o})}):(0,p.jsx)(P,{side:l,align:t,children:o}),e[13]=t,e[14]=o,e[15]=l,e[16]=c,e[17]=d):d=e[17];let g;return e[18]!==i||e[19]!==h||e[20]!==d?(g=(0,p.jsxs)(W,{disableHoverableContent:!0,...i,children:[h,d]}),e[18]=i,e[19]=h,e[20]=d,e[21]=g):g=e[21],g};export{Z as a,W as i,P as n,A as o,Ne as r,I as s,He as t};
