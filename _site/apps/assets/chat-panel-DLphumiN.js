import{s as ne}from"./chunk-DZLz74EQ.js";import{i as zt,n as kt,r as Ye}from"./react-7g8sREeT.js";import{t as Dt}from"./react-BcIddLXZ.js";import{At as It,Et as Mt,en as Ft}from"./cells-B4cnsYe_.js";import"./react-dom-D6bRRS5R.js";import{C as Xe,E as Ot,F as Wt,z as Ze}from"./zod-BEi78Y5d.js";import{n as Ee,t as Ht}from"./jsx-runtime-DvsdsEjx.js";import"./_Uint8Array-CPNtPV0k.js";import"./isSymbol-D1Vf4s0g.js";import"./_arrayMap-DQI2GUNb.js";import"./toString-pPvo2488.js";import"./toNumber-Bjr00yqN.js";import"./toInteger-Qi6pclEF.js";import"./isArrayLikeObject-CQy5-FN4.js";import"./_getTag-C4fv2peH.js";import"./_baseIsEqual-Cdnsi4t8.js";import"./_toKey-BvVjBIlz.js";import"./memoize-D2QB0zzX.js";import"./get-Bi1nZ6vb.js";import"./merge-DrdmtLTL.js";import"./_baseSlice-B27Cqkm6.js";import"./upperFirst-CVedXayx.js";import"./_hasUnicode-CPHpt5EV.js";import"./capitalize-DcZ4F_0s.js";import"./_arrayReduce-DDpPg0Qh.js";import"./startCase-D58-CT5H.js";import"./_baseProperty-CIKnF2iY.js";import"./now-CKgsywea.js";import"./debounce-Bzqd6azt.js";import{t as Ut}from"./isEmpty-D1b_MAwx.js";import"./invariant-91cSKJcr.js";import"./client-CA946N69.js";import{t as ae}from"./Logger-BkkOJyg0.js";import"./hotkeys-CBY41Jr2.js";import{n as Yt,r as Xt}from"./utils-CfnN8i3Y.js";import"./constants-Cv7-oioA.js";import{a as qt}from"./config-DiCy6eC0.js";import"./useHotkey-CJ5v8JMM.js";import{a as ie}from"./dist-CLazWf1X.js";import{t as V}from"./cn-Dr9kMPPj.js";import"./dist-D-dnh2ed.js";import"./useEventListener-g9rPKvBX.js";import"./events-BGfCi1Xy.js";import{t as Y}from"./button-Bxk0BtBn.js";import"./dist-CoL9j4yJ.js";import"./dist-Cs8TISgf.js";import"./documentation-BZROoSma.js";import"./createReducer-BaSP2BKE.js";import{a as Vt}from"./key-BuxNhFKW.js";import"./preload-helper-CxnU7XTI.js";import"./dist-DIuPmJ5w.js";import"./dist-C69eWtaQ.js";import"./dist-DV-8bxFo.js";import"./dist-BMAXVGJe.js";import"./dist-Bzn1Zd0x.js";import"./dist-CL0hPMY6.js";import"./stex-CETff8Y9.js";import"./Deferred-BIEvCvJC.js";import"./uuid-BWz20PcF.js";import{t as Bt}from"./use-toast-C07-frN_.js";import"./main-Co0CqoDt.js";import"./marked.esm-BVjBUuHx.js";import"./connection-Cb7zku0y.js";import"./dist-B0vg88Aq.js";import"./useTheme-C5JyqXTm.js";import"./createLucideIcon-Be9UM2Pe.js";import{S as Jt,T as $t,c as et,d as Gt,f as Kt,g as Qt,l as Zt,m as er,n as tt,p as tr,u as rt,w as rr,x as or}from"./add-cell-with-ai-DCyfgnLI.js";import"./between-horizontal-start-CotWLlFt.js";import{n as qe,t as lr}from"./square-uM1ci7iL.js";import{c as sr,o as nr,t as ar}from"./ai-model-dropdown-Dk9Kz_pz.js";import{n as ot}from"./state-DaDgAzck.js";import"./type-C9leWRlU.js";import"./check-hL6-9SZK.js";import{a as ir,i as cr,n as dr,p as mr,r as ur,s as pr,t as hr}from"./select-CMG6DC3j.js";import"./chevron-right-Caf5yL5B.js";import"./ansi_up-ZmFuCItK.js";import{t as fr}from"./circle-check-big-C7DGeh12.js";import"./toDate-BartytS4.js";import{t as xr}from"./circle-x-t3DIkXqJ.js";import"./dropdown-menu-Bp1vhqcS.js";import"./copy-DAVB02c8.js";import"./download-qt61TbgC.js";import"./file-text-DNmaotaP.js";import"./file-DqkkCGhs.js";import"./image-DXGqie4b.js";import{n as lt}from"./spinner-CxlO4-GJ.js";import{n as vr,t as gr}from"./send-ePQN2mpH.js";import{t as br}from"./plus-C1zexBxS.js";import{r as wr}from"./input-Dm-m3XYB.js";import{t as jr}from"./settings-TIv8aSog.js";import"./useDeleteCell-DVNOLjwN.js";import"./form-xOqp67zT.js";import"./trash-2-GOPu47oc.js";import"./VisuallyHidden-DvpnK2wO.js";import{t as yr}from"./wrench-DNJq8NCj.js";import"./useNonce-Cw4ZAbgi.js";import"./badge-D5b5ze0K.js";import{S as B,g as he,h as J,v as Te,w as Sr,x as Nr}from"./namespace-BstGchRe.js";import{r as st,t as ce}from"./tooltip-BjoMzmCN.js";import"./useLifecycle-Bnvt0QrQ.js";import{u as Cr}from"./menu-items-COILZQ4q.js";import"./fullscreen-BFmvQx5m.js";import"./tslib.es6-DItc8Tbq.js";import{i as _r}from"./dates-grtSI02N.js";import"./en-US-B2g9dciI.js";import"./isValid-gOtpcPxn.js";import"./alert-dialog-M1dUQe7C.js";import"./dialog-B7icy1Vb.js";import{r as Rr}from"./useNumberFormatter-DYIEUCTe.js";import"./shim-Bk8nzKPV.js";import{n as $}from"./useEvent-BIiDVnhT.js";import"./useDebounce-9_rqRiHk.js";import"./strings-1yw0WVap.js";import"./errors-qtuExmE-.js";import"./copy-BiKQh0sU.js";import{t as Ar}from"./copy-icon-GGPHJWJ0.js";import{i as nt,n as at,r as it,t as ct}from"./accordion-C3CAEPwC.js";import"./extends--r5KbeWh.js";import"./objectWithoutPropertiesLoose-CGYpiDu4.js";import"./useAsyncData-BEqqunls.js";import{n as Er}from"./error-banner-ARu6PiHL.js";import"./kbd-DItNvBdP.js";import"./renderShortcut-DMYtt-ju.js";import"./label-COeaBwl_.js";import"./LazyAnyLanguageCodeMirror-DHH4zj72.js";import{i as Tr,r as Pr,t as Lr}from"./popover-CLp_lH16.js";import"./es-Hxx5X1vH.js";import"./dom-4KyFHEbl.js";import"./blob-DFrnsWYL.js";import"./esm-BR7TuyMc.js";import"./add-missing-import-Cwedhjm5.js";import"./icons-BUUt9FMo.js";import"./table-CE-j9Qo6.js";import"./links-CkROMZxn.js";import{r as dt,t as zr}from"./state-Do6Fn2Io.js";import"./tabs-C8HicIPZ.js";import"./focus-OWoLlKnm.js";import"./textarea-DhU2DWSB.js";import"./switch-BKaPFRvh.js";import{n as kr,r as Ve,t as Dr}from"./chat-components-DXkntpg4.js";import"./katex-DBBxCH7Z.js";import{t as mt}from"./empty-state-TdWBDq6n.js";var ut=ne(Ee()),h=ne(Dt(),1),o=ne(Ht(),1);function Ir(t,e){return h.useReducer((r,s)=>e[r][s]??r,t)}var Be="ScrollArea",[pt,dn]=Sr(Be),[Mr,F]=pt(Be),ht=h.forwardRef((t,e)=>{let{__scopeScrollArea:r,type:s="hover",dir:l,scrollHideDelay:n=600,...a}=t,[i,c]=h.useState(null),[m,d]=h.useState(null),[u,p]=h.useState(null),[x,w]=h.useState(null),[S,A]=h.useState(null),[f,b]=h.useState(0),[_,y]=h.useState(0),[v,N]=h.useState(!1),[E,T]=h.useState(!1),j=ie(e,P=>c(P)),C=Cr(l);return(0,o.jsx)(Mr,{scope:r,type:s,dir:C,scrollHideDelay:n,scrollArea:i,viewport:m,onViewportChange:d,content:u,onContentChange:p,scrollbarX:x,onScrollbarXChange:w,scrollbarXEnabled:v,onScrollbarXEnabledChange:N,scrollbarY:S,onScrollbarYChange:A,scrollbarYEnabled:E,onScrollbarYEnabledChange:T,onCornerWidthChange:b,onCornerHeightChange:y,children:(0,o.jsx)(he.div,{dir:C,...a,ref:j,style:{position:"relative","--radix-scroll-area-corner-width":f+"px","--radix-scroll-area-corner-height":_+"px",...t.style}})})});ht.displayName=Be;var ft="ScrollAreaViewport",xt=h.forwardRef((t,e)=>{let{__scopeScrollArea:r,children:s,nonce:l,...n}=t,a=F(ft,r),i=h.useRef(null),c=ie(e,i,a.onViewportChange);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),(0,o.jsx)(he.div,{"data-radix-scroll-area-viewport":"",...n,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:(0,o.jsx)("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});xt.displayName=ft;var U="ScrollAreaScrollbar",Je=h.forwardRef((t,e)=>{let{forceMount:r,...s}=t,l=F(U,t.__scopeScrollArea),{onScrollbarXEnabledChange:n,onScrollbarYEnabledChange:a}=l,i=t.orientation==="horizontal";return h.useEffect(()=>(i?n(!0):a(!0),()=>{i?n(!1):a(!1)}),[i,n,a]),l.type==="hover"?(0,o.jsx)(Fr,{...s,ref:e,forceMount:r}):l.type==="scroll"?(0,o.jsx)(Or,{...s,ref:e,forceMount:r}):l.type==="auto"?(0,o.jsx)(vt,{...s,ref:e,forceMount:r}):l.type==="always"?(0,o.jsx)($e,{...s,ref:e}):null});Je.displayName=U;var Fr=h.forwardRef((t,e)=>{let{forceMount:r,...s}=t,l=F(U,t.__scopeScrollArea),[n,a]=h.useState(!1);return h.useEffect(()=>{let i=l.scrollArea,c=0;if(i){let m=()=>{window.clearTimeout(c),a(!0)},d=()=>{c=window.setTimeout(()=>a(!1),l.scrollHideDelay)};return i.addEventListener("pointerenter",m),i.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),i.removeEventListener("pointerenter",m),i.removeEventListener("pointerleave",d)}}},[l.scrollArea,l.scrollHideDelay]),(0,o.jsx)(Te,{present:r||n,children:(0,o.jsx)(vt,{"data-state":n?"visible":"hidden",...s,ref:e})})}),Or=h.forwardRef((t,e)=>{let{forceMount:r,...s}=t,l=F(U,t.__scopeScrollArea),n=t.orientation==="horizontal",a=ke(()=>c("SCROLL_END"),100),[i,c]=Ir("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return h.useEffect(()=>{if(i==="idle"){let m=window.setTimeout(()=>c("HIDE"),l.scrollHideDelay);return()=>window.clearTimeout(m)}},[i,l.scrollHideDelay,c]),h.useEffect(()=>{let m=l.viewport,d=n?"scrollLeft":"scrollTop";if(m){let u=m[d],p=()=>{let x=m[d];u!==x&&(c("SCROLL"),a()),u=x};return m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[l.viewport,n,c,a]),(0,o.jsx)(Te,{present:r||i!=="hidden",children:(0,o.jsx)($e,{"data-state":i==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:B(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:B(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),vt=h.forwardRef((t,e)=>{let r=F(U,t.__scopeScrollArea),{forceMount:s,...l}=t,[n,a]=h.useState(!1),i=t.orientation==="horizontal",c=ke(()=>{if(r.viewport){let m=r.viewport.offsetWidth<r.viewport.scrollWidth,d=r.viewport.offsetHeight<r.viewport.scrollHeight;a(i?m:d)}},10);return de(r.viewport,c),de(r.content,c),(0,o.jsx)(Te,{present:s||n,children:(0,o.jsx)($e,{"data-state":n?"visible":"hidden",...l,ref:e})})}),$e=h.forwardRef((t,e)=>{let{orientation:r="vertical",...s}=t,l=F(U,t.__scopeScrollArea),n=h.useRef(null),a=h.useRef(0),[i,c]=h.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=yt(i.viewport,i.content),d={...s,sizes:i,onSizesChange:c,hasThumb:m>0&&m<1,onThumbChange:p=>n.current=p,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:p=>a.current=p};function u(p,x){return qr(p,a.current,i,x)}return r==="horizontal"?(0,o.jsx)(Wr,{...d,ref:e,onThumbPositionChange:()=>{if(l.viewport&&n.current){let p=l.viewport.scrollLeft,x=St(p,i,l.dir);n.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:p=>{l.viewport&&(l.viewport.scrollLeft=p)},onDragScroll:p=>{l.viewport&&(l.viewport.scrollLeft=u(p,l.dir))}}):r==="vertical"?(0,o.jsx)(Hr,{...d,ref:e,onThumbPositionChange:()=>{if(l.viewport&&n.current){let p=l.viewport.scrollTop,x=St(p,i);n.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:p=>{l.viewport&&(l.viewport.scrollTop=p)},onDragScroll:p=>{l.viewport&&(l.viewport.scrollTop=u(p))}}):null}),Wr=h.forwardRef((t,e)=>{let{sizes:r,onSizesChange:s,...l}=t,n=F(U,t.__scopeScrollArea),[a,i]=h.useState(),c=h.useRef(null),m=ie(e,c,n.onScrollbarXChange);return h.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),(0,o.jsx)(bt,{"data-orientation":"horizontal",...l,ref:m,sizes:r,style:{bottom:0,left:n.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:n.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ze(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,u)=>{if(n.viewport){let p=n.viewport.scrollLeft+d.deltaX;t.onWheelScroll(p),Ct(p,u)&&d.preventDefault()}},onResize:()=>{c.current&&n.viewport&&a&&s({content:n.viewport.scrollWidth,viewport:n.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Le(a.paddingLeft),paddingEnd:Le(a.paddingRight)}})}})}),Hr=h.forwardRef((t,e)=>{let{sizes:r,onSizesChange:s,...l}=t,n=F(U,t.__scopeScrollArea),[a,i]=h.useState(),c=h.useRef(null),m=ie(e,c,n.onScrollbarYChange);return h.useEffect(()=>{c.current&&i(getComputedStyle(c.current))},[c]),(0,o.jsx)(bt,{"data-orientation":"vertical",...l,ref:m,sizes:r,style:{top:0,right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ze(r)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,u)=>{if(n.viewport){let p=n.viewport.scrollTop+d.deltaY;t.onWheelScroll(p),Ct(p,u)&&d.preventDefault()}},onResize:()=>{c.current&&n.viewport&&a&&s({content:n.viewport.scrollHeight,viewport:n.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Le(a.paddingTop),paddingEnd:Le(a.paddingBottom)}})}})}),[Ur,gt]=pt(U),bt=h.forwardRef((t,e)=>{let{__scopeScrollArea:r,sizes:s,hasThumb:l,onThumbChange:n,onThumbPointerUp:a,onThumbPointerDown:i,onThumbPositionChange:c,onDragScroll:m,onWheelScroll:d,onResize:u,...p}=t,x=F(U,r),[w,S]=h.useState(null),A=ie(e,j=>S(j)),f=h.useRef(null),b=h.useRef(""),_=x.viewport,y=s.content-s.viewport,v=J(d),N=J(c),E=ke(u,10);function T(j){if(f.current){let C=j.clientX-f.current.left,P=j.clientY-f.current.top;m({x:C,y:P})}}return h.useEffect(()=>{let j=C=>{let P=C.target;w!=null&&w.contains(P)&&v(C,y)};return document.addEventListener("wheel",j,{passive:!1}),()=>document.removeEventListener("wheel",j,{passive:!1})},[_,w,y,v]),h.useEffect(N,[s,N]),de(w,E),de(x.content,E),(0,o.jsx)(Ur,{scope:r,scrollbar:w,hasThumb:l,onThumbChange:J(n),onThumbPointerUp:J(a),onThumbPositionChange:N,onThumbPointerDown:J(i),children:(0,o.jsx)(he.div,{...p,ref:A,style:{position:"absolute",...p.style},onPointerDown:B(t.onPointerDown,j=>{j.button===0&&(j.target.setPointerCapture(j.pointerId),f.current=w.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),T(j))}),onPointerMove:B(t.onPointerMove,T),onPointerUp:B(t.onPointerUp,j=>{let C=j.target;C.hasPointerCapture(j.pointerId)&&C.releasePointerCapture(j.pointerId),document.body.style.webkitUserSelect=b.current,x.viewport&&(x.viewport.style.scrollBehavior=""),f.current=null})})})}),Pe="ScrollAreaThumb",wt=h.forwardRef((t,e)=>{let{forceMount:r,...s}=t,l=gt(Pe,t.__scopeScrollArea);return(0,o.jsx)(Te,{present:r||l.hasThumb,children:(0,o.jsx)(Yr,{ref:e,...s})})}),Yr=h.forwardRef((t,e)=>{let{__scopeScrollArea:r,style:s,...l}=t,n=F(Pe,r),a=gt(Pe,r),{onThumbPositionChange:i}=a,c=ie(e,u=>a.onThumbChange(u)),m=h.useRef(void 0),d=ke(()=>{m.current&&(m.current=(m.current(),void 0))},100);return h.useEffect(()=>{let u=n.viewport;if(u){let p=()=>{d(),m.current||(m.current=Vr(u,i),i())};return i(),u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[n.viewport,d,i]),(0,o.jsx)(he.div,{"data-state":a.hasThumb?"visible":"hidden",...l,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:B(t.onPointerDownCapture,u=>{let p=u.target.getBoundingClientRect(),x=u.clientX-p.left,w=u.clientY-p.top;a.onThumbPointerDown({x,y:w})}),onPointerUp:B(t.onPointerUp,a.onThumbPointerUp)})});wt.displayName=Pe;var Ge="ScrollAreaCorner",jt=h.forwardRef((t,e)=>{let r=F(Ge,t.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?(0,o.jsx)(Xr,{...t,ref:e}):null});jt.displayName=Ge;var Xr=h.forwardRef((t,e)=>{let{__scopeScrollArea:r,...s}=t,l=F(Ge,r),[n,a]=h.useState(0),[i,c]=h.useState(0),m=!!(n&&i);return de(l.scrollbarX,()=>{var u;let d=((u=l.scrollbarX)==null?void 0:u.offsetHeight)||0;l.onCornerHeightChange(d),c(d)}),de(l.scrollbarY,()=>{var u;let d=((u=l.scrollbarY)==null?void 0:u.offsetWidth)||0;l.onCornerWidthChange(d),a(d)}),m?(0,o.jsx)(he.div,{...s,ref:e,style:{width:n,height:i,position:"absolute",right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Le(t){return t?parseInt(t,10):0}function yt(t,e){let r=t/e;return isNaN(r)?0:r}function ze(t){let e=yt(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=(t.scrollbar.size-r)*e;return Math.max(s,18)}function qr(t,e,r,s="ltr"){let l=ze(r),n=l/2,a=e||n,i=l-a,c=r.scrollbar.paddingStart+a,m=r.scrollbar.size-r.scrollbar.paddingEnd-i,d=r.content-r.viewport,u=s==="ltr"?[0,d]:[d*-1,0];return Nt([c,m],u)(t)}function St(t,e,r="ltr"){let s=ze(e),l=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=e.scrollbar.size-l,a=e.content-e.viewport,i=n-s,c=r==="ltr"?[0,a]:[a*-1,0],m=mr(t,c);return Nt([0,a],[0,i])(m)}function Nt(t,e){return r=>{if(t[0]===t[1]||e[0]===e[1])return e[0];let s=(e[1]-e[0])/(t[1]-t[0]);return e[0]+s*(r-t[0])}}function Ct(t,e){return t>0&&t<e}var Vr=(t,e=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},s=0;return(function l(){let n={left:t.scrollLeft,top:t.scrollTop},a=r.left!==n.left,i=r.top!==n.top;(a||i)&&e(),r=n,s=window.requestAnimationFrame(l)})(),()=>window.cancelAnimationFrame(s)};function ke(t,e){let r=J(t),s=h.useRef(0);return h.useEffect(()=>()=>window.clearTimeout(s.current),[]),h.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,e)},[r,e])}function de(t,e){let r=J(e);Nr(()=>{let s=0;if(t){let l=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return l.observe(t),()=>{window.cancelAnimationFrame(s),l.unobserve(t)}}},[t,r])}var _t=ht,Br=xt,Jr=jt,Rt=h.forwardRef((t,e)=>{let r=(0,ut.c)(15),s,l,n;r[0]===t?(s=r[1],l=r[2],n=r[3]):({className:l,children:s,...n}=t,r[0]=t,r[1]=s,r[2]=l,r[3]=n);let a;r[4]===l?a=r[5]:(a=V("relative overflow-hidden",l),r[4]=l,r[5]=a);let i;r[6]===s?i=r[7]:(i=(0,o.jsx)(Br,{className:"h-full w-full rounded-[inherit]",children:s}),r[6]=s,r[7]=i);let c,m;r[8]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(At,{}),m=(0,o.jsx)(Jr,{}),r[8]=c,r[9]=m):(c=r[8],m=r[9]);let d;return r[10]!==n||r[11]!==e||r[12]!==a||r[13]!==i?(d=(0,o.jsxs)(_t,{ref:e,className:a,...n,children:[i,c,m]}),r[10]=n,r[11]=e,r[12]=a,r[13]=i,r[14]=d):d=r[14],d});Rt.displayName=_t.displayName;var At=h.forwardRef((t,e)=>{let r=(0,ut.c)(14),s,l,n;r[0]===t?(s=r[1],l=r[2],n=r[3]):({className:s,orientation:n,...l}=t,r[0]=t,r[1]=s,r[2]=l,r[3]=n);let a=n===void 0?"vertical":n,i=a==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-px",c=a==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-px",m;r[4]!==s||r[5]!==i||r[6]!==c?(m=V("flex touch-none select-none transition-colors",i,c,s),r[4]=s,r[5]=i,r[6]=c,r[7]=m):m=r[7];let d;r[8]===Symbol.for("react.memo_cache_sentinel")?(d=(0,o.jsx)(wt,{className:"relative flex-1 rounded-full bg-border"}),r[8]=d):d=r[8];let u;return r[9]!==a||r[10]!==l||r[11]!==e||r[12]!==m?(u=(0,o.jsx)(Je,{ref:e,orientation:a,className:m,...l,children:d}),r[9]=a,r[10]=l,r[11]=e,r[12]=m,r[13]=u):u=r[13],u});At.displayName=Je.displayName;const $r=({chatState:t,chatId:e,messages:r})=>{if(!e)return ae.warn("No active chat"),t;let s=t.chats.get(e);if(!s)return ae.warn("No active chat"),t;let l=new Map(t.chats),n=Date.now();return l.set(s.id,{...s,messages:r,updatedAt:n}),{...t,chats:l}};var Gr=ne(Ee());const Kr=t=>{let e=(0,Gr.c)(13),{reasoning:r,index:s,isStreaming:l}=t,n=s===void 0?0:s,a=l===void 0?!1:l,i=a?"reasoning":void 0,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(qe,{className:"h-3 w-3"}),e[0]=c):c=e[0];let m=a?"Thinking":"View reasoning",d;e[1]!==r.length||e[2]!==m?(d=(0,o.jsx)(nt,{className:"text-xs text-muted-foreground hover:bg-muted/50 px-2 py-1 h-auto rounded-sm [&[data-state=open]>svg]:rotate-180",children:(0,o.jsxs)("span",{className:"flex items-center gap-2",children:[c,m," (",r.length," ","chars)"]})}),e[1]=r.length,e[2]=m,e[3]=d):d=e[3];let u;e[4]===r?u=e[5]:(u=(0,o.jsx)(at,{className:"pb-2 px-2",children:(0,o.jsx)("div",{className:"bg-muted/30 border border-muted/50 rounded-md p-3 italic text-muted-foreground/90 relative",children:(0,o.jsx)("div",{className:"pr-6",children:(0,o.jsx)(Ve,{content:r})})})}),e[4]=r,e[5]=u);let p;e[6]!==d||e[7]!==u?(p=(0,o.jsxs)(it,{value:"reasoning",className:"border-0",children:[d,u]}),e[6]=d,e[7]=u,e[8]=p):p=e[8];let x;return e[9]!==n||e[10]!==i||e[11]!==p?(x=(0,o.jsx)(ct,{type:"single",collapsible:!0,className:"w-full mb-2",value:i,children:p},n),e[9]=n,e[10]=i,e[11]=p,e[12]=x):x=e[12],x};var De=ne(Ee()),Qr=Wt({status:Ze().default("success"),auth_required:Ot().default(!1),action_url:Xe(),next_steps:Xe(),meta:Xe(),message:Ze().nullish()}).passthrough(),Zr=t=>{let e=(0,De.c)(12),{data:r}=t,s;if(e[0]!==r){let{status:l,auth_required:n,action_url:a,meta:i,next_steps:c,message:m,...d}=r,u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)("h3",{className:"text-xs font-semibold text-muted-foreground",children:"Tool Result"}),e[2]=u):u=e[2];let p;e[3]===l?p=e[4]:(p=(0,o.jsx)("span",{className:"text-xs px-2 py-0.5 bg-[var(--grass-2)] text-[var(--grass-11)] rounded-full font-medium capitalize",children:l}),e[3]=l,e[4]=p);let x;e[5]===n?x=e[6]:(x=n&&(0,o.jsx)("span",{className:"text-xs px-2 py-0.5 bg-[var(--amber-2)] text-[var(--amber-11)] rounded-full",children:"Auth Required"}),e[5]=n,e[6]=x);let w;e[7]!==p||e[8]!==x?(w=(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[u,(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[p,x]})]}),e[7]=p,e[8]=x,e[9]=w):w=e[9];let S;e[10]===m?S=e[11]:(S=m&&(0,o.jsxs)("div",{className:"flex items-start gap-2",children:[(0,o.jsx)(Mt,{className:"h-3 w-3 text-[var(--blue-11)] mt-0.5 flex-shrink-0"}),(0,o.jsx)("div",{className:"text-xs text-foreground",children:m})]}),e[10]=m,e[11]=S),s=(0,o.jsxs)("div",{className:"flex flex-col gap-1.5",children:[w,S,d&&(0,o.jsx)("div",{className:"space-y-3",children:Object.entries(d).map(oo)})]}),e[0]=r,e[1]=s}else s=e[1];return s},eo=t=>{let e=(0,De.c)(8),{result:r}=t,s;e[0]===r?s=e[1]:(s=Qr.safeParse(r),e[0]=r,e[1]=s);let l=s;if(l.success){let i;return e[2]===l.data?i=e[3]:(i=(0,o.jsx)(Zr,{data:l.data}),e[2]=l.data,e[3]=i),i}let n;e[4]===r?n=e[5]:(n=typeof r=="string"?r:JSON.stringify(r,null,2),e[4]=r,e[5]=n);let a;return e[6]===n?a=e[7]:(a=(0,o.jsx)("div",{className:"text-xs font-medium text-muted-foreground mb-1 max-h-64 overflow-y-auto scrollbar-thin",children:n}),e[6]=n,e[7]=a),a},to=t=>{let e=(0,De.c)(6),{input:r}=t;if(!(r&&r!==null))return null;let s=typeof r=="object"&&Object.keys(r).length>0,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)("h3",{className:"text-xs font-semibold text-muted-foreground",children:"Tool Request"}),e[0]=l):l=e[0];let n;e[1]!==r||e[2]!==s?(n=s?JSON.stringify(r,null,2):String(r),e[1]=r,e[2]=s,e[3]=n):n=e[3];let a;return e[4]===n?a=e[5]:(a=(0,o.jsxs)("div",{className:"space-y-2",children:[l,(0,o.jsx)("pre",{className:"bg-[var(--slate-2)] p-2 text-muted-foreground border border-[var(--slate-4)] rounded text-xs overflow-auto scrollbar-thin max-h-64",children:n})]}),e[4]=n,e[5]=a),a};const Et=t=>{let e=(0,De.c)(38),{toolName:r,result:s,error:l,index:n,state:a,className:i,input:c}=t,m=n===void 0?0:n,d=a==="output-available"&&(s||l),u=l?"error":d?"success":"loading",p;e[0]===u?p=e[1]:(p=()=>{switch(u){case"loading":return(0,o.jsx)(lt,{className:"h-3 w-3 animate-spin"});case"error":return(0,o.jsx)(xr,{className:"h-3 w-3 text-[var(--red-11)]"});case"success":return(0,o.jsx)(fr,{className:"h-3 w-3 text-[var(--grass-11)]"});default:return(0,o.jsx)(yr,{className:"h-3 w-3"})}},e[0]=u,e[1]=p);let x=p,w;e[2]!==l||e[3]!==d||e[4]!==u?(w=()=>u==="loading"?"Running":l?"Failed":d?"Done":"Tool call",e[2]=l,e[3]=d,e[4]=u,e[5]=w):w=e[5];let S=w,A=`tool-${m}`,f;e[6]===i?f=e[7]:(f=V("w-full",i),e[6]=i,e[7]=f);let b=u==="error"&&"text-[var(--red-11)]/80",_=u==="success"&&"text-[var(--grass-11)]/80",y;e[8]!==b||e[9]!==_?(y=V("h-6 text-xs border-border shadow-none! ring-0! bg-muted/60 hover:bg-muted py-0 px-2 gap-1 rounded-sm [&[data-state=open]>svg]:rotate-180 hover:no-underline",b,_),e[8]=b,e[9]=_,e[10]=y):y=e[10];let v;e[11]===x?v=e[12]:(v=x(),e[11]=x,e[12]=v);let N=S(),E;e[13]===r?E=e[14]:(E=ro(r),e[13]=r,e[14]=E);let T;e[15]===E?T=e[16]:(T=(0,o.jsx)("code",{className:"font-mono text-xs",children:E}),e[15]=E,e[16]=T);let j;e[17]!==N||e[18]!==T||e[19]!==v?(j=(0,o.jsxs)("span",{className:"flex items-center gap-1",children:[v,N,":",T]}),e[17]=N,e[18]=T,e[19]=v,e[20]=j):j=e[20];let C;e[21]!==j||e[22]!==y?(C=(0,o.jsx)(nt,{className:y,children:j}),e[21]=j,e[22]=y,e[23]=C):C=e[23];let P;e[24]!==l||e[25]!==d||e[26]!==c||e[27]!==s?(P=d&&(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsx)(to,{input:c}),s!=null&&(0,o.jsx)(eo,{result:s}),l&&(0,o.jsxs)("div",{className:"bg-[var(--red-2)] border border-[var(--red-6)] rounded-lg p-3",children:[(0,o.jsxs)("div",{className:"text-xs font-semibold text-[var(--red-11)] mb-2 flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-1.5 h-1.5 bg-[var(--red-9)] rounded-full"}),"Error"]}),(0,o.jsx)("div",{className:"text-sm text-[var(--red-11)] leading-relaxed",children:l})]})]}),e[24]=l,e[25]=d,e[26]=c,e[27]=s,e[28]=P):P=e[28];let I;e[29]===P?I=e[30]:(I=(0,o.jsx)(at,{className:"py-2 px-2",children:P}),e[29]=P,e[30]=I);let D;e[31]!==C||e[32]!==I?(D=(0,o.jsxs)(it,{value:"tool-call",className:"border-0",children:[C,I]}),e[31]=C,e[32]=I,e[33]=D):D=e[33];let z;return e[34]!==D||e[35]!==A||e[36]!==f?(z=(0,o.jsx)(ct,{type:"single",collapsible:!0,className:f,children:D},A),e[34]=D,e[35]=A,e[36]=f,e[37]=z):z=e[37],z};function ro(t){return t.replace("tool-","")}function oo(t){let[e,r]=t;return Ut(r)?null:(0,o.jsxs)("div",{className:"space-y-1.5",children:[(0,o.jsxs)("div",{className:"text-xs font-medium text-muted-foreground capitalize flex items-center gap-2",children:[(0,o.jsx)("div",{className:"w-1.5 h-1.5 bg-[var(--blue-9)] rounded-full"}),e]}),(0,o.jsx)("pre",{className:"bg-[var(--slate-2)] p-2 text-muted-foreground border border-[var(--slate-4)] rounded text-xs overflow-auto scrollbar-thin max-h-64",children:JSON.stringify(r,null,2)})]},e)}var fe=ne(Ee()),lo="manual",so=new Set(["openai","google","anthropic"]),no=["image/*","text/*"],ao=1024*1024*50,io=({onNewChat:t,activeChatId:e,setActiveChat:r})=>{let{handleClick:s}=ot(),l=Ye(dt),{locale:n}=Rr(),a=(0,h.useMemo)(()=>[...l.chats.values()].sort((i,c)=>c.updatedAt-i.updatedAt),[l.chats]);return(0,o.jsxs)("div",{className:"flex border-b px-2 py-1 justify-between shrink-0 items-center",children:[(0,o.jsx)(ce,{content:"New chat",children:(0,o.jsx)(Y,{variant:"text",size:"icon",onClick:t,children:(0,o.jsx)(br,{className:"h-4 w-4"})})}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(ce,{content:"AI Settings",children:(0,o.jsx)(Y,{variant:"text",size:"xs",className:"hover:bg-foreground/10 py-2",onClick:()=>s("ai"),children:(0,o.jsx)(jr,{className:"h-4 w-4"})})}),(0,o.jsxs)(Lr,{children:[(0,o.jsx)(ce,{content:"Previous chats",children:(0,o.jsx)(Tr,{asChild:!0,children:(0,o.jsx)(Y,{variant:"text",size:"icon",children:(0,o.jsx)(It,{className:"h-4 w-4"})})})}),(0,o.jsx)(Pr,{className:"w-[520px] p-0",align:"start",side:"right",children:(0,o.jsx)(Rt,{className:"h-[500px] p-4",children:(0,o.jsxs)("div",{className:"space-y-4",children:[a.length===0&&(0,o.jsx)(mt,{title:"No chats yet",description:"Start a new chat to get started",icon:(0,o.jsx)(qe,{})}),a.map(i=>(0,o.jsxs)("button",{className:V("w-full p-3 rounded-md cursor-pointer hover:bg-accent text-left",i.id===e&&"bg-accent"),onClick:()=>{r(i.id)},type:"button",children:[(0,o.jsx)("div",{className:"font-medium",children:i.title}),(0,o.jsx)("div",{className:"text-sm text-muted-foreground",children:_r(i.updatedAt,n)})]},i.id))]})})})]})]})]})};function co(t){return t.type.startsWith("tool-")}var Tt=(0,h.memo)(t=>{let e=(0,fe.c)(15),{message:r,index:s,onEdit:l,isStreamingReasoning:n,isLast:a}=t,i;e[0]!==s||e[1]!==l?(i=S=>{var b,_,y;let A=(_=(b=S.parts)==null?void 0:b.filter(ho))==null?void 0:_.map(fo).join(`
`),f=(y=S.parts)==null?void 0:y.filter(xo);return(0,o.jsxs)("div",{className:"w-[95%] bg-background border p-1 rounded-sm",children:[f==null?void 0:f.map(vo),(0,o.jsx)(tt,{value:A,placeholder:"Type your message...",onChange:go,onSubmit:(v,N)=>{N.trim()&&l(s,N)},onClose:bo},S.id)]})},e[0]=s,e[1]=l,e[2]=i):i=e[2];let c=i,m;e[3]!==a||e[4]!==n?(m=S=>{let A=S.parts.filter(wo).map(jo).join(`
`);return(0,o.jsxs)("div",{className:"w-[95%] break-words",children:[(0,o.jsx)("div",{className:"absolute right-1 top-1 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,o.jsx)(Ar,{className:"h-3 w-3",value:A||""})}),S.parts.map((f,b)=>{if(co(f))return(0,o.jsx)(Et,{index:b,toolName:f.type,result:f.output,className:"my-2",state:f.state,input:f.input},b);switch(f.type){case"text":return(0,o.jsx)(Ve,{content:f.text},b);case"reasoning":return(0,o.jsx)(Kr,{reasoning:f.text,index:b,isStreaming:a&&n&&b===(S.parts.length||0)-1},b);case"dynamic-tool":return(0,o.jsx)(Et,{index:b,toolName:f.type,result:f.output,state:f.state,input:f.input,className:"my-2"},b);case"data-reasoning-signature":return null;default:if(f.type.startsWith("data-"))return ae.log("Found data part",f),null;ae.error("Unhandled part type:",f.type);try{return(0,o.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,o.jsx)(Ve,{content:JSON.stringify(f,null,2)})},b)}catch(_){let y=_;return ae.error("Error rendering part:",f.type,y),null}}})]})},e[3]=a,e[4]=n,e[5]=m):m=e[5];let d=m,u=r.role==="user"?"justify-end":"justify-start",p;e[6]===u?p=e[7]:(p=V("flex group relative",u),e[6]=u,e[7]=p);let x;e[8]!==r||e[9]!==d||e[10]!==c?(x=r.role==="user"?c(r):d(r),e[8]=r,e[9]=d,e[10]=c,e[11]=x):x=e[11];let w;return e[12]!==p||e[13]!==x?(w=(0,o.jsx)("div",{className:p,children:x}),e[12]=p,e[13]=x,e[14]=w):w=e[14],w});Tt.displayName="ChatMessage";var Pt=(0,h.memo)(t=>{var k;let e=(0,fe.c)(37),{isEmpty:r,onSendClick:s,isLoading:l,onStop:n,fileInputRef:a,onAddFiles:i,onAddContext:c}=t,m=Ye(Yt),d=(m==null?void 0:m.mode)||lo,u=((k=m==null?void 0:m.models)==null?void 0:k.chat_model)||"openai/gpt-4o",p=nr.parse(u).providerId,{saveModeChange:x}=sr(),w;e[0]===Symbol.for("react.memo_cache_sentinel")?(w=[{value:"ask",label:"Ask",subtitle:"Use AI with access to read-only tools like documentation search"},{value:"manual",label:"Manual",subtitle:"Pure chat, no tool usage"}],e[0]=w):w=e[0];let S=w,A=so.has(p),f;e[1]===d?f=e[2]:(f=(0,o.jsx)(pr,{className:"h-6 text-xs border-border shadow-none! ring-0! bg-muted hover:bg-muted/30 py-0 px-2 gap-1 capitalize",children:d}),e[1]=d,e[2]=f);let b;e[3]===Symbol.for("react.memo_cache_sentinel")?(b=(0,o.jsx)(ir,{children:"AI Mode"}),e[3]=b):b=e[3];let _;e[4]===S?_=e[5]:(_=(0,o.jsx)(dr,{children:(0,o.jsxs)(ur,{children:[b,S.map(yo)]})}),e[4]=S,e[5]=_);let y;e[6]!==d||e[7]!==x||e[8]!==f||e[9]!==_?(y=(0,o.jsx)(Ft,{feature:"chat_modes",children:(0,o.jsxs)(hr,{value:d,onValueChange:x,children:[f,_]})}),e[6]=d,e[7]=x,e[8]=f,e[9]=_,e[10]=y):y=e[10];let v;e[11]===Symbol.for("react.memo_cache_sentinel")?(v=(0,o.jsx)(ar,{placeholder:"Model",triggerClassName:"h-6 text-xs shadow-none! ring-0! bg-muted hover:bg-muted/30 rounded-sm",iconSize:"small",showAddCustomModelDocs:!0,forRole:"chat"}),e[11]=v):v=e[11];let N;e[12]===y?N=e[13]:(N=(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[y,v]}),e[12]=y,e[13]=N);let E;e[14]===Symbol.for("react.memo_cache_sentinel")?(E=(0,o.jsx)($t,{className:"h-3.5 w-3.5"}),e[14]=E):E=e[14];let T;e[15]===c?T=e[16]:(T=(0,o.jsx)(ce,{content:"Add context",children:(0,o.jsx)(Y,{variant:"text",size:"icon",onClick:c,children:E})}),e[15]=c,e[16]=T);let j;e[17]!==a||e[18]!==A||e[19]!==i?(j=A&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ce,{content:"Attach a file",children:(0,o.jsx)(Y,{variant:"text",size:"icon",className:"cursor-pointer",onClick:()=>{var H;return(H=a.current)==null?void 0:H.click()},title:"Attach a file",children:(0,o.jsx)(vr,{className:"h-3.5 w-3.5"})})}),(0,o.jsx)(wr,{ref:a,type:"file",multiple:!0,hidden:!0,onChange:H=>{H.target.files&&i([...H.target.files])},accept:no.join(",")})]}),e[17]=a,e[18]=A,e[19]=i,e[20]=j):j=e[20];let C=l?"Stop":"Submit",P=l?n:s,I=l?!1:r,D;e[21]===l?D=e[22]:(D=l?(0,o.jsx)(lr,{className:"h-3 w-3 fill-current"}):(0,o.jsx)(gr,{className:"h-3 w-3"}),e[21]=l,e[22]=D);let z;e[23]!==P||e[24]!==I||e[25]!==D?(z=(0,o.jsx)(Y,{variant:"text",size:"sm",className:"h-6 w-6 p-0 hover:bg-muted/30 cursor-pointer",onClick:P,disabled:I,children:D}),e[23]=P,e[24]=I,e[25]=D,e[26]=z):z=e[26];let O;e[27]!==C||e[28]!==z?(O=(0,o.jsx)(ce,{content:C,children:z}),e[27]=C,e[28]=z,e[29]=O):O=e[29];let W;e[30]!==j||e[31]!==O||e[32]!==T?(W=(0,o.jsxs)("div",{className:"flex flex-row",children:[T,j,O]}),e[30]=j,e[31]=O,e[32]=T,e[33]=W):W=e[33];let X;return e[34]!==W||e[35]!==N?(X=(0,o.jsx)(st,{children:(0,o.jsxs)("div",{className:"px-3 py-2 border-t border-border/20 flex flex-row items-center justify-between",children:[N,W]})}),e[34]=W,e[35]=N,e[36]=X):X=e[36],X});Pt.displayName="ChatInputFooter";var Ke=(0,h.memo)(t=>{let e=(0,fe.c)(29),{placeholder:r,input:s,inputClassName:l,setInput:n,onSubmit:a,inputRef:i,isLoading:c,onStop:m,fileInputRef:d,onAddFiles:u,onClose:p}=t,x;e[0]!==s||e[1]!==a?(x=()=>{s.trim()&&a(void 0,s)},e[0]=s,e[1]=a,e[2]=x):x=e[2];let w=$(x),S;e[3]===l?S=e[4]:(S=V("px-2 py-3 flex-1",l),e[3]=l,e[4]=S);let A=r||"Type your message...",f;e[5]!==s||e[6]!==i||e[7]!==u||e[8]!==p||e[9]!==a||e[10]!==n||e[11]!==A?(f=(0,o.jsx)(tt,{inputRef:i,value:s,onChange:n,onSubmit:a,onClose:p,onAddFiles:u,placeholder:A}),e[5]=s,e[6]=i,e[7]=u,e[8]=p,e[9]=a,e[10]=n,e[11]=A,e[12]=f):f=e[12];let b;e[13]!==S||e[14]!==f?(b=(0,o.jsx)("div",{className:S,children:f}),e[13]=S,e[14]=f,e[15]=b):b=e[15];let _=!s.trim(),y;e[16]===i?y=e[17]:(y=()=>Qt(i),e[16]=i,e[17]=y);let v;e[18]!==d||e[19]!==w||e[20]!==c||e[21]!==u||e[22]!==m||e[23]!==_||e[24]!==y?(v=(0,o.jsx)(Pt,{isEmpty:_,onAddContext:y,onSendClick:w,isLoading:c,onStop:m,fileInputRef:d,onAddFiles:u}),e[18]=d,e[19]=w,e[20]=c,e[21]=u,e[22]=m,e[23]=_,e[24]=y,e[25]=v):v=e[25];let N;return e[26]!==b||e[27]!==v?(N=(0,o.jsxs)("div",{className:"relative shrink-0 min-h-[80px] flex flex-col border-t",children:[b,v]}),e[26]=b,e[27]=v,e[28]=N):N=e[28],N});Ke.displayName="ChatInput";var mo=()=>{let t=(0,fe.c)(6),e=Ye(Xt),{handleClick:r}=ot();if(!e){let l;t[0]===r?l=t[1]:(l=(0,o.jsx)(Y,{variant:"outline",size:"sm",onClick:()=>r("ai"),children:"Edit AI settings"}),t[0]=r,t[1]=l);let n;t[2]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(qe,{}),t[2]=n):n=t[2];let a;return t[3]===l?a=t[4]:(a=(0,o.jsx)(mt,{title:"Chat with AI",description:"AI is currently disabled. Add your API key to enable.",action:l,icon:n}),t[3]=l,t[4]=a),a}let s;return t[5]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)(uo,{}),t[5]=s):s=t[5],s},uo=()=>{let t=(0,fe.c)(86),e=zt(dt),[r,s]=kt(zr),[l,n]=(0,h.useState)(""),[a,i]=(0,h.useState)(""),[c,m]=(0,h.useState)(),d=(0,h.useRef)(null),u=(0,h.useRef)(null),p=(0,h.useRef)(null),x=(0,h.useRef)(null),w=(0,h.useRef)(null),S=qt(),{invokeAiTool:A}=Vt(),f=r==null?void 0:r.id,b;t[0]===(r==null?void 0:r.messages)?b=t[1]:(b=(r==null?void 0:r.messages)||[],t[0]=r==null?void 0:r.messages,t[1]=b);let _;t[2]===S?_=t[3]:(_=new rr({api:S.getAiURL("chat").toString(),headers:S.headers(),prepareSendMessagesRequest:No}),t[2]=S,t[3]=_);let y;t[4]===e?y=t[5]:(y=g=>{let{messages:R}=g;e(L=>$r({chatState:L,chatId:L.activeChatId,messages:R}))},t[4]=e,t[5]=y);let{messages:v,sendMessage:N,error:E,status:T,regenerate:j,stop:C,addToolResult:P,id:I}=Jt({id:f,sendAutomaticallyWhen:So,messages:b,transport:_,onFinish:y,onToolCall:async g=>{let{toolCall:R}=g;await Kt({invokeAiTool:A,addToolResult:D,toolCall:{toolName:R.toolName,toolCallId:R.toolCallId,input:R.input}})},onError:Co}),D=P,z;t[6]===Symbol.for("react.memo_cache_sentinel")?(z=g=>{if(g.length===0)return;let R=0;for(let L of g)R+=L.size;if(R>ao){Bt({title:"File size exceeds 50MB limit",description:"Please remove some files and try again."});return}m(L=>[...L??[],...g])},t[6]=z):z=t[6];let O=$(z),W;t[7]===c?W=t[8]:(W=g=>{c&&m(c.filter(R=>R!==g))},t[7]=c,t[8]=W);let X=$(W),k=T==="submitted"||T==="streaming",H;t[9]!==k||t[10]!==v?(H=k&&v.length>0&&er(v),t[9]=k,t[10]=v,t[11]=H):H=t[11];let me=H,xe;t[12]===Symbol.for("react.memo_cache_sentinel")?(xe=()=>{requestAnimationFrame(()=>{if(p.current){let g=p.current;g.scrollTop=g.scrollHeight}})},t[12]=xe):xe=t[12];let ve;t[13]===f?ve=t[14]:(ve=[f],t[13]=f,t[14]=ve),(0,h.useEffect)(xe,ve);let ge;t[15]!==I||t[16]!==N||t[17]!==e?(ge=async(g,R)=>{let L=Date.now(),q={id:I,title:Gt(g),messages:[],createdAt:L,updatedAt:L};e(pe=>{let Qe=new Map(pe.chats);return Qe.set(q.id,q),{...pe,chats:Qe,activeChatId:q.id}});let Ue=R&&R.length>0?await rt(R):void 0;N({role:"user",parts:[{type:"text",text:g},...Ue??[]]}),m(void 0),n("")},t[15]=I,t[16]=N,t[17]=e,t[18]=ge):ge=t[18];let Ie=ge,be;t[19]===s?be=t[20]:(be=()=>{s(null),n(""),i(""),m(void 0)},t[19]=s,t[20]=be);let Me=$(be),we;t[21]!==v||t[22]!==N?(we=(g,R)=>{var pe;let L=v[g],q=(pe=L.parts)==null?void 0:pe.filter(_o),Ue=L.id;N({messageId:Ue,role:"user",parts:[{type:"text",text:R},...q]})},t[21]=v,t[22]=N,t[23]=we):we=t[23];let ue=$(we),je;t[24]!==c||t[25]!==N?(je=async(g,R)=>{var q;if(!R.trim())return;(q=u.current)!=null&&q.view&&et(u.current.view);let L=c?await rt(c):void 0;g==null||g.preventDefault(),N({text:R,files:L}),n(""),m(void 0)},t[24]=c,t[25]=N,t[26]=je):je=t[26];let Fe=$(je),ye;t[27]===j?ye=t[28]:(ye=()=>{j()},t[27]=j,t[28]=ye);let Oe=ye,Se;t[29]!==Ie||t[30]!==c||t[31]!==a?(Se=()=>{var g;a.trim()&&((g=d.current)!=null&&g.view&&et(d.current.view),Ie(a.trim(),c))},t[29]=Ie,t[30]=c,t[31]=a,t[32]=Se):Se=t[32];let We=$(Se),Ne;t[33]===Symbol.for("react.memo_cache_sentinel")?(Ne=()=>{var g,R;return(R=(g=d.current)==null?void 0:g.editor)==null?void 0:R.blur()},t[33]=Ne):Ne=t[33];let Lt=Ne,M=v.length===0,Ce;t[34]!==Fe||t[35]!==We||t[36]!==l||t[37]!==k||t[38]!==M||t[39]!==a||t[40]!==O||t[41]!==C?(Ce=M?(0,o.jsx)(Ke,{placeholder:"Ask anything, @ to include context about tables or dataframes",input:a,inputRef:d,inputClassName:"px-1 py-0",setInput:i,onSubmit:We,isLoading:k,onStop:C,fileInputRef:x,onAddFiles:O,onClose:Lt},"new-thread-input"):(0,o.jsx)(Ke,{input:l,setInput:n,onSubmit:Fe,inputRef:u,isLoading:k,onStop:C,onClose:()=>{var g,R;return(R=(g=u.current)==null?void 0:g.editor)==null?void 0:R.blur()},fileInputRef:x,onAddFiles:O}),t[34]=Fe,t[35]=We,t[36]=l,t[37]=k,t[38]=M,t[39]=a,t[40]=O,t[41]=C,t[42]=Ce):Ce=t[42];let G=Ce,_e;t[43]!==c||t[44]!==M||t[45]!==X?(_e=c&&c.length>0&&(0,o.jsx)("div",{className:V("flex flex-row gap-1 flex-wrap p-1",M&&"py-2 px-1"),children:c==null?void 0:c.map(g=>(0,o.jsx)(kr,{file:g,onRemove:()=>X(g)},g.name))}),t[43]=c,t[44]=M,t[45]=X,t[46]=_e):_e=t[46];let K=_e,He=r==null?void 0:r.id,Q;t[47]!==Me||t[48]!==s||t[49]!==He?(Q=(0,o.jsx)(st,{children:(0,o.jsx)(io,{onNewChat:Me,activeChatId:He,setActiveChat:s})}),t[47]=Me,t[48]=s,t[49]=He,t[50]=Q):Q=t[50];let Z;t[51]!==G||t[52]!==K||t[53]!==M?(Z=M&&(0,o.jsxs)("div",{className:"rounded-md border bg-background",children:[K,G]}),t[51]=G,t[52]=K,t[53]=M,t[54]=Z):Z=t[54];let ee;if(t[55]!==ue||t[56]!==me||t[57]!==v){let g;t[59]!==ue||t[60]!==me||t[61]!==v.length?(g=(R,L)=>(0,o.jsx)(Tt,{message:R,index:L,onEdit:ue,isStreamingReasoning:me,isLast:L===v.length-1},R.id),t[59]=ue,t[60]=me,t[61]=v.length,t[62]=g):g=t[62],ee=v.map(g),t[55]=ue,t[56]=me,t[57]=v,t[58]=ee}else ee=t[58];let te;t[63]===k?te=t[64]:(te=k&&(0,o.jsx)("div",{className:"flex justify-center py-4",children:(0,o.jsx)(lt,{className:"h-4 w-4 animate-spin"})}),t[63]=k,t[64]=te);let re;t[65]!==E||t[66]!==Oe?(re=E&&(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[(0,o.jsx)(Er,{error:E}),(0,o.jsx)(Y,{variant:"outline",size:"sm",onClick:Oe,children:"Retry"})]}),t[65]=E,t[66]=Oe,t[67]=re):re=t[67];let Re;t[68]===Symbol.for("react.memo_cache_sentinel")?(Re=(0,o.jsx)("div",{ref:w}),t[68]=Re):Re=t[68];let oe;t[69]!==Z||t[70]!==ee||t[71]!==te||t[72]!==re?(oe=(0,o.jsxs)("div",{className:"flex-1 px-3 bg-(--slate-1) gap-4 py-3 flex flex-col overflow-y-auto",ref:p,children:[Z,ee,te,re,Re]}),t[69]=Z,t[70]=ee,t[71]=te,t[72]=re,t[73]=oe):oe=t[73];let le;t[74]!==k||t[75]!==C?(le=k&&(0,o.jsx)("div",{className:"w-full flex justify-center items-center z-20 border-t",children:(0,o.jsx)(Y,{variant:"linkDestructive",size:"sm",onClick:C,children:"Stop"})}),t[74]=k,t[75]=C,t[76]=le):le=t[76];let se;t[77]!==G||t[78]!==K||t[79]!==M?(se=!M&&(0,o.jsxs)(o.Fragment,{children:[K,G]}),t[77]=G,t[78]=K,t[79]=M,t[80]=se):se=t[80];let Ae;return t[81]!==Q||t[82]!==oe||t[83]!==le||t[84]!==se?(Ae=(0,o.jsxs)("div",{className:"flex flex-col h-[calc(100%-53px)]",children:[Q,oe,le,se]}),t[81]=Q,t[82]=oe,t[83]=le,t[84]=se,t[85]=Ae):Ae=t[85],Ae},po=mo;function ho(t){return t.type==="text"}function fo(t){return t.text}function xo(t){return t.type==="file"}function vo(t,e){return(0,o.jsx)(Dr,{attachment:t},e)}function go(){}function bo(){}function wo(t){return t.type==="text"}function jo(t){return t.text}function yo(t){return(0,o.jsx)(cr,{value:t.value,className:"text-xs",children:(0,o.jsxs)("div",{className:"flex flex-col",children:[t.label,(0,o.jsx)("div",{className:"text-muted-foreground text-xs pt-1 block",children:t.subtitle})]})},t.value)}function So(t){let{messages:e}=t;return tr(e)}async function No(t){let e=await Zt(t.messages);return{body:{tools:or.getToolSchemas(),...t,...e}}}function Co(t){ae.error("An error occurred:",t)}function _o(t){return t.type==="file"}export{po as default};
