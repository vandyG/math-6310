const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./esm-hOS9Yf3s.js","./precisionRound-CR2cxaaR.js","./defaultLocale-BCtmQtCj.js","./linear-BI0LBATm.js","./timer-m_pEB4Lb.js","./chunk-DZLz74EQ.js","./init-BEfLCoUT.js","./src-BOK-SWX4.js","./time-Dzg4b75Q.js","./defaultLocale-DU4zdxes.js","./range-CJAH1fu_.js","./vega-loader.browser.module-Jwd7L8Ye.js","./treemap-CMOdyZ8L.js","./path-Gc-fQZTe.js","./colors-BlRVeShK.js","./ordinal-DO1z0TEs.js","./arc-De5rudRM.js","./math-BsaXoFIn.js","./array-DZFD9yN1.js","./step-aJ-oEw6-.js","./line-1VYCafWO.js","./fast-deep-equal-DT2Tke28.js","./esm-BIF8NHm8.js","./prop-types-Bv8iPqhZ.js","./react-BcIddLXZ.js","./tslib.es6-DItc8Tbq.js"])))=>i.map(i=>d[i]);
var di=Object.defineProperty;var ci=(C,W,pe)=>W in C?di(C,W,{enumerable:!0,configurable:!0,writable:!0,value:pe}):C[W]=pe;var Ie=(C,W,pe)=>ci(C,typeof W!="symbol"?W+"":W,pe);import{s as N}from"./chunk-DZLz74EQ.js";import{a as Pl,c as gi,l as Al,o as re,r as Dl,t as mi}from"./react-7g8sREeT.js";import{t as pi}from"./react-BcIddLXZ.js";import{$n as fi,Hr as hi,Mt as El,Rr as xi,Ur as wi,bt as bi,gr as yi,hr as Si,mr as Ci,mt as Ze,p as vi,vt as zl,wr as ji,__tla as Ri}from"./cells-B4cnsYe_.js";import{n as A,t as _i}from"./jsx-runtime-DvsdsEjx.js";import{t as Fi}from"./capitalize-DcZ4F_0s.js";import{i as Mi,o as ki,t as J}from"./invariant-91cSKJcr.js";import{i as Ii,n as Ni,t as Tl}from"./loader-CPDA0quD.js";import{t as Qe}from"./range-Dsq9WHSI.js";import{n as Vi,t as Ce}from"./Logger-BkkOJyg0.js";import{a as Ne}from"./hotkeys-CBY41Jr2.js";import{r as Pi}from"./utils-CfnN8i3Y.js";import{g as Ol,n as Ai}from"./config-DiCy6eC0.js";import{t as Hl}from"./ErrorBoundary-CeiDOU5x.js";import{t as M}from"./cn-Dr9kMPPj.js";import{t as X}from"./events-BGfCi1Xy.js";import{t as D}from"./button-Bxk0BtBn.js";import{et as Di}from"./dist-CoL9j4yJ.js";import{r as Ll}from"./documentation-BZROoSma.js";import{t as Ei}from"./createReducer-BaSP2BKE.js";import{r as Gl}from"./key-BuxNhFKW.js";import{t as ql}from"./preload-helper-CxnU7XTI.js";import{t as Nt}from"./use-toast-C07-frN_.js";import{r as $l}from"./useTheme-C5JyqXTm.js";import{t as k}from"./createLucideIcon-Be9UM2Pe.js";import{_ as Vt,a as zi,c as Bl,h as Ul,i as et,n as Wl,o as Ti,r as Oi,s as Kl,t as Yl}from"./select-CMG6DC3j.js";import{a as Hi,n as Li}from"./download-C4Fyu6kU.js";import{t as Gi}from"./chevron-right-Caf5yL5B.js";import{d as qi,f as Jl,p as $i,t as Bi,u as Ui}from"./maps-CxCIYhRT.js";import{a as Wi,i as Ki,l as Yi,n as tt,r as Ji,s as Xi,t as Zi,u as Pt}from"./ansi_up-ZmFuCItK.js";import{a as V,c as ve,d as Ve,f as At,p as Dt,r as Et,s as nt,t as zt,u as je}from"./dropdown-menu-Bp1vhqcS.js";import{t as Xl}from"./copy-DAVB02c8.js";import{t as Qi}from"./list-filter-D2Wx3thV.js";import{n as es,t as Zl}from"./spinner-CxlO4-GJ.js";import{t as ts}from"./MarimoErrorOutput-CUb4AQdT.js";import{Ft as Tt,o as Ql,r as ns}from"./input-Dm-m3XYB.js";import{n as ls,r as ce}from"./useNonce-Cw4ZAbgi.js";import{t as as}from"./badge-D5b5ze0K.js";import{t as $}from"./tooltip-BjoMzmCN.js";import{a as os,n as rs,r as is,t as ss}from"./dates-grtSI02N.js";import{r as ge}from"./useNumberFormatter-DYIEUCTe.js";import{t as lt}from"./useDateFormatter-DjmrLzxH.js";import{n as ie}from"./useEvent-BIiDVnhT.js";import{n as us}from"./vega-loader.browser.module-Jwd7L8Ye.js";import{t as at}from"./copy-BiKQh0sU.js";import{t as ea}from"./RenderHTML-BCi_V67U.js";import{n as ds,r as cs,t as gs}from"./accordion-C3CAEPwC.js";import{a as ms,i as ps,n as fs,o as ta,r as hs,t as na}from"./JsonOutput-E2xVojk5.js";import{n as xs}from"./useAsyncData-BEqqunls.js";import{n as la,t as ws}from"./error-banner-ARu6PiHL.js";import{t as bs}from"./kbd-DItNvBdP.js";import{t as ys,__tla as Ss}from"./LazyAnyLanguageCodeMirror-DHH4zj72.js";import{i as Ot,n as Cs,o as vs,r as Ht,t as Lt}from"./popover-CLp_lH16.js";import{a as js,o as aa,r as Rs,s as _s,t as Fs}from"./command-CMralWVx.js";import{n as G,r as Gt,t as Ms}from"./numbers-DtHKLeOn.js";import{a as ks,i as Is,n as Ns,o as qt,r as oa,t as Vs}from"./table-CE-j9Qo6.js";import{t as Ps}from"./formats-C8bbggqj.js";import{r as As}from"./cell-link-woRE950-.js";import{i as Ds,n as Es,r as zs,t as Ts}from"./tabs-C8HicIPZ.js";let ot,$t,Bt,Ut,rt,ra,Wt,Kt,Yt,Jt,Xt,Zt,ia,Qt,Pe,en,tn,nn,ln,an,sa,on,rn,sn,ua,un,da,dn,cn,gn,ca,ga,mn,pn,me,fn,hn,ma,pa,fa,ha,xa,xn,wn,bn,Os=Promise.all([(()=>{try{return Ri}catch{}})(),(()=>{try{return Ss}catch{}})()]).then(async()=>{var ue;var C=N(pi(),1),W=new WeakMap;function pe(t,e){let n=Pl(e),l=yn(n);for(let[a,...o]of t)(!l.has(a)||e!=null&&e.dangerouslyForceHydrate)&&(l.add(a),n.set(a,...o))}let yn,Sn,Cn,vn,it,jn,Rn,_n,Fn,Mn,kn,In,Nn,Vn,Pn,An,Dn,En,r;yn=t=>{let e=W.get(t);return e||(e=new WeakSet,W.set(t,e)),e},Sn=k("align-justify",[["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 18h18",key:"1h113x"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]),Wt=k("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),Cn=k("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),vn=k("brick-wall",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 9v6",key:"199k2o"}],["path",{d:"M16 15v6",key:"8rj2es"}],["path",{d:"M16 3v6",key:"1j6rpj"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M8 15v6",key:"1stoo3"}],["path",{d:"M8 3v6",key:"vlvjmk"}]]),it=k("bug-play",[["path",{d:"M10 19.655A6 6 0 0 1 6 14v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 3.97",key:"1gnv52"}],["path",{d:"M14 15.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997a1 1 0 0 1-1.517-.86z",key:"1weqy9"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13v-1a3 3 0 0 1 4.18-2.895 3 3 0 0 1 1.821 2.896v1",key:"1dt6cl"}]]),jn=k("bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]),Rn=k("chart-column-stacked",[["path",{d:"M11 13H7",key:"t0o9gq"}],["path",{d:"M19 9h-4",key:"rera1j"}],["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"15",y:"5",width:"4",height:"12",rx:"1",key:"q8uenq"}],["rect",{x:"7",y:"8",width:"4",height:"9",rx:"1",key:"sr5ea"}]]),an=k("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),_n=k("chart-spline",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16c.5-2 1.5-7 4-7 2 0 2 3 4 3 2.5 0 4.5-5 5-7",key:"lw07rv"}]]),nn=k("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),Kt=k("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),Fn=k("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Mn=k("expand",[["path",{d:"m15 15 6 6",key:"1s409w"}],["path",{d:"m15 9 6-6",key:"ko1vev"}],["path",{d:"M21 16v5h-5",key:"1ck2sf"}],["path",{d:"M21 8V3h-5",key:"1qoq8a"}],["path",{d:"M3 16v5h5",key:"1t08am"}],["path",{d:"m3 21 6-6",key:"wwnumi"}],["path",{d:"M3 8V3h5",key:"1ln10m"}],["path",{d:"M9 9 3 3",key:"v551iv"}]]),kn=k("funnel-plus",[["path",{d:"M13.354 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l1.218-1.348",key:"8mvsmf"}],["path",{d:"M16 6h6",key:"1dogtp"}],["path",{d:"M19 3v6",key:"1ytpjt"}]]),In=k("funnel-x",[["path",{d:"M12.531 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14v6a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341l.427-.473",key:"ol2ft2"}],["path",{d:"m16.5 3.5 5 5",key:"15e6fa"}],["path",{d:"m21.5 3.5-5 5",key:"m0lwru"}]]),ln=k("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),$t=k("grip-horizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]),Nn=k("list-filter-plus",[["path",{d:"M10 18h4",key:"1ulq68"}],["path",{d:"M11 6H3",key:"1u26ik"}],["path",{d:"M15 6h6",key:"1jlkvy"}],["path",{d:"M18 9V3",key:"xwwp7m"}],["path",{d:"M7 12h8",key:"7a1bxv"}]]),Vn=k("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),Pn=k("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),An=k("panel-right",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),bn=k("pin-off",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]),Pe=k("table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),Dn=k("text",[["path",{d:"M15 18H3",key:"olowqp"}],["path",{d:"M17 6H3",key:"16j9eg"}],["path",{d:"M21 12H3",key:"2avoz0"}]]),Jt=k("wrap-text",[["path",{d:"m16 16-2 2 2 2",key:"kkc6pm"}],["path",{d:"M3 12h15a3 3 0 1 1 0 6h-4",key:"1cl7v7"}],["path",{d:"M3 18h7",key:"sq21v6"}],["path",{d:"M3 6h18",key:"d0wm0j"}]]),En=N(A()),r=N(_i()),Yt=t=>{let e=(0,En.c)(6),{container:n,children:l}=t,a;e:{if(!n){let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=ta({key:"mo",prepend:!0}),e[0]=c):c=e[0],a=c;break e}let s;if(e[1]!==n){let c=n.querySelector("style");c||(c=document.createElement("style"),n.append(c)),s=ta({key:"mo",prepend:!0,container:c}),e[1]=n,e[2]=s}else s=e[2];a=s}let o=a,i;return e[3]!==o||e[4]!==l?(i=(0,r.jsx)(ms,{value:o,children:l}),e[3]=o,e[4]=l,e[5]=i):i=e[5],i};var wa=N(A());const zn=t=>{let e=(0,wa.c)(3),{children:n}=t,{locale:l}=ge(),a;return e[0]!==n||e[1]!==l?(a=n(l),e[0]=n,e[1]=l,e[2]=a):a=e[2],a};var ba=N(A());const ya=t=>{let e=(0,ba.c)(25),n,l,a;e[0]===t?(n=e[1],l=e[2],a=e[3]):({children:n,className:l,...a}=t,e[0]=t,e[1]=n,e[2]=l,e[3]=a);let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o={x:0,y:0},e[4]=o):o=e[4];let[i,s]=(0,C.useState)(o),c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c={x:0,y:0},e[5]=c):c=e[5];let d=(0,C.useRef)(c),[g,f]=(0,C.useState)(!1),u;if(e[6]!==i.x||e[7]!==i.y){u=j=>{d.current={x:j.clientX-i.x,y:j.clientY-i.y},f(!0),document.addEventListener("mousemove",S),document.addEventListener("mouseup",v)};let S=j=>{s({x:j.clientX-d.current.x,y:j.clientY-d.current.y})},v=()=>{f(!1),document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",v)};e[6]=i.x,e[7]=i.y,e[8]=u}else u=e[8];let p;e[9]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)(Ot,{}),e[9]=p):p=e[9];let w;e[10]!==i.x||e[11]!==i.y?(w={position:"fixed",left:i.x,top:i.y},e[10]=i.x,e[11]=i.y,e[12]=w):w=e[12];let m=`flex items-center justify-center absolute top-0 left-1/2 -translate-x-1/2 ${g?"cursor-grabbing":"cursor-grab"}`,h;e[13]===Symbol.for("react.memo_cache_sentinel")?(h=(0,r.jsx)($t,{className:"h-5 w-5 mt-1 text-muted-foreground/40"}),e[13]=h):h=e[13];let x;e[14]!==u||e[15]!==m?(x=(0,r.jsx)("div",{onMouseDown:u,className:m,children:h}),e[14]=u,e[15]=m,e[16]=x):x=e[16];let y;e[17]!==n||e[18]!==l||e[19]!==w||e[20]!==x?(y=(0,r.jsxs)(Ht,{className:l,style:w,children:[x,n]}),e[17]=n,e[18]=l,e[19]=w,e[20]=x,e[21]=y):y=e[21];let b;return e[22]!==a||e[23]!==y?(b=(0,r.jsxs)(Lt,{...a,children:[p,y]}),e[22]=a,e[23]=y,e[24]=b):b=e[24],b},K={number(t){return{type:"number",...t}},text(t){return{type:"text",...t}},date(t){return{type:"date",...t}},datetime(t){return{type:"datetime",...t}},time(t){return{type:"time",...t}},boolean(t){return{type:"boolean",...t}},select(t){return{type:"select",...t}}};ra=function(t,e){if(!e)return[];let n=t;if(e.operator==="is_null"||e.operator==="is_not_null")return{column_id:n,operator:e.operator,value:void 0};switch(e.type){case"number":{let l=[];return e.min!==void 0&&l.push({column_id:n,operator:">=",value:e.min}),e.max!==void 0&&l.push({column_id:n,operator:"<=",value:e.max}),l}case"text":return{column_id:n,operator:e.operator,value:e.text};case"datetime":{let l=[];return e.min!==void 0&&l.push({column_id:n,operator:">=",value:e.min.toISOString()}),e.max!==void 0&&l.push({column_id:n,operator:"<=",value:e.max.toISOString()}),l}case"date":{let l=[];return e.min!==void 0&&l.push({column_id:n,operator:">=",value:e.min.toISOString()}),e.max!==void 0&&l.push({column_id:n,operator:"<=",value:e.max.toISOString()}),l}case"time":{let l=[];return e.min!==void 0&&l.push({column_id:n,operator:">=",value:e.min.toISOString()}),e.max!==void 0&&l.push({column_id:n,operator:"<=",value:e.max.toISOString()}),l}case"boolean":return e.value?{column_id:n,operator:"is_true",value:void 0}:e.value?[]:{column_id:n,operator:"is_false",value:void 0};case"select":return{column_id:n,operator:"in",value:e.options};default:ls(e)}};function Z(t,e){return typeof t=="function"?t(e):t}function z(t,e){return n=>{e.setState(l=>({...l,[t]:Z(n,l[t])}))}}function Ae(t){return t instanceof Function}function Sa(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function Ca(t,e){let n=[],l=a=>{a.forEach(o=>{n.push(o);let i=e(o);i!=null&&i.length&&l(i)})};return l(t),n}function R(t,e,n){let l=[],a;return o=>{let i;n.key&&n.debug&&(i=Date.now());let s=t(o);if(!(s.length!==l.length||s.some((d,g)=>l[g]!==d)))return a;l=s;let c;if(n.key&&n.debug&&(c=Date.now()),a=e(...s),n==null||n.onChange==null||n.onChange(a),n.key&&n.debug&&n!=null&&n.debug()){let d=Math.round((Date.now()-i)*100)/100,g=Math.round((Date.now()-c)*100)/100,f=g/16,u=(p,w)=>{for(p=String(p);p.length<w;)p=" "+p;return p};console.info(`%c\u23F1 ${u(g,5)} /${u(d,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return a}}function _(t,e,n,l){return{debug:()=>(t==null?void 0:t.debugAll)??t[e],key:!1,onChange:l}}function va(t,e,n,l){let a={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(l),renderValue:()=>a.getValue()??t.options.renderFallbackValue,getContext:R(()=>[t,n,e,a],(o,i,s,c)=>({table:o,column:i,row:s,cell:c,getValue:c.getValue,renderValue:c.renderValue}),_(t.options,"debugCells","cell.getContext"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(a,n,e,t)},{}),a}function ja(t,e,n,l){let a={...t._getDefaultColumnDef(),...e},o=a.accessorKey,i=a.id??(o?typeof String.prototype.replaceAll=="function"?o.replaceAll(".","_"):o.replace(/\./g,"_"):void 0)??(typeof a.header=="string"?a.header:void 0),s;if(a.accessorFn?s=a.accessorFn:o&&(s=o.includes(".")?d=>{let g=d;for(let f of o.split("."))g=g==null?void 0:g[f];return g}:d=>d[a.accessorKey]),!i)throw Error();let c={id:`${String(i)}`,accessorFn:s,parent:l,depth:n,columnDef:a,columns:[],getFlatColumns:R(()=>[!0],()=>{var d;return[c,...(d=c.columns)==null?void 0:d.flatMap(g=>g.getFlatColumns())]},_(t.options,"debugColumns","column.getFlatColumns")),getLeafColumns:R(()=>[t._getOrderColumnsFn()],d=>{var g;if((g=c.columns)!=null&&g.length){let f=c.columns.flatMap(u=>u.getLeafColumns());return d(f)}return[c]},_(t.options,"debugColumns","column.getLeafColumns"))};for(let d of t._features)d.createColumn==null||d.createColumn(c,t);return c}var O="debugHeaders";function Tn(t,e,n){let l={id:n.id??e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let a=[],o=i=>{i.subHeaders&&i.subHeaders.length&&i.subHeaders.map(o),a.push(i)};return o(l),a},getContext:()=>({table:t,header:l,column:e})};return t._features.forEach(a=>{a.createHeader==null||a.createHeader(l,t)}),l}var Ra={createTable:t=>{t.getHeaderGroups=R(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,l,a)=>{let o=(l==null?void 0:l.map(c=>n.find(d=>d.id===c)).filter(Boolean))??[],i=(a==null?void 0:a.map(c=>n.find(d=>d.id===c)).filter(Boolean))??[],s=n.filter(c=>!(l!=null&&l.includes(c.id))&&!(a!=null&&a.includes(c.id)));return De(e,[...o,...s,...i],t)},_(t.options,O,"getHeaderGroups")),t.getCenterHeaderGroups=R(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,l,a)=>(n=n.filter(o=>!(l!=null&&l.includes(o.id))&&!(a!=null&&a.includes(o.id))),De(e,n,t,"center")),_(t.options,O,"getCenterHeaderGroups")),t.getLeftHeaderGroups=R(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,l)=>{let a=(l==null?void 0:l.map(o=>n.find(i=>i.id===o)).filter(Boolean))??[];return De(e,a,t,"left")},_(t.options,O,"getLeftHeaderGroups")),t.getRightHeaderGroups=R(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,l)=>{let a=(l==null?void 0:l.map(o=>n.find(i=>i.id===o)).filter(Boolean))??[];return De(e,a,t,"right")},_(t.options,O,"getRightHeaderGroups")),t.getFooterGroups=R(()=>[t.getHeaderGroups()],e=>[...e].reverse(),_(t.options,O,"getFooterGroups")),t.getLeftFooterGroups=R(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),_(t.options,O,"getLeftFooterGroups")),t.getCenterFooterGroups=R(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),_(t.options,O,"getCenterFooterGroups")),t.getRightFooterGroups=R(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),_(t.options,O,"getRightFooterGroups")),t.getFlatHeaders=R(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),_(t.options,O,"getFlatHeaders")),t.getLeftFlatHeaders=R(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),_(t.options,O,"getLeftFlatHeaders")),t.getCenterFlatHeaders=R(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),_(t.options,O,"getCenterFlatHeaders")),t.getRightFlatHeaders=R(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),_(t.options,O,"getRightFlatHeaders")),t.getCenterLeafHeaders=R(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),_(t.options,O,"getCenterLeafHeaders")),t.getLeftLeafHeaders=R(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),_(t.options,O,"getLeftLeafHeaders")),t.getRightLeafHeaders=R(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var l;return!((l=n.subHeaders)!=null&&l.length)}),_(t.options,O,"getRightLeafHeaders")),t.getLeafHeaders=R(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,l)=>{var a,o,i;return[...((a=e[0])==null?void 0:a.headers)??[],...((o=n[0])==null?void 0:o.headers)??[],...((i=l[0])==null?void 0:i.headers)??[]].map(s=>s.getLeafHeaders()).flat()},_(t.options,O,"getLeafHeaders"))}};function De(t,e,n,l){var g;let a=0,o=function(f,u){u===void 0&&(u=1),a=Math.max(a,u),f.filter(p=>p.getIsVisible()).forEach(p=>{var w;(w=p.columns)!=null&&w.length&&o(p.columns,u+1)},0)};o(t);let i=[],s=(f,u)=>{let p={depth:u,id:[l,`${u}`].filter(Boolean).join("_"),headers:[]},w=[];f.forEach(m=>{let h=[...w].reverse()[0],x=m.column.depth===p.depth,y,b=!1;if(x&&m.column.parent?y=m.column.parent:(y=m.column,b=!0),h&&(h==null?void 0:h.column)===y)h.subHeaders.push(m);else{let S=Tn(n,y,{id:[l,u,y.id,m==null?void 0:m.id].filter(Boolean).join("_"),isPlaceholder:b,placeholderId:b?`${w.filter(v=>v.column===y).length}`:void 0,depth:u,index:w.length});S.subHeaders.push(m),w.push(S)}p.headers.push(m),m.headerGroup=p}),i.push(p),u>0&&s(w,u-1)},c=e.map((f,u)=>Tn(n,f,{depth:a,index:u}));s(c,a-1),i.reverse();let d=f=>f.filter(u=>u.column.getIsVisible()).map(u=>{let p=0,w=0,m=[0];u.subHeaders&&u.subHeaders.length?(m=[],d(u.subHeaders).forEach(x=>{let{colSpan:y,rowSpan:b}=x;p+=y,m.push(b)})):p=1;let h=Math.min(...m);return w+=h,u.colSpan=p,u.rowSpan=w,{colSpan:p,rowSpan:w}});return d(((g=i[0])==null?void 0:g.headers)??[]),i}var st=(t,e,n,l,a,o,i)=>{let s={id:e,index:l,original:n,depth:a,parentId:i,_valuesCache:{},_uniqueValuesCache:{},getValue:c=>{if(s._valuesCache.hasOwnProperty(c))return s._valuesCache[c];let d=t.getColumn(c);if(d!=null&&d.accessorFn)return s._valuesCache[c]=d.accessorFn(s.original,l),s._valuesCache[c]},getUniqueValues:c=>{if(s._uniqueValuesCache.hasOwnProperty(c))return s._uniqueValuesCache[c];let d=t.getColumn(c);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(s._uniqueValuesCache[c]=d.columnDef.getUniqueValues(s.original,l),s._uniqueValuesCache[c]):(s._uniqueValuesCache[c]=[s.getValue(c)],s._uniqueValuesCache[c])},renderValue:c=>s.getValue(c)??t.options.renderFallbackValue,subRows:o??[],getLeafRows:()=>Ca(s.subRows,c=>c.subRows),getParentRow:()=>s.parentId?t.getRow(s.parentId,!0):void 0,getParentRows:()=>{let c=[],d=s;for(;;){let g=d.getParentRow();if(!g)break;c.push(g),d=g}return c.reverse()},getAllCells:R(()=>[t.getAllLeafColumns()],c=>c.map(d=>va(t,s,d,d.id)),_(t.options,"debugRows","getAllCells")),_getAllCellsByColumnId:R(()=>[s.getAllCells()],c=>c.reduce((d,g)=>(d[g.column.id]=g,d),{}),_(t.options,"debugRows","getAllCellsByColumnId"))};for(let c=0;c<t._features.length;c++){let d=t._features[c];d==null||d.createRow==null||d.createRow(s,t)}return s},_a={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},On=(t,e,n)=>{var l,a;let o=n==null||(l=n.toString())==null?void 0:l.toLowerCase();return!!(!((a=t.getValue(e))==null||(a=a.toString())==null||(a=a.toLowerCase())==null)&&a.includes(o))};On.autoRemove=t=>B(t);var Hn=(t,e,n)=>{var l;return!!(!((l=t.getValue(e))==null||(l=l.toString())==null)&&l.includes(n))};Hn.autoRemove=t=>B(t);var Ln=(t,e,n)=>{var l;return((l=t.getValue(e))==null||(l=l.toString())==null?void 0:l.toLowerCase())===(n==null?void 0:n.toLowerCase())};Ln.autoRemove=t=>B(t);var Gn=(t,e,n)=>{var l;return(l=t.getValue(e))==null?void 0:l.includes(n)};Gn.autoRemove=t=>B(t);var qn=(t,e,n)=>!n.some(l=>{var a;return!((a=t.getValue(e))!=null&&a.includes(l))});qn.autoRemove=t=>B(t)||!(t!=null&&t.length);var $n=(t,e,n)=>n.some(l=>{var a;return(a=t.getValue(e))==null?void 0:a.includes(l)});$n.autoRemove=t=>B(t)||!(t!=null&&t.length);var Bn=(t,e,n)=>t.getValue(e)===n;Bn.autoRemove=t=>B(t);var Un=(t,e,n)=>t.getValue(e)==n;Un.autoRemove=t=>B(t);var ut=(t,e,n)=>{let[l,a]=n,o=t.getValue(e);return o>=l&&o<=a};ut.resolveFilterValue=t=>{let[e,n]=t,l=typeof e=="number"?e:parseFloat(e),a=typeof n=="number"?n:parseFloat(n),o=e===null||Number.isNaN(l)?-1/0:l,i=n===null||Number.isNaN(a)?1/0:a;if(o>i){let s=o;o=i,i=s}return[o,i]},ut.autoRemove=t=>B(t)||B(t[0])&&B(t[1]);var Q={includesString:On,includesStringSensitive:Hn,equalsString:Ln,arrIncludes:Gn,arrIncludesAll:qn,arrIncludesSome:$n,equals:Bn,weakEquals:Un,inNumberRange:ut};function B(t){return t==null||t===""}var Fa={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:z("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{var l;let n=(l=e.getCoreRowModel().flatRows[0])==null?void 0:l.getValue(t.id);return typeof n=="string"?Q.includesString:typeof n=="number"?Q.inNumberRange:typeof n=="boolean"||typeof n=="object"&&n?Q.equals:Array.isArray(n)?Q.arrIncludes:Q.weakEquals},t.getFilterFn=()=>{var n;return Ae(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():((n=e.options.filterFns)==null?void 0:n[t.columnDef.filterFn])??Q[t.columnDef.filterFn]},t.getCanFilter=()=>(t.columnDef.enableColumnFilter??!0)&&(e.options.enableColumnFilters??!0)&&(e.options.enableFilters??!0)&&!!t.accessorFn,t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(l=>l.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n;return((n=e.getState().columnFilters)==null?void 0:n.findIndex(l=>l.id===t.id))??-1},t.setFilterValue=n=>{e.setColumnFilters(l=>{let a=t.getFilterFn(),o=l==null?void 0:l.find(c=>c.id===t.id),i=Z(n,o?o.value:void 0);if(Wn(a,i,t))return(l==null?void 0:l.filter(c=>c.id!==t.id))??[];let s={id:t.id,value:i};return o?(l==null?void 0:l.map(c=>c.id===t.id?s:c))??[]:l!=null&&l.length?[...l,s]:[s]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{let n=t.getAllLeafColumns();t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(l=>{var a;return(a=Z(e,l))==null?void 0:a.filter(o=>{let i=n.find(s=>s.id===o.id);if(i){let s=i.getFilterFn();if(Wn(s,o.value,i))return!1}return!0})})},t.resetColumnFilters=e=>{var n;t.setColumnFilters(e?[]:((n=t.initialState)==null?void 0:n.columnFilters)??[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function Wn(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||e===void 0||typeof e=="string"&&!e}var dt={sum:(t,e,n)=>n.reduce((l,a)=>{let o=a.getValue(t);return l+(typeof o=="number"?o:0)},0),min:(t,e,n)=>{let l;return n.forEach(a=>{let o=a.getValue(t);o!=null&&(l>o||l===void 0&&o>=o)&&(l=o)}),l},max:(t,e,n)=>{let l;return n.forEach(a=>{let o=a.getValue(t);o!=null&&(l<o||l===void 0&&o>=o)&&(l=o)}),l},extent:(t,e,n)=>{let l,a;return n.forEach(o=>{let i=o.getValue(t);i!=null&&(l===void 0?i>=i&&(l=a=i):(l>i&&(l=i),a<i&&(a=i)))}),[l,a]},mean:(t,e)=>{let n=0,l=0;if(e.forEach(a=>{let o=a.getValue(t);o!=null&&(o=+o)>=o&&(++n,l+=o)}),n)return l/n},median:(t,e)=>{if(!e.length)return;let n=e.map(o=>o.getValue(t));if(!Sa(n))return;if(n.length===1)return n[0];let l=Math.floor(n.length/2),a=n.sort((o,i)=>o-i);return n.length%2==0?(a[l-1]+a[l])/2:a[l]},unique:(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),uniqueCount:(t,e)=>new Set(e.map(n=>n.getValue(t))).size,count:(t,e)=>e.length},Ma={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e;return((e=t.getValue())==null||e.toString==null?void 0:e.toString())??null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:z("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(l=>l!==t.id):[...n??[],t.id])},t.getCanGroup=()=>(t.columnDef.enableGrouping??!0)&&(e.options.enableGrouping??!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue),t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{let n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{var l;let n=(l=e.getCoreRowModel().flatRows[0])==null?void 0:l.getValue(t.id);if(typeof n=="number")return dt.sum;if(Object.prototype.toString.call(n)==="[object Date]")return dt.extent},t.getAggregationFn=()=>{var n;if(!t)throw Error();return Ae(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():((n=e.options.aggregationFns)==null?void 0:n[t.columnDef.aggregationFn])??dt[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n;t.setGrouping(e?[]:((n=t.initialState)==null?void 0:n.grouping)??[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];let l=e.getColumn(n);return l!=null&&l.columnDef.getGroupingValue?(t._groupingValuesCache[n]=l.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,l)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var a;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((a=n.subRows)!=null&&a.length)}}};function ka(t,e,n){if(!(e!=null&&e.length)||!n)return t;let l=t.filter(a=>!e.includes(a.id));return n==="remove"?l:[...e.map(a=>t.find(o=>o.id===a)).filter(Boolean),...l]}var Ia={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:z("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=R(n=>[Re(e,n)],n=>n.findIndex(l=>l.id===t.id),_(e.options,"debugColumns","getIndex")),t.getIsFirstColumn=n=>{var l;return((l=Re(e,n)[0])==null?void 0:l.id)===t.id},t.getIsLastColumn=n=>{var a;let l=Re(e,n);return((a=l[l.length-1])==null?void 0:a.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{t.setColumnOrder(e?[]:t.initialState.columnOrder??[])},t._getOrderColumnsFn=R(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,l)=>a=>{let o=[];if(!(e!=null&&e.length))o=a;else{let i=[...e],s=[...a];for(;s.length&&i.length;){let c=i.shift(),d=s.findIndex(g=>g.id===c);d>-1&&o.push(s.splice(d,1)[0])}o=[...o,...s]}return ka(o,n,l)},_(t.options,"debugTable","_getOrderColumnsFn"))}},ct=()=>({left:[],right:[]}),Kn={getInitialState:t=>({columnPinning:ct(),...t}),getDefaultOptions:t=>({onColumnPinningChange:z("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{let l=t.getLeafColumns().map(a=>a.id).filter(Boolean);e.setColumnPinning(a=>n==="right"?{left:((a==null?void 0:a.left)??[]).filter(o=>!(l!=null&&l.includes(o))),right:[...((a==null?void 0:a.right)??[]).filter(o=>!(l!=null&&l.includes(o))),...l]}:n==="left"?{left:[...((a==null?void 0:a.left)??[]).filter(o=>!(l!=null&&l.includes(o))),...l],right:((a==null?void 0:a.right)??[]).filter(o=>!(l!=null&&l.includes(o)))}:{left:((a==null?void 0:a.left)??[]).filter(o=>!(l!=null&&l.includes(o))),right:((a==null?void 0:a.right)??[]).filter(o=>!(l!=null&&l.includes(o)))})},t.getCanPin=()=>t.getLeafColumns().some(n=>(n.columnDef.enablePinning??!0)&&(e.options.enableColumnPinning??e.options.enablePinning??!0)),t.getIsPinned=()=>{let n=t.getLeafColumns().map(s=>s.id),{left:l,right:a}=e.getState().columnPinning,o=n.some(s=>l==null?void 0:l.includes(s)),i=n.some(s=>a==null?void 0:a.includes(s));return o?"left":i?"right":!1},t.getPinnedIndex=()=>{var n;let l=t.getIsPinned();return l?((n=e.getState().columnPinning)==null||(n=n[l])==null?void 0:n.indexOf(t.id))??-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=R(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,l,a)=>{let o=[...l??[],...a??[]];return n.filter(i=>!o.includes(i.column.id))},_(e.options,"debugRows","getCenterVisibleCells")),t.getLeftVisibleCells=R(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,l)=>(l??[]).map(a=>n.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"left"})),_(e.options,"debugRows","getLeftVisibleCells")),t.getRightVisibleCells=R(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,l)=>(l??[]).map(a=>n.find(o=>o.column.id===a)).filter(Boolean).map(a=>({...a,position:"right"})),_(e.options,"debugRows","getRightVisibleCells"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n;return t.setColumnPinning(e?ct():((n=t.initialState)==null?void 0:n.columnPinning)??ct())},t.getIsSomeColumnsPinned=e=>{var l,a,o;let n=t.getState().columnPinning;return e?!!((l=n[e])!=null&&l.length):!!((a=n.left)!=null&&a.length||(o=n.right)!=null&&o.length)},t.getLeftLeafColumns=R(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(l=>e.find(a=>a.id===l)).filter(Boolean),_(t.options,"debugColumns","getLeftLeafColumns")),t.getRightLeafColumns=R(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(l=>e.find(a=>a.id===l)).filter(Boolean),_(t.options,"debugColumns","getRightLeafColumns")),t.getCenterLeafColumns=R(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,l)=>{let a=[...n??[],...l??[]];return e.filter(o=>!a.includes(o.id))},_(t.options,"debugColumns","getCenterLeafColumns"))}};function Na(t){return t||(typeof document<"u"?document:null)}var Ee={size:150,minSize:20,maxSize:2**53-1},gt=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Va={getDefaultColumnDef:()=>Ee,getInitialState:t=>({columnSizing:{},columnSizingInfo:gt(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:z("columnSizing",t),onColumnSizingInfoChange:z("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{let n=e.getState().columnSizing[t.id];return Math.min(Math.max(t.columnDef.minSize??Ee.minSize,n??t.columnDef.size??Ee.size),t.columnDef.maxSize??Ee.maxSize)},t.getStart=R(n=>[n,Re(e,n),e.getState().columnSizing],(n,l)=>l.slice(0,t.getIndex(n)).reduce((a,o)=>a+o.getSize(),0),_(e.options,"debugColumns","getStart")),t.getAfter=R(n=>[n,Re(e,n),e.getState().columnSizing],(n,l)=>l.slice(t.getIndex(n)+1).reduce((a,o)=>a+o.getSize(),0),_(e.options,"debugColumns","getAfter")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:l,...a}=n;return a})},t.getCanResize=()=>(t.columnDef.enableResizing??!0)&&(e.options.enableColumnResizing??!0),t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0,l=a=>{a.subHeaders.length?a.subHeaders.forEach(l):n+=a.column.getSize()??0};return l(t),n},t.getStart=()=>{if(t.index>0){let n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{let l=e.getColumn(t.column.id),a=l==null?void 0:l.getCanResize();return o=>{if(!l||!a||(o.persist==null||o.persist(),mt(o)&&o.touches&&o.touches.length>1))return;let i=t.getSize(),s=t?t.getLeafHeaders().map(x=>[x.column.id,x.column.getSize()]):[[l.id,l.getSize()]],c=mt(o)?Math.round(o.touches[0].clientX):o.clientX,d={},g=(x,y)=>{typeof y=="number"&&(e.setColumnSizingInfo(b=>{let S=e.options.columnResizeDirection==="rtl"?-1:1,v=(y-((b==null?void 0:b.startOffset)??0))*S,j=Math.max(v/((b==null?void 0:b.startSize)??0),-.999999);return b.columnSizingStart.forEach(F=>{let[I,P]=F;d[I]=Math.round(Math.max(P+P*j,0)*100)/100}),{...b,deltaOffset:v,deltaPercentage:j}}),(e.options.columnResizeMode==="onChange"||x==="end")&&e.setColumnSizing(b=>({...b,...d})))},f=x=>g("move",x),u=x=>{g("end",x),e.setColumnSizingInfo(y=>({...y,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=Na(n),w={moveHandler:x=>f(x.clientX),upHandler:x=>{p==null||p.removeEventListener("mousemove",w.moveHandler),p==null||p.removeEventListener("mouseup",w.upHandler),u(x.clientX)}},m={moveHandler:x=>(x.cancelable&&(x.preventDefault(),x.stopPropagation()),f(x.touches[0].clientX),!1),upHandler:x=>{var y;p==null||p.removeEventListener("touchmove",m.moveHandler),p==null||p.removeEventListener("touchend",m.upHandler),x.cancelable&&(x.preventDefault(),x.stopPropagation()),u((y=x.touches[0])==null?void 0:y.clientX)}},h=Pa()?{passive:!1}:!1;mt(o)?(p==null||p.addEventListener("touchmove",m.moveHandler,h),p==null||p.addEventListener("touchend",m.upHandler,h)):(p==null||p.addEventListener("mousemove",w.moveHandler,h),p==null||p.addEventListener("mouseup",w.upHandler,h)),e.setColumnSizingInfo(x=>({...x,startOffset:c,startSize:i,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:l.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{t.setColumnSizing(e?{}:t.initialState.columnSizing??{})},t.resetHeaderSizeInfo=e=>{t.setColumnSizingInfo(e?gt():t.initialState.columnSizingInfo??gt())},t.getTotalSize=()=>{var e;return((e=t.getHeaderGroups()[0])==null?void 0:e.headers.reduce((n,l)=>n+l.getSize(),0))??0},t.getLeftTotalSize=()=>{var e;return((e=t.getLeftHeaderGroups()[0])==null?void 0:e.headers.reduce((n,l)=>n+l.getSize(),0))??0},t.getCenterTotalSize=()=>{var e;return((e=t.getCenterHeaderGroups()[0])==null?void 0:e.headers.reduce((n,l)=>n+l.getSize(),0))??0},t.getRightTotalSize=()=>{var e;return((e=t.getRightHeaderGroups()[0])==null?void 0:e.headers.reduce((n,l)=>n+l.getSize(),0))??0}}},ze=null;function Pa(){if(typeof ze=="boolean")return ze;let t=!1;try{let e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return ze=t,ze}function mt(t){return t.type==="touchstart"}var Aa={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:z("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(l=>({...l,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var l;let n=t.columns;return(n.length?n.some(a=>a.getIsVisible()):(l=e.getState().columnVisibility)==null?void 0:l[t.id])??!0},t.getCanHide=()=>(t.columnDef.enableHiding??!0)&&(e.options.enableHiding??!0),t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=R(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(l=>l.column.getIsVisible()),_(e.options,"debugRows","_getAllVisibleCells")),t.getVisibleCells=R(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,l,a)=>[...n,...l,...a],_(e.options,"debugRows","getVisibleCells"))},createTable:t=>{let e=(n,l)=>R(()=>[l(),l().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),_(t.options,"debugColumns",n));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{t.setColumnVisibility(n?{}:t.initialState.columnVisibility??{})},t.toggleAllColumnsVisible=n=>{n??(n=!t.getIsAllColumnsVisible()),t.setColumnVisibility(t.getAllLeafColumns().reduce((l,a)=>({...l,[a.id]:n||!(a.getCanHide!=null&&a.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var l;t.toggleAllColumnsVisible((l=n.target)==null?void 0:l.checked)}}};function Re(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}var Da={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},Ea={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:z("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;let l=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof l=="string"||typeof l=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>(t.columnDef.enableGlobalFilter??!0)&&(e.options.enableGlobalFilter??!0)&&(e.options.enableFilters??!0)&&((e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))??!0)&&!!t.accessorFn},createTable:t=>{t.getGlobalAutoFilterFn=()=>Q.includesString,t.getGlobalFilterFn=()=>{var n;let{globalFilterFn:e}=t.options;return Ae(e)?e:e==="auto"?t.getGlobalAutoFilterFn():((n=t.options.filterFns)==null?void 0:n[e])??Q[e]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},za={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:z("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{if(!e){t._queue(()=>{e=!0});return}if(t.options.autoResetAll??t.options.autoResetExpanded??!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=l=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(l),t.toggleAllRowsExpanded=l=>{l??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=l=>{var a;t.setExpanded(l?{}:((a=t.initialState)==null?void 0:a.expanded)??{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(l=>l.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>l=>{l.persist==null||l.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{let l=t.getState().expanded;return l===!0||Object.values(l).some(Boolean)},t.getIsAllRowsExpanded=()=>{let l=t.getState().expanded;return typeof l=="boolean"?l===!0:!(!Object.keys(l).length||t.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},t.getExpandedDepth=()=>{let l=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(a=>{let o=a.split(".");l=Math.max(l,o.length)}),l},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(l=>{let a=l===!0?!0:!!(l!=null&&l[t.id]),o={};if(l===!0?Object.keys(e.getRowModel().rowsById).forEach(i=>{o[i]=!0}):o=l,n??(n=!a),!a&&n)return{...o,[t.id]:!0};if(a&&!n){let{[t.id]:i,...s}=o;return s}return l})},t.getIsExpanded=()=>{let n=e.getState().expanded;return!!((e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))??(n===!0||(n==null?void 0:n[t.id])))},t.getCanExpand=()=>{var n;return(e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))??((e.options.enableExpanding??!0)&&!!((n=t.subRows)!=null&&n.length))},t.getIsAllParentsExpanded=()=>{let n=!0,l=t;for(;n&&l.parentId;)l=e.getRow(l.parentId,!0),n=l.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{let n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},pt=0,ft=10,ht=()=>({pageIndex:pt,pageSize:ft}),Ta={getInitialState:t=>({...t,pagination:{...ht(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:z("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{if(!e){t._queue(()=>{e=!0});return}if(t.options.autoResetAll??t.options.autoResetPageIndex??!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=l=>t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(a=>Z(l,a)),t.resetPagination=l=>{t.setPagination(l?ht():t.initialState.pagination??ht())},t.setPageIndex=l=>{t.setPagination(a=>{let o=Z(l,a.pageIndex),i=t.options.pageCount===void 0||t.options.pageCount===-1?2**53-1:t.options.pageCount-1;return o=Math.max(0,Math.min(o,i)),{...a,pageIndex:o}})},t.resetPageIndex=l=>{var a;t.setPageIndex(l?pt:((a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageIndex)??pt)},t.resetPageSize=l=>{var a;t.setPageSize(l?ft:((a=t.initialState)==null||(a=a.pagination)==null?void 0:a.pageSize)??ft)},t.setPageSize=l=>{t.setPagination(a=>{let o=Math.max(1,Z(l,a.pageSize)),i=a.pageSize*a.pageIndex,s=Math.floor(i/o);return{...a,pageIndex:s,pageSize:o}})},t.setPageCount=l=>t.setPagination(a=>{let o=Z(l,t.options.pageCount??-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...a,pageCount:o}}),t.getPageOptions=R(()=>[t.getPageCount()],l=>{let a=[];return l&&l>0&&(a=[...Array(l)].fill(null).map((o,i)=>i)),a},_(t.options,"debugTable","getPageOptions")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{let{pageIndex:l}=t.getState().pagination,a=t.getPageCount();return a===-1?!0:a===0?!1:l<a-1},t.previousPage=()=>t.setPageIndex(l=>l-1),t.nextPage=()=>t.setPageIndex(l=>l+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>t.options.pageCount??Math.ceil(t.getRowCount()/t.getState().pagination.pageSize),t.getRowCount=()=>t.options.rowCount??t.getPrePaginationRowModel().rows.length}},xt=()=>({top:[],bottom:[]}),Oa={getInitialState:t=>({rowPinning:xt(),...t}),getDefaultOptions:t=>({onRowPinningChange:z("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,l,a)=>{let o=l?t.getLeafRows().map(c=>{let{id:d}=c;return d}):[],i=a?t.getParentRows().map(c=>{let{id:d}=c;return d}):[],s=new Set([...i,t.id,...o]);e.setRowPinning(c=>n==="bottom"?{top:((c==null?void 0:c.top)??[]).filter(d=>!(s!=null&&s.has(d))),bottom:[...((c==null?void 0:c.bottom)??[]).filter(d=>!(s!=null&&s.has(d))),...Array.from(s)]}:n==="top"?{top:[...((c==null?void 0:c.top)??[]).filter(d=>!(s!=null&&s.has(d))),...Array.from(s)],bottom:((c==null?void 0:c.bottom)??[]).filter(d=>!(s!=null&&s.has(d)))}:{top:((c==null?void 0:c.top)??[]).filter(d=>!(s!=null&&s.has(d))),bottom:((c==null?void 0:c.bottom)??[]).filter(d=>!(s!=null&&s.has(d)))})},t.getCanPin=()=>{let{enableRowPinning:n,enablePinning:l}=e.options;return typeof n=="function"?n(t):n??l??!0},t.getIsPinned=()=>{let n=[t.id],{top:l,bottom:a}=e.getState().rowPinning,o=n.some(s=>l==null?void 0:l.includes(s)),i=n.some(s=>a==null?void 0:a.includes(s));return o?"top":i?"bottom":!1},t.getPinnedIndex=()=>{var l,a;let n=t.getIsPinned();return n?((a=(l=n==="top"?e.getTopRows():e.getBottomRows())==null?void 0:l.map(o=>{let{id:i}=o;return i}))==null?void 0:a.indexOf(t.id))??-1:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n;return t.setRowPinning(e?xt():((n=t.initialState)==null?void 0:n.rowPinning)??xt())},t.getIsSomeRowsPinned=e=>{var l,a,o;let n=t.getState().rowPinning;return e?!!((l=n[e])!=null&&l.length):!!((a=n.top)!=null&&a.length||(o=n.bottom)!=null&&o.length)},t._getPinnedRows=(e,n,l)=>(t.options.keepPinnedRows??!0?(n??[]).map(a=>{let o=t.getRow(a,!0);return o.getIsAllParentsExpanded()?o:null}):(n??[]).map(a=>e.find(o=>o.id===a))).filter(Boolean).map(a=>({...a,position:l})),t.getTopRows=R(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),_(t.options,"debugRows","getTopRows")),t.getBottomRows=R(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),_(t.options,"debugRows","getBottomRows")),t.getCenterRows=R(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,l)=>{let a=new Set([...n??[],...l??[]]);return e.filter(o=>!a.has(o.id))},_(t.options,"debugRows","getCenterRows"))}},Ha={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:z("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>t.setRowSelection(e?{}:t.initialState.rowSelection??{}),t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=e===void 0?!t.getIsAllRowsSelected():e;let l={...n},a=t.getPreGroupedRowModel().flatRows;return e?a.forEach(o=>{o.getCanSelect()&&(l[o.id]=!0)}):a.forEach(o=>{delete l[o.id]}),l})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{let l=e===void 0?!t.getIsAllPageRowsSelected():e,a={...n};return t.getRowModel().rows.forEach(o=>{wt(a,o.id,l,!0,t)}),a}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=R(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?bt(t,n):{rows:[],flatRows:[],rowsById:{}},_(t.options,"debugTable","getSelectedRowModel")),t.getFilteredSelectedRowModel=R(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?bt(t,n):{rows:[],flatRows:[],rowsById:{}},_(t.options,"debugTable","getFilteredSelectedRowModel")),t.getGroupedSelectedRowModel=R(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?bt(t,n):{rows:[],flatRows:[],rowsById:{}},_(t.options,"debugTable","getGroupedSelectedRowModel")),t.getIsAllRowsSelected=()=>{let e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState(),l=!!(e.length&&Object.keys(n).length);return l&&e.some(a=>a.getCanSelect()&&!n[a.id])&&(l=!1),l},t.getIsAllPageRowsSelected=()=>{let e=t.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:n}=t.getState(),l=!!e.length;return l&&e.some(a=>!n[a.id])&&(l=!1),l},t.getIsSomeRowsSelected=()=>{let e=Object.keys(t.getState().rowSelection??{}).length;return e>0&&e<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{let e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,l)=>{let a=t.getIsSelected();e.setRowSelection(o=>{if(n=n===void 0?!a:n,t.getCanSelect()&&a===n)return o;let i={...o};return wt(i,t.id,n,(l==null?void 0:l.selectChildren)??!0,e),i})},t.getIsSelected=()=>{let{rowSelection:n}=e.getState();return yt(t,n)},t.getIsSomeSelected=()=>{let{rowSelection:n}=e.getState();return St(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=e.getState();return St(t,n)==="all"},t.getCanSelect=()=>typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):e.options.enableRowSelection??!0,t.getCanSelectSubRows=()=>typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):e.options.enableSubRowSelection??!0,t.getCanMultiSelect=()=>typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):e.options.enableMultiRowSelection??!0,t.getToggleSelectedHandler=()=>{let n=t.getCanSelect();return l=>{var a;n&&t.toggleSelected((a=l.target)==null?void 0:a.checked)}}}},wt=(t,e,n,l,a)=>{var o;let i=a.getRow(e,!0);n?(i.getCanMultiSelect()||Object.keys(t).forEach(s=>delete t[s]),i.getCanSelect()&&(t[e]=!0)):delete t[e],l&&(o=i.subRows)!=null&&o.length&&i.getCanSelectSubRows()&&i.subRows.forEach(s=>wt(t,s.id,n,l,a))};function bt(t,e){let n=t.getState().rowSelection,l=[],a={},o=function(i,s){return i.map(c=>{var d;let g=yt(c,n);if(g&&(l.push(c),a[c.id]=c),(d=c.subRows)!=null&&d.length&&(c={...c,subRows:o(c.subRows)}),g)return c}).filter(Boolean)};return{rows:o(e.rows),flatRows:l,rowsById:a}}function yt(t,e){return e[t.id]??!1}function St(t,e,n){var l;if(!((l=t.subRows)!=null&&l.length))return!1;let a=!0,o=!1;return t.subRows.forEach(i=>{if(!(o&&!a)&&(i.getCanSelect()&&(yt(i,e)?o=!0:a=!1),i.subRows&&i.subRows.length)){let s=St(i,e);s==="all"?o=!0:(s==="some"&&(o=!0),a=!1)}}),a?"all":o?"some":!1}var Ct=/([0-9]+)/gm,La=(t,e,n)=>Yn(ee(t.getValue(n)).toLowerCase(),ee(e.getValue(n)).toLowerCase()),Ga=(t,e,n)=>Yn(ee(t.getValue(n)),ee(e.getValue(n))),qa=(t,e,n)=>vt(ee(t.getValue(n)).toLowerCase(),ee(e.getValue(n)).toLowerCase()),$a=(t,e,n)=>vt(ee(t.getValue(n)),ee(e.getValue(n))),Ba=(t,e,n)=>{let l=t.getValue(n),a=e.getValue(n);return l>a?1:l<a?-1:0},Ua=(t,e,n)=>vt(t.getValue(n),e.getValue(n));function vt(t,e){return t===e?0:t>e?1:-1}function ee(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function Yn(t,e){let n=t.split(Ct).filter(Boolean),l=e.split(Ct).filter(Boolean);for(;n.length&&l.length;){let a=n.shift(),o=l.shift(),i=parseInt(a,10),s=parseInt(o,10),c=[i,s].sort();if(isNaN(c[0])){if(a>o)return 1;if(o>a)return-1;continue}if(isNaN(c[1]))return isNaN(i)?-1:1;if(i>s)return 1;if(s>i)return-1}return n.length-l.length}var _e={alphanumeric:La,alphanumericCaseSensitive:Ga,text:qa,textCaseSensitive:$a,datetime:Ba,basic:Ua},Wa=[Ra,Aa,Ia,Kn,_a,Fa,Da,Ea,{getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:z("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{let n=e.getFilteredRowModel().flatRows.slice(10),l=!1;for(let a of n){let o=a==null?void 0:a.getValue(t.id);if(Object.prototype.toString.call(o)==="[object Date]")return _e.datetime;if(typeof o=="string"&&(l=!0,o.split(Ct).length>1))return _e.alphanumeric}return l?_e.text:_e.basic},t.getAutoSortDir=()=>{var n;return typeof((n=e.getFilteredRowModel().flatRows[0])==null?void 0:n.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var n;if(!t)throw Error();return Ae(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():((n=e.options.sortingFns)==null?void 0:n[t.columnDef.sortingFn])??_e[t.columnDef.sortingFn]},t.toggleSorting=(n,l)=>{let a=t.getNextSortingOrder(),o=n!=null;e.setSorting(i=>{let s=i==null?void 0:i.find(u=>u.id===t.id),c=i==null?void 0:i.findIndex(u=>u.id===t.id),d=[],g,f=o?n:a==="desc";return g=i!=null&&i.length&&t.getCanMultiSort()&&l?s?"toggle":"add":i!=null&&i.length&&c!==i.length-1?"replace":s?"toggle":"replace",g==="toggle"&&(o||a||(g="remove")),g==="add"?(d=[...i,{id:t.id,desc:f}],d.splice(0,d.length-(e.options.maxMultiSortColCount??2**53-1))):d=g==="toggle"?i.map(u=>u.id===t.id?{...u,desc:f}:u):g==="remove"?i.filter(u=>u.id!==t.id):[{id:t.id,desc:f}],d})},t.getFirstSortDir=()=>t.columnDef.sortDescFirst??e.options.sortDescFirst??t.getAutoSortDir()==="desc"?"desc":"asc",t.getNextSortingOrder=n=>{let l=t.getFirstSortDir(),a=t.getIsSorted();return a?a!==l&&(e.options.enableSortingRemoval??!0)&&(!n||(e.options.enableMultiRemove??!0))?!1:a==="desc"?"asc":"desc":l},t.getCanSort=()=>(t.columnDef.enableSorting??!0)&&(e.options.enableSorting??!0)&&!!t.accessorFn,t.getCanMultiSort=()=>t.columnDef.enableMultiSort??e.options.enableMultiSort??!!t.accessorFn,t.getIsSorted=()=>{var l;let n=(l=e.getState().sorting)==null?void 0:l.find(a=>a.id===t.id);return n?n.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n;return((n=e.getState().sorting)==null?void 0:n.findIndex(l=>l.id===t.id))??-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(l=>l.id!==t.id):[])},t.getToggleSortingHandler=()=>{let n=t.getCanSort();return l=>{n&&(l.persist==null||l.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(l):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n;t.setSorting(e?[]:((n=t.initialState)==null?void 0:n.sorting)??[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},Ma,za,Ta,Oa,Ha,Va];function Ka(t){let e=[...Wa,...t._features??[]],n={_features:e},l=n._features.reduce((d,g)=>Object.assign(d,g.getDefaultOptions==null?void 0:g.getDefaultOptions(n)),{}),a=d=>n.options.mergeOptions?n.options.mergeOptions(l,d):{...l,...d},o={...t.initialState??{}};n._features.forEach(d=>{o=(d.getInitialState==null?void 0:d.getInitialState(o))??o});let i=[],s=!1,c={_features:e,options:{...l,...t},initialState:o,_queue:d=>{i.push(d),s||(s=!0,Promise.resolve().then(()=>{for(;i.length;)i.shift()();s=!1}).catch(g=>setTimeout(()=>{throw g})))},reset:()=>{n.setState(n.initialState)},setOptions:d=>{let g=Z(d,n.options);n.options=a(g)},getState:()=>n.options.state,setState:d=>{n.options.onStateChange==null||n.options.onStateChange(d)},_getRowId:(d,g,f)=>(n.options.getRowId==null?void 0:n.options.getRowId(d,g,f))??`${f?[f.id,g].join("."):g}`,getCoreRowModel:()=>(n._getCoreRowModel||(n._getCoreRowModel=n.options.getCoreRowModel(n)),n._getCoreRowModel()),getRowModel:()=>n.getPaginationRowModel(),getRow:(d,g)=>{let f=(g?n.getPrePaginationRowModel():n.getRowModel()).rowsById[d];if(!f&&(f=n.getCoreRowModel().rowsById[d],!f))throw Error();return f},_getDefaultColumnDef:R(()=>[n.options.defaultColumn],d=>(d??(d={}),{header:g=>{let f=g.header.column.columnDef;return f.accessorKey?f.accessorKey:f.accessorFn?f.id:null},cell:g=>{var f;return((f=g.renderValue())==null||f.toString==null?void 0:f.toString())??null},...n._features.reduce((g,f)=>Object.assign(g,f.getDefaultColumnDef==null?void 0:f.getDefaultColumnDef()),{}),...d}),_(t,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>n.options.columns,getAllColumns:R(()=>[n._getColumnDefs()],d=>{let g=function(f,u,p){return p===void 0&&(p=0),f.map(w=>{let m=ja(n,w,p,u),h=w;return m.columns=h.columns?g(h.columns,m,p+1):[],m})};return g(d)},_(t,"debugColumns","getAllColumns")),getAllFlatColumns:R(()=>[n.getAllColumns()],d=>d.flatMap(g=>g.getFlatColumns()),_(t,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:R(()=>[n.getAllFlatColumns()],d=>d.reduce((g,f)=>(g[f.id]=f,g),{}),_(t,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:R(()=>[n.getAllColumns(),n._getOrderColumnsFn()],(d,g)=>{let f=d.flatMap(u=>u.getLeafColumns());return g(f)},_(t,"debugColumns","getAllLeafColumns")),getColumn:d=>n._getAllFlatColumnsById()[d]};Object.assign(n,c);for(let d=0;d<n._features.length;d++){let g=n._features[d];g==null||g.createTable==null||g.createTable(n)}return n}Xt=function(){return t=>R(()=>[t.options.data],e=>{let n={rows:[],flatRows:[],rowsById:{}},l=function(a,o,i){o===void 0&&(o=0);let s=[];for(let d=0;d<a.length;d++){let g=st(t,t._getRowId(a[d],d,i),a[d],d,o,void 0,i==null?void 0:i.id);if(n.flatRows.push(g),n.rowsById[g.id]=g,s.push(g),t.options.getSubRows){var c;g.originalSubRows=t.options.getSubRows(a[d],d),(c=g.originalSubRows)!=null&&c.length&&(g.subRows=l(g.originalSubRows,o+1,g))}}return s};return n.rows=l(e),n},_(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))};function Ya(t){let e=[],n=l=>{var a;e.push(l),(a=l.subRows)!=null&&a.length&&l.getIsExpanded()&&l.subRows.forEach(n)};return t.rows.forEach(n),{rows:e,flatRows:t.flatRows,rowsById:t.rowsById}}function Ja(t,e,n){return n.options.filterFromLeafRows?Xa(t,e,n):Za(t,e,n)}function Xa(t,e,n){let l=[],a={},o=n.options.maxLeafRowFilterDepth??100,i=function(s,c){c===void 0&&(c=0);let d=[];for(let f=0;f<s.length;f++){var g;let u=s[f],p=st(n,u.id,u.original,u.index,u.depth,void 0,u.parentId);if(p.columnFilters=u.columnFilters,(g=u.subRows)!=null&&g.length&&c<o){if(p.subRows=i(u.subRows,c+1),u=p,e(u)&&!p.subRows.length){d.push(u),a[u.id]=u,l.push(u);continue}if(e(u)||p.subRows.length){d.push(u),a[u.id]=u,l.push(u);continue}}else u=p,e(u)&&(d.push(u),a[u.id]=u,l.push(u))}return d};return{rows:i(t),flatRows:l,rowsById:a}}function Za(t,e,n){let l=[],a={},o=n.options.maxLeafRowFilterDepth??100,i=function(s,c){c===void 0&&(c=0);let d=[];for(let f=0;f<s.length;f++){let u=s[f];if(e(u)){var g;if((g=u.subRows)!=null&&g.length&&c<o){let p=st(n,u.id,u.original,u.index,u.depth,void 0,u.parentId);p.subRows=i(u.subRows,c+1),u=p}d.push(u),l.push(u),a[u.id]=u}}return d};return{rows:i(t),flatRows:l,rowsById:a}}Zt=function(){return t=>R(()=>[t.getPreFilteredRowModel(),t.getState().columnFilters,t.getState().globalFilter],(e,n,l)=>{if(!e.rows.length||!(n!=null&&n.length)&&!l){for(let f=0;f<e.flatRows.length;f++)e.flatRows[f].columnFilters={},e.flatRows[f].columnFiltersMeta={};return e}let a=[],o=[];(n??[]).forEach(f=>{let u=t.getColumn(f.id);if(!u)return;let p=u.getFilterFn();p&&a.push({id:f.id,filterFn:p,resolvedValue:(p.resolveFilterValue==null?void 0:p.resolveFilterValue(f.value))??f.value})});let i=(n??[]).map(f=>f.id),s=t.getGlobalFilterFn(),c=t.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());l&&s&&c.length&&(i.push("__global__"),c.forEach(f=>{o.push({id:f.id,filterFn:s,resolvedValue:(s.resolveFilterValue==null?void 0:s.resolveFilterValue(l))??l})}));let d,g;for(let f=0;f<e.flatRows.length;f++){let u=e.flatRows[f];if(u.columnFilters={},a.length)for(let p=0;p<a.length;p++){d=a[p];let w=d.id;u.columnFilters[w]=d.filterFn(u,w,d.resolvedValue,m=>{u.columnFiltersMeta[w]=m})}if(o.length){for(let p=0;p<o.length;p++){g=o[p];let w=g.id;if(g.filterFn(u,w,g.resolvedValue,m=>{u.columnFiltersMeta[w]=m})){u.columnFilters.__global__=!0;break}}u.columnFilters.__global__!==!0&&(u.columnFilters.__global__=!1)}}return Ja(e.rows,f=>{for(let u=0;u<i.length;u++)if(f.columnFilters[i[u]]===!1)return!1;return!0},t)},_(t.options,"debugTable","getFilteredRowModel",()=>t._autoResetPageIndex()))};function Qa(t){return e=>R(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(n,l)=>{if(!l.rows.length)return l;let{pageSize:a,pageIndex:o}=n,{rows:i,flatRows:s,rowsById:c}=l,d=a*o,g=d+a;i=i.slice(d,g);let f;f=e.options.paginateExpandedRows?{rows:i,flatRows:s,rowsById:c}:Ya({rows:i,flatRows:s,rowsById:c}),f.flatRows=[];let u=p=>{f.flatRows.push(p),p.subRows.length&&p.subRows.forEach(u)};return f.rows.forEach(u),f},_(e.options,"debugTable","getPaginationRowModel"))}Qt=function(){return t=>R(()=>[t.getState().sorting,t.getPreSortedRowModel()],(e,n)=>{if(!n.rows.length||!(e!=null&&e.length))return n;let l=t.getState().sorting,a=[],o=l.filter(c=>{var d;return(d=t.getColumn(c.id))==null?void 0:d.getCanSort()}),i={};o.forEach(c=>{let d=t.getColumn(c.id);d&&(i[c.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});let s=c=>{let d=c.map(g=>({...g}));return d.sort((g,f)=>{for(let u=0;u<o.length;u+=1){let p=o[u],w=i[p.id],m=w.sortUndefined,h=(p==null?void 0:p.desc)??!1,x=0;if(m){let y=g.getValue(p.id),b=f.getValue(p.id),S=y===void 0,v=b===void 0;if(S||v){if(m==="first")return S?-1:1;if(m==="last")return S?1:-1;x=S&&v?0:S?m:-m}}if(x===0&&(x=w.sortingFn(g,f,p.id)),x!==0)return h&&(x*=-1),w.invertSorting&&(x*=-1),x}return g.index-f.index}),d.forEach(g=>{var f;a.push(g),(f=g.subRows)!=null&&f.length&&(g.subRows=s(g.subRows))}),d};return{rows:s(n.rows),flatRows:a,rowsById:n.rowsById}},_(t.options,"debugTable","getSortedRowModel",()=>t._autoResetPageIndex()))},ot=function(t,e){return t?eo(t)?C.createElement(t,e):t:null};function eo(t){return to(t)||typeof t=="function"||no(t)}function to(t){return typeof t=="function"&&(()=>{let e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function no(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}gn=function(t){let e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=C.useState(()=>({current:Ka(e)})),[l,a]=C.useState(()=>n.current.initialState);return n.current.setOptions(o=>({...o,...t,state:{...l,...t.state},onStateChange:i=>{a(i),t.onStateChange==null||t.onStateChange(i)}})),n.current};const lo={getInitialState:t=>({columnFormatting:{},...t}),getDefaultOptions:t=>({enableColumnFormatting:!0,onColumnFormattingChange:z("columnFormatting",t),locale:navigator.language}),createColumn:(t,e)=>{t.getColumnFormatting=()=>e.getState().columnFormatting[t.id],t.getCanFormat=()=>{var n,l;return(e.options.enableColumnFormatting&&((n=t.columnDef.meta)==null?void 0:n.dataType)!=="unknown"&&((l=t.columnDef.meta)==null?void 0:l.dataType)!==void 0)??!1},t.setColumnFormatting=n=>{var l,a;(a=(l=e.options).onColumnFormattingChange)==null||a.call(l,o=>({...o,[t.id]:n}))},t.applyColumnFormatting=n=>{var o,i;let l=(o=t.columnDef.meta)==null?void 0:o.dataType,a=(i=t.getColumnFormatting)==null?void 0:i.call(t);return a?Y(n,{format:a,dataType:l,locale:e.options.locale}):n}}},ao=fi(t=>{let e=new Intl.NumberFormat(t,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:2}),n=new Intl.DateTimeFormat(t,{dateStyle:"short"}),l=new Intl.DateTimeFormat(t,{dateStyle:"short",timeStyle:"long",timeZone:"UTC"}),a=new Intl.DateTimeFormat(t,{timeStyle:"long",timeZone:"UTC"}),o=new Intl.NumberFormat(t,{maximumFractionDigits:0});return{percentFormatter:e,dateFormatter:n,dateTimeFormatter:l,timeFormatter:a,integerFormatter:o}}),Y=(t,e)=>{let{format:n,dataType:l,locale:a}=e,{percentFormatter:o,dateFormatter:i,dateTimeFormatter:s,timeFormatter:c,integerFormatter:d}=ao(a);if(t==null||t==="")return"";switch(l){case"time":return t;case"datetime":case"date":{let g=new Date(t);switch(n){case"Date":return i.format(g);case"Datetime":return s.format(g);case"Time":return c.format(g);default:return t}}case"integer":case"number":{let g=Number.parseFloat(t);switch(n){case"Auto":return G(g,a);case"Percent":return o.format(g);case"Scientific":return Gt(g,{shouldRound:!0,locale:a});case"Engineering":return Ms(g,a);case"Integer":return d.format(g);default:return t}}case"string":switch(n){case"Uppercase":return t.toUpperCase();case"Lowercase":return t.toLowerCase();case"Capitalize":return t.charAt(0).toUpperCase()+t.slice(1);case"Title":return t.split(" ").map(g=>g.charAt(0).toUpperCase()+g.slice(1).toLowerCase()).join(" ");default:return t}case"boolean":switch(n){case"Yes/No":return t?"Yes":"No";case"On/Off":return t?"On":"Off";default:return t}case void 0:case"unknown":return t;default:return ce(l),t}};function oo(t,e){switch(t){case"Date":return String(Y(new Date,{format:"Date",dataType:"date",locale:e}));case"Datetime":return String(Y(new Date,{format:"Datetime",dataType:"date",locale:e}));case"Time":return String(Y(new Date,{format:"Time",dataType:"date",locale:e}));case"Percent":return String(Y(.1234,{format:"Percent",dataType:"number",locale:e}));case"Scientific":return String(Y(12345678910,{format:"Scientific",dataType:"number",locale:e}));case"Engineering":return String(Y(12345678910,{format:"Engineering",dataType:"number",locale:e}));case"Integer":return String(Y(1234.567,{format:"Integer",dataType:"number",locale:e}));case"Auto":return String(Y(1234.567,{format:"Auto",dataType:"number",locale:e}));default:return null}}const ro={date:["Date","Datetime","Time"],datetime:["Date","Datetime","Time"],time:[],integer:["Auto","Percent","Scientific","Engineering","Integer"],number:["Auto","Percent","Scientific","Engineering","Integer"],string:["Uppercase","Lowercase","Capitalize","Title"],boolean:["Yes/No","On/Off"],unknown:[]};var Jn=N(A());function io(t,e){var i,s,c;let n=(i=t.columnDef.meta)==null?void 0:i.dataType,l=n?ro[n]:[];if(l.length===0||!((s=t.getCanFormat)!=null&&s.call(t)))return null;let a=bi[n||"unknown"],o=(c=t.getColumnFormatting)==null?void 0:c.call(t);return(0,r.jsxs)(je,{children:[(0,r.jsxs)(At,{children:[(0,r.jsx)(a,{className:"mo-dropdown-icon"}),"Format"]}),(0,r.jsx)(nt,{children:(0,r.jsxs)(Ve,{children:[(0,r.jsxs)("div",{className:"text-xs text-muted-foreground px-2 py-1",children:["Locale: ",e]}),!!o&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V,{variant:"danger",onClick:()=>t.setColumnFormatting(void 0),children:"Clear"},"clear"),(0,r.jsx)(ve,{})]}),l.map(d=>(0,r.jsxs)(V,{onClick:()=>t.setColumnFormatting(d),children:[(0,r.jsx)("span",{className:M(o===d&&"font-semibold"),children:d}),(0,r.jsx)("span",{className:"ml-auto pl-5 text-xs text-muted-foreground",children:oo(d,e)})]},d))]})})]})}function so(t){var e;return!((e=t.getCanWrap)!=null&&e.call(t))||!t.getColumnWrapping?null:t.getColumnWrapping()==="wrap"?(0,r.jsxs)(V,{onClick:()=>t.toggleColumnWrapping("nowrap"),children:[(0,r.jsx)(Sn,{className:"mo-dropdown-icon"}),"No wrap text"]}):(0,r.jsxs)(V,{onClick:()=>t.toggleColumnWrapping("wrap"),children:[(0,r.jsx)(Jt,{className:"mo-dropdown-icon"}),"Wrap text"]})}function uo(t){var e;return!((e=t.getCanPin)!=null&&e.call(t))||!t.getIsPinned?null:t.getIsPinned()===!1?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(V,{onClick:()=>t.pin("left"),children:[(0,r.jsx)(Ui,{className:"mo-dropdown-icon"}),"Freeze left"]}),(0,r.jsxs)(V,{onClick:()=>t.pin("right"),children:[(0,r.jsx)(qi,{className:"mo-dropdown-icon"}),"Freeze right"]})]}):(0,r.jsxs)(V,{onClick:()=>t.pin(!1),children:[(0,r.jsx)(bn,{className:"mo-dropdown-icon"}),"Unfreeze"]})}function co(t){var e;return!((e=t.getCanCopy)!=null&&e.call(t))||t.id.startsWith("__m_column__")?null:(0,r.jsxs)(V,{onClick:async()=>await at(t.id),children:[(0,r.jsx)(Xl,{className:"mo-dropdown-icon"}),"Copy column name"]})}var Xn=Cn,Zn=Wt;function go(t){return t.getCanSort()?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(V,{onClick:()=>t.toggleSorting(!1),children:[(0,r.jsx)(Xn,{className:"mo-dropdown-icon"}),"Asc"]}),(0,r.jsxs)(V,{onClick:()=>t.toggleSorting(!0),children:[(0,r.jsx)(Zn,{className:"mo-dropdown-icon"}),"Desc"]}),t.getIsSorted()&&(0,r.jsxs)(V,{onClick:()=>t.clearSorting(),children:[(0,r.jsx)(Pt,{className:"mo-dropdown-icon"}),"Clear sort"]}),(0,r.jsx)(ve,{})]}):null}function mo(t){if(!t.getCanSort())return null;let e=t.getIsSorted(),n=t.getFilterValue()!==void 0,l;return l=n&&e?Nn:n?kn:e?e==="desc"?Zn:Xn:Pt,(0,r.jsx)(l,{className:"h-3 w-3"})}function po(t){var n;let e=(n=t.columnDef.meta)==null?void 0:n.dtype;return e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex-1 px-2 text-xs text-muted-foreground font-bold",children:e}),(0,r.jsx)(ve,{})]}):null}const fo=t=>{let e=(0,Jn.c)(5),{column:n}=t,l;e[0]===n?l=e[1]:(l=()=>n.setFilterValue(void 0),e[0]=n,e[1]=l);let a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,r.jsx)(In,{className:"mo-dropdown-icon"}),e[2]=a):a=e[2];let o;return e[3]===l?o=e[4]:(o=(0,r.jsxs)(V,{onClick:l,children:[a,"Clear filter"]}),e[3]=l,e[4]=o),o};function ho(t,e){var n,l;return!t.getCanFilter()||((n=t.columnDef.meta)==null?void 0:n.dataType)==="boolean"||!((l=t.columnDef.meta)!=null&&l.filterType)?null:(0,r.jsx)(je,{children:(0,r.jsxs)(V,{onClick:()=>e(!0),children:[(0,r.jsx)(Qi,{className:"mo-dropdown-icon"}),"Filter by values"]})})}const jt=t=>{let e=(0,Jn.c)(8),{onApply:n,onClear:l,clearButtonDisabled:a}=t,o;e[0]===n?o=e[1]:(o=(0,r.jsx)(D,{variant:"link",size:"sm",onClick:n,children:"Apply"}),e[0]=n,e[1]=o);let i;e[2]!==a||e[3]!==l?(i=(0,r.jsx)(D,{variant:"linkDestructive",size:"sm",className:"",onClick:l,disabled:a,children:"Clear"}),e[2]=a,e[3]=l,e[4]=i):i=e[4];let s;return e[5]!==o||e[6]!==i?(s=(0,r.jsxs)("div",{className:"flex gap-2 px-2 justify-between",children:[o,i]}),e[5]=o,e[6]=i,e[7]=s):s=e[7],s};ca=function(t){return Ne.collect(t,([e])=>e,([,[e]])=>e)},Ut="__select__",rt="_marimo_row_id",ia="too_many";function xo(t){var e,n;if(t)return(n=(e=/^datetime(?:64)?\[[^,]+,([^,]+)]$/.exec(t))==null?void 0:e[1])==null?void 0:n.trim()}function wo(t,e){let n=new Map;for(let l of e){if(l.includes("__select__"))continue;let[a]=l.split("_"),o=t.getRow(a);if(!o)continue;let i=o.getAllCells().find(c=>c.id===l);if(!i)continue;let s=n.get(a)??[];s.push(Oe({value:i.getValue()})),n.set(a,s)}return bo([...n.values()])}function bo(t){return t.map(e=>e.join("	")).join(`
`)}function Te(t,e,n){var x,y;let l=t.getRow(e.rowId),a=t.getRow(n.rowId);if(!l||!a)return[];let o=l.index,i=a.index,s=(x=t.getColumn(e.columnId))==null?void 0:x.getIndex(),c=(y=t.getColumn(n.columnId))==null?void 0:y.getIndex();if(s===void 0||c===void 0)return[];let d=Math.min(o,i),g=Math.max(o,i),f=Math.min(s,c),u=Math.max(s,c),p=[];p.length=(g-d+1)*(u-f+1);let w=0,m=t.getAllColumns().map(b=>b.id),h=t.getRowModel().rows;for(let b=d;b<=g;b++){let S=h[b].id;for(let v=f;v<=u;v++){let j=m[v];p[w++]=yo(S,j)}}return p.length=w,p}function yo(t,e){return`${t}_${e}`}function So(){return{selectedCells:new Set,copiedCells:new Set,selectedStartCell:null,focusedCell:null,isSelecting:!1}}var{valueAtom:se,useActions:Co,createActions:Hs,reducer:Ls}=Ei(So,{setSelectedCells:(t,e)=>({...t,selectedCells:e}),setSelectedStartCell:(t,e)=>({...t,selectedStartCell:e}),setFocusedCell:(t,e)=>({...t,focusedCell:e}),setIsSelecting:(t,e)=>({...t,isSelecting:e}),setCopiedCells:(t,e)=>({...t,copiedCells:e}),clearSelection:t=>({...t,selectedCells:new Set,selectedStartCell:null,focusedCell:null}),selectAllCells:(t,e)=>{let n=e.getRowModel().rows.flatMap(l=>l.getAllCells().map(a=>a.id));return{...t,selectedCells:new Set(n)}},toggleCurrentRowSelection:(t,e)=>{var l,a;let n=t.focusedCell;return n!=null&&n.rowId&&((a=(l=e.getRow(n==null?void 0:n.rowId))==null?void 0:l.toggleSelected)==null||a.call(l)),t},updateSelection:(t,{newCell:e,isShiftKey:n,table:l})=>{if(n&&t.selectedStartCell){let a=Te(l,t.selectedStartCell,e);return{...t,selectedCells:new Set(a),focusedCell:e}}else return{...t,selectedCells:new Set([e.cellId]),selectedStartCell:e,focusedCell:e}},updateRangeSelection:(t,{cell:e,table:n})=>{if(!t.selectedStartCell)return t;let l={rowId:e.row.id,columnId:e.column.id,cellId:e.id},a=Te(n,t.selectedStartCell,l);return a.length>1&&_o(),{...t,selectedCells:new Set(a)}},handleCopy:(t,{table:e,onCopyComplete:n})=>{let l=window.getSelection();if(l&&l.toString().length>0)return t;let a=wo(e,t.selectedCells);return at(a),n(),{...t,copiedCells:t.selectedCells}},navigate:(t,{direction:e,isShiftKey:n,table:l})=>{let a=t.focusedCell??t.selectedStartCell;if(!a)return t;let o;if(e==="up"||e==="down"){let s=l.getRowModel().rows,c=s.findIndex(g=>g.id===a.rowId);if(c<0)return t;let d=e==="up"?s[c-1]:s[c+1];if(!d)return t;o=d.getAllCells().find(g=>g.column.id===a.columnId)}if(e==="left"||e==="right"){let s=l.getRow(a.rowId).getAllCells(),c=s.findIndex(d=>d.id===a.cellId);if(c<0)return t;o=e==="left"?s[c-1]:s[c+1]}if(!o)return t;let i={rowId:o.row.id,columnId:o.column.id,cellId:o.id};if(n&&t.selectedStartCell){let s=Te(l,t.selectedStartCell,i);return{...t,selectedCells:new Set(s),focusedCell:i}}else return{...t,selectedCells:new Set([i.cellId]),selectedStartCell:i,focusedCell:i}},handleCellMouseDown:(t,{cell:e,isShiftKey:n,isCtrlKey:l,table:a})=>{let o={rowId:e.row.id,columnId:e.column.id,cellId:e.id};if(n&&t.selectedStartCell){let i=Te(a,t.selectedStartCell,o);return{...t,selectedCells:new Set(i),isSelecting:!0}}return l?t:t.selectedCells.size===1&&t.selectedCells.has(o.cellId)?{...t,selectedCells:new Set,selectedStartCell:null,focusedCell:null}:{...t,selectedCells:new Set([o.cellId]),selectedStartCell:o,focusedCell:o,isSelecting:!0}}});const vo=re(t=>t(se).selectedCells),jo=re(t=>t(se).copiedCells);re(t=>t(se).selectedStartCell),re(t=>t(se).focusedCell),re(t=>t(se).isSelecting);const Ro=t=>re(e=>{let n=e(vo),l=e(jo);return{isSelected:n.has(t),isCopied:l.has(t)}}),_o=()=>{var t;window.getSelection&&((t=window.getSelection())==null||t.empty())};var Fo=N(A());const Qn=(0,C.memo)(t=>{let e=(0,Fo.c)(9),{cellId:n,className:l}=t,a;e[0]===n?a=e[1]:(a=Ro(n),e[0]=n,e[1]=a);let{isSelected:o,isCopied:i}=Dl(a);if(!o&&!i)return null;let s=o&&"bg-(--green-3)",c=i&&"bg-(--green-4) transition-colors duration-150",d;e[2]!==l||e[3]!==s||e[4]!==c?(d=M("absolute inset-0 pointer-events-none",s,c,l),e[2]=l,e[3]=s,e[4]=c,e[5]=d):d=e[5];let g;return e[6]!==n||e[7]!==d?(g=(0,r.jsx)("div",{"data-cell-id":n,className:d}),e[6]=n,e[7]=d,e[8]=g):g=e[8],g});Qn.displayName="CellRangeSelectionIndicator";var Mo=N(A());const ko=t=>{let e=(0,Mo.c)(30),{table:n}=t,l=Co(),a;e[0]!==l||e[1]!==n?(a=()=>{l.handleCopy({table:n,onCopyComplete:()=>{setTimeout(()=>{l.setCopiedCells(new Set)},500)}})},e[0]=l,e[1]=n,e[2]=a):a=e[2];let o=ie(a),i;e[3]!==l||e[4]!==n?(i=(b,S)=>{l.updateSelection({newCell:b,isShiftKey:S,table:n})},e[3]=l,e[4]=n,e[5]=i):i=e[5];let s=ie(i),c;e[6]!==l||e[7]!==n?(c=(b,S)=>{l.navigate({direction:S,isShiftKey:b.shiftKey,table:n})},e[6]=l,e[7]=n,e[8]=c):c=e[8];let d=ie(c),g;e[9]!==l||e[10]!==o||e[11]!==d||e[12]!==n?(g=b=>{e:switch(b.key){case"c":X.isMetaOrCtrl(b)&&o();break e;case"ArrowDown":b.preventDefault(),d(b,"down");break e;case"ArrowUp":b.preventDefault(),d(b,"up");break e;case"ArrowLeft":b.preventDefault(),d(b,"left");break e;case"ArrowRight":b.preventDefault(),d(b,"right");break e;case"Enter":b.preventDefault(),l.toggleCurrentRowSelection(n);break e;case"Escape":l.clearSelection();break e;case"a":(b.metaKey||b.ctrlKey)&&(b.preventDefault(),l.selectAllCells(n))}},e[9]=l,e[10]=o,e[11]=d,e[12]=n,e[13]=g):g=e[13];let f=ie(g),u;e[14]!==l||e[15]!==n?(u=(b,S)=>{l.handleCellMouseDown({cell:S,isShiftKey:b.shiftKey,isCtrlKey:b.ctrlKey,table:n})},e[14]=l,e[15]=n,e[16]=u):u=e[16];let p=ie(u),w;e[17]===l?w=e[18]:(w=()=>{l.setIsSelecting(!1)},e[17]=l,e[18]=w);let m=ie(w),h;e[19]!==l||e[20]!==n?(h=(b,S)=>{b.buttons===1&&l.updateRangeSelection({cell:S,table:n})},e[19]=l,e[20]=n,e[21]=h):h=e[21];let x=ie(h),y;return e[22]!==l.clearSelection||e[23]!==p||e[24]!==x||e[25]!==m||e[26]!==f||e[27]!==o||e[28]!==s?(y={handleCellMouseDown:p,handleCellMouseUp:m,handleCellMouseOver:x,handleCopy:o,handleCellsKeyDown:f,updateSelection:s,clearSelection:l.clearSelection},e[22]=l.clearSelection,e[23]=p,e[24]=x,e[25]=m,e[26]=f,e[27]=o,e[28]=s,e[29]=y):y=e[29],y};var Io=N(A()),No=re(t=>t(se).focusedCell);function Vo(t){let e=(0,Io.c)(2),n;e[0]===t?n=e[1]:(n=l=>{l!=null&&l.cellId&&setTimeout(()=>{var o;let a=(o=t.current)==null?void 0:o.querySelector(`[data-cell-id="${l.cellId}"]`);if(!a){Ce.warn("[ScrollIntoView] Could not find cell with ID:",l.cellId);return}a.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},0)},e[0]=t,e[1]=n),Mi(No,n)}function Po(t,e){var l;if(!((l=t.getRowModel().rows)!=null&&l.length))return null;let n=a=>a.map(o=>o.headers.map(i=>{let{className:s,style:c}=el(i.column);return(0,r.jsx)(Is,{className:M("h-auto min-h-10 whitespace-pre align-top",s),style:c,ref:d=>{Do(d,t,i.column)},children:i.isPlaceholder?null:ot(i.column.columnDef.header,i.getContext())},i.id)}));return(0,r.jsx)(ks,{className:M(e&&"sticky top-0 z-10"),children:(0,r.jsxs)(qt,{children:[n(t.getLeftHeaderGroups()),n(t.getCenterHeaderGroups()),n(t.getRightHeaderGroups())]})})}const Ao=({table:t,columns:e,rowViewerPanelOpen:n,getRowIndex:l,viewedRowIdx:a})=>{var w;let o=(0,C.useRef)(null);Vo(o);let{handleCellMouseDown:i,handleCellMouseUp:s,handleCellMouseOver:c,handleCellsKeyDown:d}=ko({table:t});function g(m,h){let x=/{{(\w+)}}/g,y=new Map;for(let b of h){let S=b.getValue(),v=Oe({value:S,nullAsEmptyString:!0});y.set(b.column.id,v)}return m.replaceAll(x,(b,S)=>{let v=y.get(S);return v===void 0?`{{${S}}}`:v})}let f=m=>m.map(h=>{var v,j;let{className:x,style:y}=el(h.column),b=Object.assign({},((v=h.getUserStyling)==null?void 0:v.call(h))||{},y),S=((j=h.getHoverTitle)==null?void 0:j.call(h))??void 0;return(0,r.jsxs)(oa,{tabIndex:0,className:M("whitespace-pre truncate max-w-[300px] outline-hidden",h.column.getColumnWrapping&&h.column.getColumnWrapping()==="wrap"&&"whitespace-pre-wrap min-w-[200px]","px-1.5 py-[0.18rem]",x),style:b,title:S,onMouseDown:F=>i(F,h),onMouseUp:s,onMouseOver:F=>c(F,h),children:[(0,r.jsx)(Qn,{cellId:h.id}),(0,r.jsx)("div",{className:"relative",children:ot(h.column.columnDef.cell,h.getContext())})]},h.id)}),u=m=>{var h;if(n){let x=(l==null?void 0:l(m.original,m.index))??m.index;(h=m.focusRow)==null||h.call(m,x)}},p=t.getState().cellHoverTemplate||null;return(0,r.jsx)(Ns,{onKeyDown:d,ref:o,children:(w=t.getRowModel().rows)!=null&&w.length?t.getRowModel().rows.map(m=>{var b;let h=n?(l==null?void 0:l(m.original,m.index))??m.index:void 0,x=n&&a===h,y;if(p){let S=((b=m.getVisibleCells)==null?void 0:b.call(m))??[...m.getLeftVisibleCells(),...m.getCenterVisibleCells(),...m.getRightVisibleCells()];y=p?g(p,S):void 0}return(0,r.jsxs)(qt,{"data-state":m.getIsSelected()&&"selected",title:y,className:M("border-t h-6",n&&"cursor-pointer",x&&"bg-(--blue-3) hover:bg-(--blue-3) data-[state=selected]:bg-(--blue-4)"),onClick:()=>u(m),children:[f(m.getLeftVisibleCells()),f(m.getCenterVisibleCells()),f(m.getRightVisibleCells())]},m.id)}):(0,r.jsx)(qt,{children:(0,r.jsx)(oa,{colSpan:e.length,className:"h-24 text-center",children:"No results."})})})};function el(t){let e=t.getIsPinned(),n=e==="left"&&t.getIsLastColumn("left"),l=e==="right"&&t.getIsFirstColumn("right");return{className:M(e&&"bg-inherit","shadow-r z-10"),style:{boxShadow:n&&t.id!=="__select__"?"-4px 0 4px -4px var(--slate-8) inset":l?"4px 0 4px -4px var(--slate-8) inset":void 0,left:e==="left"?`${t.getStart("left")}px`:void 0,right:e==="right"?`${t.getAfter("right")}px`:void 0,opacity:1,position:e?"sticky":"relative",zIndex:e?1:0,width:t.getSize()}}}function Do(t,e,n){t&&e.getState().columnSizing[n.id]!==t.getBoundingClientRect().width&&e.setColumnSizing(l=>({...l,[n.id]:t.getBoundingClientRect().width}))}function Oe(t){let{value:e,nullAsEmptyString:n=!1}=t;return typeof e=="object"&&e?JSON.stringify(e):e===null&&n?"":String(e)}var Rt=30;tn=({column:t,header:e,className:n,calculateTopKRows:l})=>{let[a,o]=(0,C.useState)(!1),{locale:i}=ge();if(!e)return null;if(!t.getCanSort()&&!t.getCanFilter())return(0,r.jsx)("div",{className:M(n),children:e});let s=t.getFilterValue()!==void 0,c=!t.getIsSorted()&&!s;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(zt,{modal:!1,children:[(0,r.jsx)(Dt,{asChild:!0,children:(0,r.jsxs)("div",{className:M("group flex items-center my-1 space-between w-full select-none gap-2 border hover:border-border border-transparent hover:bg-(--slate-3) data-[state=open]:bg-(--slate-3) data-[state=open]:border-border rounded px-1 -mx-1",n),"data-testid":"data-table-sort-button",children:[(0,r.jsx)("span",{className:"flex-1",children:e}),(0,r.jsx)("span",{className:M("h-5 py-1 px-1",c&&"invisible group-hover:visible data-[state=open]:visible"),children:mo(t)})]})}),(0,r.jsxs)(Et,{align:"start",children:[po(t),go(t),co(t),uo(t),so(t),io(t,i),(0,r.jsx)(ve,{}),Eo(t),ho(t,o),s&&(0,r.jsx)(fo,{column:t})]})]}),a&&(0,r.jsx)(Ho,{setIsFilterValueOpen:o,calculateTopKRows:l,column:t})]})};function Eo(t){var l;if(!t.getCanFilter())return null;let e=(l=t.columnDef.meta)==null?void 0:l.filterType;if(!e)return null;let n=(0,r.jsxs)(At,{children:[(0,r.jsx)(ln,{className:"mo-dropdown-icon"}),"Filter"]});return e==="boolean"?(0,r.jsxs)(je,{children:[n,(0,r.jsx)(nt,{children:(0,r.jsx)(Ve,{children:(0,r.jsx)(zo,{column:t})})})]}):e==="text"?(0,r.jsxs)(je,{children:[n,(0,r.jsx)(nt,{children:(0,r.jsx)(Ve,{children:(0,r.jsx)(Oo,{column:t})})})]}):e==="number"?(0,r.jsxs)(je,{children:[n,(0,r.jsx)(nt,{children:(0,r.jsx)(Ve,{children:(0,r.jsx)(To,{column:t})})})]}):(e==="select"||e==="time"||e==="datetime"||e==="date"||ce(e),null)}var tl={is_null:"is_null",is_not_null:"is_not_null"},nl=({column:t,defaultItem:e,operator:n,setOperator:l})=>{let a=o=>{l(o),(o==="is_null"||o==="is_not_null")&&t.setFilterValue(K.text({operator:o}))};return(0,r.jsxs)(Yl,{value:n,onValueChange:o=>a(o),children:[(0,r.jsx)(Kl,{className:M("border-border shadow-none! ring-0! w-full mb-0.5",(n==="is_null"||n==="is_not_null")&&"mb-2"),children:(0,r.jsx)(Bl,{defaultValue:n})}),(0,r.jsxs)(Wl,{children:[e&&(0,r.jsx)(et,{value:e,children:Fi(e)}),(0,r.jsx)(Ti,{}),(0,r.jsx)(et,{value:tl.is_null,children:"Is null"}),(0,r.jsx)(et,{value:tl.is_not_null,children:"Is not null"})]})]})},zo=({column:t})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(V,{onClick:()=>t.setFilterValue(K.boolean({value:!0,operator:"is_true"})),children:"True"}),(0,r.jsx)(V,{onClick:()=>t.setFilterValue(K.boolean({value:!1,operator:"is_false"})),children:"False"}),(0,r.jsx)(ve,{}),(0,r.jsx)(V,{onClick:()=>t.setFilterValue(K.boolean({operator:"is_null"})),children:"Is null"}),(0,r.jsx)(V,{onClick:()=>t.setFilterValue(K.boolean({operator:"is_not_null"})),children:"Is not null"})]}),To=({column:t})=>{let e=t.getFilterValue(),n=e!==void 0,[l,a]=(0,C.useState)((e==null?void 0:e.operator)??"between"),[o,i]=(0,C.useState)(e==null?void 0:e.min),[s,c]=(0,C.useState)(e==null?void 0:e.max),d=(0,C.useRef)(null),g=(0,C.useRef)(null),f=(u={})=>{t.setFilterValue(K.number({min:u.min??o,max:u.max??s,operator:l==="between"?void 0:l}))};return(0,r.jsxs)("div",{className:"flex flex-col gap-1 pt-3 px-2",children:[(0,r.jsx)(nl,{column:t,defaultItem:"between",operator:l,setOperator:a}),l==="between"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)(Ql,{ref:d,value:o,onChange:u=>i(u),"aria-label":"min",placeholder:"min",onKeyDown:u=>{var p;u.key==="Enter"&&f({min:Number.parseFloat(u.currentTarget.value)}),u.key==="Tab"&&((p=g.current)==null||p.focus())},className:"shadow-none! border-border hover:shadow-none!"}),(0,r.jsx)(Pn,{className:"h-5 w-5 text-muted-foreground"}),(0,r.jsx)(Ql,{ref:g,value:s,onChange:u=>c(u),"aria-label":"max",onKeyDown:u=>{var p;u.key==="Enter"&&f({max:Number.parseFloat(u.currentTarget.value)}),u.key==="Tab"&&((p=d.current)==null||p.focus())},placeholder:"max",className:"shadow-none! border-border hover:shadow-none!"})]}),(0,r.jsx)(jt,{onApply:f,onClear:()=>{i(void 0),c(void 0),t.setFilterValue(void 0)},clearButtonDisabled:!n})]})]})},Oo=({column:t})=>{let e=t.getFilterValue(),n=e!==void 0,[l,a]=(0,C.useState)((e==null?void 0:e.text)??""),[o,i]=(0,C.useState)((e==null?void 0:e.operator)??"contains"),s=()=>{if(o!=="contains"){t.setFilterValue(K.text({operator:o}));return}if(l===""){t.setFilterValue(void 0);return}t.setFilterValue(K.text({text:l,operator:o}))};return(0,r.jsxs)("div",{className:"flex flex-col gap-1 pt-3 px-2",children:[(0,r.jsx)(nl,{column:t,defaultItem:"contains",operator:o,setOperator:i}),o==="contains"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ns,{type:"text",icon:(0,r.jsx)(Dn,{className:"h-3 w-3 text-muted-foreground mb-1"}),value:l??"",onChange:c=>a(c.target.value),placeholder:"Text...",onKeyDown:c=>{c.key==="Enter"&&s()},className:"shadow-none! border-border hover:shadow-none!"}),(0,r.jsx)(jt,{onApply:s,onClear:()=>{a(""),t.setFilterValue(void 0)},clearButtonDisabled:!n})]})]})},Ho=({setIsFilterValueOpen:t,calculateTopKRows:e,column:n})=>{let[l,a]=(0,C.useState)(new Set),[o,i]=(0,C.useState)(""),{data:s,isPending:c,error:d}=xs(async()=>e?(await e({column:n.id,k:Rt})).data:null,[]),g=(0,C.useMemo)(()=>{if(!s)return[];try{return s.filter(([m,h])=>m===void 0?!1:String(m).toLowerCase().includes(o.toLowerCase()))}catch(m){return Ce.error("Error filtering data",m),[]}},[s,o]),f;c&&(f=(0,r.jsx)(Zl,{size:"medium",className:"mx-auto mt-12 mb-10"})),d&&(f=(0,r.jsx)(la,{error:d,className:"my-10 mx-4"}));let u=m=>{a(h=>{let x=h.has(m),y=new Set(h);return x?y.delete(m):y.add(m),y})},p=m=>{s&&a(m?new Set(g.map(([h])=>h)):new Set)},w=()=>{if(l.size===0){n.setFilterValue(void 0);return}n.setFilterValue(K.select({options:[...l],operator:"in"}))};if(s){let m=l.size===g.length;f=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(Fs,{className:"text-sm outline-hidden",shouldFilter:!1,children:[(0,r.jsx)(js,{placeholder:"Search",autoFocus:!0,onValueChange:h=>i(h.trim())}),(0,r.jsx)(Rs,{children:"No results found."}),(0,r.jsxs)(_s,{className:"border-b",children:[g.length>0&&(0,r.jsxs)(aa,{value:"__select-all__",className:"border-b rounded-none px-3",onSelect:()=>p(!m),children:[(0,r.jsx)(Ze,{checked:l.size===g.length,"aria-label":"Select all",className:"mr-3 h-3.5 w-3.5"}),(0,r.jsx)("span",{className:"font-bold flex-1",children:n.id}),(0,r.jsx)("span",{className:"font-bold",children:"Count"})]}),g.map(([h,x],y)=>{let b=l.has(h),S=Oe({value:h});return(0,r.jsxs)(aa,{value:S,className:"not-last:border-b rounded-none px-3",onSelect:()=>u(h),children:[(0,r.jsx)(Ze,{checked:b,"aria-label":"Select row",className:"mr-3 h-3.5 w-3.5"}),(0,r.jsx)("span",{className:"flex-1 overflow-hidden max-h-20 line-clamp-3",children:S}),(0,r.jsx)("span",{className:"ml-3",children:x})]},y)})]}),g.length===Rt&&(0,r.jsxs)("span",{className:"text-xs text-muted-foreground mt-1.5 text-center",children:["Only showing the top ",Rt," values"]})]}),(0,r.jsx)(jt,{onApply:w,onClear:()=>{a(new Set)},clearButtonDisabled:l.size===0})]})}return(0,r.jsxs)(ya,{open:!0,onOpenChange:m=>!m&&t(!1),className:"w-80 p-0",children:[(0,r.jsx)(Cs,{className:"absolute top-2 right-2",children:(0,r.jsx)(D,{variant:"link",size:"sm",onClick:()=>t(!1),children:(0,r.jsx)(Ul,{className:"h-4 w-4"})})}),(0,r.jsx)("div",{className:"flex flex-col gap-1.5 py-2",children:f})]})};function Lo(t,e){let[n,l]=C.useState(t);return C.useEffect(()=>{let a=setTimeout(()=>{l(t)},e);return()=>{clearTimeout(a)}},[t,e]),n}Bt=function(t={}){let{threshold:e=1,root:n=null,rootMargin:l="0px"}=t,[a,o]=C.useState(null),i=C.useRef(null);return[C.useCallback(s=>{if(i.current&&(i.current=(i.current.disconnect(),null)),(s==null?void 0:s.nodeType)===Node.ELEMENT_NODE){let c=new IntersectionObserver(([d])=>{o(d)},{threshold:e,root:n,rootMargin:l});c.observe(s),i.current=c}},[e,n,l]),a]},xa=function(t){let[e,n]=C.useState(t),[l,a]=C.useState(null);return t!==e&&(a(e),n(t)),l};var Go=N(A());en=t=>{let e=(0,Go.c)(13),{milliseconds:n,children:l,fallback:a,visibility:o,threshold:i,rootMargin:s}=t,c=o===void 0?!1:o,d=i===void 0?0:i,g=s===void 0?"0px":s,[f,u]=(0,C.useState)(!1),[p,w]=(0,C.useState)(!1),m;e[0]!==g||e[1]!==d?(m={threshold:d,root:null,rootMargin:g},e[0]=g,e[1]=d,e[2]=m):m=e[2];let[h,x]=Bt(m),y;e[3]===(x==null?void 0:x.isIntersecting)?y=e[4]:(y=()=>{x!=null&&x.isIntersecting&&w(!0)},e[3]=x==null?void 0:x.isIntersecting,e[4]=y);let b=x==null?void 0:x.isIntersecting,S;e[5]===b?S=e[6]:(S=[b],e[5]=b,e[6]=S),(0,C.useEffect)(y,S);let v,j;e[7]===n?(v=e[8],j=e[9]):(v=()=>{let H=setTimeout(()=>{u(!0)},n);return()=>{clearTimeout(H)}},j=[n],e[7]=n,e[8]=v,e[9]=j),(0,C.useEffect)(v,j);let F=c&&!p?!1:f,I=c?h:null,P=F?l:a,E;return e[10]!==I||e[11]!==P?(E=(0,r.jsx)("div",{ref:I,children:P}),e[10]=I,e[11]=P,e[12]=E):E=e[12],E};var He=N(A());const ll=t=>{let e=(0,He.c)(15),{date:n,type:l,children:a}=t;if(!n||Number.isNaN(new Date(n).getTime()))return a;let o;e[0]===n?o=e[1]:(o=new Date(n),e[0]=n,e[1]=o);let i=o,s;e[2]===i?s=e[3]:(s=(0,r.jsx)("div",{className:"text-muted-foreground mb-2",children:(0,r.jsx)(Bo,{date:i})}),e[2]=i,e[3]=s);let c;e[4]!==i||e[5]!==l?(c=(0,r.jsx)("div",{className:"space-y-1",children:l==="datetime"?(0,r.jsx)(qo,{date:i}):(0,r.jsx)($o,{date:i})}),e[4]=i,e[5]=l,e[6]=c):c=e[6];let d;e[7]!==s||e[8]!==c?(d=(0,r.jsxs)("div",{className:"min-w-[240px] p-1 text-sm",children:[s,c]}),e[7]=s,e[8]=c,e[9]=d):d=e[9];let g=d,f;e[10]===a?f=e[11]:(f=(0,r.jsx)("span",{children:a}),e[10]=a,e[11]=f);let u;return e[12]!==g||e[13]!==f?(u=(0,r.jsx)($,{content:g,delayDuration:200,children:f}),e[12]=g,e[13]=f,e[14]=u):u=e[14],u};var qo=t=>{let e=(0,He.c)(26),{date:n}=t,{locale:l}=ge(),a;e[0]===l?a=e[1]:(a=Intl.DateTimeFormat(l).resolvedOptions(),e[0]=l,e[1]=a);let o=a.timeZone,i=n.getUTCMilliseconds()!==0,s;e[2]===i?s=e[3]:(s=i?{timeZone:"UTC",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}:{timeZone:"UTC",dateStyle:"long",timeStyle:"medium"},e[2]=i,e[3]=s);let c=lt(s),d;e[4]!==i||e[5]!==o?(d=i?{timeZone:o,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3}:{timeZone:o,dateStyle:"long",timeStyle:"medium"},e[4]=i,e[5]=o,e[6]=d):d=e[6];let g=lt(d),f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsx)("span",{className:"bg-muted rounded-md py-1 px-2 w-fit ml-auto",children:"UTC"}),e[7]=f):f=e[7];let u;e[8]!==n||e[9]!==c?(u=c.format(n),e[8]=n,e[9]=c,e[10]=u):u=e[10];let p;e[11]===u?p=e[12]:(p=(0,r.jsxs)("div",{className:"grid grid-cols-[fit-content(40px)_1fr] gap-4 items-center justify-items-end",children:[f,(0,r.jsx)("span",{children:u})]}),e[11]=u,e[12]=p);let w;e[13]===o?w=e[14]:(w=(0,r.jsx)("span",{className:"bg-muted rounded-md py-1 px-2 w-fit ml-auto",children:o}),e[13]=o,e[14]=w);let m;e[15]!==n||e[16]!==g?(m=g.format(n),e[15]=n,e[16]=g,e[17]=m):m=e[17];let h;e[18]===m?h=e[19]:(h=(0,r.jsx)("span",{children:m}),e[18]=m,e[19]=h);let x;e[20]!==w||e[21]!==h?(x=(0,r.jsxs)("div",{className:"grid grid-cols-[fit-content(40px)_1fr] gap-4 items-center justify-items-end",children:[w,h]}),e[20]=w,e[21]=h,e[22]=x):x=e[22];let y;return e[23]!==x||e[24]!==p?(y=(0,r.jsxs)(r.Fragment,{children:[p,x]}),e[23]=x,e[24]=p,e[25]=y):y=e[25],y},$o=t=>{let e=(0,He.c)(6),{date:n}=t,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={timeZone:"UTC",dateStyle:"long"},e[0]=l):l=e[0];let a=lt(l),o;e[1]!==n||e[2]!==a?(o=a.format(n),e[1]=n,e[2]=a,e[3]=o):o=e[3];let i;return e[4]===o?i=e[5]:(i=(0,r.jsx)("span",{children:o}),e[4]=o,e[5]=i),i},Bo=t=>{let e=(0,He.c)(6),{date:n}=t,{locale:l}=ge(),a,o;if(e[0]!==n||e[1]!==l){o=Symbol.for("react.early_return_sentinel");e:{let s=new Intl.RelativeTimeFormat(l,{numeric:"auto"}),c=(new Date().getTime()-n.getTime())/1e3;for(let[d,g,f]of[[60,1,"second"],[60,60,"minute"],[24,3600,"hour"],[365,86400,"day"],[1/0,31536e3,"year"]]){let u=c/g;if(u<d){let p=-Number(u.toFixed(1));o=(0,r.jsx)("span",{children:s.format(p,f)});break e}}a=s.format(0,"second")}e[0]=n,e[1]=l,e[2]=a,e[3]=o}else a=e[2],o=e[3];if(o!==Symbol.for("react.early_return_sentinel"))return o;let i;return e[4]===a?i=e[5]:(i=(0,r.jsx)("span",{children:a}),e[4]=a,e[5]=i),i},Uo=N(A()),Wo=t=>{let e=0;for(let n=0;n<t.length;n++){let l=t.charCodeAt(n);e=(e<<5)-e+l,e=Math.trunc(e)}return e},Ko=({numBars:t,maxHeight:e,seed:n})=>{let l=[],a=Wo(n);for(let o=0;o<t;o++){a=(a*9301+49297)%233280;let i=a/233280,s=Math.abs(Math.floor(i*e));l.push(s)}return l};const Yo=t=>{let e=(0,Uo.c)(11),{seed:n,width:l,height:a}=t,o=l/9,i=a-15,s;if(e[0]!==o||e[1]!==a||e[2]!==n||e[3]!==i||e[4]!==l){let c=Ko({numBars:9,maxHeight:i,seed:n}),d;e[6]!==a||e[7]!==l?(d={width:l,height:a},e[6]=a,e[7]=l,e[8]=d):d=e[8];let g;e[9]===o?g=e[10]:(g=(f,u)=>(0,r.jsx)("div",{className:"bg-(--slate-5) animate-pulse",style:{width:o-2,height:f}},u),e[9]=o,e[10]=g),s=(0,r.jsx)("div",{className:"flex items-end gap-px pb-2",style:d,children:c.map(g)}),e[0]=o,e[1]=a,e[2]=n,e[3]=i,e[4]=l,e[5]=s}else s=e[5];return s};var Le={slate1:"#fcfcfd",slate2:"#f9f9fb",slate3:"#f0f0f3",slate4:"#e8e8ec",slate5:"#e0e1e6",slate6:"#d9d9e0",slate7:"#cdced6",slate8:"#b9bbc6",slate9:"#8b8d98",slate10:"#80838d",slate11:"#60646c",slate12:"#1c2024"},T={mint1:"#f9fefd",mint2:"#f2fbf9",mint3:"#ddf9f2",mint4:"#c8f4e9",mint5:"#b3ecde",mint6:"#9ce0d0",mint7:"#7ecfbd",mint8:"#4cbba5",mint9:"#86ead4",mint10:"#7de0cb",mint11:"#027864",mint12:"#16433c"},fe={orange1:"#fefcfb",orange2:"#fff7ed",orange3:"#ffefd6",orange4:"#ffdfb5",orange5:"#ffd19a",orange6:"#ffc182",orange7:"#f5ae73",orange8:"#ec9455",orange9:"#f76b15",orange10:"#ef5f00",orange11:"#cc4e00",orange12:"#582d1d"};function Jo(t,e,n){return{...n,layer:[{mark:{type:"bar",color:T.mint11},encoding:{x:{field:t,type:"quantitative",bin:!0},y:{aggregate:"count",type:"quantitative",axis:null}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:t,type:"quantitative",bin:!0,axis:{title:null,labelFontSize:8.5,labelOpacity:.5,labelExpr:"(datum.value >= 10000 || datum.value <= -10000) ? format(datum.value, '.2e') : format(datum.value, '.2~f')"}},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:t,type:"quantitative",bin:!0,title:t,format:e},{aggregate:"count",type:"quantitative",title:"Count",format:",d"}]}}]}}function Xo(t,e,n,l){let a=e==="date"?"%Y-%m-%d":e==="time"?"%H:%M:%S":"%Y-%m-%dT%H:%M:%S";return{...n,layer:[{mark:{type:"bar",color:T.mint11},encoding:{x:{field:t,type:"temporal",axis:null,bin:!0,scale:l},y:{aggregate:"count",type:"quantitative",axis:null},color:{condition:{test:`datum["bin_maxbins_10_${t}_range"] === "null"`,value:fe.orange11},value:T.mint11}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:t,type:"temporal",axis:null,bin:!0,scale:l},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:`bin_maxbins_10_${t}`,type:"temporal",format:a,bin:{binned:!0},title:`${t} (start)`},{field:`bin_maxbins_10_${t}_end`,type:"temporal",format:a,bin:{binned:!0},title:`${t} (end)`},{aggregate:"count",type:"quantitative",title:"Count",format:",d"}],color:{condition:{test:`datum["bin_maxbins_10_${t}_range"] === "null"`,value:fe.orange11},value:T.mint11}}}]}}function Zo(t,e,n){return{...e,mark:{type:"bar",color:T.mint11},encoding:{y:{field:t,type:"nominal",axis:{labelExpr:"datum.label === 'true' || datum.label === 'True'  ? 'True' : 'False'",tickWidth:0,title:null,labelColor:Le.slate9}},x:{aggregate:"count",type:"quantitative",axis:null,scale:{type:"linear"}},tooltip:[{field:t,type:"nominal",title:"Value"},{aggregate:"count",type:"quantitative",title:"Count",format:",d"}]},layer:[{mark:{type:"bar",color:T.mint11,height:n}},{mark:{type:"text",align:"left",baseline:"middle",dx:3,color:Le.slate9},encoding:{text:{aggregate:"count",type:"quantitative"}}}]}}var al="%-I:%M:%S %p";function Qo(t){var n;if(t.length===0)return{};let e=(n=t.find(l=>l.bin_start!==null))==null?void 0:n.bin_start;if(!e||typeof e=="number"&&e.toString().length===4)return{};if(typeof e=="string"&&e.length===8)return{type:"temporal",timeUnit:"hoursminutesseconds",format:al};if(typeof e=="string"&&e.length===10)return{type:"temporal",timeUnit:"yearmonthdate"};if(typeof e=="string"&&e.length===19){let l=e,a=t[t.length-1].bin_end;try{let o=new Date(l);if(new Date(a).getTime()-o.getTime()<1e3*60*60*24)return{type:"temporal",timeUnit:"hoursminutesseconds",format:al}}catch(o){Ce.debug("Error parsing date",o)}return{type:"temporal",timeUnit:"yearmonthdatehoursminutes"}}return Ce.debug("Unknown time unit",e),{type:"temporal",timeUnit:"yearmonthdate"}}function ol(t){if(t.length===0)return 1;let e=t.filter(d=>d.bin_start!==null&&d.bin_end!==null);if(e.length===0)return 1;let n=e[0].bin_start,l=e[0].bin_end,a,o;if(typeof n=="number"&&typeof l=="number"){let d=e[0],g=e[e.length-1];a=d.bin_start,o=g.bin_end}else if(typeof n=="string"||typeof l=="string"){let d=e[0],g=e[e.length-1],f=new Date(d.bin_start).getTime(),u=new Date(g.bin_end).getTime();a=f,o=u}else{let d=e[0],g=e[e.length-1];a=d.bin_start.getTime(),o=g.bin_end.getTime()}let i=o-a;if(i===0)return 1;let s=e.length,c=i/s;return Math.max(c,1)}var rl=20,Ge=30,il=70,sl=5,er="ARROW1";us("arrow",Ps);let ul;xn=(ue=class{constructor(e,n,l,a,o,i){Ie(this,"columnStats",new Map);Ie(this,"columnBinValues",new Map);Ie(this,"columnValueCounts",new Map);if(this.data=e,this.fieldTypes=n,this.stats=l,this.binValues=a,this.valueCounts=o,this.opts=i,typeof this.data=="string")if(this.data.startsWith("./@file")||this.data.startsWith("/@file"))this.dataSpec={url:Ai(this.data).href},this.sourceName="source_0";else if(Wi(this.data)){this.sourceName="data_0";let s=Ki(this.data),c=Xi(s);c.startsWith(er)?this.dataSpec={values:Ji(c),format:{type:"arrow"}}:this.parseCsv(c)}else this.parseCsv(this.data),this.sourceName="data_0";else this.dataSpec={values:this.data},this.sourceName="source_0";this.columnBinValues=new Map(Object.entries(a)),this.columnValueCounts=new Map(Object.entries(o)),this.columnStats=new Map(Object.entries(l))}getColumnStats(e){return this.columnStats.get(e)}getHeaderSummary(e){return{stats:this.columnStats.get(e),type:this.fieldTypes[e],spec:this.opts.includeCharts?this.getVegaSpec(e):void 0}}parseCsv(e){this.dataSpec={values:Tl(e)}}getVegaSpec(e){if(!this.data)return null;let n=this.opts.usePreComputedValues,l=this.columnBinValues.get(e),a=this.columnValueCounts.get(e),o=a&&a.length>0,i=this.dataSpec,s=this.columnStats.get(e);n&&(o?i={values:a,name:"value_counts"}:(s!=null&&s.nulls&&(l==null||l.push({bin_start:null,bin_end:null,count:s.nulls})),i={values:l,name:"bin_values"}));let c={background:"transparent",data:i,config:{view:{stroke:"transparent"},axis:{domain:!1}},height:100},d=this.fieldTypes[e];e=e.replaceAll(".","\\."),e=e.replaceAll("[","\\[").replaceAll("]","\\]"),e=e.replaceAll(":","\\:");let g=this.getScale();switch(d){case"date":case"datetime":case"time":{if(!n)return Xo(e,d,c,g);let f=ol(l||[]),u=Qo(l||[]);if((l==null?void 0:l.length)===1)return{...c,mark:{type:"bar",color:T.mint11},encoding:{x:{field:"bin_start",type:"nominal",axis:null},y:{field:"count",type:"quantitative",axis:null},tooltip:[{field:"bin_start",type:"temporal",...u,title:`${e} (start)`},{field:"bin_end",type:"temporal",...u,title:`${e} (end)`}]}};let p={height:Ge,width:il,layer:[{mark:{type:"bar",color:T.mint11,stroke:T.mint11,strokeWidth:0},params:[{name:"hover",select:{type:"point",on:"mouseover",clear:"mouseout"}}],encoding:{x:{field:"bin_start",type:"temporal",bin:{binned:!0,step:f},axis:null},x2:{field:"bin_end",type:"temporal",axis:null},y:{field:"count",type:"quantitative",axis:null},strokeWidth:{condition:{param:"hover",empty:!1,value:.5},value:0}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:"bin_start",type:"temporal",bin:{binned:!0,step:f},axis:null},x2:{field:"bin_end",type:"temporal",bin:{binned:!0,step:f},axis:null},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:"bin_start",type:"temporal",...u,title:`${e} (start)`},{field:"bin_end",type:"temporal",...u,title:`${e} (end)`},{field:"count",type:"quantitative",title:"Count",format:",d"}]}}]},w={height:Ge,width:sl,layer:[{mark:{type:"bar",color:fe.orange11},encoding:{x:{field:"bin_start",type:"nominal",axis:null},y:{field:"count",type:"quantitative",axis:null}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:"bin_start",type:"nominal",axis:null},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:"count",type:"quantitative",title:"nulls",format:",d"}]}}],transform:[{filter:"datum['bin_start'] === null && datum['bin_end'] === null"}]},m=p,h=c;return s!=null&&s.nulls&&(h={...c,config:{...c.config,concat:{spacing:0}},resolve:{scale:{y:"shared"}}},m={hconcat:[w,p]}),{...h,...m}}case"integer":case"number":{let f=d==="integer"?",d":".2f",u=ol(l||[]);if(!n)return Jo(e,f,c);let p=this.columnStats.get(e),w={height:Ge,width:il,layer:[{mark:{type:"bar",color:T.mint11,stroke:T.mint11,strokeWidth:0},params:[{name:"hover",select:{type:"point",on:"mouseover",clear:"mouseout"}}],encoding:{x:{field:"bin_start",type:"quantitative",bin:{binned:!0,step:u}},x2:{field:"bin_end",axis:null},y:{field:"count",type:"quantitative",axis:null},strokeWidth:{condition:{param:"hover",empty:!1,value:.5},value:0}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:"bin_start",type:"quantitative",bin:{binned:!0,step:u},axis:{title:null,labelFontSize:8.5,labelOpacity:.5,labelExpr:"(datum.value >= 10000 || datum.value <= -10000) ? format(datum.value, '.2e') : format(datum.value, '.2~f')",values:[p==null?void 0:p.min,p==null?void 0:p.p25,p==null?void 0:p.median,p==null?void 0:p.p75,p==null?void 0:p.p95,p==null?void 0:p.max].filter(y=>y!==void 0)}},x2:{field:"bin_end"},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:"bin_range",type:"nominal",title:e},{field:"count",type:"quantitative",title:"Count",format:",d"}]},transform:[{calculate:`format(datum.bin_start, '${f}') + ' - ' + format(datum.bin_end, '${f}')`,as:"bin_range"}]}]},m={height:Ge,width:sl,layer:[{mark:{type:"bar",color:fe.orange11},encoding:{x:{field:"bin_start",type:"nominal",axis:null},y:{field:"count",type:"quantitative",axis:null}}},{mark:{type:"bar",opacity:0},encoding:{x:{field:"bin_start",type:"nominal",axis:null},y:{aggregate:"max",type:"quantitative",axis:null},tooltip:[{field:"count",type:"quantitative",title:"nulls",format:",d"}]}}],transform:[{filter:"datum['bin_start'] === null && datum['bin_end'] === null"}]},h=w,x=c;return p!=null&&p.nulls&&(x={...c,config:{...c.config,concat:{spacing:0}},resolve:{scale:{y:"shared"}}},h={hconcat:[m,w]}),{...x,...h}}case"boolean":{if(!n||!(s!=null&&s.true)||!(s!=null&&s.false))return Zo(e,c,rl);let f=s!=null&&s.nulls?11:rl,u=[{value:"true",count:s.true},{value:"false",count:s.false}];s!=null&&s.nulls&&u.push({value:"null",count:s.nulls});let p={field:"count",type:"quantitative",format:",d"},w=[],m=Number(s.total)||Number(s.true)+Number(s.false)+Number(s.nulls);return Number.isNaN(m)||(p={field:"count_with_percent",type:"nominal",title:"Count"},w=[{calculate:`format(datum.count, ',d') + ' (' + format(datum.count / ${m} * 100, '.1f') + '%)'`,as:"count_with_percent"}]),{...c,data:{values:u,name:"boolean_values"},mark:{type:"bar",color:T.mint11},encoding:{y:{field:"value",type:"nominal",sort:["true","false","null"],scale:s!=null&&s.nulls?{paddingInner:1}:void 0,axis:{labelExpr:"datum.label === 'true' || datum.label === 'True'  ? 'True' : datum.label === 'false' || datum.label === 'False' ? 'False' : 'Null'",tickWidth:0,title:null,labelColor:Le.slate9}},x:{field:"count",type:"quantitative",axis:null,scale:{type:"linear"}},color:{field:"value",type:"nominal",scale:{domain:["true","false","null"],range:[T.mint11,T.mint11,fe.orange11]},legend:null},tooltip:[{field:"value",type:"nominal",title:e},p]},transform:w,layer:[{mark:{type:"bar",color:T.mint11,height:f}},{mark:{type:"text",align:"left",baseline:"middle",dx:3,color:Le.slate9},encoding:{text:{field:"count",type:"quantitative",format:",d"}}}]}}case"string":{if(!n||!o)return null;let f=Number(s==null?void 0:s.total)||a.reduce((y,b)=>y+b.count,0),u="value",p=[],w=0;for(let y of a){let b=w+y.count,S=(w+b)/2,v=(b-w)/f;p.push({count:y.count,value:y.value,xStart:w,xEnd:b,xMid:S,proportion:v}),w=b}let m=[{calculate:f?`datum.count / ${f}`:"0",as:"percent"}],h={mark:{type:"bar"},params:[{name:"hover_bar",select:{type:"point",on:"mouseover",clear:"mouseout"}}],encoding:{x:{field:"xStart",type:"quantitative",axis:null},x2:{field:"xEnd",type:"quantitative"},color:{condition:[{param:"hover_bar",value:T.mint11},{test:`datum.${u} == "None" || datum.${u} == "null"`,value:fe.orange11}],value:T.mint8,legend:null},tooltip:[{field:u,type:"nominal",title:e},{field:"count_with_percent",type:"nominal",title:"Count"}]},transform:[{calculate:`format(datum.count, ',d') + ' (' + format(datum.count / ${f} * 100, '.1f') + '%)'`,as:"count_with_percent"}]},x={mark:{type:"text",color:"white",fontSize:8.5,ellipsis:" ",clip:!0},encoding:{x:{field:"xMid",type:"quantitative",axis:null},text:{field:"clipped_text"}},transform:[{calculate:`datum.proportion > 0.5 ? slice(datum.${u}, 0, 8) : datum.proportion > 0.2 ? slice(datum.${u}, 0, 3) : datum.proportion > 0.1 ? slice(datum.${u}, 0, 1) : ''`,as:"clipped_text"}]};return{...c,data:{values:p,name:"value_counts"},layer:[h,x],transform:m}}case"unknown":return null;default:return ce(d),null}}getScale(){return{align:0,paddingInner:0,paddingOuter:{expr:`length(data('${this.sourceName}')) == 2 ? 1 : length(data('${this.sourceName}')) == 3 ? 0.5 : length(data('${this.sourceName}')) == 4 ? 0 : 0`}}}},Ie(ue,"EMPTY",new ue([],{},{},{},{},{includeCharts:!1,usePreComputedValues:!1})),ue),ul=N(A()),rn=C.createContext(xn.EMPTY);var tr=C.lazy(()=>ql(()=>import("./esm-hOS9Yf3s.js").then(async t=>(await t.__tla,t)),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(t=>({default:t.VegaLite}))),nr=Ii();const lr=t=>{let e=(0,ul.c)(19),{columnId:n}=t,{locale:l}=ge(),a=C.use(rn),{theme:o}=$l(),i,s,c;if(e[0]!==a||e[1]!==n||e[2]!==l||e[3]!==o){let{spec:g,type:f,stats:u}=a.getHeaderSummary(n),p=null;if(g){let h;e[7]===n?h=e[8]:(h=(0,r.jsx)(Yo,{seed:n,width:80,height:40}),e[7]=n,e[8]=h);let x=h,y;e[9]===Symbol.for("react.memo_cache_sentinel")?(y={minWidth:"unset",maxHeight:"40px"},e[9]=y):y=e[9];let b=(0,r.jsx)(C.Suspense,{fallback:x,children:(0,r.jsx)(tr,{spec:g,width:70,height:30,renderer:"svg",loader:nr,style:y,actions:!1,theme:o==="dark"?"dark":"vox"})}),S;e[10]!==x||e[11]!==b?(S=(0,r.jsx)(en,{milliseconds:200,visibility:!0,rootMargin:"200px",fallback:x,children:b}),e[10]=x,e[11]=b,e[12]=S):S=e[12],p=S}let w;e[13]===l?w=e[14]:(w=(h,x)=>(0,r.jsx)(ll,{date:h,type:x,children:is(h,x,l)}),e[13]=l,e[14]=w);let m=w;i="flex flex-col items-center text-xs text-muted-foreground align-end",s=p,c=(()=>{if(!u)return null;switch(f){case"date":case"datetime":return g?(0,r.jsxs)("div",{className:"flex justify-between w-full px-2 whitespace-pre",children:[(0,r.jsx)("span",{children:m(u.min,f)}),u.min===u.max?null:(0,r.jsxs)("span",{children:["-",m(u.max,f)]})]}):(0,r.jsxs)("div",{className:"flex flex-col whitespace-pre",children:[(0,r.jsxs)("span",{children:["min: ",m(u.min,f)]}),(0,r.jsxs)("span",{children:["max: ",m(u.max,f)]}),(0,r.jsxs)("span",{children:["unique: ",G(u.unique,l)]})]});case"integer":case"number":return g?null:(0,r.jsxs)("div",{className:"flex flex-col whitespace-pre",children:[(0,r.jsxs)("span",{children:["min:"," ",typeof u.min=="number"?Gt(u.min,{shouldRound:!0,locale:l}):u.min]}),(0,r.jsxs)("span",{children:["max:"," ",typeof u.max=="number"?Gt(u.max,{shouldRound:!0,locale:l}):u.max]}),(0,r.jsxs)("span",{children:["unique: ",G(u.unique,l)]})]});case"boolean":return g?null:(0,r.jsxs)("div",{className:"flex flex-col whitespace-pre",children:[(0,r.jsxs)("span",{children:["true: ",G(u.true,l)]}),(0,r.jsxs)("span",{children:["false: ",G(u.false,l)]})]});case"time":return null;case"string":return g?null:(0,r.jsx)("div",{className:"flex flex-col whitespace-pre",children:(0,r.jsxs)("span",{children:["unique: ",G(u.unique,l)]})});case"unknown":return(0,r.jsx)("div",{className:"flex flex-col whitespace-pre",children:(0,r.jsxs)("span",{children:["nulls: ",G(u.nulls,l)]})});default:return ce(f),null}})(),e[0]=a,e[1]=n,e[2]=l,e[3]=o,e[4]=i,e[5]=s,e[6]=c}else i=e[4],s=e[5],c=e[6];let d;return e[15]!==i||e[16]!==s||e[17]!==c?(d=(0,r.jsxs)("div",{className:i,children:[s,c]}),e[15]=i,e[16]=s,e[17]=c,e[18]=d):d=e[18],d};var ar=N(A()),or=new Zi;const rr=t=>{let e=(0,ar.c)(13),{text:n,channel:l,wrapText:a}=t,o=l==="stdout"||l==="stderr",i;e[0]===a?i=e[1]:(i=p=>(0,r.jsx)("span",{className:a?"whitespace-pre-wrap break-words":"whitespace-pre",dangerouslySetInnerHTML:{__html:or.ansi_to_html(p)}}),e[0]=a,e[1]=i);let s=i,c=!o&&(a?"whitespace-pre-wrap break-words":"whitespace-pre"),d=l==="output"&&"font-prose",g;e[2]!==l||e[3]!==c||e[4]!==d?(g=M(c,d,l),e[2]=l,e[3]=c,e[4]=d,e[5]=g):g=e[5];let f;e[6]!==s||e[7]!==o||e[8]!==n?(f=o?s(n):n,e[6]=s,e[7]=o,e[8]=n,e[9]=f):f=e[9];let u;return e[10]!==g||e[11]!==f?(u=(0,r.jsx)("span",{className:g,children:f}),e[10]=g,e[11]=f,e[12]=u):u=e[12],u};var _t=N(A());let dl;wn=()=>{let t=(0,_t.c)(1),e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)("div",{className:"flex items-center gap-2 justify-center",children:[(0,r.jsx)(es,{className:"w-10 h-10 animate-spin",strokeWidth:1}),(0,r.jsx)("span",{children:"Loading chart..."})]}),t[0]=e):e=t[0],e},sa=t=>{let e=(0,_t.c)(2),{error:n}=t,l;return e[0]===n?l=e[1]:(l=(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)(la,{error:n})}),e[0]=n,e[1]=l),l},ha=t=>{let e=(0,_t.c)(8),{children:n,className:l}=t,a;e[0]===l?a=e[1]:(a=M("flex flex-col items-center justify-center gap-4",l),e[0]=l,e[1]=a);let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=(0,r.jsx)(an,{className:"w-10 h-10 text-muted-foreground"}),e[2]=o):o=e[2];let i;e[3]===n?i=e[4]:(i=(0,r.jsx)("span",{className:"text-md font-semibold text-muted-foreground",children:n}),e[3]=n,e[4]=i);let s;return e[5]!==a||e[6]!==i?(s=(0,r.jsxs)("div",{className:a,children:[o,i]}),e[5]=a,e[6]=i,e[7]=s):s=e[7],s},dl={getInitialState:t=>({...t,cellHoverTemplate:null})},da=async function(t){return Array.isArray(t)?t:t.startsWith("{")||t.startsWith("[")?hi(t):(t=await Ni(t,{type:"json"},{handleBigIntAndNumberLike:!0}),t)};function qe(t){if(t&&typeof t=="object"&&"_marimo_row_id"in t)return String(t[rt])}function ir(t){return qe(t)??t.id}const sr={getInitialState:t=>({...t,cellHoverTexts:{}}),createCell:(t,e,n,l)=>{t.getHoverTitle=()=>{var i;let a=l.getState().cellHoverTexts,o=ir(n);return((i=a==null?void 0:a[o])==null?void 0:i[e.id])??void 0}}};function cl(t){return qe(t)??t.id}const ur={getInitialState:t=>({...t,cellSelection:[]}),getDefaultOptions:t=>({onCellSelectionChange:z("cellSelection",t),enableCellSelection:!1}),createTable:t=>{t.setCellSelection=e=>{var n,l;t.setState(a=>({...a,cellSelection:Vi.asUpdater(e)(a.cellSelection)})),(l=(n=t.options).onCellSelectionChange)==null||l.call(n,e)},t.resetCellSelection=e=>{t.setCellSelection&&t.setCellSelection(()=>e??[])}},createCell:(t,e,n,l)=>{t.getIsSelected=()=>(l.getState().cellSelection??[]).some(a=>a.rowId===cl(n)&&a.columnName===e.id),t.toggleSelected=a=>{var d;if(!l.setCellSelection)return;let o=e.id,i=((d=t.getIsSelected)==null?void 0:d.call(t))||!1,s=a===void 0?!i:a,c=cl(n);s&&!i?l.options.enableMultiCellSelection?l.setCellSelection(g=>[{rowId:c,columnName:o},...g]):l.setCellSelection(g=>[{rowId:c,columnName:o}]):i&&!s&&(l.options.enableMultiCellSelection?l.setCellSelection(g=>g.filter(f=>!(f.rowId===c&&f.columnName===o))):l.setCellSelection(g=>[]))}}};function dr(t){return qe(t)??t.id}const cr={getInitialState:t=>({...t,cellStyling:{}}),createCell:(t,e,n,l)=>{t.getUserStyling=()=>{var i;let a=l.getState().cellStyling,o=dr(n);return((i=a==null?void 0:a[o])==null?void 0:i[e.id])||{}}}},gr={getInitialState:t=>({columnWrapping:{},...t}),getDefaultOptions:t=>({enableColumnWrapping:!0,onColumnWrappingChange:z("columnWrapping",t)}),createColumn:(t,e)=>{t.getColumnWrapping=()=>e.getState().columnWrapping[t.id]||"nowrap",t.getCanWrap=()=>e.options.enableColumnWrapping??!1,t.toggleColumnWrapping=n=>{var l,a;(a=(l=e.options).onColumnWrappingChange)==null||a.call(l,o=>{let i=o[t.id]||"nowrap";return n?{...o,[t.id]:n}:{...o,[t.id]:i==="nowrap"?"wrap":"nowrap"}})}}},mr={getDefaultOptions:t=>({enableCopyColumn:!0}),createColumn:(t,e)=>{t.getCanCopy=()=>e.options.enableCopyColumn??!1}},pr=({filters:t,table:e})=>{let n=lt({hour:"2-digit",minute:"2-digit",second:"2-digit"});if(!t||t.length===0)return null;function l(a){let o=fr(a.value,n);return o?(0,r.jsxs)(as,{variant:"secondary",className:"dark:invert",children:[a.id," ",o," ",(0,r.jsx)("span",{className:"cursor-pointer opacity-60 hover:opacity-100 pl-1 py-[2px]",onClick:()=>{e.setColumnFilters(i=>i.filter(s=>s.id!==a.id))},children:(0,r.jsx)(Ul,{className:"w-3.5 h-3.5"})})]},a.id):null}return(0,r.jsx)("div",{className:"flex flex-wrap gap-2 px-1",children:t.map(l)})};function fr(t,e){var n,l,a,o;if("type"in t){if(t.operator==="is_null")return"is null";if(t.operator==="is_not_null")return"is not null";if(t.type==="number")return $e(t.min,t.max);if(t.type==="date")return $e((n=t.min)==null?void 0:n.toISOString(),(l=t.max)==null?void 0:l.toISOString());if(t.type==="time")return $e(t.min?e.format(t.min):void 0,t.max?e.format(t.max):void 0);if(t.type==="datetime")return $e((a=t.min)==null?void 0:a.toISOString(),(o=t.max)==null?void 0:o.toISOString());if(t.type==="boolean")return`is ${t.value?"True":"False"}`;if(t.type==="select")return`is in [${t.options.map(i=>Oe({value:i})).join(", ")}]`;if(t.type==="text")return`contains "${t.text}"`;ce(t)}}function $e(t,e){if(!(t===void 0&&e===void 0))return t===e?`== ${t}`:t===void 0?`<= ${e}`:e===void 0?`>= ${t}`:`${t} - ${e}`}const hr={getInitialState:t=>({...t,focusedRowIdx:-1}),getDefaultOptions:t=>({enableFocusRow:!0,onFocusRowChange:z("focusedRowIdx",t)}),createRow:(t,e)=>{t.focusRow=n=>{var l,a;(a=(l=e.options).onFocusRowChange)==null||a.call(l,n)},t.getFocusedRowIdx=()=>e.getState().focusedRowIdx}};var xr=(t,e)=>t===e;dn=function(t,e=xr){let[n,l]=(0,C.useState)(t),a=(0,C.useRef)(t);return e(a.current,t)||(l(t),a.current=t),[n,l]};function wr(t,e){let[n,l]=dn({left:gl(t),right:e},ki);return{columnPinning:n,setColumnPinning:a=>{l(o=>{let i=typeof a=="function"?a(o):a;return{left:gl(i.left),right:i.right}})}}}function gl(t){return!t||t.length===0?[]:t.includes("__select__")?t:[Ut,...t]}var Fe=Symbol("scope"),Ft=Symbol("originalBuildingBlocks");function ml(t,e){return t===e||t.size===e.size&&Array.from(t).every(e.has.bind(e))}function br(t){return(Ft in t?t[Ft]:Al(t)).slice(0,6)}function Be(t){return"write"in t}var pl={};function yr({atomSet:t=new Set,atomFamilySet:e=new Set,parentStore:n,name:l}){let a=Fe in n?n[Fe]:void 0,o=new WeakMap,i=new WeakMap,s=new WeakMap,c={getAtom:g,cleanup(){for(let h of d)h()},prepareWriteAtom(h,x,y,b){if(x.read===Mt&&Be(x)&&Be(h)&&x.write!==fl&&c!==y){let{write:S}=x;return h.write=m(x.write.bind(x),y,b),()=>{h.write=S}}}};for(let h of t)o.set(h,[p(h,c),c]);let d=new Set;for(let h of e){for(let y of h.getParams()){let b=h(y);o.has(b)||o.set(b,[p(b,c),c])}let x=h.unstable_listen(y=>{y.type==="CREATE"&&!o.has(y.atom)?o.set(y.atom,[p(y.atom,c),c]):t.has(y.atom)||o.delete(y.atom)});d.add(x)}function g(h,x){var y,b;if(o.has(h))return o.get(h);if(x===c)return i.has(h)||i.set(h,[p(h,x),x]),i.get(h);let S=x??pl;if(a){if(!((y=s.get(S))!=null&&y.has(h))){let[v,j]=a.getAtom(h,x);f(u(v,h,j),h,x,j)}return s.get(S).get(h)}return(b=s.get(S))!=null&&b.has(h)||f(u(h,h),h),s.get(S).get(h)}function f(h,x,y,b){let S=y??pl;s.has(S)||s.set(S,new WeakMap),s.get(S).set(x,[h,b].filter(Boolean))}function u(h,x,y){return x.read===Mt?h:p(x,y)}function p(h,x){let y=Object.getOwnPropertyDescriptors(h);Object.entries(y).filter(([S])=>["read","write","debugLabel"].includes(S)).forEach(([,S])=>S.configurable=!0);let b=Object.create(Object.getPrototypeOf(h),y);return b.originalAtom=h,b.read!==Mt&&(b.read=w(h.read.bind(h),x)),Be(b)&&Be(h)&&b.write!==fl&&(b.write=m(h.write.bind(h),x)),b}function w(h,x){return function(y,b){return h(function(S){let[v]=g(S,x);return y(v)},b)}}function m(h,x,y=x){return function(b,S,...v){return h(function(j){let[F]=g(j,x);return b(F)},function(j,...F){let[I]=g(j,x),P=c.prepareWriteAtom(I,j,x,y);try{return S(I,...F)}finally{P==null||P()}},...v)}}return Sr(n,c)}var{read:Mt,write:fl}=re(null);function Sr(t,e){let n=br(t),l={};n[6]=l,n[9]=m=>{var h;return(h=m.unstable_onInit)==null?void 0:h.call(m,a)};let a=gi(...n),o=Al(a),i=[...o];function s(m){return(h,...x)=>{let[y]=e.getAtom(h);return m(y,...x)}}function c(m){let h={get:s(m.get.bind(m)),set:s(m.set.bind(m))};return"has"in m&&(h.has=s(m.has.bind(m))),"delete"in m&&(h.delete=s(m.delete.bind(m))),h}function d(m){return{get size(){return m.size},add:s(m.add.bind(m)),has:s(m.has.bind(m)),clear:m.clear.bind(m),forEach:h=>m.forEach(s(h)),*[Symbol.iterator](){for(let h of m)yield e.getAtom(h)[0]}}}function g(m){if(!m)return;let h=s(m);return h.add=(x,y)=>x===void 0?m.add(void 0,y):m.add(e.getAtom(x)[0],y),h}let f=[c(i[0]),c(i[1]),c(i[2]),d(i[3]),i[4],i[5],{get c(){return g(l.c)},set c(m){l.c=m},get m(){return g(l.m)},set m(m){l.m=m},get u(){return g(l.u)},set u(m){l.u=m},get f(){return l.f},set f(m){l.f=m}},s(i[7]),s(i[8]),i[9],s(i[10]),s(i[11]),i[12],i[13],s(i[14]),s(i[15]),s(i[16]),s(i[17]),s(i[18]),s(i[19])];Object.assign(o,f);let{get:u,set:p,sub:w}=a;return Object.assign(a,{get(m){let[h]=e.getAtom(m);return u(h)},set(m,...h){let[x,y]=e.getAtom(m),b=e.prepareWriteAtom(x,m,y,e);try{return p(x,...h)}finally{b==null||b()}},sub(m,h){let[x]=e.getAtom(m);return w(x,h)},[Fe]:e,[Ft]:i})}function Cr(t){let{atoms:e=[],atomFamilies:n=[],children:l,scope:a,name:o}=t,i=Pl(),s=Array.from(e,m=>Array.isArray(m)?m[0]:m),c=new Set(s),d=new Set(n);function g(){return{scope:a??yr({atomSet:c,atomFamilySet:d,parentStore:i,name:o}),hasChanged(m){return i!==m.parentStore||!ml(c,m.atomSet)||!ml(d,m.atomFamilySet)||a!==m.providedScope}}}let[f,u]=(0,C.useState)(g),{hasChanged:p,scope:w}=f;return p({atomSet:c,atomFamilySet:d,parentStore:i,providedScope:a})&&(w[Fe].cleanup(),u(g)),pe(Array.from(e).filter(Array.isArray),{store:w}),(0,C.useEffect)(()=>w[Fe].cleanup,[w]),(0,C.createElement)(mi,{store:w},l)}var vr=N(A());const jr=t=>{let e=(0,vr.c)(3),{children:n}=t,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=[se],e[0]=l):l=e[0];let a;return e[1]===n?a=e[2]:(a=(0,r.jsx)(Cr,{atoms:l,children:n}),e[1]=n,e[2]=a),a},Rr=({hidden:t,value:e,handleSearch:n,onHide:l,reloading:a})=>{var g;let[o,i]=(0,C.useState)(e),s=Lo(o,500),c=ie(n),d=C.useRef(null);return(0,C.useEffect)(()=>{c(s)},[s,c]),t||((g=d.current)==null||g.focus()),t&&o!==""&&i(""),(0,r.jsxs)("div",{className:M("flex items-center space-x-2 h-8 px-2 border-b transition-all overflow-hidden duration-300 opacity-100",t&&"h-0 border-none opacity-0"),children:[(0,r.jsx)(Tt,{className:"w-4 h-4 text-muted-foreground"}),(0,r.jsx)("input",{type:"text",ref:d,className:"w-full h-full border-none bg-transparent focus:outline-hidden text-sm",value:o,onKeyDown:f=>{f.key==="Escape"&&l()},onChange:f=>i(f.target.value),placeholder:"Search"}),a&&(0,r.jsx)(Zl,{size:"small"})]})};var _r=N(A()),Fr=[{label:"CSV",format:"csv",icon:Pe},{label:"JSON",format:"json",icon:El},{label:"Parquet",format:"parquet",icon:vn}],Mr=[{label:"TSV",format:"tsv",description:"Best for Excel and Google Sheets",icon:Pe},{label:"JSON",format:"json",description:"Raw JSON data",icon:El},{label:"CSV",format:"csv",description:"Comma-separated values",icon:Pe}];const kr=t=>{let e=(0,_r.c)(17),n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=(0,r.jsxs)(D,{"data-testid":"download-as-button",size:"xs",variant:"link",children:["Download ",(0,r.jsx)(Vt,{className:"w-3 h-3 ml-1"})]}),e[0]=n):n=e[0];let l=n,a;e[1]===t?a=e[2]:(a=m=>t.downloadAs({format:m}).catch(Nr),e[1]=t,e[2]=a);let o=a,i;e[3]===o?i=e[4]:(i=async m=>{let h;e:switch(m){case"tsv":{let x=await o("json"),y=await hl(x);h=wi(y);break e}case"json":{let x=await o("json"),y=await hl(x);h=JSON.stringify(y,null,2);break e}case"csv":{let x=await o("csv");h=await Ir(x);break e}default:ce(m);return}await at(h),Nt({title:"Copied to clipboard"})},e[3]=o,e[4]=i);let s=i,c;e[5]===Symbol.for("react.memo_cache_sentinel")?(c=(0,r.jsx)(Dt,{asChild:!0,children:l}),e[5]=c):c=e[5];let d;e[6]===o?d=e[7]:(d=Fr.map(m=>(0,r.jsxs)(V,{onSelect:async()=>{let h=await o(m.format),x=m.format;Li(h,`download.${x}`)},children:[(0,r.jsx)(m.icon,{className:"mo-dropdown-icon"}),m.label]},m.label)),e[6]=o,e[7]=d);let g;e[8]===Symbol.for("react.memo_cache_sentinel")?(g=(0,r.jsx)(ve,{}),e[8]=g):g=e[8];let f;e[9]===Symbol.for("react.memo_cache_sentinel")?(f=(0,r.jsxs)(At,{children:[(0,r.jsx)(Fn,{className:"mo-dropdown-icon"}),"Copy to clipboard"]}),e[9]=f):f=e[9];let u;e[10]===s?u=e[11]:(u=Mr.map(m=>(0,r.jsxs)(V,{onSelect:()=>s(m.format),children:[(0,r.jsx)(m.icon,{className:"mo-dropdown-icon"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{children:m.label}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:m.description})]})]},m.label)),e[10]=s,e[11]=u);let p;e[12]===u?p=e[13]:(p=(0,r.jsxs)(je,{children:[f,(0,r.jsx)(Ve,{children:u})]}),e[12]=u,e[13]=p);let w;return e[14]!==d||e[15]!==p?(w=(0,r.jsxs)(zt,{modal:!1,children:[c,(0,r.jsxs)(Et,{side:"bottom",className:"no-print",children:[d,g,p]})]}),e[14]=d,e[15]=p,e[16]=w):w=e[16],w};function hl(t){return fetch(t).then(e=>{if(!e.ok)throw Error(e.statusText);return e.json()})}function Ir(t){return fetch(t).then(e=>{if(!e.ok)throw Error(e.statusText);return e.text()})}function Nr(t){throw Nt({title:"Failed to download",description:"message"in t?t.message:String(t)}),t}const Vr=({table:t,selection:e,onSelectAllRowsChange:n,totalColumns:l,tableLoading:a,showPageSizeSelector:o})=>{let{locale:i}=ge(),s=()=>{let{rowSelection:p,cellSelection:w}=t.getState(),m=Object.keys(p).length,h=t.getIsAllPageRowsSelected(),x=t.getRowCount(),y=m===x,b=e==="single-cell"||e==="multi-cell";if(b&&(m=w.length,h=!1,y=!1),h&&!y)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{children:[G(m,i)," selected"]}),(0,r.jsxs)(D,{size:"xs","data-testid":"select-all-button",variant:"link",className:"h-4",onMouseDown:X.preventFocus,onClick:()=>{n?n(!0):t.toggleAllRowsSelected(!0)},children:["Select all ",G(x,i)]})]});if(m)return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{children:[G(m,i)," selected"]}),(0,r.jsx)(D,{size:"xs","data-testid":"clear-selection-button",variant:"link",className:"h-4",onMouseDown:X.preventFocus,onClick:()=>{b?t.resetCellSelection&&t.resetCellSelection():n?n(!1):t.toggleAllRowsSelected(!1)},children:"Clear selection"})]});let S=fn(x,l,i);return(0,r.jsx)("span",{children:S})},c=Math.min(t.getState().pagination.pageIndex+1,t.getPageCount()),d=t.getPageCount(),g=t.getState().pagination.pageSize,f=p=>{a||p()},u=[...new Set([5,10,25,50,100,g])].sort((p,w)=>p-w);return(0,r.jsxs)("div",{className:"flex flex-1 items-center justify-between px-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-sm text-muted-foreground",children:s()}),o&&(0,r.jsxs)("div",{className:"flex items-center gap-1 text-xs whitespace-nowrap mr-1",children:[(0,r.jsxs)(Yl,{value:g.toString(),onValueChange:p=>t.setPageSize(Number(p)),children:[(0,r.jsx)(Kl,{className:"w-11 h-[18px] shadow-none! !hover:shadow-none ring-0! border-border text-xs p-1",children:(0,r.jsx)(Bl,{})}),(0,r.jsx)(Wl,{children:(0,r.jsxs)(Oi,{children:[(0,r.jsx)(zi,{children:"Rows per page"}),[...u].map(p=>{let w=p.toString();return(0,r.jsx)(et,{value:w,children:w},p)})]})})]}),(0,r.jsx)("span",{children:"/ page"})]})]}),(0,r.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,r.jsxs)(D,{size:"xs",variant:"outline","data-testid":"first-page-button",className:"hidden h-6 w-6 p-0 lg:flex",onClick:()=>f(()=>t.setPageIndex(0)),onMouseDown:X.preventFocus,disabled:!t.getCanPreviousPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to first page"}),(0,r.jsx)(nn,{className:"h-4 w-4"})]}),(0,r.jsxs)(D,{size:"xs",variant:"outline","data-testid":"previous-page-button",className:"h-6 w-6 p-0",onClick:()=>f(()=>t.previousPage()),onMouseDown:X.preventFocus,disabled:!t.getCanPreviousPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to previous page"}),(0,r.jsx)(Hi,{className:"h-4 w-4"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-center text-xs font-medium gap-1",children:[(0,r.jsx)("span",{children:"Page"}),(0,r.jsx)(Pr,{currentPage:c,totalPages:d,onPageChange:p=>f(()=>t.setPageIndex(p))}),(0,r.jsxs)("span",{className:"shrink-0",children:["of ",G(d,i)]})]}),(0,r.jsxs)(D,{size:"xs",variant:"outline","data-testid":"next-page-button",className:"h-6 w-6 p-0",onClick:()=>f(()=>t.nextPage()),onMouseDown:X.preventFocus,disabled:!t.getCanNextPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to next page"}),(0,r.jsx)(Gi,{className:"h-4 w-4"})]}),(0,r.jsxs)(D,{size:"xs",variant:"outline","data-testid":"last-page-button",className:"hidden h-6 w-6 p-0 lg:flex",onClick:()=>f(()=>t.setPageIndex(t.getPageCount()-1)),onMouseDown:X.preventFocus,disabled:!t.getCanNextPage(),children:[(0,r.jsx)("span",{className:"sr-only",children:"Go to last page"}),(0,r.jsx)(Kt,{className:"h-4 w-4"})]})]})]})},Pr=({currentPage:t,totalPages:e,onPageChange:n})=>{let l=i=>(0,r.jsx)("option",{value:i+1,children:i+1},i),a=i=>(0,r.jsx)("option",{disabled:!0,value:`__${i}__`,children:"..."},`__${i}__`),o=()=>{if(e<=100)return Qe(e).map(f=>l(f));let i=Math.floor(e/2),s=Qe(10).map(f=>l(f)),c=Qe(10).map(f=>l(i-5+f)),d=Qe(10).map(f=>l(e-10+f)),g=[...s,a(1),...c,a(2),...d];return t>10&&t<=i-5&&g.splice(10,1,a(1),l(t-1),a(11)),t>i+5&&t<=e-10&&g.splice(-11,1,a(2),l(t-1),a(22)),g};return(0,r.jsx)("select",{className:"cursor-pointer border rounded",value:t,"data-testid":"page-select",onChange:i=>n(Number(i.target.value)-1),children:o()})};mn=function(t,e){return`${G(t,e)} ${new zl("row").pluralize(t)}`};let xl;fn=(t,e,n)=>{let l=t==="too_many"?"Unknown":mn(t,n),a=`${G(e,n)} ${new zl("column").pluralize(e)}`;return[l,a].join(", ")},xl=({enableSearch:t,onSearchQueryChange:e,isSearchEnabled:n,setIsSearchEnabled:l,pagination:a,totalColumns:o,selection:i,onRowSelectionChange:s,table:c,downloadAs:d,getRowIds:g,toggleDisplayHeader:f,showChartBuilder:u,showColumnExplorer:p,showPageSizeSelector:w,togglePanel:m,isPanelOpen:h,tableLoading:x})=>(0,r.jsxs)("div",{className:"flex items-center shrink-0 pt-1",children:[e&&t&&(0,r.jsx)($,{content:"Search",children:(0,r.jsx)(D,{variant:"text",size:"xs",className:"mb-0",onClick:()=>l(!n),children:(0,r.jsx)(Tt,{className:"w-4 h-4 text-muted-foreground"})})}),u&&(0,r.jsx)($,{content:"Chart builder",children:(0,r.jsx)(D,{variant:"text",size:"xs",className:"mb-0",onClick:f,children:(0,r.jsx)(_n,{className:"w-4 h-4 text-muted-foreground"})})}),m&&h!==void 0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($,{content:"Toggle row viewer",children:(0,r.jsx)(D,{variant:"text",size:"xs",onClick:()=>m("row-viewer"),children:(0,r.jsx)(An,{className:M("w-4 h-4 text-muted-foreground",h("row-viewer")&&"text-primary")})})}),p&&(0,r.jsx)($,{content:"Toggle column explorer",children:(0,r.jsx)(D,{variant:"text",size:"xs",onClick:()=>m("column-explorer"),children:(0,r.jsx)(Rn,{className:M("w-4 h-4 text-muted-foreground",h("column-explorer")&&"text-primary")})})})]}),a&&(0,r.jsx)(Vr,{totalColumns:o,selection:i,onSelectAllRowsChange:y=>{if(!s)return;if(!y){s({});return}let b=()=>{let S=Array.from({length:c.getRowCount()},(v,j)=>[j,!0]);s(Object.fromEntries(S))};if(!g){b();return}g({}).then(S=>{if(S.error){Nt({title:"Not available",description:S.error,variant:"danger"});return}S.all_rows?b():s(Object.fromEntries(S.row_ids.map(v=>[v,!0])))})},table:c,tableLoading:x,showPageSizeSelector:w}),(0,r.jsx)("div",{className:"ml-auto",children:d&&(0,r.jsx)(kr,{downloadAs:d})})]}),un=(0,C.memo)(({wrapperClassName:t,className:e,maxHeight:n,columns:l,data:a,selection:o,totalColumns:i,totalRows:s,manualSorting:c=!1,sorting:d,setSorting:g,rowSelection:f,cellSelection:u,cellStyling:p,hoverTemplate:w,cellHoverTexts:m,paginationState:h,setPaginationState:x,downloadAs:y,manualPagination:b=!1,pagination:S=!1,onRowSelectionChange:v,onCellSelectionChange:j,getRowIds:F,enableSearch:I=!1,searchQuery:P,onSearchQueryChange:E,showFilters:H=!1,filters:q,onFiltersChange:he,reloading:te,freezeColumnsLeft:xe,freezeColumnsRight:we,toggleDisplayHeader:ne,showChartBuilder:be,showPageSizeSelector:ye,showColumnExplorer:le,togglePanel:Se,isPanelOpen:U,viewedRowIdx:ae,onViewedRowChange:oe})=>{let[de,ke]=C.useState(!1),[We,Ke]=C.useState(!1),{locale:oi}=ge(),{columnPinning:ri,setColumnPinning:ii}=wr(xe,we);C.useEffect(()=>{let L;return te?L=setTimeout(()=>{Ke(!0)},300):Ke(!1),()=>{L&&clearTimeout(L)}},[te]);function Vl(L,Je){if(!h)return Je;let Xe=b?h.pageIndex*h.pageSize:0;return Je+Xe}let Ye=gn({_features:[Kn,gr,lo,ur,cr,sr,dl,mr,hr],data:a,columns:l,getCoreRowModel:Xt(),rowCount:s==="too_many"?void 0:s,...x?{onPaginationChange:x,getRowId:(L,Je)=>{let Xe=qe(L);if(Xe)return Xe;let ui=Vl(L,Je);return String(ui)}}:{},locale:oi,manualPagination:b,getPaginationRowModel:Qa(),...g?{onSortingChange:g}:{},manualSorting:c,getSortedRowModel:Qt(),manualFiltering:!0,enableColumnFilters:H,getFilteredRowModel:Zt(),onColumnFiltersChange:he,onRowSelectionChange:v,onCellSelectionChange:j,enableCellSelection:o==="single-cell"||o==="multi-cell",enableMultiCellSelection:o==="multi-cell",onColumnPinningChange:ii,enableFocusRow:!0,onFocusRowChange:oe,state:{...d?{sorting:d}:{},columnFilters:q,...h?{pagination:h}:S&&!h?{}:{pagination:{pageIndex:0,pageSize:a.length}},rowSelection:f??{},cellSelection:u??[],cellStyling:p,columnPinning:ri,cellHoverTemplate:w,cellHoverTexts:m??{}}}),si=(U==null?void 0:U("row-viewer"))??!1,It=C.useRef(null);return C.useEffect(()=>{if(!It.current)return;let L=It.current.parentElement;L&&(n?(L.style.maxHeight=`${n}px`,L.style.overflow||(L.style.overflow="auto")):L.style.removeProperty("max-height"))},[n]),(0,r.jsxs)("div",{className:M(t,"flex flex-col space-y-1"),children:[(0,r.jsx)(pr,{filters:q,table:Ye}),(0,r.jsxs)("div",{className:M(e||"rounded-md border overflow-hidden"),children:[E&&I&&(0,r.jsx)(Rr,{value:P||"",onHide:()=>ke(!1),handleSearch:E,hidden:!de,reloading:te}),(0,r.jsxs)(Vs,{className:"relative",ref:It,children:[We&&(0,r.jsx)("div",{className:"absolute top-0 left-0 h-[3px] w-1/2 bg-primary animate-slide"}),Po(Ye,!!n),(0,r.jsx)(jr,{children:(0,r.jsx)(Ao,{table:Ye,columns:l,rowViewerPanelOpen:si,getRowIndex:Vl,viewedRowIdx:ae})})]})]}),(0,r.jsx)(xl,{enableSearch:I,totalColumns:i,onSearchQueryChange:E,isSearchEnabled:de,setIsSearchEnabled:ke,pagination:S,selection:o,onRowSelectionChange:v,table:Ye,downloadAs:y,getRowIds:F,toggleDisplayHeader:ne,showChartBuilder:be,showPageSizeSelector:ye,showColumnExplorer:le,togglePanel:Se,isPanelOpen:U,tableLoading:te})]})});var Ue=N(A()),Ar=25;sn=({contents:t})=>{let e=(0,C.useMemo)(()=>Tl(t),[t]),[n,l]=(0,C.useState)({pageIndex:0,pageSize:Ar}),a=(0,C.useMemo)(()=>hn(e),[e]),o=(0,C.useMemo)(()=>pn({rowHeaders:ji.EMPTY,selection:null,fieldTypes:a}),[a]);return(0,r.jsx)(un,{data:e,totalRows:e.length,columns:o,totalColumns:o.length,manualPagination:!1,paginationState:n,setPaginationState:l,wrapperClassName:"h-full justify-between pb-1 px-1",pagination:!0,className:"rounded-none border-b flex overflow-hidden",rowSelection:Ne.EMPTY})},ga=t=>{let e=(0,Ue.c)(5),{mime:n,base64:l}=t,a;e[0]!==l||e[1]!==n?(a=tt(l,n),e[0]=l,e[1]=n,e[2]=a):a=e[2];let o;return e[3]===a?o=e[4]:(o=(0,r.jsx)("img",{src:a,alt:"Preview"}),e[3]=a,e[4]=o),o},ma=t=>{let e=(0,Ue.c)(5),{mime:n,base64:l}=t,a;e[0]!==l||e[1]!==n?(a=tt(l,n),e[0]=l,e[1]=n,e[2]=a):a=e[2];let o;return e[3]===a?o=e[4]:(o=(0,r.jsx)("audio",{controls:!0,src:a}),e[3]=a,e[4]=o),o},ua=t=>{let e=(0,Ue.c)(5),{mime:n,base64:l}=t,a;e[0]!==l||e[1]!==n?(a=tt(l,n),e[0]=l,e[1]=n,e[2]=a):a=e[2];let o;return e[3]===a?o=e[4]:(o=(0,r.jsx)("video",{controls:!0,src:a}),e[3]=a,e[4]=o),o},fa=t=>{let e=(0,Ue.c)(5),{mime:n,base64:l}=t,a;e[0]!==l||e[1]!==n?(a=tt(l,n),e[0]=l,e[1]=n,e[2]=a):a=e[2];let o;return e[3]===a?o=e[4]:(o=(0,r.jsx)("iframe",{src:a,title:"PDF Viewer",className:"w-full h-full"}),e[3]=a,e[4]=o),o};function Dr(t,e){let{state:n}=t,l=n.doc;if(e<=0||e>l.lines)return Ce.warn(`Invalid line number: ${e}. Document has ${l.lines} lines.`),!1;let a=l.line(e);if(a.text.includes("breakpoint()"))return!0;let o=a.text.match(/^(\s*)/),i=`${o?o[1]:""}breakpoint()
`,s=a.from;return t.dispatch({changes:{from:s,to:s,insert:i},selection:{anchor:s+i.length-1,head:s+i.length-1},scrollIntoView:!0,effects:[Di.scrollIntoView(s,{y:"center"})]}),t.focus(),!0}var wl=N(A()),bl="item";const Er=t=>{var ke;let e=(0,wl.c)(53),{onRefactorWithAI:n,traceback:l}=t,a;e[0]===l?a=e[1]:(a=ea({html:l,additionalReplacements:[Tr,Or]}),e[0]=l,e[1]=a);let o=a,[i,s]=(0,C.useState)(!0),c=zr(l),d=Dl(Pi),g;e[2]===l?g=e[3]:(g=(ke=Si(l))==null?void 0:ke.at(0),e[2]=l,e[3]=g);let f=g,u=()=>{n==null||n({prompt:`My code gives the following error:

${c}`})},[p,w]=c.split(":",2),m=i?bl:"",h;e[4]===Symbol.for("react.memo_cache_sentinel")?(h=()=>s(Lr),e[4]=h):h=e[4];let x=i?"rotate-180":"rotate-0",y;e[5]===x?y=e[6]:(y=M("h-4 w-4 text-muted-foreground transition-transform duration-200 shrink-0",x),e[5]=x,e[6]=y);let b;e[7]===y?b=e[8]:(b=(0,r.jsx)(Vt,{className:y}),e[7]=y,e[8]=b);let S=p||"Error",v;e[9]===S?v=e[10]:(v=(0,r.jsxs)("span",{className:"text-destructive",children:[S,":"]}),e[9]=S,e[10]=v);let j;e[11]!==w||e[12]!==v?(j=(0,r.jsxs)("div",{className:"text-sm inline font-mono",children:[v," ",w]}),e[11]=w,e[12]=v,e[13]=j):j=e[13];let F;e[14]!==j||e[15]!==b?(F=(0,r.jsxs)("div",{className:"flex gap-2 h-10 px-2 hover:bg-muted rounded-sm select-none items-center cursor-pointer transition-all",onClick:h,children:[b,j]}),e[14]=j,e[15]=b,e[16]=F):F=e[16];let I;e[17]===o?I=e[18]:(I=(0,r.jsx)(ds,{className:"text-muted-foreground px-4 pt-2 text-xs overflow-auto",children:o}),e[17]=o,e[18]=I);let P;e[19]!==F||e[20]!==I?(P=(0,r.jsxs)(cs,{value:bl,className:"border-none",children:[F,I]}),e[19]=F,e[20]=I,e[21]=P):P=e[21];let E;e[22]!==P||e[23]!==m?(E=(0,r.jsx)(gs,{type:"single",collapsible:!0,value:m,children:P}),e[22]=P,e[23]=m,e[24]=E):E=e[24];let H;e[25]!==d||e[26]!==u||e[27]!==n?(H=n&&d&&(0,r.jsxs)(D,{size:"xs",variant:"outline",onClick:u,children:[(0,r.jsx)(jn,{className:"h-3 w-3 mr-2"}),"Fix with AI"]}),e[25]=d,e[26]=u,e[27]=n,e[28]=H):H=e[28];let q;e[29]===f?q=e[30]:(q=f&&f.kind==="cell"&&!Ol()&&(0,r.jsx)($,{content:"Attach pdb to the exception point.",children:(0,r.jsxs)(D,{size:"xs",variant:"outline",onClick:()=>{Gl().sendPdb({cellId:f.cellId})},children:[(0,r.jsx)(it,{className:"h-3 w-3 mr-2"}),"Launch debugger"]})}),e[29]=f,e[30]=q);let he;e[31]===Symbol.for("react.memo_cache_sentinel")?(he=(0,r.jsx)(Dt,{asChild:!0,children:(0,r.jsxs)(D,{size:"xs",variant:"text",children:["Get help",(0,r.jsx)(Vt,{className:"h-3 w-3 ml-1"})]})}),e[31]=he):he=e[31];let te=`https://www.google.com/search?q=${encodeURIComponent(c)}`,xe;e[32]===Symbol.for("react.memo_cache_sentinel")?(xe=(0,r.jsx)(Tt,{className:"h-4 w-4 mr-2"}),e[32]=xe):xe=e[32];let we;e[33]===Symbol.for("react.memo_cache_sentinel")?(we=(0,r.jsx)(Jl,{className:"h-3 w-3 ml-auto"}),e[33]=we):we=e[33];let ne;e[34]===te?ne=e[35]:(ne=(0,r.jsx)(V,{asChild:!0,children:(0,r.jsxs)("a",{target:"_blank",href:te,rel:"noreferrer",children:[xe,"Search on Google",we]})}),e[34]=te,e[35]=ne);let be;e[36]===Symbol.for("react.memo_cache_sentinel")?(be=(0,r.jsx)(Vn,{className:"h-4 w-4 mr-2"}),e[36]=be):be=e[36];let ye;e[37]===Symbol.for("react.memo_cache_sentinel")?(ye=(0,r.jsx)(V,{asChild:!0,children:(0,r.jsxs)("a",{target:"_blank",href:"https://marimo.io/discord?ref=notebook",rel:"noopener",children:[be,"Ask in Discord",(0,r.jsx)(Jl,{className:"h-3 w-3 ml-auto"})]})}),e[37]=ye):ye=e[37];let le;e[38]===l?le=e[39]:(le=()=>{let We=document.createElement("div");We.innerHTML=l;let Ke=We.textContent||"";at(Ke)},e[38]=l,e[39]=le);let Se;e[40]===Symbol.for("react.memo_cache_sentinel")?(Se=(0,r.jsx)(Xl,{className:"h-4 w-4 mr-2"}),e[40]=Se):Se=e[40];let U;e[41]===le?U=e[42]:(U=(0,r.jsxs)(V,{onClick:le,children:[Se,"Copy to clipboard"]}),e[41]=le,e[42]=U);let ae;e[43]!==ne||e[44]!==U?(ae=(0,r.jsxs)(zt,{children:[he,(0,r.jsxs)(Et,{align:"end",className:"w-56",children:[ne,ye,U]})]}),e[43]=ne,e[44]=U,e[45]=ae):ae=e[45];let oe;e[46]!==H||e[47]!==q||e[48]!==ae?(oe=(0,r.jsxs)("div",{className:"flex gap-2",children:[H,q,ae]}),e[46]=H,e[47]=q,e[48]=ae,e[49]=oe):oe=e[49];let de;return e[50]!==E||e[51]!==oe?(de=(0,r.jsxs)("div",{className:"flex flex-col gap-2 min-w-full w-fit",children:[E,oe]}),e[50]=E,e[51]=oe,e[52]=de):de=e[52],de};function zr(t){var n,l;let e=document.createElement("div");return e.innerHTML=t,((l=(n=e.textContent)==null?void 0:n.split(`
`).filter(Boolean))==null?void 0:l.at(-1))||""}const Tr=t=>{let e=yi(t);if((e==null?void 0:e.kind)==="cell"){let n=(0,r.jsx)(Hr,{});return(0,r.jsx)("span",{className:"nb",children:(0,r.jsxs)("span",{className:"inline-flex items-center",children:[(0,r.jsx)(As,{cellId:e.cellId,lineNumber:e.lineNumber}),!Ol()&&(0,r.jsx)($,{content:n,children:(0,r.jsx)("button",{type:"button",className:"ml-1 p-1 rounded-sm hover:bg-muted transition-all inline",children:(0,r.jsx)(it,{onClick:()=>{let l=vi(e.cellId);l&&Dr(l,e.lineNumber)},className:"h-3 w-3"})})})]})})}if((e==null?void 0:e.kind)==="file")return(0,r.jsx)("div",{className:"inline-block cursor-pointer text-destructive hover:underline",onClick:n=>{Gl().openFile({path:e.filePath,lineNumber:e.lineNumber})},children:(0,r.jsxs)("span",{className:"nb",children:['"',e.filePath,'"']})})},Or=t=>{var e;if(t instanceof Ll.Text&&((e=t.nodeValue)!=null&&e.includes("File"))&&t.next instanceof Ll.Element&&Ci(t.next))return(0,r.jsx)(r.Fragment,{children:t.nodeValue.replace("File","Cell")})};var Hr=()=>{let t=(0,wl.c)(1),e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,r.jsxs)(r.Fragment,{children:["Insert a ",(0,r.jsx)(bs,{className:"inline",children:"breakpoint()"})," at this line"]}),t[0]=e):e=t[0],e};function Lr(t){return!t}function Gr(t){switch(t){case"text/html":return"\u{1F310}";case"text/plain":return"\u{1F4C4}";case"application/json":return"\u{1F4E6}";case"image/png":case"image/tiff":case"image/avif":case"image/bmp":case"image/gif":case"image/jpeg":return"\u{1F5BC}\uFE0F";case"image/svg+xml":return"\u{1F3A8}";case"video/mp4":case"video/mpeg":return"\u{1F3A5}";case"application/vnd.marimo+error":return"\u{1F6A8}";case"application/vnd.marimo+traceback":return"\u{1F40D}";case"text/csv":return"\u{1F4CA}";case"text/markdown":return"\u{1F4DD}";case"application/vnd.vegalite.v5+json":case"application/vnd.vega.v5+json":return"\u{1F4CA}";case"application/vnd.marimo+mimebundle":return"\u{1F4E6}";default:return"\u2753"}}var Me=N(A()),qr=C.lazy(()=>ql(()=>import("./esm-hOS9Yf3s.js").then(async t=>(await t.__tla,t)),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25]),import.meta.url).then(t=>({default:t.VegaLite})));me=(0,C.memo)(t=>{let e=(0,Me.c)(44),{message:n,onRefactorWithAI:l,cellId:a,wrapText:o}=t,{theme:i}=$l(),s;e:{let u=n.data;switch(n.mimetype){case"application/json":case"application/vnd.marimo+mimebundle":case"application/vnd.vegalite.v5+json":case"application/vnd.vega.v5+json":{let p;e[0]===u?p=e[1]:(p=typeof u=="string"?JSON.parse(u):u,e[0]=u,e[1]=p),s=p;break e}default:s=void 0}}let c=s,{channel:d,data:g,mimetype:f}=n;if(g==null)return null;switch(f){case"text/html":{J(typeof g=="string",`Expected string data for mime=${f}. Got ${typeof g}`);let u;return e[2]!==d||e[3]!==g?(u=(0,r.jsx)(ps,{className:d,html:g}),e[2]=d,e[3]=g,e[4]=u):u=e[4],u}case"text/plain":{J(typeof g=="string",`Expected string data for mime=${f}. Got ${typeof g}`);let u;return e[5]!==d||e[6]!==g||e[7]!==o?(u=(0,r.jsx)(rr,{channel:d,text:g,wrapText:o}),e[5]=d,e[6]=g,e[7]=o,e[8]=u):u=e[8],u}case"application/json":{let u;return e[9]!==d||e[10]!==c?(u=(0,r.jsx)(na,{className:d,data:c,format:"auto"}),e[9]=d,e[10]=c,e[11]=u):u=e[11],u}case"image/png":case"image/tiff":case"image/avif":case"image/bmp":case"image/gif":case"image/jpeg":{J(typeof g=="string",`Expected string data for mime=${f}. Got ${typeof g}`);let u;return e[12]!==d||e[13]!==g?(u=(0,r.jsx)(hs,{className:d,src:g,alt:""}),e[12]=d,e[13]=g,e[14]=u):u=e[14],u}case"image/svg+xml":{J(typeof g=="string",`Expected string data for mime=${f}. Got ${typeof g}`);let u;return e[15]===g?u=e[16]:(u=ea({html:g}),e[15]=g,e[16]=u),u}case"video/mp4":case"video/mpeg":{J(typeof g=="string",`Expected string data for mime=${f}. Got ${typeof g}`);let u;return e[17]!==d||e[18]!==g?(u=(0,r.jsx)(fs,{className:d,src:g}),e[17]=d,e[18]=g,e[19]=u):u=e[19],u}case"application/vnd.marimo+error":{J(Array.isArray(g),"Expected array data");let u;return e[20]!==a||e[21]!==g?(u=(0,r.jsx)(ts,{cellId:a,errors:g}),e[20]=a,e[21]=g,e[22]=u):u=e[22],u}case"application/vnd.marimo+traceback":{J(typeof g=="string",`Expected string data for mime=${f}. Got ${typeof g}`);let u;return e[23]!==a||e[24]!==g||e[25]!==l?(u=(0,r.jsx)(Er,{onRefactorWithAI:l,traceback:g,cellId:a}),e[23]=a,e[24]=g,e[25]=l,e[26]=u):u=e[26],u}case"text/csv":{J(typeof g=="string",`Expected string data for mime=${f}. Got ${typeof g}`);let u;return e[27]===g?u=e[28]:(u=(0,r.jsx)(sn,{contents:g}),e[27]=g,e[28]=u),u}case"text/latex":case"text/markdown":{J(typeof g=="string",`Expected string data for mime=${f}. Got ${typeof g}`);let u=i==="dark"?"dark":"light",p;return e[29]!==g||e[30]!==u?(p=(0,r.jsx)(ys,{theme:u,value:g,readOnly:!0,editable:!1,language:"markdown"}),e[29]=g,e[30]=u,e[31]=p):p=e[31],p}case"application/vnd.vegalite.v5+json":case"application/vnd.vega.v5+json":{let u;e[32]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)(wn,{}),e[32]=u):u=e[32];let p=c,w=i==="dark"?"dark":void 0,m;return e[33]!==p||e[34]!==w?(m=(0,r.jsx)(C.Suspense,{fallback:u,children:(0,r.jsx)(qr,{spec:p,theme:w})}),e[33]=p,e[34]=w,e[35]=m):m=e[35],m}case"application/vnd.marimo+mimebundle":{let u=c,p;return e[36]!==d||e[37]!==u?(p=(0,r.jsx)(yl,{channel:d,data:u}),e[36]=d,e[37]=u,e[38]=p):p=e[38],p}case"application/vnd.jupyter.widget-view+json":{let u;e[39]===Symbol.for("react.memo_cache_sentinel")?(u=(0,r.jsx)("b",{children:"Jupyter widgets are not supported in marimo."}),e[39]=u):u=e[39];let p;e[40]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)("br",{}),e[40]=p):p=e[40];let w;return e[41]===Symbol.for("react.memo_cache_sentinel")?(w=(0,r.jsxs)(ws,{kind:"warn",children:[u," ",p,"Please migrate this widget to"," ",(0,r.jsx)("a",{href:"https://github.com/manzt/anywidget",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-(--amber-12)",children:"anywidget"}),"."]}),e[41]=w):w=e[41],w}default:{ce(f);let u;return e[42]===f?u=e[43]:(u=(0,r.jsxs)("div",{className:"text-destructive",children:["Unsupported mimetype: ",f]}),e[42]=f,e[43]=u),u}}}),me.displayName="OutputRenderer";var yl=(0,C.memo)(t=>{let e=(0,Me.c)(35),{data:n,channel:l,cellId:a}=t,o=Array.isArray(n)?n[0]:n,i;e[0]===o?i=e[1]:(i=Ne.keys(o),e[0]=o,e[1]=i);let s=i[0];if(!s)return null;if(Object.keys(o).length===1){let y=o[s],b;e[2]!==l||e[3]!==s||e[4]!==y?(b={channel:l,data:y,mimetype:s},e[2]=l,e[3]=s,e[4]=y,e[5]=b):b=e[5];let S;return e[6]!==a||e[7]!==b?(S=(0,r.jsx)(me,{cellId:a,message:b}),e[6]=a,e[7]=b,e[8]=S):S=e[8],S}let c,d,g,f,u,p,w;if(e[9]!==a||e[10]!==l||e[11]!==s||e[12]!==o){let y=Ne.entries(o);y.sort($r),c=Ts,p=s,w="vertical",f="flex",u=(0,r.jsx)(zs,{className:"self-start max-h-none flex flex-col gap-2 mr-4 shrink-0",children:y.map(Br)}),d="flex-1";let b;e[20]!==a||e[21]!==l?(b=S=>{let[v,j]=S;return(0,r.jsx)(Es,{value:v,children:(0,r.jsx)(Hl,{children:(0,r.jsx)(me,{cellId:a,message:{channel:l,data:j,mimetype:v}})})},v)},e[20]=a,e[21]=l,e[22]=b):b=e[22],g=y.map(b),e[9]=a,e[10]=l,e[11]=s,e[12]=o,e[13]=c,e[14]=d,e[15]=g,e[16]=f,e[17]=u,e[18]=p,e[19]=w}else c=e[13],d=e[14],g=e[15],f=e[16],u=e[17],p=e[18],w=e[19];let m;e[23]!==d||e[24]!==g?(m=(0,r.jsx)("div",{className:d,children:g}),e[23]=d,e[24]=g,e[25]=m):m=e[25];let h;e[26]!==f||e[27]!==u||e[28]!==m?(h=(0,r.jsxs)("div",{className:f,children:[u,m]}),e[26]=f,e[27]=u,e[28]=m,e[29]=h):h=e[29];let x;return e[30]!==c||e[31]!==p||e[32]!==w||e[33]!==h?(x=(0,r.jsx)(c,{defaultValue:p,orientation:w,children:h}),e[30]=c,e[31]=p,e[32]=w,e[33]=h,e[34]=x):x=e[34],x});yl.displayName="MimeBundleOutputRenderer",on=C.memo(t=>{let e=(0,Me.c)(17),{output:n,cellId:l,stale:a,loading:o,allowExpand:i,forceExpand:s,className:c}=t;if(n===null||n.channel==="output"&&n.data==="")return null;let d=a?"This output is stale":void 0,g=i?Cl:Sl,f;e[0]===l?f=e[1]:(f=xi.create(l),e[0]=l,e[1]=f);let u=a&&"marimo-output-stale",p=o&&"marimo-output-loading",w;e[2]!==c||e[3]!==u||e[4]!==p?(w=M(u,p,c),e[2]=c,e[3]=u,e[4]=p,e[5]=w):w=e[5];let m;e[6]!==l||e[7]!==n?(m=(0,r.jsx)(me,{cellId:l,message:n}),e[6]=l,e[7]=n,e[8]=m):m=e[8];let h;return e[9]!==g||e[10]!==l||e[11]!==s||e[12]!==f||e[13]!==w||e[14]!==m||e[15]!==d?(h=(0,r.jsx)(Hl,{children:(0,r.jsx)(g,{title:d,cellId:l,forceExpand:s,id:f,className:w,children:m})}),e[9]=g,e[10]=l,e[11]=s,e[12]=f,e[13]=w,e[14]=m,e[15]=d,e[16]=h):h=e[16],h}),on.displayName="OutputArea";var Sl=C.forwardRef((t,e)=>{let n=(0,Me.c)(3),l;return n[0]!==t||n[1]!==e?(l=(0,r.jsx)("div",{ref:e,...t}),n[0]=t,n[1]=e,n[2]=l):l=n[2],l});Sl.displayName="Div";var Cl=C.memo(t=>{let e=(0,Me.c)(24),{cellId:n,children:l,forceExpand:a,...o}=t,i=(0,C.useRef)(null),[s,c]=Yi(n),[d,g]=(0,C.useState)(!1),f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{if(!i.current)return;let j=i.current,F=new ResizeObserver(()=>{g(j.scrollHeight>j.clientHeight)});return F.observe(j),()=>{F.disconnect()}},e[0]=f):f=e[0],(0,C.useEffect)(f,[o.id]);let u;e[1]===Symbol.for("react.memo_cache_sentinel")?(u=async()=>{var j;await((j=i.current)==null?void 0:j.requestFullscreen())},e[1]=u):u=e[1];let p;e[2]===Symbol.for("react.memo_cache_sentinel")?(p=(0,r.jsx)($,{content:"Fullscreen",side:"left",children:(0,r.jsx)(D,{"data-testid":"fullscreen-output-button",className:"hover-action hover:bg-muted p-1 hover:border-border border border-transparent",onClick:u,onMouseDown:X.preventFocus,size:"xs",variant:"text",children:(0,r.jsx)(Mn,{className:"size-4",strokeWidth:1.25})})}),e[2]=p):p=e[2];let w;e[3]!==a||e[4]!==s||e[5]!==d||e[6]!==c?(w=(d||s)&&!a&&(0,r.jsx)(D,{"data-testid":"expand-output-button",className:M("hover:border-border border border-transparent hover:bg-muted",!s&&"hover-action"),onClick:()=>c(!s),size:"xs",variant:"text",children:s?(0,r.jsx)($,{content:"Collapse output",side:"left",children:(0,r.jsx)($i,{className:"h-4 w-4"})}):(0,r.jsx)($,{content:"Expand output",side:"left",children:(0,r.jsx)(Pt,{className:"h-4 w-4"})})}),e[3]=a,e[4]=s,e[5]=d,e[6]=c,e[7]=w):w=e[7];let m;e[8]===w?m=e[9]:(m=(0,r.jsx)("div",{className:"relative print:hidden",children:(0,r.jsxs)("div",{className:"absolute -right-9 top-1 z-1 flex flex-col gap-1",children:[p,w]})}),e[8]=w,e[9]=m);let h=M("relative fullscreen:bg-background fullscreen:flex fullscreen:items-center fullscreen:justify-center","fullscreen:items-center-safe",o.className),x;e[10]!==a||e[11]!==s?(x=s||a?{maxHeight:"none"}:void 0,e[10]=a,e[11]=s,e[12]=x):x=e[12];let y;e[13]!==l||e[14]!==o||e[15]!==h||e[16]!==x?(y=(0,r.jsx)("div",{...o,"data-cell-role":"output",className:h,ref:i,style:x,children:l}),e[13]=l,e[14]=o,e[15]=h,e[16]=x,e[17]=y):y=e[17];let b;e[18]!==m||e[19]!==y?(b=(0,r.jsxs)("div",{children:[m,y]}),e[18]=m,e[19]=y,e[20]=b):b=e[20];let S;e[21]===Symbol.for("react.memo_cache_sentinel")?(S=(0,r.jsx)("div",{className:"increase-pointer-area-x contents print:hidden"}),e[21]=S):S=e[21];let v;return e[22]===b?v=e[23]:(v=(0,r.jsxs)(r.Fragment,{children:[b,S]}),e[22]=b,e[23]=v),v});Cl.displayName="ExpandableOutput";function $r(t,e){let[n]=t;return n==="text/html"?-1:0}function Br(t){let[e]=t;return(0,r.jsx)(Ds,{value:e,className:"flex items-center space-x-2",children:(0,r.jsx)($,{delayDuration:200,content:e,side:"right",children:(0,r.jsx)("span",{children:Gr(e)})})},e)}var Ur=N(A());const Wr=t=>{let e=(0,Ur.c)(6),{value:n}=t,l;e[0]!==n.data||e[1]!==n.mimetype?(l={channel:"output",data:n.data,mimetype:n.mimetype,timestamp:0},e[0]=n.data,e[1]=n.mimetype,e[2]=l):l=e[2];let a=l,o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=M("flex items-center space-x-2"),e[3]=o):o=e[3];let i;return e[4]===a?i=e[5]:(i=(0,r.jsx)("div",{className:o,children:(0,r.jsx)(me,{message:a})}),e[4]=a,e[5]=i),i};function kt(t){return typeof t=="object"&&!!t&&"mimetype"in t&&"data"in t}function Kr(t){if(kt(t))return[t];if(typeof t=="object"&&t&&("_serialized_mime_bundle"in t||"serialized_mime_bundle"in t)){let e=t,n=e._serialized_mime_bundle||e.serialized_mime_bundle;if(kt(n))return[n]}if(Array.isArray(t)&&t.every(kt))return t.map(e=>e)}function Yr(t,e){if(t.length<=e)return t;let n=[],l=t.length/e;for(let o=0;o<e-1;o++){let i=Math.floor(o*l);n.push(t[i])}let a=t.at(-1);return n.push(a),n}var vl=N(A()),jl=/(https?:\/\/\S+)/,Jr=/\.(png|jpe?g|gif|webp|svg|ico)(\?.*)?$/i,Rl=/^data:image\//i,Xr=["avatars.githubusercontent.com"],Zr=t=>{let e=(0,vl.c)(14),{url:n}=t,[l,a]=(0,C.useState)(!1),[o,i]=(0,C.useState)(!1);if(l){let w;return e[0]===n?w=e[1]:(w=(0,r.jsx)(Fl,{url:n}),e[0]=n,e[1]=w),w}let s,c;e[2]===Symbol.for("react.memo_cache_sentinel")?(s=()=>i(!0),c=()=>i(!1),e[2]=s,e[3]=c):(s=e[2],c=e[3]);let d;e[4]===Symbol.for("react.memo_cache_sentinel")?(d=()=>a(!0),e[4]=d):d=e[4];let g;e[5]===n?g=e[6]:(g=(0,r.jsx)(Ot,{asChild:!0,children:(0,r.jsx)("div",{className:"flex max-h-[80px] overflow-hidden cursor-pointer",onMouseEnter:s,onMouseLeave:c,children:(0,r.jsx)("img",{src:n,alt:"URL preview",className:"object-contain rounded max-h-[80px]",onError:d})})}),e[5]=n,e[6]=g);let f;e[7]===Symbol.for("react.memo_cache_sentinel")?(f=()=>a(!0),e[7]=f):f=e[7];let u;e[8]===n?u=e[9]:(u=(0,r.jsx)(Ht,{className:"z-50 p-2 bg-popover rounded-md shadow-lg border w-fit",align:"start",side:"right",children:(0,r.jsx)("img",{src:n,alt:"URL preview",className:"object-contain max-h-[500px] rounded",onError:f})}),e[8]=n,e[9]=u);let p;return e[10]!==o||e[11]!==g||e[12]!==u?(p=(0,r.jsxs)(Lt,{open:o,onOpenChange:i,children:[g,u]}),e[10]=o,e[11]=g,e[12]=u,e[13]=p):p=e[13],p};function Qr(t){return Rl.test(t)?[{type:"image",url:t}]:t.split(jl).filter(e=>e.trim()!=="").map(e=>jl.test(e)?Jr.test(e)||Rl.test(e)||Xr.some(n=>e.includes(n))?{type:"image",url:e}:{type:"url",url:e}:{type:"text",value:e})}const _l=({parts:t})=>t.map((e,n)=>e.type==="url"?(0,r.jsx)(Fl,{url:e.url},n):e.type==="image"?(0,r.jsx)(Zr,{url:e.url},n):e.value);var Fl=t=>{let e=(0,vl.c)(3),{url:n}=t,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=X.stopPropagation(),e[0]=l):l=e[0];let a;return e[1]===n?a=e[2]:(a=(0,r.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",onClick:l,className:"text-link hover:underline",children:n}),e[1]=n,e[2]=a),a},ei=50,ti="__select__";function Ml(t){return typeof t=="string"?["string","string"]:typeof t=="number"?["number","number"]:t instanceof Date?["datetime","datetime"]:typeof t=="boolean"?["boolean","boolean"]:["unknown","object"]}hn=function(t){if(t.length===0||typeof t[0]!="object")return[];let e={};return Yr(t,10).forEach(n=>{typeof n!="object"||!n||Object.entries(n).forEach(([l,a])=>{e[l]||(e[l]=Ml(a)),a!=null&&(e[l]=Ml(a))})}),Ne.entries(e)},pa="__m_column__",pn=function({rowHeaders:t,selection:e,fieldTypes:n,chartSpecModel:l,textJustifyColumns:a,wrappedColumns:o,headerTooltip:i,showDataTypes:s,calculateTopKRows:c}){let d=new Set(t.map(([m])=>m)),g=Bi.keyBy(n,m=>m[0]),f=m=>{var y,b;let h=(y=g.get(m))==null?void 0:y[1],x=d.has(m);if(x||!h){let S=(b=t.find(([v])=>v===m))==null?void 0:b[1];return{rowHeader:x,dtype:S==null?void 0:S[1],dataType:S==null?void 0:S[0]}}return{rowHeader:x,filterType:li(h[0]),dtype:h[1],dataType:h[0]}},u=[...d,...n.map(([m])=>m)],p=u.indexOf(rt);p!==-1&&u.splice(p,1);let w=u.map((m,h)=>({id:m||`__m_column__${h}`,accessorFn:x=>x[m],header:({column:x})=>{var I;let y=l==null?void 0:l.getColumnStats(m),b=(I=x.columnDef.meta)==null?void 0:I.dtype,S=i==null?void 0:i[m],v=s&&b?(0,r.jsxs)("div",{className:"flex flex-row gap-1",children:[(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:b}),y&&typeof y.nulls=="number"&&y.nulls>0&&(0,r.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(nulls: ",y.nulls,")"]})]}):null,j=(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:M("font-bold",S&&"underline decoration-dotted"),children:m===""?" ":m}),v]}),F=(0,r.jsx)(tn,{header:S?(0,r.jsx)($,{content:S,delayDuration:300,children:j}):j,column:x,calculateTopKRows:c});return d.has(m)?F:(0,r.jsxs)("div",{className:"flex flex-col h-full pt-0.5 pb-3 justify-between items-start",children:[F,(0,r.jsx)(lr,{columnId:m})]})},cell:({column:x,renderValue:y,getValue:b,cell:S})=>{var H;function v(){var q;e!=="single-cell"&&e!=="multi-cell"||((q=S.toggleSelected)==null||q.call(S))}let j=a==null?void 0:a[m],F=o==null?void 0:o.includes(m),I=((H=S==null?void 0:S.getIsSelected)==null?void 0:H.call(S))||!1,P=ai(j,F,(e==="single-cell"||e==="multi-cell")&&!I,I),E=cn({column:x,renderValue:y,getValue:b,selectCell:v,cellStyles:P});return d.has(m)?(0,r.jsx)("b",{children:E}):E},filterFn:void 0,enableSorting:!!m,meta:f(m)}));return(e==="single"||e==="multi")&&w.unshift({id:ti,maxSize:40,header:({table:m})=>e==="multi"?(0,r.jsx)(Ze,{"data-testid":"select-all-checkbox",checked:m.getIsAllPageRowsSelected(),onCheckedChange:h=>m.toggleAllPageRowsSelected(!!h),"aria-label":"Select all",className:"mx-1.5 my-4"}):null,cell:({row:m})=>(0,r.jsx)(Ze,{"data-testid":"select-row-checkbox",checked:m.getIsSelected(),onCheckedChange:h=>m.toggleSelected(!!h),"aria-label":"Select row",className:"mx-2",onMouseDown:h=>{h.stopPropagation()}}),enableSorting:!1,enableHiding:!1}),w};var kl=({cellStyles:t,selectCell:e,rawStringValue:n,contentClassName:l,buttonText:a,children:o})=>(0,r.jsx)(Yt,{container:null,children:(0,r.jsxs)(Lt,{children:[(0,r.jsx)(Ot,{className:M(t,"w-fit outline-hidden"),onClick:e,onMouseDown:i=>{i.stopPropagation()},children:(0,r.jsx)("span",{className:"cursor-pointer hover:text-link",title:n,children:n})}),(0,r.jsxs)(Ht,{className:l,align:"start",alignOffset:10,children:[(0,r.jsx)(vs,{className:"absolute top-2 right-2",children:(0,r.jsx)(D,{variant:"link",size:"xs",children:a??"Close"})}),o]})]})});function ni(t){return t==null?!0:typeof t!="object"}function li(t){if(t!==void 0)switch(t){case"string":return"text";case"number":return"number";case"integer":return"number";case"date":return"date";case"datetime":return"datetime";case"time":return"time";case"boolean":return"boolean";default:return}}function ai(t,e,n,l){return M(n&&"cursor-pointer",l&&"relative before:absolute before:inset-0 before:bg-(--blue-3) before:rounded before:-z-10 before:mx-[-4px] before:my-[-2px]","w-full","text-left","truncate",t==="center"&&"text-center",t==="right"&&"text-right",e&&"whitespace-pre-wrap min-w-[200px] break-words")}function Il(t){if(t==null)return"";try{return JSON.stringify(t)}catch{return String(t)}}function Nl({value:t,dataType:e,dtype:n,format:l,locale:a}){let o=e==="date"?"date":"datetime",i=xo(n),s=l?os(t,l):ss(t,i,a);return(0,r.jsx)(ll,{date:t,type:o,children:s})}cn=function({column:t,renderValue:e,getValue:n,selectCell:l,cellStyles:a}){var g,f,u;let o=n(),i=(g=t.getColumnFormatting)==null?void 0:g.call(t),s=(f=t.columnDef.meta)==null?void 0:f.dataType,c=(u=t.columnDef.meta)==null?void 0:u.dtype;if(s==="datetime"&&typeof o=="string")try{let p=new Date(o),w=rs(o);return(0,r.jsx)(zn,{children:m=>Nl({value:p,dataType:s,dtype:c,format:w,locale:m})})}catch(p){Ce.error("Error parsing datetime, fallback to string",p)}if(o instanceof Date)return(0,r.jsx)(zn,{children:p=>Nl({value:o,dataType:s,dtype:c,locale:p})});if(typeof o=="string"){let p=String(i?t.applyColumnFormatting(o):e()),w=Qr(p);return w.some(m=>m.type!=="text")||p.length<ei?(0,r.jsx)("div",{onClick:l,className:a,children:(0,r.jsx)(_l,{parts:w})}):(0,r.jsx)(kl,{cellStyles:a,selectCell:l,rawStringValue:p,contentClassName:"max-h-64 overflow-auto whitespace-pre-wrap break-words text-sm",buttonText:"X",children:(0,r.jsx)(_l,{parts:w})})}if(i)return(0,r.jsx)("div",{onClick:l,className:a,children:t.applyColumnFormatting(o)});if(ni(o)){let p=e();return(0,r.jsx)("div",{onClick:l,className:a,children:p==null?"":String(p)})}let d=Kr(o);if(d)return(0,r.jsx)("div",{onClick:l,className:a,children:d.map((p,w)=>(0,r.jsx)(Wr,{value:p},w))});if(Array.isArray(o)||typeof o=="object"){let p=Il(o);return(0,r.jsx)(kl,{cellStyles:a,selectCell:l,rawStringValue:p,children:(0,r.jsx)(na,{data:o,format:"tree",className:"max-h-64"})})}return(0,r.jsx)("div",{onClick:l,className:a,children:Il(o)})}});export{ot as A,$t as B,Bt as C,Ut as D,rt as E,ra as F,Wt as G,Kt as H,Yt as I,Jt as L,Xt as M,Zt as N,ia as O,Qt as P,Pe as R,en as S,tn as T,nn as U,ln as V,an as W,sa as _,Os as __tla,on as a,rn as b,sn as c,ua as d,un as f,da as g,dn as h,cn as i,gn as j,ca as k,ga as l,mn as m,pn as n,me as o,fn as p,hn as r,ma as s,pa as t,fa as u,ha as v,xa as w,xn as x,wn as y,bn as z};
