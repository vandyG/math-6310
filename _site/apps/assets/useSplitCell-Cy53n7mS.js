import{s as h}from"./chunk-DZLz74EQ.js";import{E as x,Xn as g,et as I,h as v,or as k,p as y,ur as R}from"./cells-B4cnsYe_.js";import{n as b,t as S}from"./jsx-runtime-DvsdsEjx.js";import{t as j}from"./Logger-BkkOJyg0.js";import{a as z}from"./key-BuxNhFKW.js";import{o as D}from"./dist-DIuPmJ5w.js";import{t as E}from"./use-toast-C07-frN_.js";import{r as F}from"./useDeleteCell-DVNOLjwN.js";import{n as s}from"./useEvent-BIiDVnhT.js";var u=h(b());function H(){let t=(0,u.c)(2),r=m(),o;return t[0]===r?o=t[1]:(o=()=>r(R(v())),t[0]=r,t[1]=o),s(o)}function U(t){let r=(0,u.c)(3),o=m(),n;return r[0]!==t||r[1]!==o?(n=()=>{t!==void 0&&o([t])},r[0]=t,r[1]=o,r[2]=n):n=r[2],s(n)}function V(){let t=(0,u.c)(2),r=m(),o;return t[0]===r?o=t[1]:(o=()=>r(k(v())),t[0]=r,t[1]=o),s(o)}function m(){let t=(0,u.c)(3),{prepareForRun:r}=x(),{sendRun:o}=z(),n;return t[0]!==r||t[1]!==o?(n=async a=>{var l,C,w;if(a.length===0)return;let{cellHandles:e,cellData:f}=v(),i=[];for(let p of a){let c=(C=(l=e[p])==null?void 0:l.current)==null?void 0:C.editorView,d;c?(g(c)!=="markdown"&&D(c),d=I(c)):d=((w=f[p])==null?void 0:w.code)||"",i.push(d),r({cellId:p})}await o({cellIds:a,codes:i}).catch(X)},t[0]=r,t[1]=o,t[2]=n):n=t[2],s(n)}function X(t){j.error(t)}var _=h(b()),q=h(S());function A(){let t=(0,_.c)(3),{splitCell:r,undoSplitCell:o}=x(),n;return t[0]!==r||t[1]!==o?(n=a=>{let e=y(a.cellId);if(!e)return;let f=I(e);r(a);let{dismiss:i}=E({title:"Cell split",action:(0,q.jsx)(F,{"data-testid":"undo-split-button",size:"sm",variant:"outline",onClick:()=>{o({...a,snapshot:f}),l()},children:"Undo"})}),l=i},t[0]=r,t[1]=o,t[2]=n):n=t[2],s(n)}export{H as a,m as i,V as n,U as r,A as t};
